/*
 * Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=function(){},e=a("jquery"),f=function(a,b){this.type="WebSocket",this.url=a,this.publisher=b};f.prototype={is:function(a){function b(a){if(!(d instanceof WebSocket))return"closed"===a;switch(a){case"connecting":return d.readyState===d.CONNECTING;case"open":return d.readyState===d.OPEN;case"closing":return d.readyState===d.CLOSING;case"closed":return d.readyState===d.CLOSED;default:return!1}}function c(){if(!(d instanceof WebSocket))return"closed";switch(d.readyState){case d.CLOSING:return"closing";case d.CLOSED:return"closed";case d.OPEN:return"open";case d.CONNECTING:return"connecting";default:throw new Error("Unexpected socket readyState")}}var d=this.socket;return"string"==typeof a?b(a):c()},connect:function(a,b){function c(a,b){var e=d.onOpen;"string"==typeof a&&(d.url=a),"string"!=typeof d.url?f.reject({message:"Invalid url"}):(d.socket=new WebSocket(d.url),d.publish(b),d.onOpen=function(){d.onOpen=e,f.resolve(),d.onOpen.apply(d,arguments)},d.socket.onerror=function(){f.reject.apply(c,arguments)})}var d=this,f=e.Deferred();return this.is("closed")?c(a,b):this.close().done(function(){c(a,b)}).fail(function(){f.reject.apply(c,arguments)}),f.promise()},close:function(){var a,b,c=this.socket,d=e.Deferred();if(c instanceof WebSocket)switch(b=c.onclose,c.onclose=function(){"function"==typeof b&&b.apply(this,arguments),d.resolve.apply(d,arguments)},a=c.onerror,c.onerror=function(){"function"==typeof a&&a.apply(this,arguments),d.reject.apply(d,arguments)},this.is()){case"closing":break;case"closed":d.resolve();break;case"open":case"connecting":c.close()}else d.resolve();return d.promise()},publish:function(a){var b,c=this;"undefined"!=typeof a&&(this.publisher=a),b=this.publisher,this.socket.onopen=function(a){var d=Array.prototype.slice.call(arguments,0);c.onOpen&&c.onOpen.apply(c,d),d.unshift("stream:open"),b&&b.trigger.apply(b,d)},this.socket.onclose=function(a){var d=Array.prototype.slice.call(arguments,0);c.onClose&&c.onClose.apply(c,d),d.unshift("stream:close"),b&&b.trigger.apply(b,d)},this.socket.onmessage=function(a){var d=Array.prototype.slice.call(arguments,0),e=JSON.parse(a.data),f=e.status||"message";c.onMessage&&c.onMessage.apply(c,d),f=e.error?"error":e.status?e.status:"message",d.unshift("stream:"+f),b&&b.trigger.apply(b,d)}},send:function(){function a(){d.socket.send.apply(d.socket,c)}var b,c=arguments,d=this,e=this.is();switch(e){case"open":a();break;case"closed":this.connect().done(function(){a()});break;case"connecting":b=this.onOpen,this.onOpen=function(){b.apply(d,arguments),a()}}},onOpen:d,onClose:d,onMessage:d,destroy:function(){this.socket.close()}},b.exports=function(){function a(a,c){return b instanceof f?(a&&a!==b.url&&b.close().then(function(){b.connect(a)}),c&&c!==b.publisher&&b.publish(c)):b=new f(a,c),b}var b;return{getStream:a}}()},{jquery:109}],2:[function(a,b,c){"use strict";var d=a("./MVC"),e=a("jquery"),f=d.Collection,g=a("../../utilities/transducers/append"),h=a("../../utilities/transducers/transduce");b.exports=f.extend({initialize:function(a,b){b=b||{},this.apiKey=null,this.remote=null,this.secure=null,"undefined"!=typeof b.apiKey&&(this.apiKey=b.apiKey,delete b.apiKey),"undefined"!=typeof b.remote&&(this.remote=b.remote,delete b.remote,"undefined"!=typeof b.secure?(this.secure=b.secure,delete b.secure):this.secure=!1),f.prototype.initialize.apply(this,arguments)},add:function(){return f.prototype.add.apply(this,arguments),this},fetchModels:function(a){var b=e.Deferred(),c=0,d=0,f=this.length,g=[],h=this;return this.each(function(e){e.fetch(a).done(function(a){c++,g.push(a),b.notify(e,a),g.length===f&&0===d&&b.resolve(h,g)}).fail(function(a){d++,g.push(a),b.notify(e,a),g.length===f&&d>0&&b.reject(h,g)})}),b},saveModels:function(){var a=e.Deferred(),b=0,c=0,d=[],f=this;return this.each(function(e){e.save().done(function(g){b++,d.push(g),a.notify(e,g),d.length===f.length&&0===c&&a.resolve(f,d)}).fail(function(b){c++,d.push(b),a.notify(e,b),d.length===f.length&&c>0&&a.reject(f,d)})}),a},setIdOrder:function(a){var b=this.comparator;this.comparator=function(b){var c=b.cid;return a.indexOf(c)},this.sort(),this.comparator=b},hasNewModels:function(){var a=!1;return this.each(function(b){b.isNew()&&(a=!0)}),a},isBootstrapped:function(a){return"boolean"==typeof a?this._bootstrapped=a:this._bootstrapped=this._bootstrapped||!1,this._bootstrapped},bootstrap:function(a){var b=e.Deferred(),c=this;if(this.isBootstrapped())b.resolve(this.toJSON());else{if(this.bootstrapStarted)return this.bootstrapStarted;this.bootstrapStarted=b,this.fetch(a).done(function(a){c._bootstrapped=!0,b.resolve(a)}).fail(b.reject).progress(b.notify)}return b.promise()},search:function(a,b){b=b||{};var c=[],d="g"+(b.caseSensitive?"":"i"),e=b.words?new RegExp("(\\W|^)"+b.needle+"(\\W|$)",d):b.regExp?new RegExp(b.needle,d):new RegExp(b.needle,d);return c="undefined"!=typeof b.needle&&""!==b.needle?this.filter(function(b){return!!b.get(a).match(e)}):this.models},fetch:function(){var a=this;return this.trigger("request:collection",this),f.prototype.fetch.apply(this,arguments).done(function(b,c,d){a.trigger("sync:collection",a,d)})},transduce:function(a){var b=this.models;return h(a,g,b)}})},{"../../utilities/transducers/append":154,"../../utilities/transducers/transduce":159,"./MVC":3,jquery:109}],3:[function(a,b,c){"use strict";var d=a("underscore"),e=a("jquery"),f=a("backbone"),g=f.sync,h=e(document);f.$=e,f.ajaxSettings={STATUS:{OK:200,UNAUTHORIZED:401,FORBIDDEN:403,INTERNAL_SERVER_ERROR:500},setup:function(){return e.ajaxSetup.apply(f.$,arguments)},start:function(){return h.ajaxStart.apply(h,arguments)},send:function(){return h.ajaxSend.apply(h,arguments)},success:function(){return h.ajaxSuccess.apply(h,arguments)},error:function(){return h.ajaxError.apply(h,arguments)},stop:function(){return h.ajaxStop.apply(h,arguments)}},f.sync=function(a,b,c){var f=d.result(b,"url"),h=b.remote,i=b.secure,j=b.apiKey;return"object"!=typeof c&&(c={}),c.crossDomain||(c.crossDomain=!0),c.xhrFields||(c.xhrFields={withCredentials:!1}),h&&(c.url=[i?"https://":"http://",h+"/",f].join("")),j&&(c.data=e.extend({},c.data,{key:j})),g(a,b,c)},b.exports=f},{backbone:235,jquery:109,underscore:244}],4:[function(a,b,c){"use strict";var d=a("./MVC"),e=a("jquery"),f=d.Model;b.exports=f.extend({initialize:function(a,b){b=b||{},this.secure=this.collection?this.collection.secure:null,this.remote=this.collection?this.collection.remote:null,this.apiKey=this.collection?this.collection.apiKey:null,"undefined"!=typeof b.apiKey&&(this.apiKey=b.apiKey,delete b.apiKey),"undefined"!=typeof b.remote&&(this.remote=b.remote,delete b.remote,"undefined"!=typeof b.secure?(this.secure=b.secure,delete b.secure):this.secure=!1),f.prototype.initialize.apply(this,arguments)},isBootstrapped:function(a){return"boolean"==typeof a?this._bootstrapped=a:this._bootstrapped=this._bootstrapped||!1,this._bootstrapped},bootstrap:function(a){var b=e.Deferred(),c=this;if(this.isBootstrapped())b.resolve(this.toJSON()),a&&a.success&&a.success(this.toJSON());else{if(this._bootstrapStartedDfd)return this._bootstrapStartedDfd;this._bootstrapStartedDfd=b,this.fetch().done(function(d){c._bootstrapped=!0,b.resolve(d),a&&a.success&&a.success(d),delete c._bootstrapStartedDfd}).fail(b.reject).progress(b.notify)}return b.promise()},clear:function(){return this._bootstrapped=!1,f.prototype.clear.apply(this,arguments)},matchesSearch:function(a,b){b=b||{};var c="g"+(b.caseSensitive?"":"i"),d=b.words?new RegExp("(\\W|^)"+b.needle+"(\\W|$)",c):b.regExp?new RegExp(b.needle,c):new RegExp(b.needle,c);return"undefined"!=typeof b.needle&&""!==b.needle?!!this.get(a).match(d):!0}})},{"./MVC":3,jquery:109}],5:[function(a,b,c){"use strict";var d=a("underscore"),e=a("./MVC.js"),f=a("jquery"),g=a("backbone"),h=e.View;b.exports=h.extend({defaults:{},initialize:function(a){this.childViews=[],this.options=f.extend({},this.defaults,a)},setElement:function(a,b){return this.$el&&this.undelegateEvents(),a instanceof g.$?this.$el=a:this.$el=g.$(a),this.$el.length>1&&(this.$el=this.$el.filter(function(a,b){return void 0!==b.innerHTML})),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},$wrapElement:function(a){var b=f(a);return b.length>1&&(b=b.filter(function(a,b){return void 0!==b.innerHTML})),b},_removeChildViews:function(){d.each(this.childViews,function(a){a&&a.remove()}),this.childViews=[]},popChildView:function(a){var b=this.childViews,c=b.indexOf(a);return-1!==c?b.splice(c,1):null},empty:function(){return this._removeChildViews(),this.$el.children().remove(),this},remove:function(){this._removeChildViews(),h.prototype.remove.call(this,arguments)},delegateEvents:function(){h.prototype.delegateEvents.apply(this,arguments),d.each(this.childViews,function(a){a&&a.delegateEvents&&a.delegateEvents()})}})},{"./MVC.js":3,backbone:235,jquery:109,underscore:244}],6:[function(a,b,c){b.exports=a("./MVC"),b.exports.Model=a("./Model"),b.exports.View=a("./View"),b.exports.Collection=a("./Collection")},{"./Collection":2,"./MVC":3,"./Model":4,"./View":5}],7:[function(a,b,c){"use strict";b.exports={TIME_WINDOW_SCALE:{HOUR:"HOUR",ROLLING_HOUR:"ROLLING_HOUR",DAY:"DAY",WEEK:"WEEK",MONTH:"MONTH",QUARTER:"QUARTER",YEAR:"YEAR",CUSTOM:"CUSTOM",ALL:"ALL"},VARIABLE_TYPES:[{type:"string",label:"String"},{type:"text",label:"Text"},{type:"integer",label:"Integer"},{type:"float",label:"Float"},{type:"bool",label:"Bool"},{type:"attribute",label:"Attribute"},{type:"color",label:"Color"},{type:"multilist",label:"Multi Value List"},{type:"singlelist",label:"Single Value List"},{type:"group",label:"Group"},{type:"multi-group",label:"Multi Group"},{type:"histogram-group",label:"Histogram Group"},{type:"metric",label:"Metric"},{type:"multi-metric",label:"Multi-Metric"},{type:"box-plot-metric",label:"Box Plot Metric"},{type:"ungrouped",label:"Ungrouped"}],METRIC_TYPES:[{type:"general",label:"General"},{type:"color",label:"Color"}],GROUP_TYPES:[{type:"attribute",label:"Attribute"},{type:"time",label:"Time"}],TIME_SCALES:[{type:"MINUTE",label:"Minute"},{type:"HOUR",label:"Hour"},{type:"DAY",label:"Day"},{type:"WEEK",label:"Week"},{type:"MONTH",label:"Month"},{type:"YEAR",label:"Year"}],UNIQUE_TIME_SUPPORT:["SOLR","CLOUD_SEARCH"]}},{}],8:[function(a,b,c){"use strict";!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var d=a("./MVC"),e=a("./DataStreamProvider");b.exports={MVC:d,DataStreamProvider:e,ajaxSettings:d.ajaxSettings}},{"./DataStreamProvider":1,"./MVC":6}],9:[function(a,b,c){"use strict";var d=a("backbone"),e=a("../../Core/MVC/"),f=e.Events,g=a("jquery"),h=a("underscore"),i=a("./dropDownItemTemplate.html"),j=a("./selectedItemTemplate.html"),k=d.View.extend({template:i,tagName:"li",events:{click:"select"},attributes:function(){return{role:"presentation"}},initialize:function(a){this.options=g.extend({},this.options,a),this.model=this.options.model},render:function(){var a=g.extend({},this.model,this.options);return this.$el.append(this.template(a)),this},select:function(){"disabled"!==this.$el.find("a").attr("disabled")&&(f.trigger("dropdown:select",this.model),this.trigger("select",this.model))}}),l=d.View.extend({className:"dropdown-menu",tagName:"ul",events:{},attributes:function(){return{role:"menu"}},initialize:function(a){this.options=g.extend({},this.options,this.defaults),this.options=g.extend({},this.options,a),this.models=this.options.models},render:function(){var a=this;return h.each(this.models,function(b){a.addOne(b)}),this},addOne:function(a){var b=h.filter(this.options.disabledItems,function(b){return b.value===a.value})[0],c=new k({model:a,disabled:!!b,helpText:a.helpText||""});this.$el.append(c.render().$el),this.applyEvent(c)},applyEvent:function(a){var b=this;this.listenTo(a,"select",function(a){b.trigger("select",a)})}}),m=d.View.extend({template:j,className:"zd-dropdown-toggle dropdown-toggle",defaults:{filter:function(a){return!0}},attributes:function(){return{"data-toggle":"dropdown"}},events:{click:"initDropDown"},initialize:function(a){var b=this;this.options=g.extend({},this.options,this.defaults),this.options=g.extend({},this.options,a),"function"==typeof this.options.getSelected&&(this.getSelected=this.options.getSelected),this.filterModels(),this.disabledItems=this.options.disabledItems||[],this.listenTo(this,"selected:change",function(){b.listView=null,b.render()})},render:function(a){return this.selected&&(this.$el.html(this.template({label:this.selected.name,helpText:this.selected.helpText})),this.trigger("change",this.selected)),this},filterModels:function(){this.models=this.options.models.filter(this.options.filter),this.getSelected()},getSelected:function(){this.models&&(this.selected=this.models[0])},initDropDown:function(a){a&&this.listView&&(this.stopListening(this.listView,"select"),this.listView.remove(),this.listView=null),this.listView||(this.listView=new l({models:this.models,disabledItems:this.disabledItems}),this.$el.parent().append(this.listView.render().$el),this.applyEvents())},applyEvents:function(a){var b=this;this.listenTo(this.listView,"select",function(a){b.selected!==a&&(b.selected=a,b.listView.remove(),b.listView=null,b.render())})}});b.exports=m},{"../../Core/MVC/":6,"./dropDownItemTemplate.html":10,"./selectedItemTemplate.html":12,backbone:235,jquery:109,underscore:244}],10:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<a role="menuitem" tabindex="-1" ',disabled&&(__p+=' disabled="disabled" '),__p+=" >\n    "+__e(name)+" ",helpText&&(__p+=" "+__e(helpText)+" "),__p+="\n</a>";return __p}},{lodash:242}],11:[function(a,b,c){b.exports=a("./DropDown")},{"./DropDown":9}],12:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div>\n    <div class="part selected">\n        <a>'+__e(label)+" ",helpText&&(__p+=" "+__e(helpText)+" "),__p+='</a>\n    </div>\n    <div class="part dropdown-icon">\n        <div class="zd icon up"></div>\n        <div class="zd icon down"></div>\n    </div>\n</div>';return __p}},{lodash:242}],13:[function(a,b,c){"use strict";var d=a("jquery"),e=a("../controls"),f=a("../views/ModalWarning/index.js"),g={OAUTH_SERVICE:"oauth",OAUTH_CONNECTION_SERVICE:"oauth/connection/authorize",USERS_SERVICE:"service/users",ACCOUNT_SERVICE:"service/accounts",SOURCE_SERVICE:"service/sources",BOOKMARKS_SERVICE:"service/bookmarks",GROUPS_SERVICE:"service/groups",FIELDS_SERVICE:"service/sources/fields",VISUALIZATION_SERVICE:"service/visualizations",CONNECTION_SERVICE:"service/connections",SPARK_SERVICE:"service/sparkit",LDAP_SERVICE:"service/security/ldap/",SAML_SERVICE:"service/security/saml/",SYSTEM_VARIABLES_SERVICE:"service/system/variables",CUSTOM_VISUALIZATION_SERVICE:"service/visualizations?buildIn=false",BUILTIN_VISUALIZATION_SERVICE:"service/visualizations?buildIn=true",FUSION_VALIDATE_SERVICE:"service/sources/fusion/validate",VIS_THUMBNAIL_SAVE_URL_PREFIX:"service/visualizations/",VIS_THUMBNAIL_SAVE_URL_SUFFIX:"/thumbnail/",ATTRIBUTE_TYPE:"ATTRIBUTE",MONEY_TYPE:"MONEY",NUMBER_TYPE:"NUMBER",INTEGER_TYPE:"INTEGER",TIME_TYPE:"TIME",TEXT_TYPE:"TEXT",NULL_TYPE:"NULL",AVG_FUNC:"AVG",SUM_FUNC:"SUM",MAX_FUNC:"MAX",MIN_FUNC:"MIN",LAST_VALUE_FUNC:"LAST_VALUE",DISTINCT_COUNT:"DISTINCT_COUNT",SYSTEM_TIMESTAMP_FILED_ID:"_ts",BUBBLES:"BUBBLES",VERTICAL_BARS:"VERTICAL_BARS",HORIZONTAL_BARS:"HORIZONTAL_BARS",UBER_BARS:"UBER_BARS",US_MAP:"US_MAP",WORLD_MAP:"WORLD_MAP",MAP_LAT_LONG:"MAP_LAT_LONG",KPI:"KPI",MAP:"MAP",WORD_CLOUD:"WORD_CLOUD",PIE:"PIE",DONUT:"DONUT",PIVOT_TABLE:"PIVOT_TABLE",FLOATING_BUBBLES:"FLOATING_BUBBLES",HISTOGRAM:"HISTOGRAM",BOX_PLOT:"BOX_PLOT",LINE_CHART:"LINE_CHART",LINE_CHART_CONTINUOUS:"LINE_CHART_CONTINUOUS",TREE_MAP:"TREE_MAP",HEAT_MAP:"HEAT_MAP",VERTICAL_CLUSTERED:"VERTICAL_CLUSTERED",LINE_AND_BARS:"LINE_AND_BARS",FINGERPAINT:"FINGERPAINT",STACKED_BARS:"STACKED_BARS",HORIZONTAL_STACKED_BARS:"HORIZONTAL_STACKED_BARS",HORIZONTAL_100_STACKED_BARS:"HORIZONTAL_100_STACKED_BARS",TEXT_SEARCH:"TEXT_SEARCH",ROLE_CREATE_SOURCES:"ROLE_CREATE_SOURCES",ROLE_MANAGE_ALL_SOURCES:"ROLE_MANAGE_ALL_SOURCES",ROLE_VIEW_ALL_SOURCES:"ROLE_VIEW_ALL_SOURCES",ROLE_MANAGE_SOME_SOURCES:"ROLE_MANAGE_SOME_SOURCES",ROLE_SAVE_DASHBOARDS:"ROLE_SAVE_DASHBOARDS",ROLE_SHARE_DASHBOARDS:"ROLE_SHARE_DASHBOARDS",ROLE_DELETE_ALL_SOURCES:"ROLE_DELETE_ALL_SOURCES",ROLE_SAVE_FILTERS:"ROLE_SAVE_FILTERS",ROLE_EDIT_FORMULAS:"ROLE_EDIT_FORMULAS",ROLE_READ_FORMULAS:"ROLE_READ_FORMULAS"};g.SOURCE_FEATURES={LV_METRIC:"LV_METRIC"},g.objectFieldTypes=[g.ATTRIBUTE_TYPE,g.MONEY_TYPE,g.NUMBER_TYPE,g.INTEGER_TYPE,g.TIME_TYPE,g.TEXT_TYPE,g.NULL_TYPE],g.objectFieldTypesWoTime=[g.ATTRIBUTE_TYPE,g.MONEY_TYPE,g.NUMBER_TYPE,g.INTEGER_TYPE,g.TEXT_TYPE],g.numericFieldTypes=[g.MONEY_TYPE,g.NUMBER_TYPE,g.INTEGER_TYPE],g.metricFunctions=[g.SUM_FUNC,g.AVG_FUNC,g.MAX_FUNC,g.MIN_FUNC,g.LAST_VALUE_FUNC],g.accessDeniedTemplate='<label style="color: #939393">You do not have rights for this details.</label>',g.showErrorWithMessage=function(a,b,c){c=c||{},"undefined"==typeof c.delay&&(c.delay=3e3);var d=new e.Notification({type:"error",status:b,delay:c.delay});d.render(a)},g.showMessage=function(a){a=a||{},"undefined"==typeof a.delay&&(a.delay=3e3);var b=new e.Notification({type:a.type,delay:a.delay});b.render(a.text)},g.showDemoUserPermission=function(a){a=a||{};var b='This demo has been set to read-only mode. Download your own <a href="http://www.zoomdata.com/download" target="_blank">Zoomdata from our website</a> to edit your own sources.',c=a.description||b,e=a.callback||d.noop,g=new f({title:"No permissions",description:c,handlers:[{label:"Ok",callback:e}]});g.showup()},b.exports=g},{"../controls":73,"../views/ModalWarning/index.js":209,jquery:109}],14:[function(a,b,c){"use strict";var d=a("jquery"),e=(a("./../../utilities"),a("../../Core/MVC/Collection")),f=a("../../models/ComponentSource");b.exports=e.extend({model:f,initialize:function(a,b){return b=b||{},b.visId&&(this.setVisId(b.visId),delete b.visId),b.name&&(this.setVisName(b.name),delete b.name),e.prototype.initialize.apply(this,arguments),this},getComponentsNamespace:function(){var a=this.getVisName().replace(/[^\w]/g,"_");return/^\d/.test(a.charAt(0))&&(a="_"+a),a},load:function(a){a=a||{};var b=d.Deferred(),c=this.models.length,e=0,f=a.namespace||this.getComponentsNamespace();return f=f||this.getComponentsNamespace(),this.each(function(a){a.load(f).then(function(){e++,e===c&&b.resolve()},b.reject)}),b.promise()},execute:function(a){this.each(function(a){})},url:function(){if(this.visId)return"service/visualizations/"+this.visId+"/source/";var a="Visualization id for the component is not defined";throw new Error(a)},setVisName:function(a){this.name=a},getVisName:function(){return this.name},setVisId:function(a){this.visId=a}})},{"../../Core/MVC/Collection":2,"../../models/ComponentSource":113,"./../../utilities":151,jquery:109}],15:[function(a,b,c){"use strict";var d="service/connections",e=a("../../Core/MVC/Collection"),f=a("../../models/Connection");b.exports=e.extend({model:f,url:d})},{"../../Core/MVC/Collection":2,"../../models/Connection":114}],16:[function(a,b,c){"use strict";function d(a){var b,c=a;if(a instanceof Array)for(c=new g.Collection,b=0;b<a.length;b++)c.add(d(a[b]));else if(a instanceof Object){c=new g.Model;for(b in a)a.hasOwnProperty(b)&&c.set(b,d(a[b]))}return c}function e(a,b){if(a instanceof g.Collection&&b instanceof Array)return void a.reset(b);var c;if(b instanceof Object)for(var d in b)b.hasOwnProperty(d)&&(a instanceof g.Model?(c=a.get(d),c instanceof g.Model||c instanceof g.Collection?e(c,b[d]):a.set(d,b[d])):(c=a[d],c instanceof g.Model||c instanceof g.Collection?e(c,b[d]):a[d]=b[d]))}function f(a){var b,c=a;if(!a)return a;if(a.attributes&&(a=a.attributes),a.models&&(a=a.models),a instanceof Array)for(c=[],b=0;b<a.length;b++)c.push(f(a[b]));else if(a instanceof Object){c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=f(a[b]))}return c}var g=(a("../../Core/MVC/Collection"),a("../../Core/MVC")),h=function(a){this.hash={},this.handlers={};var b;if(a instanceof Array)for(b=0;b<a.length;b++)this.hash[a[b].name]=JSON.parse(a[b].value);else this.hash=d(a).attributes};h.prototype.onChange=function(a,b){a||(a="__all"),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},h.prototype.get=function(a){return this.hash[a]},h.prototype.triggerChange=function(a){if(this.handlers[a])for(var b=0;b<this.handlers[a].length;b++)this.handlers[a][b](this.hash[a]);"__all"!==a&&this.triggerChange("__all")},h.prototype.initIfEmpty=function(a,b){return void 0===this.hash[a]&&(this.hash[a]=d(b)),this.hash[a]},h.prototype.update=function(a,b){if(b instanceof Object&&this.hash[a]instanceof g.Model)for(var c in b)b.hasOwnProperty(c)&&this.hash[a].set(c,b[c]);else this.hash[a]=b;this.triggerChange(a)},h.prototype.set=function(a,b){this.hash[a]=b,this.triggerChange(a)},h.prototype.reset=function(a){e(this.hash,a)},h.prototype.forEach=function(a){for(var b in this.hash)this.hash.hasOwnProperty(b)&&this.hash[b]&&a(this.hash[b],b)},h.prototype.toJSON=function(){var a=f(this.hash);return a},b.exports=h},{"../../Core/MVC":6,"../../Core/MVC/Collection":2}],17:[function(a,b,c){b.exports=a("./CustomVariables")},{"./CustomVariables":16}],18:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC/Collection"),g=a("../../models/Dashboard"),h=["id","name","description","icon","lastModified","viewsCount","shared","rememberTime","layout"].join(","),i=f.extend({url:"service/bookmarks",model:g,initialize:function(a,b){return b||(b={}),this.lightweight=!1,"boolean"==typeof b.lightweight&&(this.lightweight=b.lightweight,delete b.lightweight),b&&b.source&&!b.vis?this.url+="/source/"+b.source+"?fields="+h:b&&b.vis&&!b.source?this.url+="/vis/"+b.vis+"?fields="+h:b&&b.vis&&b.source&&(this.url+="/source/"+b.source+"/vis/"+b.vis+"?fields="+h),b.layout&&(this.url+=",layout"),b.visualizations&&(this.url+=",visualizations"),f.prototype.initialize.apply(this,arguments)},fetch:function(a){var b=e.clone(a)||{};return("boolean"==typeof b.lightweight?b.lightweight:this.lightweight)&&(b.data=d.extend({},b.data,{fields:h})),f.prototype.fetch.call(this,b)}});b.exports=i},{"../../Core/MVC/Collection":2,"../../models/Dashboard":115,jquery:109,underscore:244}],19:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../models/Filter"),g=a("../../Core/MVC/Collection"),h=a("moment"),i="YYYY-MM-DD HH:mm:ss.SSS",j=a("../../utilities");b.exports=g.extend({model:f,initialize:function(a,b){this.options=d.extend({},b,this.options),g.prototype.initialize.apply(this,arguments)},toRequest:function(){var a=this,b=this.options.fields||[];return this.map(function(c){var d=c.get("path"),f=c.get("value"),g=(c.get("form"),e.findWhere(b,{name:d})),i=null;if(g&&"TIME"===g.storageConfig.type)if(f instanceof Array){if(f=f.map(a.getFormattedTimeValue),f[0]===f[1]){var k=g.timestampGranularity,l=h(f[1]).endOf(k).valueOf();f[1]=j.time.convertToServerDate(new Date(l))}}else f=a.getFormattedTimeValue(f);return i=c.toRequest(),i.value=f,i})},getFormattedTimeValue:function(a,b){var c=j.time.getFilterGranularity(a),d=null;if(c){var e=j.time.getFilterTimeByGranularity(a,c);d=1===b?e.endOf(c):e}else{var f=j.noUTCString(a),g=new Date(f);if("Invalid Date"===g.toString())return a;d=h.utc(j.noUTCString(a))}return d.format(i)}})},{"../../Core/MVC/Collection":2,"../../models/Filter":117,"../../utilities":151,jquery:109,moment:243,underscore:244}],20:[function(a,b,c){b.exports=a("./Filters")},{"./Filters":19}],21:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC/Model"),g=a("../../Core/MVC/Collection"),h=f.extend({urlRoot:"service/formulas",defaults:{sourceId:null,id:null,name:"",label:"",script:"",fields:[],userName:""},initialize:function(){f.prototype.initialize.apply(this,arguments),this.collection.sourceId&&this.set("sourceId",this.collection.sourceId,{silent:!0})},saveDefaults:function(a,b){var c=e.pick(this.toJSON(),Object.keys(this.defaults)),f=d.extend(c,a),g=d.extend({},b,{attrs:f});this.save(f,g)}});b.exports=g.extend({model:h,comparator:"label",initialize:function(a,b){return b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),g.prototype.initialize.apply(this,arguments),this},setSource:function(a){return this.sourceId=a,this},url:function(){if(this.sourceId)return"service/formulas/list/"+this.sourceId;throw new Error("sourceId must be defined")},removeFormula:function(a){var b=this.get(a);b&&(this.remove(b),b.destroy())},duplicateFormula:function(a,b){var c=this;d.ajax({method:"POST",url:"service/formulas",contentType:"application/json",data:JSON.stringify({id:a,sourceId:this.sourceId}),success:function(a){c.add(a),"function"==typeof b&&b()}})},validateScript:function(a,b){return d.ajax({method:"POST",url:"service/formulas/validate",contentType:"application/json",data:JSON.stringify({preview:b,script:a,sourceId:this.sourceId})})}})},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4,jquery:109,underscore:244}],22:[function(a,b,c){b.exports=a("./Formulas.js")},{"./Formulas.js":21}],23:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=a("../../Core/MVC/Collection"),f=d.extend({defaults:{type:"ATTRIBUTE",forms:[]},idAttribute:"name"});b.exports=e.extend({model:f,initialize:function(a,b){return b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),e.prototype.initialize.apply(this,arguments),this},setSource:function(a){return this.sourceId=a,this}})},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4}],24:[function(a,b,c){b.exports=a("./FusedAttributes")},{"./FusedAttributes":23}],25:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC/Collection"),g=a("../../models/GroupBy");b.exports=f.extend({model:g,initialize:function(a,b){return b=b||{},f.prototype.initialize.apply(this,arguments),this.options=d.extend({},this.defaults,b),this.options.definition?(this.definition=e.extend({},this.options.definition),this.definition.config=this.definition.config?JSON.parse(this.definition.config):{},delete this.options.definition):this.definition={},b.silent=!1,this.on("add",this.initGroupByLabel,this),this},getName:function(){var a=this.definition.config,b=a&&a.groupNames?a.groupNames[0]:this.definition.name;return b},initGroupByLabel:function(a){var b=this.definition.config,c=b&&b.groupNames?b.groupNames.slice(0):[this.definition.name],d=this.models.indexOf(a);c&&"string"==typeof c[d]&&(a.label=c[d])},getAttribute:function(){var a=this.at(0),b="";return a&&(b=a.getAttribute()),b},getAttributes:function(){return this.pluck("name")},setAttribute:function(a,b){var c=this.at(0);return c&&c.setAttribute(a,b),this},setAttributes:function(a,b){var c=this;return Array.isArray(a)?(a.forEach(function(a,b){c.at(b)&&c.at(b).setAttribute(a,{silent:!0})}),b&&b.silent||this.trigger("change",this)):this.setAttribute(a,b),this},getLimit:function(){var a=this.at(0);return a.getLimit()},setLimit:function(a,b){var c=this.at(0);return c&&c.setLimit(a,b),this}})},{"../../Core/MVC/Collection":2,"../../models/GroupBy":122,jquery:109,underscore:244}],26:[function(a,b,c){b.exports=a("./GroupBys.js")},{"./GroupBys.js":25}],27:[function(a,b,c){"use strict";var d=a("jquery"),e=(a("./../../utilities"),a("../../models/LibrarySource")),f=a("./../ComponentSources");b.exports=f.extend({model:e,load:function(){var a=d.Deferred();return this.loadAll(this.models).done(function(){a.resolve()}).fail(function(){a.reject()}),a},loadAll:function(a){function b(d){d.load().then(function(){e++;var d=e;e===f?c.resolve():b(a[d])},c.reject)}var c=d.Deferred(),e=0,f=a.length;return b(a[e]),c},url:function(){return"service/visualizations/libs/"}})},{"../../models/LibrarySource":123,"./../../utilities":151,"./../ComponentSources":14,jquery:109}],28:[function(a,b,c){"use strict";var d=a("jquery"),e=a("../../Core/MVC/Collection"),f=a("../../models/Metric");b.exports=e.extend({model:f,initialize:function(a){return a=a||{},e.prototype.initialize.apply(this,arguments),this.options=d.extend({},this.defaults,a),this}})},{"../../Core/MVC/Collection":2,"../../models/Metric":125,jquery:109}],29:[function(a,b,c){"use strict";function d(a,b){var c="boolean"==typeof a.get("visible")?a.get("visible"):!0,d=b.permissions;return new i({id:a.get("id"),name:a.get("name"),label:a.get("label"),script:a.get("script"),func:"calc",storageConfig:{type:"FORMULA"},visible:c,permissions:d})}function e(a,b){var c=a.get("type"),d=!!g.findWhere(a.get("forms"),{visible:!0}),e={name:a.get("name"),label:a.get("label"),forms:a.get("forms"),storageConfig:{type:c},visible:d};if("TIME"===c){var f,h,j,k=g.findWhere(a.get("forms"),{primary:!0});k.mapping.forEach(function(a,c){var d=b.findWhere({name:a});if(d){(!f||f>d.get("storageConfig").min)&&(f=d.get("storageConfig").min),(!h||h<d.get("storageConfig").max)&&(h=d.get("storageConfig").max);var e=d.get("timestampGranularity");j=j||e,j=p.time.getMaxStep(j,e)}}),e.storageConfig.min=f,e.storageConfig.max=h,e.timestampGranularity=j}return new i(e)}var f=a("jquery"),g=a("underscore"),h=a("../../Core/MVC/Collection"),i=a("../../models/ObjectField"),j=a("./../Formulas"),k=a("./../FusedAttributes"),l=a("../../Core/MVC"),m=l.Events,n=a("./../Dashboards"),o=["ATTRIBUTE","TEXT","NUMBER","MONEY","INTEGER","COUNT OF","FORMULA"],p=a("../../utilities"),q=h.extend({model:i,noneField:new i({label:"None",name:"none",storageConfig:{type:"NONE"},visible:!0}),defaults:{},initialize:function(a,b){b=b||{},b.source&&(this.source=b.source,this.sourceId=this.source.id,delete b.source),b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),h.prototype.initialize.apply(this,arguments);var c=this.filter(function(a){var b=a.get("storageConfig");return"FORMULA"===b.type}),d=this.filter(function(a){return!!a.forms});this.formulas=new j(c,{secure:this.secure,remote:this.remote,apiKey:this.apiKey,sourceId:this.sourceId}),this.fusedAttributes=new k(d,{secure:this.secure,remote:this.remote,apiKey:this.apiKey,sourceId:this.sourceId}),this.listenTo(this.formulas,"add",this._onFormulaAdd),this.listenTo(this.formulas,"remove",this._onFormulaRemove),this.listenTo(this.formulas,"change",this._onFormulaChange),this.listenTo(this.formulas,"reset",this._onFormulasReset),this.listenTo(this.formulas,"sync",this._syncFormulas),this.listenTo(this.fusedAttributes,"add",this._onFusedAdd),this.listenTo(this.fusedAttributes,"remove",this._onFusedRemove),this.listenTo(this.fusedAttributes,"reset",this._onFusedReset),this.listenTo(this.fusedAttributes,"change",this._onFusedChange)},constructor:function(a,b){h.prototype.constructor.apply(this,arguments);var c=this;this._ensureNoneField(),this._ensureVolumeField(),this.on("all",function(){c._ensureNoneField(),c._ensureVolumeField()})},_syncFormulas:function(){var a=this.formulas,b=a.map(function(b){
return d(b,a)}),c=this.filter(function(a){var b=a.get("storageConfig");return"FORMULA"===b.type}),e=g.filter(c,function(a){var c=g.find(b,function(b){return b.get("id")===a.get("id")});return"undefined"==typeof c});this.set(b,{remove:!1}),this.remove(e)},_onFormulaAdd:function(a){var b=d(a,this.formulas);this.add(b,{merge:!0})},_onFormulaRemove:function(a){var b=d(a,this.formulas);this.remove(b,{merge:!0})},_onFormulaChange:function(a){var b=d(a,this.formulas),c=this.findWhere({id:b.get("id")});c&&c.set(b.toJSON())},_onFormulasReset:function(a){var b=this,c=a.map(function(a){return d(a,b.formulas)});this.add(c)},_onFusedAdd:function(a){var b=e(a,this);this.add(b,{merge:!0})},_onFusedRemove:function(a){var b=e(a,this);this.remove(b,{merge:!0})},_onFusedChange:function(a){var b=e(a,this),c=this.get(b.id);c&&c.set(b.toJSON())},_onFusedReset:function(){this.remove(this.find(function(a){return a.get("forms")})),this._ensureFusedAttrs()},_ensureFusedAttrs:function(){var a=this,b=this.fusedAttributes.map(function(b){return e(b,a)});this.add(b,{merge:!0})},_ensureVolumeField:function(a){if(this.source){var b=new i(this.source.get("volumeMetric")),c=this.get(b.id);c||this.add(b,a)}},_ensureNoneField:function(a){var b=this.noneField,c=this.get(b.id);c||this.add(b,a)},setSource:function(a){var b=a.get("id");return this.source=a,this.sourceId=b,this.formulas.setSource(b),this},url:function(){if(this.sourceId)return"service/sources/"+this.sourceId+"/attributes/";throw new Error("sourceId must be defined")},hasLastValue:function(){return this.source?this.source.hasLastValue():null},fetch:function(a){function b(){e++,2===e&&(d._ensureFusedAttrs(),d._syncFormulas(),i.resolve(d.toJSON()))}function c(a){g.each(a,function(a){if(a.distinctCount){var b={name:a.name,label:a.label,func:"distinct_count",storageConfig:{type:"COUNT OF"},visible:!0};d.add(b)}})}a=a||{},a.reset=!0;var d=this,e=0,i=f.Deferred(),j=this.formulas.fetch(),k=h.prototype.fetch.call(this,a);return k.done(function(a){c(a),b()}).fail(i.reject),j.done(b).fail(i.reject),i.promise()},comparator:function(a){var b=a.get("storageConfig")||{},c=b.type||a.get("type");return o.indexOf(c)},setFormulaPermissions:function(a){this.formulas.permissions=a||this.formulas.permissions,this.each(function(b){var c=b.get("storageConfig").type;"FORMULA"===c&&b.set("permissions",a)})},getLatestBookmarks:function(){var a=this,b=f.Deferred();return this.bookmarks||(this.bookmarks=new n([],{source:this.sourceId,visualizations:!0}),this.listenTo(m,"bookmark:add",function(){this.bookmarksAreFresh=!1})),this.bookmarksAreFresh?b.resolve(this.bookmarks):this.bookmarks.fetch().done(function(){a.bookmarksAreFresh=!0,b.resolve(a.bookmarks)}),b.promise()}});b.exports=q},{"../../Core/MVC":6,"../../Core/MVC/Collection":2,"../../models/ObjectField":127,"../../utilities":151,"./../Dashboards":18,"./../Formulas":22,"./../FusedAttributes":24,jquery:109,underscore:244}],30:[function(a,b,c){b.exports=a("./ObjectFields.js")},{"./ObjectFields.js":29}],31:[function(a,b,c){"use strict";var d=a("../../Core/MVC"),e=a("../../models/SchedulerTaskExecution"),f=d.Collection.extend({model:e,urlRoot:"service/jobs",url:function(){return this.urlRoot+"/"+this.jobName+"/executions"},initialize:function(a,b){if(!b.jobName)throw Error("jobName should be defined");this.jobName=b.jobName,d.Collection.prototype.initialize.apply(this,arguments)},parse:function(a){return a.list}});b.exports=f},{"../../Core/MVC":6,"../../models/SchedulerTaskExecution":131}],32:[function(a,b,c){b.exports=a("./Executions")},{"./Executions":31}],33:[function(a,b,c){"use strict";var d=(a("jquery"),a("lodash")),e=a("../../Core/MVC/Collection"),f=a("../../models/SchedulerTask"),g=e.extend({model:f,urlRoot:"service/jobs",url:function(){return this.urlRoot},initialize:function(a,b){e.prototype.initialize.apply(this,arguments)},parse:function(a){return a.list},findByTag:function(a){return a=a||{},this.filter(function(b){return!!d.isMatch(b.getTags(),a)})}});b.exports=g},{"../../Core/MVC/Collection":2,"../../models/SchedulerTask":129,jquery:109,lodash:242}],34:[function(a,b,c){b.exports=a("./SchedulerTasks")},{"./SchedulerTasks":33}],35:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Collection"),e=a("../../models/SourceVisualization");b.exports=d.extend({defaults:{},model:e,initialize:function(a,b){return b=b||{},b.sourceId&&(this.sourceId=b.sourceId,delete b.sourceId),d.prototype.initialize.apply(this,arguments),this},setSource:function(a){return this.sourceId=a,this},url:function(){if(this.sourceId)return"service/sources/"+this.sourceId+"/visualizations";throw new Error("sourceId must be defined")}})},{"../../Core/MVC/Collection":2,"../../models/SourceVisualization":137}],36:[function(a,b,c){"use strict";var d=(a("jquery"),a("lodash")),e=a("../../Core/MVC/Collection"),f=a("../../models/Source"),g=a("../Connections"),h=a("../Dashboards"),i=["features","name","description","type","subStorageType","streamType","lastModified","viewsCount","storageConfiguration","enabled","linkedSources","fusedAttributes","live","playbackMode","visualizations"],j=e.extend({url:"service/sources",model:f,initialize:function(a,b){return b=b||{},"boolean"==typeof b.lightweight&&(this.lightweight=b.lightweight,delete b.lightweight),b.connections?(this.connections=b.connections,delete b.connections):this.connections=new g,b.bookmarks?(this.bookmarks=b.bookmarks,delete b.bookmarks):this.bookmarks=new h,this.options=d.assign({},this.options,b),this.bookmarks.bootstrap(),this.listenTo(this,"sync",this.addConnectionToSources),e.prototype.initialize.apply(this,arguments)},filterByVisualizations:function(a){var b=[];return this.each(function(c){c.visualizations.where(a).length&&b.push(c)}),b},filterDisabled:function(){return this.remove(this.filter(function(a){return!a.get("enabled")})),this},getLightWeightFields:function(){var a=this.options.additionalFields||[];return i.concat(a).join(",")},fetch:function(a){var b=d.clone(a)||{},c=this.options.accountId,f="boolean"==typeof b.lightweight?b.lightweight:this.lightweight;if(f){var g=this.getLightWeightFields();b.data=d.assign({},b.data,{fields:g})}return c&&(b.data=d.assign({},b.data,{accountId:c})),e.prototype.fetch.call(this,b)},addConnectionToSources:function(){var a=this.connections.groupBy(function(a){return a.get("id")});this.models.forEach(function(b){var c=b.get("storageConfiguration");if(c){var d=c.connectionId,e=a[d];c&&e&&(b.connection=e[0])}})}});b.exports=j},{"../../Core/MVC/Collection":2,"../../models/Source":135,"../Connections":15,"../Dashboards":18,jquery:109,lodash:242}],37:[function(a,b,c){b.exports=a("./Sources.js")},{"./Sources.js":36}],38:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Collection"),e=a("../../models/UserPreference"),f=a("jquery"),g=d.extend({model:e,url:"service/user/preferences",initialize:function(a,b){b=b||{},b.userId&&(this.setUserId(b.userId),delete b.userId),b.accountId&&(this.setAccountId(b.accountId),delete b.accountId),d.prototype.initialize.apply(this,arguments)},setUserId:function(a){this.userId=a,this.each(function(b){b.setUserId(a)})},setAccountId:function(a){this.accountId=a,this.each(function(b){b.setAccountId(a)})},fetch:function(a){var b={};return a=a||{},"undefined"!=typeof this.accountId&&(b.accountId=this.accountId),"undefined"!=typeof this.userId&&(b.userId=this.userId),"undefined"==typeof a.remove&&(a.remove=!1),a.data=f.extend({},b,a.data),d.prototype.fetch.call(this,a)}});b.exports=g},{"../../Core/MVC/Collection":2,"../../models/UserPreference":141,jquery:109}],39:[function(a,b,c){b.exports=a("./UserPreferences")},{"./UserPreferences":38}],40:[function(a,b,c){"use strict";var d=a("../../models/VisualizationConfig"),e=a("./../SourceVisualizations"),f=e.extend({model:d});b.exports=f},{"../../models/VisualizationConfig":144,"./../SourceVisualizations":35}],41:[function(a,b,c){"use strict";var d=a("underscore"),e=a("../../Core/MVC");b.exports=d.clone(e.Events)},{"../../Core/MVC":6,underscore:244}],42:[function(a,b,c){"use strict";var d=a("underscore"),e=function(){var a=this,b={show:[],hide:[],select:[],deselect:[],remove:[],apply:[],error:[]},c={};d.each(b,function(e,f){c[f]=function(a){return b[f].push(a),c},a[f]=function(a){d.each(b[f],function(b){b(a)})}}),this.result=function(){return c}};b.exports={Picker:function(){return new e}}},{underscore:244}],43:[function(a,b,c){"use strict";function d(a,b,c){var d="function"==typeof c.data,e=!!c.actions,i=!!c.events,l=!!c.tooltip,m=c.interactive,n=!!c.draggable,o=!!c.droppable;if(k.bindAll(this,"_onInteractionStart","_onInteraction","_onInteractionEnd","_getData","_getTooltipColor"),"undefined"!=typeof j(b).data("interactiveElement")&&null!==j(b).data("interactiveElement")){var p="An element already is an instance of interactiveElement";throw new Error(p)}this._manager=a,this.element=b,this.$el=j(this.element),this.gestureTimeOut=null,this._createDroppable=g,this._destroyDroppable=h,this.options={},this.options.interactions=j.extend({},this.defaults.interactions,c.interactions),this.data=d?c.data:null,e&&(this.options.actions=c.actions),i&&(this.options.interactions.action=c.events),l&&(this.tooltip=c.tooltip,this.ownTooltip=c.actionListTooltip,this.tooltipOriginalConfig=c.tooltip.originalConfig||null,this._createTooltip=f,o||this._createTooltip()),this.droppable=o?this._createDroppable(c.droppable,this.options.interactions.action):null,this.draggable=n?this._createDraggable(c.draggable):null,this._allowed=[],this._prevented=[],m&&(this._allow(this.options.interactions.start),this._allow(this.options.interactions.action),this._allow(this.options.interactions.end)),this.$el.data("interactiveElement",this)}function e(){return!1}function f(){function a(a,b){d.showTooltip(a,b)}function b(a,b){d.tooltip&&d.moveTooltip(a,b)}function c(){d.hideTooltip()}var d=this;this.tooltip&&(this.$el.off("mousemove",b),this.$el.off("mouseenter",a),this.$el.off("mouseleave",c),this.$el.on("mousemove",b),this.$el.on("mouseenter",a),this.$el.on("mouseleave",c))}function g(a,b){var c=this,d=this._manager,f=this.options.droppable=j.extend({},this.defaults.droppable,a);this.$el.off("mouseenter"),this.$el.off("mouseup"),this.$el.off("mouseleave"),this.tooltip&&(this.$el.off("mousemove"),this.$el.on("mousemove",function(a,b){c.tooltip&&c.moveTooltip(a,b)})),this.$el.on("mouseenter",function(b,e){var g=d.getElementInAction("drag");if(c.showTooltip(b,e),g&&f.scope&&f.scope===g.options.draggable.scope){var h=this.getAttribute("data-zd-interactive-type");"attribute"===h||"metric"===h?j(this).addClass("over"):j(this).css({opacity:.7}),"function"==typeof a.over&&a.over.apply(this,g.$el.data(f.scope))}}),this.$el.on("mouseup",function(g,h){var i=d.getElementInAction("drag");if(i&&f.scope&&f.scope===i.options.draggable.scope){var k=this.getAttribute("data-zd-interactive-type");"attribute"===k||"metric"===k?j(this).removeClass("over"):j(this).css({opacity:1}),i.$el.draggable("option","revert",e);var l=i.$el.data(f.scope);if(-1!==b.indexOf("drop")){var m={left:g.pageX||g.originalEvent.pageX,top:g.pageY||g.originalEvent.pageY};setTimeout(function(){c.showActionsList(m,l)},10)}else"function"==typeof a.drop&&a.drop.apply(this,[l])}}),this.$el.on("mouseleave",function(){var b=d.getElementInAction("drag");if(c.hideTooltip(),b&&f.scope&&f.scope===b.options.draggable.scope){var e=this.getAttribute("data-zd-interactive-type");"attribute"===e||"metric"===e?j(this).removeClass("over"):j(this).css({opacity:1}),"function"==typeof a.out&&a.out.apply(this,b.$el.data(f.scope))}})}function h(){}function i(){var a;return a=-1!==navigator.appVersion.indexOf("MSIE 10.")?l.detectTouchDevice()?"MSPointerDown click":"click":l.detectTouchDevice()?"touchend":"click"}var j=a("jquery"),k=a("underscore"),l=a("../../../utilities/index"),m=a("../../../Core/MVC/main"),n=m.Events;d.prototype={defaults:{interactions:{start:"mousedown",action:i(),end:"mouseup"},draggable:{containment:"body",appendTo:"body",helper:"clone",revert:"invalid",addClasses:!1,dragClass:"zd-interactive-draggable",cursor:"pointer",cursorAt:{left:25,top:25},zIndex:2e3,scope:"default"},droppable:{addClasses:!1,tolerance:"pointer",activeClass:"zd-interactive-droppable-accepts",scope:"default"}},get:function(){var a={};if(0===arguments.length)a=this.options;else if(1===arguments.length)a=this.options[arguments[0]]||null;else for(var b=0;b<arguments.length;b++)a[arguments[b]]=this.options[arguments[b]]||null;return a},set:function(a){this.data=a.data||this.data,a.tooltip&&a.tooltip.originalConfig&&(this.tooltipOriginalConfig=a.tooltip.originalConfig)},_getData:function(){return this.data},_getTooltipData:function(){return this.tooltipOriginalConfig.data||this.data},_getTooltipColor:function(){return this.tooltipOriginalConfig&&this.tooltipOriginalConfig.color?this.tooltipOriginalConfig.color:!1},showTooltip:function(a){return this.tooltip?(this.tooltip.show({event:a,getter:j.proxy(this._getTooltipData,this),color:this._getTooltipColor}),this.ownTooltip&&!this.ownTooltip.hidden&&this.ownTooltip.tid===this.tooltip.tid?void this.hideTooltip():void 0):void 0},moveTooltip:function(a){return this.tooltip?this.ownTooltip&&!this.ownTooltip.hidden&&this.ownTooltip.tid===this.tooltip.tid?void this.hideTooltip():void this.tooltip.move({at:{top:a.clientY,left:a.clientX},event:a}):void 0},hideTooltip:function(a){return this.tooltip&&this.tooltip.hide(),this},showActionsList:function(a,b){a=a||{};var c=this,d=b?c.options.dropActions:c.options.actions;return a.left="number"!=typeof a.left?this.$el.offset().left+this.$el.width()/2:a.left,a.top="number"!=typeof a.top?this.$el.offset().top+this.$el.height()/2:a.top,null===this.gestureTimeOut&&(n.trigger("actionList:open",{at:a,actions:d}),this._createOwnTooltip({at:a})),this},_createOwnTooltip:function(a){var b=this;this.ownTooltip&&(this.hideTooltip(),this.ownTooltip.show({at:a.at,getter:this._getData,color:this._getTooltipColor}),this.ownTooltip.snap(),n.on("actionList:closed",function(){b._destroyOwnTooltip()}))},_destroyOwnTooltip:function(){this.ownTooltip.unsnap(),n.off("actionList:closed")},isSVG:function(){return!("svg"!==this.element.tagName.toLowerCase()&&!this.element.ownerSVGElement)},_notify:function(a,b){this._manager._notify(a,this,b)},_createDroppable:g,_destroyDroppable:h,_createDraggable:function(a){var b=this,c=this.options.draggable=j.extend({},this.defaults.draggable,a);return c.start=function(d,e){var f=e.helper;b._dragHelper=f,b._notify("drag:start"),f.css("pointer-events","none"),f.hasClass(c.dragClass)||f.addClass(c.dragClass),"function"==typeof a.start&&a.start.apply(this,arguments)},c.drag=function(){"function"==typeof a.drag&&a.drag.apply(this,arguments)},c.stop=function(d,e){var f=e.helper;b._notify("drag:stop"),b.$el.draggable("option","revert",c.revert),f.css("pointer-events","all"),f.hasClass(c.dragClass)&&f.removeClass(c.dragClass),"function"==typeof a.stop&&a.stop.apply(this,arguments)},this.$el.on("touchend",function(a){var b=document.elementFromPoint(a.originalEvent.changedTouches[0].pageX,a.originalEvent.changedTouches[0].pageY);j(b).trigger("mouseup")}),this.$el.draggable(c),this.$el.data("draggable")},_destroyDraggable:function(){this.draggable&&this.draggable.destroy(),this._dragHelper instanceof j&&this._dragHelper.remove()},_isAllowed:function(a){return-1!==this._allowed.indexOf(a)},_allow:function(a){function b(){f.$el.on(e.start,f._onInteractionStart)}function c(){f.$el.on(e.action,f._onInteraction)}function d(){f.$el.on(e.end,f._onInteractionEnd)}var e=this.options.interactions,f=this;if(!this._isAllowed(a))switch(this._allowed.push(a),a){case e.start:b();break;case e.action:c();break;case e.end:d()}},_restrict:function(a){function b(){f.$el.off(e.start,f._onInteractionStart)}function c(){f.$el.off(e.action,f._onInteraction)}function d(){f.$el.off(e.end,f._onInteractionEnd)}var e=this.options.interactions,f=this;if(this._isAllowed(a))switch(this._allowed.splice(this._allowed.indexOf(a),1),a){case e.start:b();break;case e.action:c();break;case e.end:d()}},_isPrevented:function(a){return-1!==this._prevented.indexOf(a)},_prevent:function(a){var b=this.options.interactions;if(!this._isPrevented(a))switch(this._prevented.push(a),a){case b.start:this.$el.on(b.start,e);break;case b.action:this.$el.on(b.action,e);break;case b.end:this.$el.on(b.end,e)}},_onInteractionStart:function(){return this._notify("interaction:start"),null},_onInteraction:function(a){var b=this.options,c=null;if(c=a.originalEvent&&a.originalEvent.changedTouches?a.originalEvent.changedTouches[0]:a,this._notify("interaction"),b.actions&&b.actions.length){if(1!==b.actions.length){var d=c.pageX||c.originalEvent.pageX,e=c.pageY||c.originalEvent.pageY;return a.type.indexOf("touch")>=0&&(d=a.originalEvent.changedTouches[0].pageX,e=a.originalEvent.changedTouches[0].pageY),this.showActionsList({left:d,top:e}),!1}b.actions[0].action(j(c.target),c)}return null},_onInteractionEnd:function(a){return this._notify("interaction:stop"),null},destroy:function(){var a=this.options.interactions;this._destroyDroppable(),this._destroyDraggable(),this._restrict(a.action),this._restrict(a.start),this._restrict(a.end),this.$el.data("interactiveElement",null)}},b.exports=d},{"../../../Core/MVC/main":6,"../../../utilities/index":151,jquery:109,underscore:244}],44:[function(a,b,c){b.exports=a("./InteractiveElementsController")},{"./InteractiveElementsController":43}],45:[function(a,b,c){"use strict";function d(a){this.configure(a),this.elements=[],this._interactions={}}var e=a("jquery"),f=a("underscore"),g=a("../../../Core/MVC/main"),h=f.clone(g.Events),i=a("../Controller");d.prototype=f.extend({defaults:{},configure:function(a){a||(a={}),a.actionList&&(this.actionList=a.actionList,delete a.actionList),this.options=e.extend({},this.defaults,a)},register:function(a,b){function c(a,b){b.actionList=d.actionList,d.registered(a)?d.updateElement(a,b):(d._addToRegistry(a,b),e.push(a))}var d=this,e=[];return a instanceof Array?f.each(a,function(a){c(a,b)}):c(a,b),e},release:function(a,b){function c(a,b){var c=d.getInteractiveElementFor(a);c&&(d._removeFromRegistry(c),e.push(a))}var d=this,e=[];return a instanceof Array?f.each(a,function(a){c(a,b)}):c(a,b),e},getInteractiveElementFor:function(a){return f.find(this.elements,function(b){return b.element===a})},registered:function(a){return!!this.getInteractiveElementFor(a)},updateElement:function(a,b){var c=this.getInteractiveElementFor(a);c&&c.set(b)},inProgress:function(a){return!!this._interactions[a]},getElementInAction:function(a){var b;return b=this.inProgress(a)?this._interactions[a]:null},_notify:function(a,b,c){c||(c={});var d=a.split(":")[0],e=a.split(":")[1]||"action";switch(e){case"start":this.inProgress(d)&&this._stop(d,c),this._start(d,b,c);break;case"stop":this._stop(d,c);break;case"action":this._trigger(d,b,c)}},_start:function(a,b,c){this._interactions[a]=b},_stop:function(a,b){delete this._interactions[a]},_trigger:function(a,b,c){var d=!!c.silent;d||this.trigger(a,b)},_removeFromRegistry:function(a){var b=this;f.each(f.keys(this._interactions),function(c){a===b.getElementInAction(c)&&b._stop(c)}),a.destroy(),this.elements.splice(this.elements.indexOf(a),1)},_addToRegistry:function(a,b){var c=new i(this,a,b);this.elements.push(c)},destroy:function(){for(;this.elements.length>0;)this._removeFromRegistry(this.elements[0])}},h),b.exports=d},{"../../../Core/MVC/main":6,"../Controller":44,jquery:109,underscore:244}],46:[function(a,b,c){b.exports=a("./InteractiveElementsManager")},{"./InteractiveElementsManager":45}],47:[function(a,b,c){var d,e=a("./Manager");b.exports=function(a){"use strict";return d instanceof e?d.configure(a):d=new e(a),d}},{"./Manager":46}],48:[function(a,b,c){"use strict";var d=a("../../Core/MVC"),e=a("../../utilities"),f=a("underscore"),g=a("jquery"),h=(a("../../models/Metric"),d.Events);b.exports=function(){this.assemblyInteractiveElementActions=function(a){function b(){var b=v.items.reverse()||[];b.forEach(function(a){var b='No function assigned to custom action "';b+=a+'"',v[a]?d(v,a):C[a]?C[a]():console.warn()});var c={searchDetails:"search",search:"search",attribute:"objectField"},e=["objectFieldAcceptor","pivotLabel"],g=a.droppable===!0,h="function"==typeof u;g&&h&&(c[t]?p(c[t]):f.contains(e,t)?q():p("objectField"))}function c(){if("function"==typeof u)switch(t){case"searchDetails":n(),p("search");break;case"search":n(),j(),k(),l(),p("search");break;case"objectFieldAcceptor":q();break;case"pivotLabel":break;default:x&&!w&&i(),g(),j(),k(),l();var a=B.indexOf("Exclude")<0;!w&&a&&o(),m(),p("objectField")}}function d(a,b){z.push({name:b,group:u(),label:b,action:a[b].bind(s)})}function g(){z.push({name:"details",group:u(),label:"Details",action:function(a,b){h.trigger("actionList:action:info",{$at:b,getter:u,UUID:r.UUID})}})}function i(){z.push({name:"trend",group:u(),label:"Trend",disabled:function(){var a=r.state,b=r.config.attributes.source.date,c=a.getObjectFieldsByType("TIME");return void 0===b&&!c.length},action:function(){h.trigger("actionList:action:trend",{getter:u,UUID:r.UUID})}})}function j(){z.push({name:"filter_all",group:u(),disabled:function(){var a=r.config.collection.toJSON();return f.chain(a).pluck("source").pluck("sourceId").uniq().size().value()>1},label:"Filter <br> all",action:function(){h.trigger("actionList:action:filterAll",{getter:u,UUID:r.UUID})}})}function k(){z.push({name:"un_filter_all",group:u(),disabled:function(){var a=r._getFilters({getter:u,state:r.state}),b=r._getFiltersHash(a),c=r._filteredAll===b,d=r.config.collection.length<=1;return d||!c},label:"Un<br>Filter <br> all",action:function(){h.trigger("actionList:action:unFilterAll",{getter:u,UUID:r.UUID})}})}function l(){z.push({name:"filter",group:u(),label:"Filter",action:function(a,b){h.trigger("actionList:action:filter",{$at:b,getter:u,UUID:r.UUID})}})}function m(){z.push({name:"zoom",group:u(),label:"Zoom",disabled:function(){var a=r.state,b=a.groupBy.getAttributes(),c=a.getObjectFieldsByType("ATTRIBUTE");if(c=c.concat(a.getObjectFieldsByType("TIME")),c=c.filter(function(a){return b.indexOf(a.name)<0}),a.isTimeTrends()){var d=a.getGroupByTime(),f=d.timestampGranularity,g=a.get("timeTrendStep"),h=e.time.getLowerStep(g),i=e.time.getMaxStep(f,h);return i!==h||g===h}return 0===c.length},action:function(a,b){h.trigger("actionList:action:zoom",{$at:b,getter:u,UUID:r.UUID})}})}function n(){z.push({name:"search_details",group:u(),label:"Details",action:function(a,b){h.trigger("actionList:action:search",{$at:b,getter:u,UUID:r.UUID})}})}function o(){z.push({name:"exclude",group:u(),label:"remove-exclude",type:"icon",disabled:function(){var a=r.state.getGroupByTime();return!!a},action:function(){h.trigger("actionList:action:exclude",{getter:u,UUID:r.UUID})}})}function p(a){A={scope:a,over:function(){},drop:function(a){h.trigger("actionList:action:drop",{getter:u,UUID:r.UUID,input:s,objectField:a})},out:function(){}}}function q(){A={scope:"objectField",over:function(){},drop:function(b){a.droppable.drop(b)},out:function(){}}}var r=this,s=(this.thread,a.input||this.element),t=a.role,u=a.getter,v=a.menuConfig,w=(this.config.get("source"),this.state.isTimeTrends()),x=!!r.source.visualizations.findWhere({type:"LINE_CHART"}),y=[],z=[],A=a.droppable||null,B=a.hiddenActions||[],C={Filter:l,"Filter All":j,"Unfilter All":k,Info:g,Zoom:m,Trend:i,Exclude:o};return this._filteredAll=this._filteredAll||null,v?b():"undefined"==typeof v&&c(),{actions:z,dropActions:y,droppable:A}},this.registerInteractiveElements=function(a,b,c,d){"object"==typeof b?c=b:g(a).attr("data-zd-interactive-type",b);var e,f,h=this,i=c.data,j=c.menu,k=c.droppable,l=c.interactive,m=this.isRemote?null:c.tooltip||null,n=c.actionListTooltip||null,o=c.events?c.events.join(" "):null;f=this.assemblyInteractiveElementActions({input:a,getter:i,role:b,menuConfig:j,droppable:k,interactive:l}),e=h.elementsManager.register(a,{events:o,actions:f.actions,dropActions:f.dropActions,droppable:f.droppable,data:i,interactive:l,tooltip:m,actionListTooltip:n}),this.interactiveElements=this.interactiveElements.concat(e)},this.releaseInteractiveElement=function(a,b){var c,d=this;return this.isRemote?null:(c=this.elementsManager.release(a,b),void c.forEach(function(a){var b=d.interactiveElements,c=b.indexOf(a);-1!==c&&b.splice(c,1)}))},this.releaseAllInteractiveElements=function(){var a=this;this.releaseInteractiveElement(this.interactiveElements),setTimeout(function(){a.tooltip&&a.tooltip.hide(),a.actionListTooltip&&a.actionListTooltip.hide()},10)}}},{"../../Core/MVC":6,"../../models/Metric":125,"../../utilities":151,jquery:109,underscore:244}],49:[function(a,b,c){b.exports=a("./InteractiveElementsMethods")},{"./InteractiveElementsMethods":48}],50:[function(a,b,c){"use strict";function d(a,b,c){this.noData=!0,this.multiMetric=!!c,this.domainValue=[],this.objectFields=[],this.setAccessTo(a,b),this.setColorRangeType("gradient")}var e=a("underscore"),f=a("colorbrewer"),g=a("d3"),h=a("../../utilities/MetricFormatter");b.exports=d;var i=d.prototype;i.setAccessTo=function(a,b){return this.metric=a,this.metric.colors=this.metric.colors||this.metric.savedColors,this.objectField=b,this._updateFormatter(),this},i._setObjectFields=function(a){return this.objectFields=a,this},i._updateDomain=function(a,b){var c,d,e,f,h,i=this,j=b;if(this.noData=0===a.length,this.multiMetric)this.domainValue=this.objectFields.map(function(a){return a.get("label")})||[],this.domainName=this.objectFields.map(function(a){return a.get("name")})||[];else{if(c=g.extent(a,function(a,b){return i.raw(a)}),e=(c[1]-c[0])/j,"gradient"!==this.colorRangeType&&(j+=1),0===e)return void(this.domainValue=c.slice(0));if(this.domainValue=this.domainValue||[],this.noData)this.domainValue=[0,0];else if(4===this.domainValue.length&&"gradient"!==this.colorRangeType)f=this.domainValue[1],h=this.domainValue[2],(isNaN(f)||f<c[0])&&(f=c[0]),(isNaN(h)||h>c[1])&&(h=c[1]),f>h&&(f=h),this.domainValue[0]=c[0],this.domainValue[1]=f,this.domainValue[2]=h,this.domainValue[3]=c[1];else{d=c[0],this.domainValue=[];do this.domainValue.push(d),d+=e;while(this.domainValue.length<j);this.domainValue[this.domainValue.length-1]=c[1]}}},i._updateFormatter=function(){var a=this.objectField.storageConfig.type;this._formatter=new h(a)},i.isCount=function(){return"count"===this.metric.name&&!this.metric.func},i.isNone=function(){return"none"===this.metric.name&&!this.metric.func},i.isBoxPlot=function(){return!!this.metric.boxPlot},i.raw=function(a,b){b=b||{};var c,d,e,f=this.isCount(),g=this.isNone(),h=this.isBoxPlot();return g?0:(c=this.metric.name,d=h?"percentiles":f?null:this.metric.func,f&&a.hasOwnProperty("current")&&a.current.hasOwnProperty("count")?a.current.count:a.hasOwnProperty("current")&&a.current.hasOwnProperty("metrics")&&a.current.metrics.hasOwnProperty(c)&&a.current.metrics[c].hasOwnProperty(d)?e=b.historical&&a.historical?a.historical.metrics?a.historical.metrics[c][d]:null:a.current.metrics?a.current.metrics[c][d]:null:null)},i.formatted=function(a,b,c){var d=this;c=c||{};var e=isNaN(a)?this.raw(a,c):a,f=this.objectField.storageConfig.type,g=this.metric.func,h=e;return Array.isArray(e)?h=e.map(function(a){return d._formatter.format(a,b)}):"count"!==f&&"distinct_count"!==g&&(h=this._formatter.format(e,b)),h},i.colorRange=function(){var a,b,c=this,d="range"===this.metric.legendType,e=[];if("none"===this.metric.name)b=this.metric.colors&&this.metric.colors[0]?this.metric.colors[0]:this._getColor(0),e=[b,b];else if(this.multiMetric)!this.multiMetricColors&&this.domainName&&(this.domainName.forEach(function(a,b){var f;d&&(f=c._getDomainColor(a)),f=f?f.color:c._getColor(b),e.push(f)}),this.multiMetricColors=e),e=this.multiMetricColors||[];else{if(this.metric.colors=this.metric.colors||[],this.metric.colorsData=this.metric.colorsData||[],!this.metric.colors.length)for(;this.metric.colors.length<this.metric.colorNumb;)a=this.metric.colors.length,b=this._getColor(a),this.metric.colors.push(b);var f=this.metric.colorsData;if(!f.length)for(;f.length<this.metric.colorNumb;)a=f.length,b=this._getColor(a),this.metric.colorsData.push({name:"Color "+(a+1),color:b});e="string"==typeof this.metric.colors?JSON.parse(this.metric.colors):this.metric.colors}var g=[];for(var h in e)e[h]instanceof Object?g.push(e[h].color):g.push(e[h]);return g},i.get=function(a){return this.objectField[a]},i.minimum=function(){return this.domainValue?this.domainValue[0]:0},i._getDomainColor=function(a){return this.metric.colorsData=this.metric.colorsData||[],this.metric.colorsData.filter(function(b){return b.name===a})[0]},i.setColors=function(a){var b=this;this.multiMetric?(a=a.splice(0,this.domainName.length),this.domainName.forEach(function(c,d){var e;e=b._getDomainColor(c),e?e.color=a[d]:b.metric.colorsData.push({name:c,color:a[d],label:b.domainValue[d]})}),this.metric.colors=a,this.multiMetricColors=a):this.metric.colors=a},i._getColor=function(a){var b,c=f[this.metric.colorSet],d=this.metric.colorNumb,e="#f03b20";return this.domainValue&&(d=this.domainValue.length),3>d&&(d=3),d>9&&(d=9),b=c[d][a%d]||e},i.maximum=function(){return this.domainValue?this.domainValue[this.domainValue.length-1]:0},i.domain=function(){return e.clone(this.domainValue)},i.setColorRangeType=function(a){this.colorRangeType=a},i.getColorKeyLabel=function(){return this.get("label")},i.isMetric=function(){return!0},i.isNoData=function(){return this.noData}},{"../../utilities/MetricFormatter":146,colorbrewer:95,d3:96,underscore:244}],51:[function(a,b,c){b.exports=a("./MetricAccessor")},{"./MetricAccessor":50}],52:[function(a,b,c){"use strict";function d(a){if(a||(a={}),"undefined"==typeof e)throw new Error("HTML to canvas converter missing");this.converter=e}var e=a("html2canvas"),f=a("jquery"),g=a("jspdf"),h=a("../../utilities"),i=a("../../views/PdfExport/PdfPageTemplate.html");a("velocity-animate");d.prototype={shoot:function(a){return this.getScreenshot(a,"image/png")},shootPDF:function(a,b){var c=f.Deferred(),d=this;return this.getScreenshot(a,"image/png").done(function(a,e){document.body.appendChild(a),a.onload=function(){var e={w:a.clientWidth,h:a.clientHeight,k:a.clientWidth/a.clientHeight};document.body.removeChild(a);var h,i,j,k={w:842,h:595,k:842/595};e.k>1?(h="l",e.k>k.k?(i=k.w,j=k.h*k.k/e.k):(i=k.w*e.k/k.k,j=k.h)):(h="p",e.k>1/k.k?(i=k.h,j=k.w/k.k/e.k):(i=k.h*e.k*k.k,j=k.w)),d.prepareFinalPdf(b,a).done(function(){var a=f("#pdf-page-wrapper");d.getScreenshot(a,"image/jpeg").done(function(b,d){var e=new g(h,"pt");a.remove(),document.body.appendChild(b),b.onload=function(){document.body.removeChild(b),e.addImage(d,"JPEG",0,0,i,j),c.resolve(e)}})})}}),c.promise()},prepareFinalPdf:function(a,b){var c=f.Deferred(),d=i({config:a,showFooter:!0});f("body").append(d);var e=f(".pdf-footer").width()-f(".pdf-data").width()-20;return f(".custom-footer").css("max-width",e),f(".pdf-image").append(b).css({background:"#FFFFFF"}),c.resolve(d),c.promise()},getScreenshot:function(a,b){var c=this,d=f.Deferred();return a instanceof f||(a=f(a)),this.prepareContents(a).done(function(){c.createImageFrom(a,b).done(function(b,e){c.restoreContents(a),d.resolve(b,e)})}),d.promise()},prepareContents:function(a){var b=this,c=f.Deferred(),d=0,e=a.find("svg");return a.addClass("screenshot-processed"),this.replaced=[],e.length?e.each(function(a,f){var g=b.replaceWithImg(f);g.then(function(){d++,d===e.length&&c.resolve()})}):c.resolve(),c.promise()},replaceWithImg:function(a){var b=f.Deferred(),c=this,d=f(a);return h.getImgFromSvg(a).done(function(e){d.before(e).detach(),c.replaced.push(a),e.id="replacingSVG-"+(c.replaced.length-1),b.resolve(e)}),b.promise()},createImageFrom:function(a,b){var c=f.Deferred();return this.converter(a[0],{background:"#FFFFFF",useCORS:!0,logging:!0,proxy:"canvas/html2canvasProxy",height:a.height()+a.offset().top,onrendered:function(a){var d=new Image,e=a.toDataURL(b,1);d.src=e,c.resolve(d,e)}}),c.promise()},restoreSVG:function(a){var b=f(a),c=this.replaced.length-1,d=f("#replacingSVG-"+c);d.after(b).remove(),
this.replaced.splice(c,1)},restoreContents:function(a){for(;this.replaced.length>0;)this.restoreSVG(this.replaced[this.replaced.length-1]);a.removeClass("screenshot-processed")}},b.exports=d},{"../../utilities":151,"../../views/PdfExport/PdfPageTemplate.html":214,html2canvas:100,jquery:109,jspdf:110,"velocity-animate":245}],53:[function(a,b,c){b.exports=a("./Screenshotter")},{"./Screenshotter":52}],54:[function(a,b,c){"use strict";function d(a,b,c){var d="/websocket/";return a&&(d=a+d+"?key="+b,d=c?"wss://"+d:"ws://"+d),q.getStream(d,r)}function e(a){function b(a,b){var c={remote:m.host,secure:m.secure,apiKey:m.apiKey},d=h(a,b,l,c,o,n);m.visualizations.push(d),d.controller.loadVisualization().done(function(){d.controller.initVisualization(),d.controller.startVisualization(),p.resolve(d)})}function c(a,b){var c="string"==typeof a?a:null;console.warn(c||b+": "+a.statusText),p.reject(a,b)}function d(a){console.log(a),p.notify(a)}a=a||{};var e,f,j,l,m=this,n=i.interactive,o=this.stream,p=k.Deferred(),q=this.sources;if("string"!=typeof a.visualization||!a.visualization)throw new Error("Invalid visualization name");if(e=a.visualization,"boolean"==typeof a.interactive&&(n=a.interactive),"string"!=typeof a.source||!a.source)throw new Error("Invalid source name");if(f=a.source,!(a.element instanceof window.HTMLElement))throw new Error("Invalid element");return l=a.element,j=q.findWhere({name:f}),j?g(e,j).then(b,c,d):(p.notify("Loading Source"),q.fetch({data:{name:f}}).then(function(a){var f,h;a[0]?(f=a[0].id,h=q.get(f),g(e,h).then(b,c,d)):p.reject("source doesn't exist")})),p.promise()}function f(a){a=a||{};var b,c,d,e=k.Deferred();if("string"!=typeof a.visualization||!a.visualization)throw new Error("Invalid visualization name");if(b=a.visualization,"string"!=typeof a.source||!a.source)throw new Error("Invalid source name");return c=a.source,d=l.where(this.visualizations,{name:b,source:c})[0],d?(e.notify("Closing visualization "+b),d.controller.remove(),d.controller.elementsManager.destroy(),k(d.root).remove(),this.visualizations.splice(this.visualizations.indexOf(d),1),e.resolve()):e.reject("Visualization doesn't exist"),e.promise()}function g(a,b){var c=b.visualizations.findWhere({name:a}),d=k.Deferred();return c?(d.notify("fetching visualization config for "+a),c.fetch().done(function(){d.resolve(c,b)}).fail(function(a,b){d.reject(a,b)})):(d.notify("fetching visualizations for "+b.get("name")),b.visualizations.fetch().done(function(){var c=b.visualizations.findWhere({name:a});c?(d.notify("fetching visualization config for "+a),c.fetch().done(function(){d.resolve(c,b)}).fail(function(a,b){d.reject(a,b)})):d.reject("visualization doesn't exist")}).fail(function(a,b){d.reject(a,b)})),d}function h(a,b,c,d,e,f){var g=k('<div style="position: relative; height: 100%;"></div>').appendTo(c),h=k(j).append('<div class="zd-legend" style="display: none;"></div>').appendTo(g)[0],i=new o({config:a,source:b,interactiveMode:f,el:h,host:d},e),l={name:a.get("name"),source:b.get("name"),root:g[0],controller:i};return console.log(l),l}var i={secureHost:!1,interactive:!0},j='<div class="widgetContent" style="position: relative; height: 100%;">',k=a("jquery"),l=a("underscore"),m=a("../../Core"),n=a("../../collections/Sources"),o=a("./../VisualizationController"),p=(a("./../InteractiveElements"),m.MVC),q=m.DataStreamProvider,r=p.Events,s=function(a){if(this.visualizations=[],"undefined"==typeof a.apiKey)throw new Error("An apiKey must be defined");if(this.apiKey=a.apiKey,"undefined"!=typeof a.secure?this.secure=a.secure:this.secure=i.secure,"undefined"==typeof a.host)throw new Error("An url must be defined");this.host=a.host,this.sources=new n([],{secure:this.secure,remote:this.host,apiKey:this.apiKey}),this.stream=d(this.host,this.apiKey,this.secure)};s.prototype={visualize:e,stop:f},b.exports=s,window.ZoomdataClient=s},{"../../Core":8,"../../collections/Sources":37,"./../InteractiveElements":47,"./../VisualizationController":59,jquery:109,underscore:244}],55:[function(a,b,c){"use strict";function d(a){if(a=a||{},this.options=f.extend({},this.defaults,a),!this.options.controller)throw new Error("Controller must be defined");this.controller=this.options.controller,delete this.options.controller,this._oldMultiGroupBy=null,this.history=[],this.addToHistory(this.controller.state,this.controller.config)}function e(a){return"none"!==a.get("name")}var f=a("jquery"),g=a("lodash"),h=a("../../Core/MVC"),i=g.clone(h.Events),j=a("../../collections/GroupBys"),k=["LINE_CHART","LINE_AND_BARS"],l="PIVOT_TABLE",m=["WORLD_MAP","US_MAP","MAP_LAT_LONG"],n=["NUMBER","INTEGER","MONEY"];d.prototype=g.extend({defaults:{},merge:function(a){var b=this.controller.config,c=this.controller.state,d=a.oldConfig,e=a.oldState,f=a.oldTime,g=this.isType(b,m),h=this.isType(d,m);return this.addToHistory(e,d),this.mergeTime(e,d),this.mergeCustomState(e),this.mergeFilters(e,d),this.isType(b,l)?(this.mergeToPivot(e,d),this):(this.isType(d,l)?this.mergeFromPivot(e,d):(this.mergeMetrics(e,d),g?h||(this._oldMultiGroupBy=e.groupBy.toJSON()):this.mergeGroupBy(e,d,null,f)),c.getGroupByTime()?this.prevTimeTrendStep&&!e.get("timeTrendStep")&&(c.set("timeTrendStep",this.prevTimeTrendStep),this.prevTimeTrendStep=!1):(this.prevTimeTrendStep=c.get("timeTrendStep"),c.unset("timeTrendStep",{silent:!0})),c.validateTimeTrendStep(),this)},mergeCustomState:function(a){var b=this.controller.state.custom,c=["UberBarsSettings","_fontConfig"];c.map(function(b){return{name:b,value:a.custom.get(b)}}).filter(function(a){return!g.isUndefined(a.value)}).forEach(function(a){var c=a.name,d=a.value;if(d instanceof Object){var e=new h.Model,f=d.attributes||d;b.set(c,e),g.forIn(f,function(a,b){e.set(b,a)})}else b.set(c,d)})},mergeFilters:function(a,b){var c=this.controller,d=(this.controller.config,this.controller.state),e=a.filters,f=d.get("timestampField"),g=e.findWhere({path:f});return a.filters.length>0&&(g&&d._hasPlayerOption()&&d.isLive()&&(e.remove(g,{silent:!0}),c.eventDispatcher.trigger("filter:unsupported",g)),d.filters.add(e.toJSON(),{silent:!0})),this},mergeToPivot:function(a,b){var c,d=this,f=this.controller.config,h=this.controller.state,i=f.get("source"),j="Columns"===i.variables["Metric Direction"],k={},l=f.attributes.source.variables,m="Column Attributes",o="Row Attributes",p="Metrics",q=[],r=[];r=j?[o,m]:[m,o],c=a.metrics.toJSON().filter(function(a,b){var c=a.name,d=null===a.func?"":a.func,e=c+d,f=!1;return("none"===c||a.colors)&&(f=!0),k[e]===!0&&(f=!0),f?!1:(k[e]=!0,!0)}).map(function(a,b){return{name:a.name,func:a.func,label:"Metrics",id:"Metrics-"+b,type:a.type}}),c.forEach(function(a,b){var c=a.name;a.func&&(c+=":"+a.func),q.push(c)}),h.config.get("source").variables[p]=q.join(" "),h.metrics.reset(c,{silent:!0});var s=this.getOriginalType(b);return this.isTrend(s)&&!this.isHistorical()||0===a.groupBy.length?this:(a.groupBy.filter(e).forEach(function(a,b){var c=r[b],e=a.get("form"),f=a.get("name"),h=d.getObjectField(f),i=h.storageConfig?h.storageConfig.type:h.get("storageConfig").type,j=g.contains(n,i);if(j)return!1;var k={name:f};if(c){var m,o=r.filter(function(a){return a!==c});e&&(k.form=e),l[c]=[k],o.forEach(function(a){Array.isArray(l[a])&&(m=l[a].filter(function(a){return a.name!==k.name}),l[a]=m)})}}),this)},mergeFromPivot:function(a,b){function c(a){return a.filter(function(a){return!!a.func})[0]}var d,e,f,h="Columns"===b.attributes.source.variables["Metric Direction"],i=this.controller._controller.scope.visualization,k=this.controller.state.groupBy,l=[],m=b.attributes.source.variables,n=this.controller._controller,o=function(a){return n.state.metrics.forEach(function(b){a.name===b.get("name")&&(a.func=b.get("func"))}),a};h?(d="Column Attributes",e="Row Attributes"):(d="Row Attributes",e="Column Attributes"),this.mergeMetrics(a,b),"undefined"!=typeof m[e]&&""!==m[e]&&(f=new j(m[e].concat(m[d]).filter(function(a){return a instanceof Object}).map(function(a){var b={name:a.name};return a.form&&(b.form=a.form),b}))),this.mergeGroupBy(a,b,f),i._ROWS_SORT.length&&l.push(o(i._ROWS_SORT[0])),i._COLS_SORT.length&&l.push(o(i._COLS_SORT[0])),i._TOTALS_SORT.length&&l.push(o(i._TOTALS_SORT[0])),i._METRICS_SORT.length&&l.push(o(i._METRICS_SORT[0])),k.forEach(function(a,b){var d=a.get("name"),e=g.findWhere(l,{name:d})||c(l);e&&(a.setSort(e),l.splice(l.indexOf(e),1))})},isHistorical:function(){return!this.controller.config.get("source").live},isTrend:function(a){return-1!==k.indexOf(a)||"LINE_CHART_CONTINUOUS"===a&&this.isHistorical()},mergeTime:function(a,b){var c=this.controller.config,d=this.controller.state,e=this.getOriginalType(b),f=this.getOriginalType(c);if(e!==f&&(this.isTrend(f)||this.isTrend(e)))return this;if(d.time&&a.time){var g=d.time.get("timeWindow"),h=a.time.get("timeWindow");g===h&&d.time.set(a.time.toJSON(),{silent:!0})}return d.set("timeWindowScale",a.get("timeWindowScale"),{silent:!0}),this},mergeGroupBy:function(a,b,c,d){function e(a,b){b.forEach(function(c,d){var e=a[d],f=b[d].toJSON(),g=a.filter(function(a){return a.get("name")===f.name})[0],h=a.indexOf(g);i.isCompatibleField(e,f)&&(g&&h!==d&&g.setAttribute(e.toJSON(),{silent:!0}),e.setAttribute(f,{silent:!0}),y&&i.isCompatibleSort(e,f.sort)&&e.setSort(f.sort,{silent:!0}))})}function g(a){var b=k.getObjectField(a.get("name"));return"TIME"===b.storageConfig.type}function h(a){var b=k.getObjectField(a.get("name"));return"TIME"!==b.storageConfig.type}var i=this,j=this.controller.config,k=this.controller.state;c&&(a.groupBy=c);var l=a.groupBy.models,m=k.groupBy.models,n=a.time.get("groupTime"),o=k.time.get("groupTime"),p=a.groupBy.toJSON(),q=k.groupBy.toJSON(),r=this.getOriginalType(b),s=this.getOriginalType(j),t=this.isTrend(r),u=this.isTrend(s),v=!!k.metrics.findWhere({boxPlot:!0}),w=p.reduce(function(a,b){return a||"calc"===b.sort.func},!1),x=p.reduce(function(a,b){return a||"distinct_count"===b.sort.func},!1),y=!(v&&(w||x));if(r!==s&&(u||t)){var z,A,B,C=a.get("timestampField"),D=a.get("timeTrendStep");if(this.isGroupByTimeField(C,a)&&(z={timestampField:C},D&&u&&(z.timeTrendStep=D),k.set(z,{silent:!0})),t&&u)f.extend(o,{name:n.name,sort:n.sort}),k.time.set({fromTime:d.fromTime,toTime:d.toTime,min:d.min,max:d.max},{silent:!0}),k.validateTimeTrendStep();else if(u&&(A=p.map(function(a){return i.getObjectField(a.name)}).filter(function(a){var b=a.get("storageConfig")||{};return"TIME"===b.type&&b.rawFormatSupportTimeGroup})[0])){k.set("timestampField",A.get("name"),{silent:!0}),C?k.time.set({fromTime:d.fromTime,toTime:d.toTime,min:d.min,max:d.max},{silent:!0}):(B=A.get("storageConfig"),k.time.set({fromTime:B.min,toTime:B.max,min:B.min,max:B.max},{silent:!0})),k.setTimeTrendStep(a.get("timeTrendStep"),{silent:!0});var E=a.groupBy.findWhere({name:A.get("name")});m.forEach(function(a){if(i.isCompatibleField(a,E)){var b=E.toJSON();a.setAttribute(b,{silent:!0}),i.isCompatibleSort(a,b.sort)&&a.setSort(b.sort,{silent:!0})}})}}if(q.length>p.length){this._oldMultiGroupBy&&this._oldMultiGroupBy.length>p.length&&this._oldMultiGroupBy.forEach(function(a,b){var c=m[b];c&&i.isCompatibleField(c,a)&&(c.setAttribute(a,{silent:!0}),y&&i.isCompatibleSort(c,a.sort)&&c.setSort(a.sort,{silent:!0}))});var F=m.filter(g),G=m.filter(h),H=l.filter(g),I=l.filter(h);F.length&&H.length?(e(F,H),e(G,I)):e(m,l)}else this._oldMultiGroupBy=p,m.forEach(function(a,b){var c=l[b];if(c&&i.isCompatibleField(a,c)){var d=c.toJSON();a.setAttribute(d,{silent:!0}),y&&i.isCompatibleSort(a,d.sort)&&a.setSort(d.sort,{silent:!0})}});return this},isGroupByTimeField:function(a,b){var c=this.getObjectField(a);return c&&b.isSupportTimeGroup(c)},getObjectField:function(a){var b=this.controller.source.objectFields;return b.findWhere({name:a})},isCompatibleField:function(a,b){var c,d,e=a.collection.definition,f=b.toJSON?b.toJSON():b,h=this.getObjectField(f.name),i=h.attributes.storageConfig||{},j=i.type,k=["NUMBER","INTEGER","MONEY"],l=g.contains(k,j);return l?!1:("time"===e.groupType?c=["TIME"]:"multi-group"===e.type?(d=a.collection.models.indexOf(a),c=e.config.groupTypes[d].split(" ")):c=e.attributeType,"TIME"!==i.type||i.rawFormatSupportTimeGroup?c&&"ALL"===c[0]?!0:g.contains(c,j):!1)},isCompatibleSort:function(a,b){var c=this.controller.state,d=c.isTimeTrends(),e=c.get("timestampField");return d?a.get("name")!==e||b.name===e:!0},mergeMetrics:function(a){function b(a,b){var c=!0,d=b.get("name"),e="count"===d?null:b.get("func"),f=b.get("type"),g="count"===d&&!e,h="calc"===e,j="distinct_count"===e,k=a.get("boxPlot");"last_value"===e&&i.isMultiMetric()&&(e="sum"),k&&(c=g||h||j?!1:!0),c&&a.set({name:d,func:e,type:f},{silent:!0})}function c(a,b){var c=[];return c=b?a.metrics.models.filter(function(a){return a.get("label")!==b.name}):a.metrics.models}function d(a,b){var c=null;return b&&(c=a.metrics.findWhere({label:b.name})),c}function e(a){return g.findWhere(a.config.attributes.variables,{metricType:"color"})}function f(a){return g.findWhere(a.config.attributes.variables,{type:"multi-metric"})}var h,i=this.controller.state;this.controller.config;if(0!==i.metrics.length&&0!==a.metrics.length){var j=e(i),k=e(a),l=c(i,j),m=c(a,k),n=f(i);if(n&&l&&l[0]){var o=l[0].get("label"),p=m.filter(function(a){return"none"!==a.get("name")}).map(function(a){var b=a.get("func"),c=i.metrics.length;return"last_value"===b&&i.isMultiMetric()&&c>1&&(b="sum"),{label:o,name:a.get("name"),func:b,type:a.get("type")}});if(j&&(h=d(i,j),p.push(h.toJSON())),p.length<i.metrics.length)p.forEach(function(a,b){var c=i.metrics.at(b);c.get("metricType")===a.metricType&&c.set(a)});else{var q=g.uniq(p,function(a){return a.label+a.name});i.metrics.set(q,{silent:!0})}}else{var r=[];m.forEach(function(a){var c=a.get("id"),d=l.filter(function(a){return a.get("id")===c});for(var e in d)d.hasOwnProperty(e)&&(b(d[e],a),r.push(d[e].get("id")),r.push(a.get("id")))}),l.forEach(function(a,c){var d=a.get("id");if(-1===r.indexOf(d)){var e=m[c];e&&-1===r.indexOf(e.get("id"))&&b(a,e)}})}if(j&&k){var s=i.metrics.findWhere({id:j.name}),t=a.metrics.findWhere({id:k.name}),u=t.get("name"),v="count"===u?null:t.get("func"),w=t.get("colorSet")||s.get("colorSet");"multi-metric"!==j.type&&"none"!==u&&s.set({name:u,func:v},{silent:!0}),j.type===k.type&&(j.colorSet=w,s.set({colorSet:w},{silent:!0}))}return this}},addToHistory:function(a,b){return this.history.push({state:a,config:b}),this},getPrev:function(){var a=this.history.pop();return a},getOriginalType:function(a){var b=a.get("type");return b="CUSTOM"===b?a.get("templateType"):b},isType:function(a,b){var c=Array.isArray(b)?b:[b],d=!1,e=this.getOriginalType(a);return g.contains(c,e)&&(d=!0),d}},i),b.exports=d},{"../../Core/MVC":6,"../../collections/GroupBys":26,jquery:109,lodash:242}],56:[function(a,b,c){b.exports=a("./StateInheritanceManager")},{"./StateInheritanceManager":55}],57:[function(a,b,c){"use strict";var d=a("underscore"),e=a("jquery"),f=a("../../Core/MVC"),g=f.Events,h=a("../../utilities"),i=a("./../../models/Zoomdata.Models.js"),j=300,k={STOPPED:"STOPPED",STARTING:"STARTING",STARTED:"STARTED",STOPPING:"STOPPING",DIRTY_DATA:"DIRTY_DATA",NOT_DIRTY_DATA:"NOT_DIRTY_DATA",NO_DATA:"NO_DATA",PAUSING:"PAUSING",PAUSED:"PAUSED",UNPAUSING:"UNPAUSING"},l=b.exports=function(a){if(a=a||{},d.bindAll(this,"_onStreamOpen","_onStreamClose","_onStreamError","_onViewport","_onMessage","_onTimeLine","_onStartVisDone","_onNoDataFound","_onDirtyData","_onNotDirtyData"),!a.dataStream)throw new Error("options.dataStream must be defined");this.dataStream=a.dataStream,this.tuneTo(a),this._progress=0,this.status(k.STOPPED),this.onStreamError=e.noop,this.onMessage=e.noop,this.onTimeLine=e.noop,this.onStartFromTimeDone=e.noop,this.onStartVisDone=e.noop,this.onStopVisDone=e.noop,this.onNoDataFound=e.noop,this.onPauseDone=e.noop,this.onSpeedUpdatedDone=e.noop,this.onDirtyData=e.noop,this.onNotDirtyData=e.noop,this.onPagination=e.noop,this.onPivotPaging=e.noop,this.onViewport=e.noop,this.onExeption=e.noop,this.listenTo(g,"stream:open",this._onStreamOpen),this.listenTo(g,"stream:close",this._onStreamClose),this.listenTo(g,"stream:error",this._onStreamError),this.listenTo(g,"stream:message",this._onMessage),this.listenTo(g,"stream:TIME_LINE",this._onTimeLine),this.listenTo(g,"stream:START_VIS_DONE",this._onStartVisDone),this.listenTo(g,"stream:STOP_VIS_DONE",this._onStopVisDone),this.listenTo(g,"stream:NO_DATA_FOUND",this._onNoDataFound),this.listenTo(g,"stream:PAUSE_DONE",this._onPauseDone),this.listenTo(g,"stream:UPDATE_SPEED_DONE",this._onSpeedUpdatedDone),this.listenTo(g,"stream:DIRTY_DATA",this._onDirtyData),this.listenTo(g,"stream:NOT_DIRTY_DATA",this._onNotDirtyData),this.listenTo(g,"stream:PAGINATION",this._onPagination),this.listenTo(g,"stream:PAGING",this._onPivotPaging),this.listenTo(g,"stream:VIEWPORT",this._onViewport)};d.extend(l.prototype,f.Events,{STATUSES:k,tuneTo:function(a){if(this.stopListening(this.time),a.state)this.state=a.state,this.time=this.state.time;else{if(!a.config)throw new Error("state or config must be defined");this.state=new i({streamSourceId:a.config.source.sourceId},{config:new f.Model(a.config)}),this.time=this.state.time}this.state.config.options={},this.startListeners()},resetProgress:function(){this.progress(0)},progress:function(a){function b(a){return d._progress=a,d}function c(){return d._progress}var d=this;return"undefined"==typeof a?c():b(a)},destroy:function(){this.stop(),this.stopListening()},setUUID:function(){return this.UUID=h.generateUUID(),this.UUID},getUUID:function(){return this.UUID},status:function(a){return"string"==typeof a?(this._status=a,this.trigger("status:change",a,this),this):this._status},clearTimeouts:function(){this.startVisTimeout&&(clearTimeout(this.startVisTimeout),this.startVisTimeout=null)},start:function(){function a(){c||b.stop(),console.log("Thread: start ",JSON.parse(e)),b.dataStream.send(e),b.resetProgress(),b.status(k.STARTING),b.trigger("thread:start",JSON.parse(e)),e=null}if(void 0!==this.UUID){var b=this,c=this.status()===k.STOPPED,d=this.state.toRequest(),e=JSON.stringify({type:"START_VIS",cid:this.UUID,request:d});b.clearTimeouts(),b.startVisTimeout=setTimeout(a,j)}},stop:function(){var a=this.status()===k.STOPPED,b=this.status()===k.STOPPING,c=JSON.stringify({type:"STOP_VIS",cid:this.UUID});a||b||(this.dataStream.send(c),this.resetProgress(),this.trigger("thread:stop",JSON.parse(c)),console.log("Thread: stop",JSON.parse(c)),this.status(k.STOPPING))},pause:function(){var a=JSON.stringify({type:"PAUSE",cid:this.UUID});this.clearTimeouts(),this.dataStream.send(a),console.log("Thread: pause",JSON.parse(a)),this.status(k.PAUSING),this.switchOffLiveMode()},unpause:function(){var a=JSON.stringify({type:"UNPAUSE",cid:this.UUID});this.clearTimeouts(),this.dataStream.send(a),console.log("Thread: unpause",JSON.parse(a)),this.status(k.UNPAUSING)},request_data:function(a){a=a||{records:1e3};var b=JSON.stringify({type:"REQUEST_DATA",cid:this.UUID,request:a});this.clearTimeouts(),this.dataStream.send(b),console.log("Thread: request_data",JSON.parse(b))},togglePause:function(){var a=this.time.get(k.PAUSED);a?this.unpause():this.pause()},switchOffLiveMode:function(){this.time.get("live")&&(this.time.set("live",!1),g.trigger("live:mode",{on:!1}))},switchOnLiveMode:function(){this.time.get("live")||(this.time.set("live",!0),g.trigger("live:mode",{on:!0,label:"LIVE"}))},updateSpeed:function(a){var b=JSON.stringify({type:"UPDATE_SPEED",cid:this.UUID,request:{speed:a||this.time.get("speed")}});this.waitForUpdateSpeedDone=!0,this.clearTimeouts(),this.dataStream.send(b),console.log("Thread: updateSpeed",b)},_onStreamOpen:function(a){var b=this.status(),c=b===k.STOPPED,d=b===k.STARTING;c&&!d&&(console.log("Thread: reconnected"),this.start())},_onStreamClose:function(a){this.status(k.STOPPED)},_onSpeedChange:function(a,b){this.updateSpeed(b)},_onPausedChange:function(a,b){b?this.pause():this.unpause()},_onStreamError:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status(k.STOPPED),"function"==typeof this.onStreamError&&this.onStreamError(b.data),this.trigger("thread:error",a))},_onDirtyData:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status(k.DIRTY_DATA),"function"==typeof this.onDirtyData&&this.onDirtyData(b.data),"number"==typeof b.progress?this.progress(b.progress):this.resetProgress(),this.trigger("thread:dirtyData",b))},_onNotDirtyData:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status(k.NOT_DIRTY_DATA),"function"==typeof this.onNotDirtyData&&this.onNotDirtyData(b.data),this.progress(100),this.trigger("thread:notDirtyData",b))},_onMessage:function(a){var b=JSON.parse(a.data);if(b.cid===this.UUID){"function"==typeof this.onMessage&&this.onMessage(b.data);var c=d.map(b.data,function(a){return a.group&&(0===a.group.length&&delete a.group,a.group&&1===a.group.length&&(a.group=a.group[0])),a});this.trigger("thread:message",c),this.state.availableDataItems=b.available}},startListeners:function(){this.listenTo(this.time,"change:fromDate change:toDate change:pinned",this.start),this.listenTo(this.time,"change:speed",this._onSpeedChange),this.listenTo(this.time,"change:paused",this._onPausedChange)},stopListeners:function(){this.stopListening(this.time,"change:fromDate change:toDate change:pinned",this.start),this.stopListening(this.time,"change:speed",this._onSpeedChange),this.stopListening(this.time,"change:paused",this._onPausedChange)},_onTimeLine:function(a){var b=JSON.parse(a.data),c=h.time.convertFromServerDate;if(b.cid===this.UUID&&!this.waitForUpdateSpeedDone){this.stopListeners();var d={fromTime:c(b.from.slice(1)).valueOf(),toTime:c(b.to.slice(1)).valueOf(),min:c(b.min.slice(1)).valueOf(),max:c(b.max.slice(1)).valueOf(),live:b.live,speed:b.speed};this.time.set(d),this.startListeners(),"function"==typeof this.onTimeLine&&this.onTimeLine(b.data),this.trigger("thread:timeline",b.data)}},_onStartVisDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status(k.STARTED),"function"==typeof this.onStartVisDone&&this.onStartVisDone(b.data),this.trigger("thread:startVisDone",b.data),g.trigger("thread:startVisDone",b))},_onStopVisDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onStopVisDone&&this.onStopVisDone(b.data),this.trigger("thread:stopVisDone",b.data),this.status(k.STOPPED))},_onNoDataFound:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.status(k.NO_DATA),"function"==typeof this.onNoDataFound&&this.onNoDataFound(b.data),this.trigger("thread:noData",b))},_onPauseDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.stopListeners(),this.time.set({paused:!0,live:!1}),this.startListeners(),"function"==typeof this.onPauseDone&&this.onPauseDone(b),this.trigger("thread:pauseDone",b),g.trigger("thread:pauseDone",b),this.status(k.PAUSED))},_onSpeedUpdatedDone:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onSpeedUpdatedDone&&this.onSpeedUpdatedDone(b.data),this.waitForUpdateSpeedDone=!1,this.trigger("thread:updateSpeedDone",b.data),g.trigger("thread:updateSpeedDone",b.data))},_onPagination:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.state.set("nextPageAvailable",b.nextPageAvailable,{silent:!0}),this.state.set("pages",b.pages,{silent:!0}),this.state.set("precise",b.precise,{silent:!0}),this.state.trigger("pages"),"function"==typeof this.onPagination&&this.onPagination(b),this.trigger("thread:pagination",b))},_onPivotPaging:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&(this.state.pagesCount=b.pagesCount,this.state.precise=b.precise,this.state.set("pageIndex",b.pageIndex,{silent:!0}),"function"==typeof this.onPivotPaging&&this.onPivotPaging(b),this.trigger("thread:pivotPaging",b))},_onViewport:function(a){var b=JSON.parse(a.data);b.cid===this.UUID&&("function"==typeof this.onViewport&&this.onViewport(b),this.trigger("thread:viewport",b))},_onExeption:function(a){var b=JSON.parse(a.data);this.trigger("thread:exeption",b)}})},{"../../Core/MVC":6,"../../utilities":151,"./../../models/Zoomdata.Models.js":145,jquery:109,underscore:244}],58:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=(a("backbone"),a("moment")),g=a("../../Core/MVC"),h=g.Model,i=g.View,j=a("colorbrewer"),k=a("../../utilities"),l=a("./../../models/Zoomdata.Models.js"),m=l.State,n=l.Datum,o=a("./../../models/Metric"),p=a("./../DashboardEvents"),q=a("../../collections/ComponentSources"),r=a("../../collections/LibrariesSources"),s=a("../../models/SourceVisualization"),t=a("../../models/ObjectField"),u=g.Events,v=a("./../Thread"),w=a("./../InteractiveElementsMethods"),x=a("./../MetricAccessor"),y=a("./../StateInheritanceManager"),z=a("./../InteractiveElements")(),A=a("./../DeferredPick"),B=a("../../controls"),C=B.VisualizationTooltip,D=(a("../../views/ReferenceLineForm"),a("../../views/ReferenceLineForm/ReferenceLineForm.html"),a("../../Core/MVC/Collection"),a("../../views/ColorKey")),E=a("../../views/ModalWarning"),F=a("../../visualizationControls/ToolbarItem"),G="$Source",H=k.MetricFormatter,I=a("../../views/DataItem"),J=a("../../views/DataDetails"),K=a("../../views/SmallObjectFieldItem"),L=a("../../views/GroupedListView"),M=a("../../views/DashboardDownload"),N=a("../../views/RawDataExport"),O="YYYY-MM-DD HH:mm:ss.SSS",P=a("../../Core/Settings"),Q=P.UNIQUE_TIME_SUPPORT;b.exports=i.extend({defaults:{},remove:function(){this.stopVisualization(),this.removeVisualization(),this.thread.destroy(),this.worker&&this.worker.terminate(),i.prototype.remove.apply(this,arguments)},initialize:function(a,b,c){var d=this;if(this.dfd=null,this.axisLabels=[],this.metrics={},this.progress=0,this.setClearData(),"undefined"==typeof b)throw new Error("dataStream must be defined");if(this.elementsManager=a.elementsManager instanceof z.constructor?a.elementsManager:z,this.interactiveElements=[],this.listenTo(this.elementsManager,"all",function(a,b){var c=d.interactiveElements,e=-1!==c.indexOf(b.element);if(e){var f=b.hasOwnProperty("data")?b.data():b;d.trigger(a,f)}}),"object"!=typeof a.config)throw new Error("config must be defined");if(this.config=a.config,delete a.config,"object"!=typeof a.source)throw new Error("source must be defined");this.source=a.source,delete a.source,this.currentUser=a.user,delete a.user,this.interactiveMode=!!a.interactiveMode,delete a.interactiveMode,this.isRemote="object"==typeof a.host,this.worker=window.Worker&&this.isRemote===!1?new Worker("js/workers/ProcessSocketDataWorker/index.js"):null,this._assemblyMethods(),i.prototype.initialize.apply(this,arguments),this.state=new l.State({streamSourceId:this.config.get("source").sourceId},{config:this.config,objectFields:this.source.objectFields}),this.state.interactiveMode=this.interactiveMode,this.eventDispatcher=p,this.thread=new v({state:this.state,dataStream:b}),this.fields=this.source.objectFields,this.formulas=this.source.formulaList,this.fusedAttributes=this.source.fusedAttrList,this._configureMetricAccessors(),this.time=this.state.time,this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.components=new q(this.config.get("components"),{visId:this.config.get("visId"),name:this.config.get("name"),remote:this.isRemote?this.options.host.remote:null,secure:this.isRemote?this.options.host.secure:!1,apiKey:this.isRemote?this.options.host.apiKey:null}),this.libraries=new r(this.config.get("libs"),{remote:this.isRemote?this.options.host.remote:null,secure:this.isRemote?this.options.host.secure:!1,apiKey:this.isRemote?this.options.host.apiKey:null}),this.inheritanceManager=new y({controller:this}),this.actionList=c,this.tooltip=this.isRemote?null:new C({controller:this}),this.actionListTooltip=new C({controller:this}),this.listenTo(this.formulas,"change",function(a){var b=a.changed.name?a.previous("name"):a.get("name"),c=this.state.calculationIsUsing(b);c&&this.state.updateCalcMetric(a)}),this.listenTo(this.formulas,"add remove",function(){var a=this;this._configureMetricAccessors(),e.each(this.metrics,function(b){var c=Array.isArray(b)?b:[b];c.forEach(function(b){b._updateDomain(a.data)})})})},getVisualizationState:function(){return this.state},_configureMetricAccessors:function(){var a=this,b=a.config.get("variables"),c=this.metrics={},f=this.fields;d(b).each(function(a,b){"multi-metric"===b.type&&(c[b.name]=[])}),this.state.metrics.each(function(d){var g=d.get("name"),h=d.get("label"),i=e.where(b,{name:h})[0],j=i?i.type:"metric",k=d.isNone()?f.noneField:d.isCount()?a._getVolumeMetricField():f.findWhere({name:g})||a.formulas.findWhere({name:g});"multi-metric"===j?c[h]instanceof Array?c[h].push(new x(d.toJSON(),k.toJSON(),!0)):c[h]=[new x(d.toJSON(),k.toJSON(),!0)]:c[h]=new x(d.toJSON(),k.toJSON())}),this._controller&&(this._controller.metrics=this.metrics)},_onGroupByChange:function(a){var b=this.fields.findWhere({name:a.getAttribute()}),c="undefined"!=typeof a.changed.name,d=!!this.state.getGroupByTime();if(c&&"TIME"===b.get("storageConfig").type){var e=this.state._getDefaultTimeTrendStep(b.get("name"));this.state.set({timeTrendStep:e})}else d||this.state.unset("timeTrendStep");this.clearVisualization(),this.restartVisualization(),this.updateColorConfiguration()},_initColors:function(a){var b,c=a.colors.length||a.colorNumb;"range"!==a.legendType&&a.colorSet&&(2>c&&(c=2),2===c?(b=j[a.colorSet][3],b=[b[0],b[2]]):b=j[a.colorSet][c],a.colors=a.colors||b)},_getVolumeMetricField:function(){return new t(this.source.get("volumeMetric"))},_onMetricChange:function(a){function b(a,b){var c=e.find(a,function(a){var c=a.metric.name===("undefined"!=typeof b.changed.name?b.previous("name"):b.get("name"))&&a.metric.func===("undefined"==typeof b.changed.func&&"count"!==b.changed.name?b.get("func"):b.previous("func"));return c});c.setAccessTo(b.toJSON(),g.toJSON())}var c=a.get("label"),d=a.get("name"),f=this.metrics[c],g=a.isNone()?this.fields.noneField:a.isCount()?this._getVolumeMetricField():this.fields.findWhere({name:d})||this.formulas.findWhere({name:d});delete f.domainValue,f instanceof Array?b(f,a):f.setAccessTo(a.toJSON(),g.toJSON()),this.restartVisualization()},_onMetricReset:function(){this.restartVisualization()},_onCustomVariablesChange:function(){this.eventDispatcher.trigger("undo:saveState")},_onMetricAdd:function(a){var b=a.get("label"),c=a.get("name"),d=this.metrics[b],e=a.isCount()?this._getVolumeMetricField():this.fields.findWhere({name:c});d instanceof Array||(d=[].concat(d)),d.push(new x(a.toJSON(),e.toJSON())),this.restartVisualization()},_onMetricRemove:function(a){var b=a.get("label"),c=a.get("func"),d=a.get("name"),f=this.metrics[b]instanceof Array?this.metrics[b]:[].concat(this.metrics[b]),g=e.find(f,function(a){return a.metric.name===d&&a.metric.func===c});g&&f.splice(f.indexOf(g),1),this.restartVisualization()},_onFiltersAdd:function(a){this.restartVisualization()},_onFiltersRemove:function(a){var b=a.get("path"),c=this.fields.findWhere({name:b});c&&"TIME"===c.get("storageConfig").type&&u.trigger("timeFilterRemoved",{cid:this.UUID,filters:[a.toJSON()]}),this.restartVisualization()},_onFiltersChange:function(a){var b,c=this.fields;a instanceof Array||(a=[a]),b=a.map(function(a){return"function"==typeof a.toJSON?a.toJSON():a}).filter(function(a){var b=c.findWhere({name:a.path});return b&&"TIME"===b.get("storageConfig").type}),b.length&&u.trigger("timeFilterApplied",{cid:this.UUID,filters:b}),this.restartVisualization()},_onMessage:function(a){"function"==typeof this._controller.processData?(this.data=a,this._controller.processData(a,this.thread.progress())):this.processSocketData(a)},_onNoDataFound:function(){this.clearVisualization(),this._controller.onNoDataFound()},_onStartFromTimeDone:function(){this.setClearData()},_assemblyMethods:function(){e.extend(this,new w)},_removeAxisLabels:function(){this.trigger("labels:remove")},_createAxisLabel:function(a){var b=this,c=this.state.groupBy,e=this.state.config.get("variables"),f=e.filter(function(b){return b.name===a.picks})[0],g={};a.disabledAxis=!!this.interactiveMode,!f||"multi-group"!==f.type&&"group"!==f.type?this.trigger("label:create",a):(f.config&&(g=JSON.parse(f.config)),
c.each(function(e,h){var i,j=a.types||g.groupTypes;a.popoverTitle?(i=a.popoverTitle,c.length>1&&(i+=" "+(h+1))):i=e.getLabel()||"Group "+(h+1),j&&j[h]?j=j[h].split(" "):"time"===f.groupType&&(j=["TIME"]),b.trigger("label:create",d.extend({},a,{picks:e,popoverTitle:i,types:j}))}))},_onFilterAll:function(a){a.UUID!==this.UUID&&this._controller&&this._controller.filters.add(a.data)},_onUnfilterAll:function(a){a.UUID!==this.UUID&&this._controller&&this._controller.filters.remove(a.data)},setVisualization:function(a,b,c,d){var f=this,g=new s(this.state.config.toJSON()),h=this.source.visualizations,i=h.findWhere({visId:a.get("visId")});g.attributes.source.filters=this.state.filters.toJSON(),a&&(a.attributes.source.filters=this.state.filters.toJSON(),a.attributes.source.date=g.attributes.source.date),i.setDefaultGroupBy({source:this.source});var j=new m(this.state.toJSON(),{config:g,objectFields:this.source.objectFields,oldTimeWindowScale:this.state.time.get("timeWindow"),time:this.state.time.toJSON(),interactiveMode:this.interactiveMode,customState:this.state.custom,divergingColorRange:this.state.divergingColorRange}),k=this.state.get("timestampField"),l=b&&c?c:new m(this.state.toJSON(),{config:a,objectFields:this.source.objectFields,time:k?this.state.time.toJSON():null,interactiveMode:this.interactiveMode,divergingColorRange:this.state.divergingColorRange});l.font=this.state.font;var n=this.state.colorDataObj&&this.state.colorDataObj.get("colors");d&&l.filters.reset(d,{silent:!0});var o=e.clone(j.config.attributes.variables),p=e.clone(l.config.attributes.variables);j.groupBy.reset(this.state.groupBy.toJSON(),{silent:!0}),j.metrics.reset(this.state.metrics.toJSON(),{silent:!0}),a&&(this.config.set(a.toJSON(),{silent:!0}),this.config.sourceId=g.sourceId,j.config.attributes.variables=o,l.config.attributes.variables=p),this.stopVisualization(),this.removeVisualization();var q=this.state.time.toJSON();this.state=l,this.config.set("variables",p,{silent:!0}),this.thread.tuneTo({state:this.state,config:this.config}),this.time=this.state.time,this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.libraries.reset(this.config.get("libs")),this.components.reset(this.config.get("components")),this.components.setVisId(this.config.get("visId")),this.components.setVisName(this.config.get("name")),b||this.inheritanceManager.merge({oldState:j,oldConfig:g,oldTime:q}),this._configureMetricAccessors(),this.initColorKey(),this.loadVisualization().done(function(){f.initVisualization(),f.startVisualization(),n&&f.state.colorDataObj&&f.state.colorDataObj.set("colors",n),f.trigger("visualization:change")})},applyEvents:function(){var a=this;this.listenTo(u,"visualization:showpopup",a.showPopup),this.listenTo(this.thread,"thread:message",this._onMessage),this.listenTo(this.thread,"thread:start",this._onStart),this.listenTo(this.thread,"thread:error",this._onStreamError),this.listenTo(this.thread,"thread:notDirtyData",this._onNotDirtyData),this.listenTo(this.thread,"thread:dirtyData",this._onDirtyData),this.listenTo(this.thread,"thread:noData",this._onNoDataFound),this.listenTo(this.thread,"thread:pivotPaging",this._onPivotPaging),this.listenTo(this.thread,"thread:startFromTimeDone",this._onStartFromTimeDone),this.listenTo(this.thread,"thread:viewport",this._onViewport),this.listenTo(this.thread,"thread:stop",this._onStop),this.listenTo(this.thread,"thread:exeption",this._onExeption),this.listenTo(this.state,"change",this.restartVisualization),this.listenTo(this.state,"change:clientSort",this.refreshVisualization),this.listenTo(this.state.filters,"add",this._onFiltersAdd),this.listenTo(this.state.filters,"remove",this._onFiltersRemove),this.listenTo(this.state.filters,"add change reset",this._onFiltersChange),this.state.custom.onChange(!1,this._onCustomVariablesChange.bind(this)),this.listenTo(this.state.metrics,"change",this._onMetricChange),this.listenTo(this.state.metrics,"add",this._onMetricAdd),this.listenTo(this.state.metrics,"remove",this._onMetricRemove),this.listenTo(this.state.metrics,"reset",this._onMetricReset),this.listenTo(this.state.groupBy,"change reset",this._onGroupByChange),this.listenTo(u,"restart",function(b){a.startVisualization()}),this.listenTo(u,"zd_controller:filterAll",this._onFilterAll),this.listenTo(u,"zd_controller:unfilterAll",this._onUnfilterAll),this.listenTo(u,"actionList:closed",this._onActionListHide),this.listenTo(u,"widget:fullscreen",this._onFullscreen),this.listenTo(u,"widget:fullOff",this._offFullscreen),this.listenTo(u,"actionList:action:info",this._onActionListInfo),this.listenTo(u,"actionList:action:trend",this._onActionListTrend),this.listenTo(u,"actionList:action:filterAll",this._onActionListFilterAll),this.listenTo(u,"actionList:action:unFilterAll",this._onActionListUnFilterAll),this.listenTo(u,"actionList:action:filter",this._onActionListFilter),this.listenTo(u,"actionList:action:zoom",this._onActionListZoom),this.listenTo(u,"actionList:action:search",this._onActionListSearch),this.listenTo(u,"actionList:action:exclude",this._onActionListExclude),this.listenTo(u,"actionList:action:drop",this._onActionListDrop),this.on("resize",this._onResize)},muteEvents:function(){this.stopListening(u,"visualization:showpopup",this.showPopup),this.stopListening(this.thread,"thread:message",this._onMessage),this.stopListening(this.thread,"thread:start",this._onStart),this.stopListening(this.thread,"thread:error",this._onStreamError),this.stopListening(this.thread,"thread:notDirtyData",this._onNotDirtyData),this.stopListening(this.thread,"thread:dirtyData",this._onDirtyData),this.stopListening(this.thread,"thread:pivotPaging",this._onPivotPaging),this.stopListening(this.thread,"thread:noData",this._onNoDataFound),this.stopListening(this.thread,"thread:startFromTimeDone",this._onStartFromTimeDone),this.stopListening(this.thread,"thread:viewport",this._onViewport),this.stopListening(this.thread,"thread:stop",this._onStop),this.stopListening(this.thread,"thread:exeption",this._onExeption),this.stopListening(this.state,"change",this.restartVisualization),this.stopListening(this.state,"change:clientSort",this.refreshVisualization),this.stopListening(this.state.filters,"add remove change reset",this.restartVisualization),this.stopListening(this.state.metrics,"change",this._onMetricChange),this.stopListening(this.state.metrics,"add",this._onMetricAdd),this.stopListening(this.state.metrics,"remove",this._onMetricRemove),this.stopListening(this.state.metrics,"reset",this._onMetricReset),this.stopListening(this.state.groupBy,"change reset",this._onGroupByChange),this.stopListening(u,"zd_controller:filterAll"),this.stopListening(u,"zd_controller:unfilterAll"),this.stopListening(u,"actionList:closed",this._onActionListHide),this.stopListening(u,"widget:fullscreen",this._onFullscreen),this.stopListening(u,"widget:fullOff",this._offFullscreen),this.off("resize",this._onResize),this.stopListening(u,"actionList:action:info",this._onActionListInfo),this.stopListening(u,"actionList:action:trend",this._onActionListTrend),this.stopListening(u,"actionList:action:filterAll",this._onActionListFilterAll),this.stopListening(u,"actionList:action:unFilterAll",this._onActionListUnFilterAll),this.stopListening(u,"actionList:action:filter",this._onActionListFilter),this.stopListening(u,"actionList:action:zoom",this._onActionListZoom),this.stopListening(u,"actionList:action:search",this._onActionListSearch),this.stopListening(u,"actionList:action:exclude",this._onActionListExclude),this.stopListening(u,"actionList:action:drop",this._onActionListDrop),this._controller&&(d(this._controller.element).off("resize"),this._controller.element.resize=null)},_onActionListInfo:function(a){function b(){j.thread.on("thread:message",g),j.thread.on("thread:timeline",i);var a="";F||(a="zd-infopopup-hide-details");var b=new B.InfoPopup({customClass:a}),d=null;F&&"FUSION"!==x&&(d=[{label:"Details",type:"success",callback:function(){b.hide(),c()}}]),b.setActions(d).render(E.render().$el,y).position({of:l,my:"left top-30",at:"center center",collision:"flipfit flipfit"}),b.onHide=function(){j.thread.off("thread:message",g),j.thread.off("thread:timeline",i),E.remove()}}function c(){var a="date",b=new M({$target:j.$el}),c="",f=j.currentUser.get("groupRoles"),g=e.contains(f,"ROLE_RAW_DATA_ACCESS"),i=[];k.MODE.WIDGET!==k.mode()&&g&&i.push({title:"Export Raw Data",className:"zd btn btn-success export",tagName:"button",icon:a,attr:{value:"raw",spinnerTittle:"Exporting Raw Data",iconClass:a},callback:function(){var a=l.$el.find(".export"),c=new N({controller:j,dataItems:j.data,currentSource:j.source,state:j.state,restrictions:F.options.restrictions,config:new h({defaults:{sortDir:"asc",limit:-1,rangeType:"ALL"}}),spinner:{hide:b.hideSpinner,show:b.showSpinner}});c.downloadRawData(a).complete(function(){c.remove(),b.remove()})}});var l=new B.PalettePopup({modal:!0,wide:!0,autohide:!1,customClass:"details-modal",showPointer:!1,handlers:i}),m=s?p[1]:p[0];A?c=y:m&&(c=t.findWhere({name:m}).get("label")+": "+q.group),l.onHide=function(){F.remove()},l.render(F.render().$el,c).position({of:d(".zd-main-section"),my:"center top",at:"center top",collision:"flip flip"})}function g(a){E.update(a)}function i(){E.render()}var j=this,l=a.$at,m=a.UUID,n=a.getter;if(m===this.UUID){delete a.$at,delete a.UUID,delete a.getter,a=null;var o=j.state,p=j.state.groupBy.getAttributes().filter(function(a){return"none"!==a}),q=n(),r=p[0],s=p.length>1,t=j.fields,u=o.time.get("fromTime"),v=o.time.get("toTime"),w=o.get("timeTrendStep"),x=j.source.get("type"),y="",z=k.getDateObjFromString,A=o.getGroupByTime();if(!q.current&&s&&0===q.group.indexOf(" ")&&(q.group=q.group.substring(1,q.group.length)),A&&r){var C,D=(j._controller.fields.findWhere({name:r}).get("timestampGranularity"),p.indexOf(A.name));C=s&&0===D?q.key:q.group,u=z(C,!0),v=f.utc(u).endOf(w).valueOf()+1,y=k.time.format(u,w)}else q.key&&(y=q.key+", "),q.filters||(y+=q.group);var E=new I({state:j.state,fields:t,data:q}),F=null;F=new J({state:j.state,fields:t,data:q,sourceType:x,fromTime:u,toTime:v}),b()}},_onActionListTrend:function(a){function b(a){function b(){var b,e=d.filters;f.forEach(function(a){if(b=e.findWhere({path:a.path})){var c=b.hasAttribute(a.value[0]);if(c)b.set(a,{silent:!0});else{var d=b.operation,f=a.operation;d===f&&b.addAttribute(a.value[0],{silent:!0})}}}),c.setVisualization(a,null,null,f)}var d=c.state,f=[];f=c._getFilters({getter:e,state:d}),a.bootstrap().done(function(){b()}).fail(function(){var a=new B.Notification({type:"error"}),b="Couldn't configure Time Trends visualization.";a.render(b)})}var c=this,d=a.UUID,e=a.getter;if(d===this.UUID){delete a.UUID,delete a.getter,a=null;var f=this.source,g=f.visualizations;f.visualizations.bootstrap().done(function(){if(c._controller.trends){var a=c._controller.trends();a&&b(g.findWhere({visId:a.visId}))}else b(g.findWhere({type:"LINE_CHART"}))})}},_onActionListFilterAll:function(a){var b=this,c=a.UUID,d=a.getter;if(c===this.UUID){delete a.UUID,delete a.getter,a=null;var e=(d(),b.state),f=b.config.get("source").sourceId,g=[];g=this._getFilters({getter:d,state:b.state});var h=e.get("timestampField"),i=e.get("timeTrendStep"),j=this._getFiltersHash(g);b._filteredAll=j,u.trigger("visualization:filterAll",f,b.UUID,g,{timestampField:h,timeTrendStep:i})}},_onActionListUnFilterAll:function(a){var b=this,c=a.UUID,d=a.getter;if(c===this.UUID){delete a.UUID,delete a.getter,a=null;var e=(d(),b.config.get("source").sourceId),f=[];f=this._getFilters({getter:d,state:b.state}),b._filteredAll=null,u.trigger("visualization:unfilterAll",e,b.UUID,f)}},_onActionListFilter:function(a){var b=this,c=a.$at,d=a.UUID,e=a.getter;if(d===this.UUID){delete a.$at,delete a.UUID,delete a.getter,a=null;var f,g,h=e(),i=b.config.get("source").sourceId,j=b.state,k=j.groupBy.getAttributes(),l=[],m=(b.fields,j.get("timeTrendStep"));l=this._getFilters({getter:e,state:b.state}),j.isTimeTrends()&&(f=b.fields.findWhere({name:k[0]}).get("timestampGranularity"),g=new H(m,f).format(h.group));var n=j.get("timestampField");m=j.get("timeTrendStep"),u.trigger("visualization:filter",i,b.UUID,l,c,{timestampField:n,timeTrendStep:m,trendsLabel:g})}},_onActionListZoom:function(a){function b(a){j.forEach(function(a){d.addFilter(a,{silent:!0,trigger:!1})});var b=d.config,e=b.get("type"),f=b.get("source"),g=f.variables,h={name:a.get("name")},l=a.get("form"),n=i.length;l&&(h.form=l),"PIVOT_TABLE"===e?(g["Column Attributes"]=[],g["Row Attributes"]=[h],"TIME"!==a.get("storageConfig").type||d.get("timeTrendStep")||d.set("timeTrendStep","YEAR",{silent:!0})):d.groupBy.at(n-1).setAttribute(a),k.remove(),m.remove(),u.trigger("zoomItem:select"),c.state.trigger("zoomItem:select")}var c=this,d=c.state,e=a.$at,f=a.UUID,g=a.getter;if(f===this.UUID){delete a.$at,delete a.UUID,delete a.getter,a=null;var h=g(),i=d.groupBy.getAttributes().filter(function(a){return"none"!==a}),j=[];if(d.isTimeTrends())return void u.trigger("TimeTrendsZoom",h.group);j=c._getFilters({getter:g,state:d});var k=new B.PalettePopup({customClass:"attributePalette"}),l=function(a){var b=!!a.get("visible"),e=a.get("storageConfig")||{},f=e.type||a.get("type"),g="ATTRIBUTE"===f,h="TIME"===f,k=d.isSupportTimeGroup(a),l=c.isGroupByTimeSupported(),m=h&&l&&k;h&&(a.step=d.get("timeTrendStep"));var n=!1;return j.forEach(function(b){var c=a.get("name");(c===b.path||-1!==i.indexOf(c))&&(n=!0)}),b&&(g||m)&&!n},m=new L({className:"nav nav-tabs nav-stacked",ItemView:K,itemOption:{checkbox:!1},collection:c.fields,selectable:"radio",disabled:function(a){var b=!1,e=a.get("name");if(c.metrics){var f=c.metrics.Metrics;if(f)for(var g in f)if(f.hasOwnProperty(g)){var h=c.metrics.Metrics[g].metric.name;if(e===h)return!0}}var i=d.groupBy.getAttribute(),j=c.fields.findWhere({name:i});if(j){var k=j.get("storageConfig").type,l=a.get("storageConfig").type;"TIME"===k&&"TIME"===l&&d.groupBy.length>1&&(b=!0)}return d.metrics.findWhere({name:e})&&(b=!0),b},groupBy:"type",filter:l,comparator:function(a){return a.get("label")}});k.render(m.render().$el,"Zoom Into"),k.position({of:e,my:"left+20 top-30",at:"center center",collision:"flipfit flipfit"}),c.listenToOnce(m,"select",b)}},_onActionListSearch:function(a){function b(){var a=new B.InfoPopup({customClass:"searchResultsDetails"}),b=null,f=c.fields,h={};f.each(function(a){h[a.get("name")]=a.get("label")});var j=g.View.extend({itemTemplate:"<tr><td><%= name %></td><td><%= value %></td></tr>",tagName:"table",initialize:function(a){g.View.prototype.initialize.call(this,a),e.bindAll(this,"render"),this.data=a.data||{},this.query=a.query||""},pregQuote:function(a){return(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!<\>\|\:])/g,"\\$1")},highlightMatchedWords:function(a){var b=a,c=this.query&&""!==this.query,d='<span class="selected-result">$1</span>',e=typeof b;return"string"===e&&c&&(b=a.replace(new RegExp("("+this.pregQuote(this.query).replace(" ","|")+")","gi"),d)),b},render:function(){var a="";for(var b in this.data)if(this.data.hasOwnProperty(b)){var c=h[b],d=this.highlightMatchedWords(this.data[b]);a+=e.template(this.itemTemplate,{name:c,value:d})}return this.$el.html(a),this}}),k=new j({data:i.metadata,query:i.query});a.setActions(b).render(k.render().$el,"Search Result Detail").position({of:d,my:"left top-30",at:"center center",collision:"flipfit flipfit"}),a.onHide=function(){k.remove()}}var c=this,d=a.$at,f=a.UUID,h=a.getter;if(f===this.UUID){delete a.$at,delete a.UUID,delete a.getter,a=null;var i=h();b()}},_onActionListExclude:function(a){var b=this,c=a.UUID,d=a.getter;if(c===this.UUID){delete a.UUID,delete a.getter,a=null;var f=d(),g=this._getFilters({getter:d,state:b.state,operation:"NOTIN"}),h=null;g.length>1&&(g=[e.last(g)]),f.filters&&f.filters.forEach(function(a){h={editable:!0,operation:"NOTIN",path:a.path,value:[a.value]},a.form&&(h.form=a.form),g.push(h)}),g.forEach(function(a,c){var d=b.state.filters.findWhere({path:a.path,operation:"NOTIN"});if(d){var e=d.get("value");if(-1!==e.indexOf(a.value[0]))return;a.value=e.concat([a.value[0]])}}),b.state.addFilters(g)}},_onActionListDrop:function(a){var b=this,c=a.UUID,e=a.getter,f=a.input,g=a.objectField;if(c===this.UUID){delete a.UUID,delete a.getter,delete a.input,delete a.objectField,a=null;var h=d(f),i=h.attr("data-zd-interactive-type"),j=e(),l="ATTRIBUTE"===g.get("type");if(i)switch(i){case"group":case"multi-group":case"attribute":l&&null!==b.fields.findWhere({name:g.get("name")})&&b.state.groupBy.setAttribute(g.get("name"));break;case"metric":var m=k.isNumericAttributeType,n=m(g.get("type"));if(n&&null!==b.fields.findWhere({name:g.get("name")})){var p=g.get("func"),q=new o({name:g.get("name"),func:p?p.toLowerCase():"avg",type:g.get("type"),label:g.get("label")});b.state.set("volume",q)}}else if("ATTRIBUTE"===g.get("type")&&null!==b.fields.findWhere({name:g.get("name")})){if("LINE_CHART"===b.config.get("type"))return void u.trigger("TimeTrendsZoomIn",j.group);var r=b.state.groupBy.getAttribute(),s={editable:!0,operation:"IN",path:r,value:[j.group]};b.state.addFilter(s,{silent:!0}),b.state.groupBy.setAttribute(g.get("name"))}}},_getFilters:function(a){var b=a.getter(),c=a.state,d=c.groupBy.getAttributes().filter(function(a){return"none"!==a}),e=[],g=null,h=this.fields,i=b.attr||d[0],j=function(b){var d;d=b instanceof Array?b:[b],d.filter(function(a){return"none"!==a.path}).forEach(function(b,d){var i=h.findWhere({name:b.path}),j=[b.value],k=a.operation||"IN";if(i&&"TIME"===i.get("storageConfig").type){var l=c.get("timeTrendStep")||"YEAR",m=l.toLowerCase(),n=f.utc(b.value,O),o=f.utc(n).startOf(m),p=f.utc(n).endOf(m),q=O;switch(m){case"year":q="YYYY";break;case"month":q="MMM YYYY"}j=[o.format(q),p.format(q)],k="BETWEEN"}g={editable:!0,operation:k,label:i.get("label"),path:b.path,value:j},i&&i.get("form")&&(g.form=i.get("form")),e.push(g)})};if(i&&1===d.length&&j({path:i,value:b.group}),b.filters&&j(b.filters),d.length>1){var k=b.key;k.length>1&&0===k.indexOf(" ")&&(b.key=k.substring(1,k.length)),d.forEach(function(a,c){h.findWhere({name:a});0===c&&j({path:a,value:b.key}),1===c&&j({path:a,value:b.group})})}return e},_getFiltersHash:function(a){var b="";return b=a.map(function(a){return a.path+"_"+a.value.join()}).join()},updateWidgetLabel:function(a,b){d(this.el).parent(".widgetBody").find(".widgetLabel."+a)},initVisualization:function(){var a=this,b=(this.components.getComponentsNamespace(),k.MODE.WIDGET===k.mode());this._controller&&this._controller.toolbar().remove(),this.axisLabels=[],this.actionList&&(this.actionList.gestureTimeOut=null),this._controller={element:a.el,addVisState:function(a){this.visState=a.state,this.update=function(b,c){a.setData(b)},this.resize=function(a,b){this.visState.set("width",a).set("height",b)},this.clear=function(){}},menu:{show:function(b){var c=[],d={top:0,left:0};if(b.x&&b.y)d.left=b.x,d.top=b.y;else{if(!b.event)throw new Error("Menu position is unspecified.");d.left=b.event.clientX,d.top=b.event.clientY}a.trigger("interaction",b.data()),a.source.visualizations.bootstrap().done(function(){c=a.assemblyInteractiveElementActions({getter:b.data,menuConfig:b.menu,hiddenActions:b.hide}).actions,a.trigger("visualization:actionList:open",{at:d,actions:c})})},hide:function(b){a.trigger("visualization:actionList:close")}},tooltip:{show:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}b.data&&(c.getter=function(){return b.data},c.contentGetter=null),b.content&&(c.contentGetter=function(){return b.content},c.getter=null),b.color&&(c.color=b.color),a.tooltip.show(c)}},update:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}b.data&&(c.getter=function(){return b.data}),b.color&&(c.color=b.color),a.tooltip.update(c)}},move:function(b){var c={};if(a.tooltip){if(b.x&&b.y)c.at={left:b.x,top:b.y};else{if(!b.event)throw new Error("Tooltip position is unspecified.");c.event=b.event}a.tooltip.update(c)}},hide:function(){a.tooltip&&a.tooltip.hide()}},filters:{add:function(b){var c=a.state;return Array.isArray(b)?c.addFilters(b):c.addFilter(b),this},remove:function(b){var c=a.state;return c.removeFilter(b),this},addToAll:function(b){var c=a.UUID;return u.trigger("zd_controller:filterAll",{UUID:c,data:b}),this},removeFromAll:function(b){var c=a.UUID;return u.trigger("zd_controller:unfilterAll",{UUID:c,data:b}),this}},"switch":function(b){function c(){var b=a.source.visualizations;h=b.findWhere({name:f})||b.findWhere({type:e}),h.fetch().done(function(){d()})}function d(){a.setVisualization(h),g&&a._controller.filters.add(g,{silent:!0})}var e=b.type||b,f=b.name||b,g=b.filters,h=null;if(!e)throw new Error("Visualization type is unspecified.");return a.source.visualizations.bootstrap().done(function(){c()}),this},eventDispatcher:this.eventDispatcher,utilities:k,Datum:n,state:this.getVisualizationState(),config:this.getSourceConfiguration(),scope:{},labels:this.axisLabels,metrics:this.metrics,fields:this.fields,volumeMetric:this.source.get("volumeMetric"),pickAttribute:function(b){var c=A.Picker();return a.trigger("attributePicker:show",c,b),c.result()},pickMetric:function(b){var c=A.Picker();return a.trigger("metricPicker:show",c,b),c.result()},logScaleEnabled:this.logScaleEnabled,showWarning:function(a){a.description=k.htmlEntities(a.description),this.warningViews=this.warningViews||[];var b=this.warningViews.splice(0,1)[0];b&&b.close();var c=new E(a);this.warningViews.push(c),c.showup()},onAdd:d.noop,onRemove:d.noop,onChange:d.noop,update:d.noop,onNoDataFound:d.noop,resize:d.noop,onStreamError:d.noop,onViewport:d.noop,onExeption:d.noop,onNotDirtyData:d.noop,onDirtyData:d.noop,onPivotPaging:d.noop,onStart:d.noop,onStop:d.noop,registerInteractiveElements:function(b,c,d,f){var g="object"==typeof c,h=g?c:d,i=h,j={};h&&h.tooltip&&a.tooltip&&(j.tooltip=a.tooltip,j.actionListTooltip=a.actionListTooltip,j.tooltip.originalConfig=h.tooltip,i=e.extend({},h,j)),i.interactive=this.isInteractive(),g?a.registerInteractiveElements(b,i,d,f):a.registerInteractiveElements(b,c,i,f)},releaseInteractiveElement:function(b,c){return a.releaseInteractiveElement(b,c)},registered:function(b){return a.elementsManager.registered(b)},requestData:function(){return a.thread.request_data.bind(a.thread)},isInteractive:function(){return this.state.interactiveMode},customReadyStatusDelay:!1,setVisualization:function(b,c){a.setVisualization(b,c)},createAxisLabel:function(b){a._createAxisLabel(b)},removeAxisLabels:function(){a._removeAxisLabels()},toolbar:function(){var c=a._controller.toolbar;if(!c.$_toolbar){c.$_toolbar=d('<div class="zd-visualization-toolbar navbar"><div class="navbar-inner"><div class="container"><ul class="nav pull-left"/><ul class="nav pull-right"/></div></div></div>').prependTo(d(a._controller.element).parent());var e=function(){return c.$_toolbar.find(".nav.pull-left")},f=function(){return c.$_toolbar.find(".nav.pull-right")};c.append=function(g,h){if(g.item&&void 0!==g.item.availableForMode&&"function"==typeof g.item.availableForMode){var i=g.item.availableForMode(k.mode());if(!i)return}var j=g.side||g.item&&g.item.side||"left",l=g.el||g.item&&g.item.render().$el;if(!l){var m=new F(g);l=m.render().$el}"left"===j?h?e().prepend(l):e().append(l):h?f().prepend(l):f().append(l),g.item&&g.name&&(c._items||(c._items={}),c._items[g.name]=g.item);var n=a.$el.parent().find(".zd-visualization-toolbar");return b&&"list"!==g.item.icon?d(l).remove():n.length>0?d(a._controller.element).css({height:"87%"}):d(a._controller.element).css("height","calc(100% - 42px)"),c},c.get=function(a){return c._items&&c._items[a]||null},c.remove=function(){c._items=null,c.$_toolbar.remove(),c.$_toolbar=null}}return c},getVisualizationName:function(){return a.getVisualizationName()},stop:function(){a.stopVisualization()},updateColorConfig:function(){a.updateColorConfiguration()}},this.updateColorConfiguration(),this.state.config.set("clientSort",this.state.get("clientSort"));var c=e.filter(this.config.get("controls"),function(a){return a.indexOf("ToolbarItem")>=0?a:null});if(c.length>0){var f=[];c.forEach(function(b){if(window.Zoomdata.VisualizationToolbar[b]){var c=new window.Zoomdata.VisualizationToolbar[b]({controller:a._controller});c.name=b,f.push(c)}}),f=e.sortBy(f,function(a){return a.order||Number.MAX_VALUE}),f.forEach(function(b){a._controller.toolbar().append({item:b,name:b.name})})}this._controller.variables=this.config.get("source").variables,this.components.where({type:"text/javascript"}).forEach(function(b){b.execute(a._controller,window.Zoomdata)}),this._controller.update=this._controller.update||d.noop,this._controller.onAdd=this._controller.onAdd||d.noop,this._controller.onRemove=this._controller.onRemove||d.noop,this._controller.onChange=this._controller.onChange||d.noop,this._controller.clear=this._controller.clear||d.noop,this._controller.resize=this._controller.resize||d.noop,this._controller.onStreamError=this._controller.onStreamError||d.noop,this._controller.onNotDirtyData=this._controller.onNotDirtyData||d.noop,this._controller.onDirtyData=this._controller.onDirtyData||d.noop,this._controller.onPivotPaging=this._controller.onPivotPaging||d.noop,this._controller.onStart=this._controller.onStart||d.noop,this._controller.onViewport=this._controller.onViewport||d.noop,this._controller.onExeption=this._controller.onExeption||d.noop;var g=this.config.get("type");if(b&&"PIVOT_TABLE"!==g&&this._controller.toolbar().remove(),"PIVOT_TABLE"===g){var h=e.last(this.inheritanceManager.history).state.groupBy,i=[];h&&h.length>0&&(h.forEach(function(a){i.push(a.get("sort"))}),this.state.set("_pivotToSort",i,{silent:!0}))}this.applyEvents(),this.trigger("visualization:initialized")},removeVisualization:function(){var a=this.config.get("visId"),b={},c=d("script"),e=this.$el.parents(".widgetBody, .fullScreenContainer").eq(0);this.$el.appendTo(e),this.components.each(function(e){if("text/javascript"===e.get("type")){var f=e.get("id");c.each(function(c,e){e.getAttribute("src")&&e.getAttribute("src").indexOf(a)>-1&&e.getAttribute("src").indexOf(f)>-1&&(b[f]=d(e))})}}),e.children().not(".widgetContent").remove(),e.removeAttr("id"),this.clearVisualization(!0),this.setClearData(),this._controller&&(d(this._controller.element).children().not(".zd-legend").remove(),this._controller.labels.length>0&&this._controller.labels.forEach(function(a){a.remove(),a=null})),this.$el.removeAttr("style data-visid"),this.muteEvents(),this.trigger("visualization:removed");for(var f in b)b.hasOwnProperty(f)&&b[f].remove()},updateColorConfiguration:function(){var a,b,c=this,d=c.state.groupBy,f=["multi-group","group"],g=["box-plot-metric","metric","multi-metric"],h=this.state.colorDataObj;h&&("color"===h.get("metricType")?a=!0:b=!0),this.config.get("variables").forEach(function(h){var i,j=h.type;e.contains(f,j)?(i=JSON.parse(h.config||"{}"),i.groupColorSet&&d.models.length>0&&(a||c.updateColorGroup(h))):e.contains(g,j)&&"color"===h.metricType&&(b||c.updateColorMetric(h))}),this.initColorKey(),this._updateMetricsDomain(this.data)},updateColorGroup:function(a){var b=JSON.parse(a.config||"{}"),c=this.state.groupBy.models[b.colorGroupIndex];"none"!==c.getAttribute()&&(c.get("groupColorSet")||(c.set("groupColorSet",b.groupColorSet),c.set("autoShowColorLegend",b.autoShowColorLegend)),"undefined"==typeof c.get("autoColor")&&c.set("autoColor",!1),this.state.colorDataObj=c,this.updateColorGroupField(),this.stopListening(this.state,"change",this.updateColorGroupField).listenTo(this.state,"change",this.updateColorGroupField),this.autoShowColorLegend=this.state.colorDataObj.get("autoShowColorLegend"),this.colorLegendPosition=this.state.colorDataObj.get("colorLegendPosition"),this.colorLegendPosition&&(this.colorLegendPosition=JSON.parse(this.colorLegendPosition)))},updateColorGroupField:function(){var a,b=this.state.colorDataObj;b&&!b.isMetric()&&(a=this.fields.findWhere({name:b.get("name")}),b._setField(a))},updateColorMetric:function(a){var b,c,e=this,f=[];c=a,this.autoShowColorLegend=c.autoShowColorLegend,c.colorLegendPosition&&(this.colorLegendPosition=JSON.parse(c.colorLegendPosition)),"string"==typeof c.colors&&(c.colors=JSON.parse(c.colors)),c.savedColors&&"string"==typeof c.savedColors&&(c.savedColors=JSON.parse(c.savedColors)),c.colors&&c.colors.length&&(b=c.colors.length),b=b||c.colorNumb||0,c.colors&&d.each(c.colors,function(a,b){c.savedColors&&"string"==typeof c.savedColors[a]?f.push(c.savedColors[a]):f.push(b.color||b)}),this.state.divergingColorRange||(this.state.divergingColorRange="gradient"),this.state.metrics.each(function(d){var g,h=d.get("label"),i=a.type;h===c.name&&(e.state.colorDataObj&&e.state.colorDataObj.get("label")===h||(e.state.colorDataObj=d),e.state.colorNumb=b,g=e.metrics[c.name][0]||e.metrics[c.name],g.metric.colors&&"string"!=typeof g.metric.colors?e.state.legendType=e.state.colorDataObj.get("legendType")||g.metric.legendType:(e.state.legendType=c.legendType||"range",g.setColorRangeType(e.state.divergingColorRange),f.length?g.metric.colors=f:"string"==typeof g.metric.colors?g.metric.colors=JSON.parse(g.metric.colors):g.metric.colors=[],g.domainValue=c.domain),e.metrics[c.name][0]&&(e.state.divergingColorRange=null,g.objectFields=[],e.source.objectFields.forEach(function(a){var b=a.get("storageConfig")||{},d=b.type||a.get("type"),e=b.distinctCount;("FORMULA"===d||-1!==c.attributeType.indexOf(d)||e)&&g.objectFields.push(a),g.objectFields.length>g.metric.colors.length&&g.metric.colors.push("#b2df8a")}),g.metric.colors.splice(g.objectFields.length,g.metric.colors.length),g.metric.colors.length&&(e.state.colorNumb=g.metric.colors.length)),g.metric.colorsData=c.colors||c.savedColors,e.colorKey&&(e.colorKey.multiMetric="multi-metric"===i),e._initColors(g.metric))})},initColorKey:function(){var a;return this.colorKey instanceof D?(a=this.colorKey,this.colorKey.setElement(this.getColorKeyEl())):(a=new D({el:this.getColorKeyEl(),controller:this,isDraggable:!0,autoShow:this.autoShowColorLegend,colorLegendPosition:this.colorLegendPosition,showCloseBtn:!0}),this.colorKey=a),a},getColorKeyEl:function(){var a=this.$el.siblings(".zd-legend");return a.length||(a=d('<div class="zd-legend" style="display: none;"></div>').appendTo(this.$el.parent())),a},loadVisualization:function(){var a=this,b=this.components.getComponentsNamespace();return this.dfd=d.Deferred(),"undefined"==typeof window.Zoomdata&&(window.Zoomdata={}),window.Zoomdata.Visualizations instanceof Array?(a.trigger("visualization:loaded"),this.dfd.resolve()):(window.Zoomdata.Visualizations=window.Zoomdata.Visualizations||{},window.Zoomdata.Visualizations[b]=window.Zoomdata.Visualizations[b]||{},this.trigger("visualization:loading"),this.$el.attr("data-visid",this.config.get("visId")).removeAttr("id"),this.libraries.load().done(function(){a.components.load().done(function(){a.fields.bootstrap().done(function(){a.trigger("visualization:loaded"),a.dfd.resolve()})}).fail(function(a,b,c){throw new Error(c)})}).fail(function(a,b,c){throw new Error(c)})),this.dfd.promise()},setUUID:function(){this.thread.setUUID(),this.UUID=this.thread.getUUID(),this.config.set("id",this.UUID),this._controller.UUID=this.UUID},applyScope:function(){function a(a,b,c){var d="";return a.forEach(function(e,f){d+="#"+b+c+" "+e+(f!==a.length-1?",":"")}),d}var b,c=this,f=this._controller.state.config.attributes.components,g=document.styleSheets,h=null,i="uuid_",j=document.createElement("style"),k=c.config.attributes.visId;if(document.body.appendChild(j),b=j.scoped+"",j.parentNode.removeChild(j),b){var l=d('style[data-visid="'+k+'"]');return l.appendTo(c.$el),l.attr("scoped",""),void l.scopedPolyFill()}f.forEach(function(b){try{if("text/css"===b.type){for(var d=0,f=g.length;f>d;d++){var j=g[d],l=b.id;if(k&&j.ownerNode.attributes["data-visid"]&&k===j.ownerNode.attributes["data-visid"].value&&l&&j.ownerNode.attributes["data-componentid"]&&l===j.ownerNode.attributes["data-componentid"].value&&void 0===j.UUID){
h=j;break}}if(h){var m=c._controller.UUID;for(c.$el.attr("id",i+m),d=0,f=h.cssRules.length;f>d;d++){var n,o=h.cssRules?h.cssRules[d].selectorText.split(","):h.rules[d].selectorText.split(","),p=a(o,i,m);h.cssRules?(h.cssRules[d].selectorText=p,n=e.extend({},h.cssRules[d]),h.removeRule?h.removeRule(d):h.deleteRule(d)):(h.rules[d].selectorText=p,n=e.extend({},h.rules[d]),h.removeRule?h.removeRule(d):h.deleteRule(d)),h.insertRule?h.insertRule(n.cssText,d):h.addRule(p,n.style.cssText,d)}}}}catch(q){throw console.log("Scoped error",q),q}})},startVisualization:function(){return this.setUUID(),this._controller.delayedStart&&this._controller.delayedStart===!0?void 0:(this.thread.start(),this.updateColorGroupField(),this)},stopVisualization:function(){return this.thread.stop(),this.trigger("visualization:stop",this),u.trigger("visualization:stop",this),this},restartVisualization:function(){this.setClearData(),this.stopVisualization(),this.startVisualization()},refreshVisualization:function(){var a=this.state.get("clientSort"),b=this.state.metrics.at(0);b&&a&&this.state.config.set("clientSort",a);var c=this.data;"function"==typeof this._controller.processData&&this._controller.processData(c,this.progress),this.updateColorGroupField(),this._updateMetricsDomain(c),this.processSocketData(c,this.progress)},clearVisualization:function(a){a||(this.setClearData(),this.refreshVisualization()),this._controller?("function"==typeof this._controller.clear&&this._controller.clear(),this.releaseAllInteractiveElements()):this.dfd&&this.dfd.reject(),this.trigger("visualization:clear",this),u.trigger("visualization:clear",this)},hideInteractiveElements:function(){this._controller&&this._controller.menu.hide()},getControlsList:function(){return this.getSourceConfiguration().controls||[]},getSourceConfiguration:function(){return this.config.toJSON()},updateVisualizationState:function(a){return this.state.set(a),this},setClearData:function(){this.data=[],this.worker&&this.worker.postMessage("data:clear")},processSocketData:function(a){var b=this,c=this.worker,d=this._controller.state.groupBy.filter(function(a){return"none"!==a.get("name")}).map(function(a){return a.get("sort")});if(c)c.onmessage=function(a){if(a.data.data){b.data=a.data.data;var c=JSON.parse(JSON.stringify(b.data));b._updateMetricsDomain(c),b._controller.update(c,b.thread.progress(),{originalData:a.data.original_data}),b.trigger("visualization:dataUpdate")}else a.data.type&&"log"===a.data.type&&console.log("WebWorker:",a.data.info)},c.postMessage({data:a,oldData:this.data,groupSort:d});else{if(a instanceof Array&&a.length>0){var e,f=[],g={},h={},i=this.data;if(0===i.length)f=a;else if(0===a.length)f=i;else{i.forEach(function(a){var b=Array.isArray(a.group)?a.group.join():a.group;g[b]=a}),a.forEach(function(a){var b=Array.isArray(a.group)?a.group.join():a.group;h[b]=a});for(e in h)h.hasOwnProperty(e)&&(-1===h[e].current.count?g[e]&&delete g[e]:g[e]=h[e]);for(e in g)g.hasOwnProperty(e)&&f.push(g[e])}this.data=this._sortData(f),g=null,h=null}var j=JSON.parse(JSON.stringify(this.data));this._updateMetricsDomain(j),this._controller.update(j,this.thread.progress(),{originalData:a}),b.trigger("visualization:dataUpdate")}},_sortData:function(a){var b=this.state.get("clientSort"),c=[];if(b&&this.state.metrics.size()>0){var d=null,e=this.metrics[this.state.metrics.at(0).get("label")];switch(e instanceof Array&&(e=e[0]),b){case"valueDescending":d=function(a,b){var c=e.raw(b)-e.raw(a);if(0===c){var d=a.group.join?a.group.join(""):a.group,f=b.group.join?b.group.join(""):b.group;return d.localeCompare(f)}return c};break;case"valueAscending":d=function(a,b){var c=e.raw(a)-e.raw(b);if(0===c){var d=a.group.join?a.group.join(""):a.group,f=b.group.join?b.group.join(""):b.group;return f.localeCompare(d)}return c};break;case"alphabetical":d=function(a,b){var c=a.group.join?a.group.join(""):a.group,d=b.group.join?b.group.join(""):b.group;return c.localeCompare(d)};break;case"reverseAlphabetical":d=function(a,b){var c=a.group.join?a.group.join(""):a.group,d=b.group.join?b.group.join(""):b.group;return d.localeCompare(c)};break;default:d=null}c=a.sort(d)}else c=a;return c},_updateMetricsDomain:function(a){function b(e){d.each(e,function(d,e){e instanceof Array?b(e):(e._updateDomain(a,c.state.colorNumb),c.state.colorMetricDomain=e.domain())})}var c=this;b(this.metrics),this.state.colorDataObj&&!this.state.colorDataObj.isMetric()&&this.state.colorDataObj._updateDomain(a)},_updateMetricsDivergingColorRange:function(a){function b(c){d.each(c,function(c,d){d instanceof Array?b(d):d.setColorRangeType(a)})}this.state.divergingColorRange=a,b(this.metrics)},calculateBottomMargin:function(a){var b;switch(a){case"large":b=10;break;case"medium":b=40;break;case"small":b=50}return b},_onResize:function(){var a=d(this._controller.element),b=a.parents(".widget, .fullScreenContainer").eq(0),c=b.width(),e=b.height(),f=a.width(),g=a.height(),h=k.getWidgetSizeClass(c,e),i=this.$el.parent().find(".zd-visualization-toolbar"),j=0;i.length>0&&(j=this.calculateBottomMargin(h)),a.trigger("resize",[f,g]),f=a.width(),g=a.height()-j,this.trigger("legend:reposition"),this._controller.resize(f,g,h)},_onFullscreen:function(){this.hideInteractiveElements()},_offFullscreen:function(){this.hideInteractiveElements()},_onStreamError:function(a){this._controller.onStreamError(a)},_onStart:function(a){this._controller.onStart(a),this.trigger("visualization:start")},_onNotDirtyData:function(a){this._controller.onNotDirtyData(a)},_onDirtyData:function(a){this._controller.onDirtyData(a)},_onPivotPaging:function(a){this._controller.onPivotPaging(a)},_onActionListHide:function(){this.tooltip.unsnap()},_onViewport:function(a){this._controller.onViewport(a)},_onExeption:function(a){this._controller.onExeption(a)},_onStop:function(a){this._controller.onStop(a)},startFromTime:function(a,b){this.thread.startFromTime(b)},updateSpeed:function(a,b){this.thread.updateSpeed(b)},togglePause:function(a){var b=this.thread;"undefined"!=typeof a?a?b.unpause():b.pause():this.thread.togglePause()},saveStateAndPause:function(){this._wasPaused=this.thread.time.get("paused");var a=d.Deferred();return this._wasPaused?a.resolve():(this.thread.time.set("paused",!0),this.listenToOnce(u,"thread:pauseDone",a.resolve),this.listenToOnce(u,"stream:error",a.reject)),a.promise()},restorePlayState:function(){this._wasPaused||this.thread.time.set("paused",!1)},getRestrictions:function(a){var b=a.restrictions,c=e.map(b,function(a){return{path:a.path,operation:a.operation,value:a.value}});return e.filter(c,function(b){return b.path!==a.tsField})},getDefaultTemplate:function(a){return G},getVisualizationName:function(){var a=this.state.metrics,b=a.at(0),c=(b?this.metrics[b.get("label")]:null,this.config.get("source")),d=this.config.get("type"),e=(this.config.get("name"),this.state.groupBy.getAttribute()),f=this.fields.findWhere({name:e}),g=(f?f.get("label"):e,c.sourceName),h=c.variables["Chart Name"]||this.getDefaultTemplate(d),i=h||g;return h&&(i=i.replace(G,g)),i},isGroupByTimeSupported:function(){var a=this.config.attributes.source.sourceFeatures,b=this.config.get("streamType"),c=Q.indexOf(b)>=0,d=a.indexOf("GROUP_BY_TIME")>=0||c;return d}})},{"../../Core/MVC":6,"../../Core/MVC/Collection":2,"../../Core/Settings":7,"../../collections/ComponentSources":14,"../../collections/LibrariesSources":27,"../../controls":73,"../../models/ObjectField":127,"../../models/SourceVisualization":137,"../../utilities":151,"../../views/ColorKey":164,"../../views/DashboardDownload":173,"../../views/DataDetails":176,"../../views/DataItem":186,"../../views/GroupedListView":194,"../../views/ModalWarning":209,"../../views/RawDataExport":218,"../../views/ReferenceLineForm":222,"../../views/ReferenceLineForm/ReferenceLineForm.html":220,"../../views/SmallObjectFieldItem":227,"../../visualizationControls/ToolbarItem":233,"./../../models/Metric":125,"./../../models/Zoomdata.Models.js":145,"./../DashboardEvents":41,"./../DeferredPick":42,"./../InteractiveElements":47,"./../InteractiveElementsMethods":49,"./../MetricAccessor":51,"./../StateInheritanceManager":56,"./../Thread":57,backbone:235,colorbrewer:95,jquery:109,moment:243,underscore:244}],59:[function(a,b,c){b.exports=a("./VisualizationController")},{"./VisualizationController":58}],60:[function(a,b,c){"use strict";var d={example:"This is an example with %someParam% and %oneMore% params.",distinct_count:"Distinct Count",last_value:"Last Value",min:"Min",max:"Max",sum:"Sum",avg:"Avg",removeUsedCalcDashboards:"Cannot remove calculation, because it is used on dashboards: <b>%names%</b>",removeUsedCalcSaved:"Cannot remove calculation, because it is on this saved dashboard. Please, save dashboard changes and then try again",removeUsedCalcLocal:"Cannot remove calculation, because it is used on your dashboard","fusion-header-help-innerJoin":'Compares the rows across all tables and returns the rows that match <div class="inner-join-image"></div>',windowFunDisabledTip:"Attribute used in calculation is not on chart",attrUsedInWindowFun:"Attribute cannot be removed since <b>%names%</b> is using it. Please remove %names% first",fused_table_help_unique:"Defines the collection of source fields in which the attribute form’s values are unique per record",calcWindowPreviewDisabled:"Preview is not supported for windows functions"};b.exports={text:function(a,b){var c=d[a];if(!c)return a;var e=c.match(/(%[^%]*%)/g);if(e){b=b||{};for(var f=0;f<e.length;f++){var g=e[f],h=g.replace(/%/g,""),i=b[h]||"";c=c.replace(g,i)}}return c}}},{}],61:[function(a,b,c){function d(a,b){"use strict";var c,d;if("object"==typeof a){d=a;for(c in d)d.hasOwnProperty(c)&&e(g,c,d[c])}else e(g,a,b)}function e(a,b,c){"use strict";var d;if(-1!==f.indexOf(typeof c)){if("set"===b)throw Error("illegal property name");a[b]=c}else{if("object"!=typeof c)throw Error("illegal property value");a[b]="object"==typeof a[b]?a[b]:c instanceof Array?[]:{};for(d in c)c.hasOwnProperty(d)&&e(a[b],d,c[d])}}var f=["string","number","boolean"],g={set:d};b.exports=g},{}],62:[function(a,b,c){"use strict";var d=a("./dialogTemplate.html"),e=a("../Core/MVC"),f=e.Events,g=e.View,h=a("underscore"),i=a("jquery"),j=a("./../utilities"),k=a("./paletteActionButton.html"),l=g.extend({template:d,defaults:{mode:"dialog",draggable:!1,wide:!1,modal:"static",rejectButtonLabel:"Close",acceptButtonLabel:"Accept",rejectButtonTitle:"Close",acceptButtonTitle:"Accept",containment:i("body"),docked:!0,customClass:""},events:{'click button[value="dialog-reject"]':"hide",'click button[value="dialog-accept"]':"accept",'click button[value="dialog-back"]':"back"},initialize:function(a){function b(){if(c.$el.hasClass("dialog")){var a,b=c.$el.find(".modal-header"),d=c.$el.find(".modal-footer"),e=b.outerHeight(!0),f=d.outerHeight(!0),g=c.$body.css("max-height"),h=c.$body.parent().css("max-height"),k=i(window).height(),l=k-e-f-35;h&&(h=j.reduceCssCalc({height:h},k)),g&&(g=j.reduceCssCalc({height:g},h||k),l>g&&(l=g)),c.$body.css({height:l});var m=c.$el.css("top")&&parseInt(c.$el.css("top"));a=c.$el.outerHeight(!0)<k&&0!==m?(k-c.$el.outerHeight(!0))/2:0,c.$el.animate({top:a})}}g.prototype.initialize.apply(this,arguments),h.bindAll(this,"back");var c=this;switch(a=a||{},a.actions&&(this.actions=a.actions,delete a.actions),a.template&&(this.template=a.template,delete a.template),this.settings=i.extend({},this.defaults,a),this.options.multiDocked||this.removeOtherDocked(),i(".modal-backdrop.zd-overlay").remove(),this.setElement(this.template({rejectButtonLabel:this.settings.rejectButtonLabel,acceptButtonLabel:this.settings.acceptButtonLabel,rejectButtonTitle:this.settings.rejectButtonTitle,acceptButtonTitle:this.settings.acceptButtonTitle,customClass:this.settings.customClass})),this.$el.appendTo("body"),this.$el.modal({show:!1,backdrop:this.settings.modal,keyboard:!1}),this.settings.mode){case"palette":this.$(".dialog-controls").hide();break;case"alert":this.$('button[value="dialog-accept"]').hide()}this.$head=this.$(".dialog-head"),this.$body=this.$(".dialog-body"),this.$footer=this.$(".dialog-controls"),this.$actions=i('<div class="zd-dialog-actions btn-group btn-block"></div>'),this.$validMsg=i('<div class="form-validation">'),this.$footer.append(this.$validMsg),this.setActions(a.actions),this.settings.draggable&&this.$el.draggable({handle:this.$(".dialog-head, .header"),start:function(){c.$el.removeClass("fade"),"function"==typeof c.settings.draggable.onDragStart&&c.settings.draggable.onDragStart.apply(this,arguments)},stop:function(){c.$el.addClass("fade"),"function"==typeof c.settings.draggable.onDragStop&&c.settings.draggable.onDragStop.apply(this,arguments)},cursor:"move",containment:this.settings.containment}),this.settings.wide&&this.goWide(),this.$el.data().modal.$element.one("hidden",function(){c.trigger("dialog:rejected"),c.remove(),c.onReject()}),this.listenTo(f,"visualization:add",function(){this.hide()}),this.listenTo(f,"admin-control:clicked",this.removeOtherDocked);var d=h.debounce(b,450);i(window).on("resize",d)},removeOtherDocked:function(){var a=i(".modal.zd-palette.docked"),b=i(".modal.zd-infopopup.docked");i(".control-rounded").removeClass("active"),i(".control-button").removeClass("active"),i(".header-control").removeClass("active"),a.remove(),b.remove()},setActions:function(a){var b=this;return a?this.actions=a:a=this.actions,this.$actions.empty(),h.each(this.actions,function(a){var c=i(k({type:a.type,label:a.label,title:a.title||a.label}));b.$actions.append(c),c.on("click",a.callback),c.css({width:100/b.actions.length+"%"})}),this},clearActions:function(){return this.actions=null,this.$actions.empty(),this},render:function(a,b){this.$el.attr("data-name",b),this.$body.empty(),this.$head.empty(),this.options.className&&this.$el.addClass(this.options.className),this.$body.append(a),b instanceof i||b instanceof HTMLElement?(this.$head.append(b),this.$head.show()):"string"==typeof b?(this.$head.text(b),this.$head.show()):this.$head.hide();var c=i().modal.Constructor.prototype.enforceFocus;return i().modal.Constructor.prototype.enforceFocus=function(){},this.$el.modal("show"),i().modal.Constructor.prototype.enforceFocus=c,this._onFullScreenMode()&&(this.zIndex=this.zIndex||this.$el.zIndex(),this.$el.zIndex(this.zIndex+10),this.listenToOnce(f,"widget:fullOff",this.hide)),this.$el.find('button[value="dialog-back"]').on("click",this.back),this.actions&&0===this.$(this.$actions).length&&this.$body.after(this.$actions),this.delegateEvents(),f.trigger("dialog:show"),this},goWide:function(){return this.$el.hasClass("wide")||this.$el.addClass("wide"),this.resetSizes(),this},goNormal:function(){return this.$el.hasClass("wide")&&this.$el.removeClass("wide"),this.resetSizes(),this},resetSizes:function(){return this.$el.css({width:"",height:""}),this.$body.css({width:"",height:""}),this.adjustBodySizes(),this},adjustBodySizes:function(){var a=this.$el,b=i(this.settings.containment),c=b.offset(),d=this.$el.offset(),e=d,f={};d.left+=44,d.top+=44,e.left=d.left-c.left,e.top=d.top-c.top,e.right=b.width()-e.left-a.width(),e.bottom=b.height()-e.top-a.height(),e.left<0&&(f.maxWidth+=e.left,f.marginLeft=parseInt(this.$el.css("margin-left"))-e.left),e.right<0&&(f.maxWidth+=e.right,f.marginRight=parseInt(this.$el.css("margin-right"))-e.right),f.maxHeight=b.height()-e.top-d,this.$el.css(f),this.$body.css({maxHeight:f.maxHeight})},position:function(a){var b=this.$el.data().modal;return a=a||{},b&&b.$element.css({left:a.left||"",top:a.top||"",right:a.right||"",bottom:a.bottom||""}),(a.of||a.my||a.at||a.collision)&&(this.$el.position({of:a.of,my:a.my,at:a.at,collision:a.collision,within:i(this.settings.containment),using:a.using}),this.adjustBodySizes()),this},positionInToolbar:function(a){this.position({of:a,my:"right+40px bottom-20px",at:"center top",collision:"flip flip"});var b=this.$el,c=(i(this.settings.containment),a.getBoundingClientRect()),d=document.body.offsetWidth,e=(document.body.offsetHeight,d-(c.width+c.left)),f=c.left,g={left:0,top:c.top,width:0,height:0},h=(parseInt(b.css("maxWidth"),10),{left:10,top:-35});f>e?g.width=f-120:g.width=e-40,g.left=c.width+c.left-40,b.css({margin:0,left:g.left+"px",top:g.top+50+"px",width:g.width+"px"}),this.$pointer.css({left:h.left+"px","-webkit-transform":"scale(1, -1)","-moz-transform":"scale(1, -1)","-ms-transform":"scale(1, -1)"})},onBeforeHide:i.noop,hide:function(){if(this.onBeforeHide()!==!1){var a=this;this.$el.hasClass("rail-control")?this.$el.animate({left:-1*this.$el.width()},300,function(){a.$el.modal("hide")}):this.$el.fadeOut(200,function(){a.$el.modal("hide")})}},onReject:i.noop,onBeforeAccept:function(){return!0},accept:function(){var a=this,b=this.onBeforeAccept();if(this.$validMsg.empty(),b===!0)this.$el.off("hidden"),this.$el.one("hidden",function(){a.trigger("dialog:accepted"),a.remove(),a.onAccept()}),this.$el.modal("hide");else{var c="Form no valid";b&&b.error&&(c=b.text),this.$validMsg.append('<div class="alert alert-error">'+c+"</div>")}},back:function(){this.onBack()},remove:function(){g.prototype.remove.apply(this,arguments),this.onHide()},_onFullScreenMode:function(){return i(".fullScreenView").is(":visible")},onAccept:i.noop,onHide:i.noop,onBack:i.noop});b.exports=l},{"../Core/MVC":6,"./../utilities":151,"./dialogTemplate.html":71,"./paletteActionButton.html":76,jquery:109,underscore:244}],63:[function(a,b,c){"use strict";var d=a("../Core/MVC/View"),e=a("underscore"),f=a("jquery"),g=a("./Dialog"),h=a("../views/SearchBox"),i=a("./paletteTemplate.html"),j=a("./dialogTemplate.html"),k=g.extend({template:i,events:{"mousedown .modal-header":"moveToFront",'click button[value="dialog-reject"]':"hide","click .zd-palette-background":"hideDocked","keypress input":"keyEnterPressed","mousewheel .zd-palette-background":"prevent2FingerGesture"},defaults:{template:j,mode:"palette",draggable:!0,docked:!1,modal:!0,containment:".zd-main-section",minWidth:250,minHeight:100,defaultWidth:264},keyEnterPressed:h.prototype.keyEnterPressed,initialize:function(a){function b(){var a=f(window).height(),b=h.$el.find(".modal-header"),c=h.$el.find(".palette-bottom-panel");a<h.$el.outerHeight(!0)?(h.$body.css({height:a-i-b.outerHeight(!0)-c.outerHeight(!0)}),h.$el.css({height:a-i-j})):h.$body.css({height:h.$el.height()-b.outerHeight(!0)-c.outerHeight(!0)})}d.prototype.initialize.apply(this,arguments);var c,h=this,i=36,j=5;if(a=a||{},e.bindAll(this,"showBackButton","hideBackButton"),g.prototype.initialize.apply(this,arguments),this.$body.css({maxHeight:"none"}),c=e.debounce(b,300),f(window).on("resize",c),f(this.settings.containment).length){var k=f(this.settings.containment).height(),l=k-59;this.$el.css({height:k-j}),this.$body.css({height:l-52})}this.$el.on("dragstop",function(){h.adjustBodySizes()}),this.options.draggable&&this.setDragEvents()},render:function(){return g.prototype.render.apply(this,arguments),this.$el.resizable({containment:".zd-main",alsoResize:this.$body,minWidth:this.settings.minWidth,minHeight:this.settings.minHeight}),this.$el.data().modal.$backdrop.addClass("zd-overlay"),this.isDocked()||this.undock(),this.actions&&this.$body.append(this.$actions),this},setDragEvents:function(){var a=this;this.palettePosition={left:f(".zd-main-section .leftPane").width()+2,top:f(".zd-main-header").height()||1},this.settings.draggable={onDragStart:function(b){a.$el.removeClass("docked"),a.$el.addClass("undocked"),a.settings.docked=!1,a.$("div.zd-palette-background").remove()}}},isDocked:function(){return this.settings.docked},undock:function(){return this.$el.removeClass("docked"),this.$el.hasClass("undocked")||this.$el.addClass("undocked"),this.$("div.zd-palette-background").hide(),this.settings.docked=!1,this},dock:function(a){function b(){c.$("div.zd-palette-background").length<=0&&(c.$el.css({width:c.settings.defaultWidth,height:f(c.settings.containment).height()}),c.$body.css({width:c.settings.defaultWidth-24,height:f(c.settings.containment).height()-c.$head.parent().height()-24}))}var c=this;return this.position(a),this.$el.removeClass("undocked"),this.$el.hasClass("docked")||this.$el.addClass("docked"),this.$("div.zd-palette-background").show(),this.settings.docked=!0,b(),this},hide:function(){this.$el.removeClass("active"),this.$el.removeClass("fade"),g.prototype.hide.apply(this,arguments)},hideDocked:function(){this.settings.docked&&this.hide()},moveToFront:function(){this._onFullScreenMode()?(f(".zd-palette").zIndex(f(".leftPane").zIndex()-2),this.$el.zIndex(f(".leftPane").zIndex()-1)):(f(".zd-palette").zIndex(1018),this.$el.zIndex(1019))},showBackButton:function(){this.$('button[value="dialog-back"]').show()},hideBackButton:function(){this.$('button[value="dialog-back"]').hide()},remove:function(){this.clearActions(),g.prototype.remove.apply(this,arguments)},prevent2FingerGesture:function(a){a.preventDefault()}});b.exports=k},{"../Core/MVC/View":5,"../views/SearchBox":223,"./Dialog":62,"./dialogTemplate.html":71,"./paletteTemplate.html":77,jquery:109,underscore:244}],64:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide zd-infopopup '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-header zd-infopopup-titlebar">\n        <button title="Close" value="dialog-reject" class="zd icon close" />\n        <button title="Search" value="toggle-search" class="zd icon magnifying-glass" />\n        <button title="" value="dialog-back" class="zd icon back" style="display:none;" />\n        <h3 class="dialog-head zd-infopopup-header"></h3>\n        <div class="help-info"></div>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body zd-infopopup-body">\n    </div>\n    <div class="zero-search" style="display: none;"></div>\n    <div class="zd-infopopup-background">\n    </div>\n    <div class="zd-infopopup-background small">\n    </div>\n</div>';return __p}},{lodash:242}],65:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<button class="arrow-left btn" title="left" value="left"><i class="icon-arrow-left"></i></button>\n<div class="btn-group-vertical">\n    <button class="arrow-up btn" title="up" value="up"><i class="icon-arrow-up"></i></button>\n    <button class="arrow-down btn" title="down" value="down"><i class="icon-arrow-down"></i></button>\n</div>\n<button class="arrow-right btn" title="right" value="right"><i class="icon-arrow-right"></i></button>';return __p}},{lodash:242}],66:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<button class="arrow-left btn" title="left" value="left"><i class="icon-arrow-left"></i></button>\n<button class="arrow-right btn" title="right" value="right"><i class="icon-arrow-right"></i></button>';return __p}},{lodash:242}],67:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="btn-group-vertical">\n    <button class="arrow-up btn" title="up" value="up"><i class="icon-arrow-up"></i></button>\n    <button class="arrow-down btn" title="down" value="down"><i class="icon-arrow-down"></i></button>\n</div>';return __p}},{lodash:242}],68:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="color-picker-button" style="background: '+(null==(__t=color)?"":__t)+';"></div>';return __p}},{lodash:242}],69:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<span>"+(null==(__t=message)?"":__t)+'</span>\n<i title="'+(null==(__t=acceptTitle)?"":__t)+'" class="icon-ok icon-white"></i>\n<i title="'+(null==(__t=cancelTitle)?"":__t)+'" class="icon-remove icon-white"></i>';return __p}},{lodash:242}],70:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../Core/MVC"),g=f.Events,h=a("./../utilities"),i=(a("./../views/SearchBox/index.js"),a("./../models/User")),j=a("../Core/MVC/View"),k=a("../components/Vocabulary"),l={},m=(a("velocity-animate"),a("../views/Tooltip")),n=a("../utilities/MetricFormatter");l.$root=d("body"),l.setRoot=function(a){this.$root=a instanceof d?a:d(a)};var o=a("./fullscreenTemplate.html");l.FullScreenView=j.extend({className:"fullScreenView",template:o,events:{"click .exitFullscreen":"close"},initialize:function(a){a=a||{root:d("body")},this.$root=a.root,j.prototype.initialize.apply(this,arguments),this.$el.appendTo(this.$root),this.$el.hide(0),this.$el.append(this.template()),this.$wraper=this.$(".fsWrapper"),this.$header=this.$(".fsHeader"),this.$head=this.$(".fsHead"),this.$body=this.$(".fullScreenContainer"),this.$styles=this.$("style"),this.$footer=this.$(".fullScreenFooter"),this.$expander=this.$(".fsExpander"),this.$bodyPlaceholder=d("<span></span>"),this.currentBody=null,this.$headPlaceholder=d("<span></span>"),this.currentHead=null,this.listenTo(g,"switch:section",this.close)},render:function(a,b){function c(a){i.html(),a instanceof j&&(a=a.el),d(a).before(g),i.append(a),f.currentBody=a}function e(a){k.html(),a instanceof j&&(a=a.el),d(a).before(h),k.append(a),f.currentHead=a}var f=this,g=this.$bodyPlaceholder,h=this.$headPlaceholder,i=this.$body,k=this.$head,l=this.$header,m=d.Deferred();return this.$el.appendTo(this.$root).fadeIn(function(){a?c(a):i.addClass("empty"),b?e(b):l.addClass("empty"),m.resolve(),f.trigger("open")}),this.delegateEvents(),m.promise()},close:function(a){var b=this,c=this.$bodyPlaceholder,e=this.$headPlaceholder,f=this.currentBody,g=this.currentHead,h=d.Deferred();return this.trigger("startClosing"),b.$el.fadeOut("fast",function(){f&&(c.after(f),c.detach()),g&&(e.after(g),e.detach()),h.resolve(),b.trigger("close")}),h.promise()},adjustBodySizes:function(){var a=this.$body.parent().prev(),b=a.offset().top+a.outerHeight()+parseFloat(a.css("margin-bottom"));this.$body.parent().css("top",b)},setActive:function(a){this._active=!!a},isActive:function(){return this._active}}),l.Slider=f.View.extend({defaults:{orientation:"vertical",range:!1,value:50,min:0,max:100},initialize:function(a){var b=this,c={start:function(a,c){b.trigger("slide:start",c.value,b),b.data.set("value",c.value,{silent:!0})},stop:function(a,c){b.trigger("slide:stop",c.value,b),b.data.set("value",c.value,{silent:!0})},change:function(a,c){b.trigger("slide:change",c.value,b),b.data.set("value",c.value,{silent:!0})}};this.options=d.extend({},this.defaults,a),this.data=new f.Model({min:this.options.min,max:this.options.max,value:this.options.value}),this.$el.slider(d.extend({},c,this.options)),this.listenTo(this.data,"change",this.render)},render:function(){return this.$el.slider(this.data.attributes),this},value:function(a){function b(){return d.data.get("value")}function c(a){d.data.set("value",a)}var d=this;return"number"==typeof a?(c(a),this):b()},min:function(a){function b(){return d.data.get("min")}function c(a){d.data.set("min",a)}var d=this;return"number"==typeof a?(c(a),this):b()},max:function(a){function b(){return d.data.get("max")}function c(a){d.data.set("max",a)}var d=this;return"number"==typeof a?(c(a),this):b()}});var p=a("./arrowHorizontalTemplate.html"),q=a("./arrowVerticalTemplate.html"),r=a("./arrowAllTemplate.html");l.Arrows=f.View.extend({_horizontalTemplate:p,_verticalTemplate:q,_allTemplate:r,defaults:{direction:"all"},events:{'click button[value="up"]':"_onUpClick",'click button[value="down"]':"_onDownClick",'click button[value="left"]':"_onLeftClick",'click button[value="right"]':"_onRightClick"},initialize:function(a){switch(this.childViews=[],this.options=d.extend({},this.defaults,a),this.options.direction){case"vertical":this.template=this._verticalTemplate;break;case"horizontal":this.template=this._horizontalTemplate;break;case"all":break;default:this.template=this._allTemplate}},render:function(){return this.$el.html(this.template()),this},_onUpClick:function(){this.trigger("translate:up")},_onDownClick:function(){this.trigger("translate:down")},_onLeftClick:function(){this.trigger("translate:left")},_onRightClick:function(){this.trigger("translate:right")}}),l.Zoomable=f.View.extend({className:"zoomable",defaults:{snapToEdges:!0,maxScale:!1,minScale:!1,eventNamespace:"zoomable:",mouseWheel:!1},initialize:function(a){var b=this;this._enabled=!0,this.childViews=[],this.options=d.extend({},this.defaults,a),this.$content=d('<div class="zoomable-content"></div>').appendTo(this.$el),h.MODE.NATIVE!==h.mode()&&(this._zoomHammer=this.$content.zoomHammer(this.options).data("zoomHammer"),this.$el.on("zoomable:transformstart",function(){b.trigger("transform:start",b)}),this.$el.on("zoomable:transformend",function(){b.trigger("transform:end",b)}),this.$el.on("zoomable:transform",function(){b.trigger("transform:transition",b)}))},disable:function(a){var b=a?a.resizeStart:null;this._zoomHammer&&this._zoomHammer.disable(),this.$el.hasClass("zoomable-disabled")||b||this.$el.addClass("zoomable-disabled"),this._enabled=!1},enable:function(a){var b=a?a.resizeStop:null;this._zoomHammer&&this._zoomHammer.enable(),this.$el.hasClass("zoomable-disabled")&&!b&&this.$el.removeClass("zoomable-disabled"),this._enabled=!0},isEnabled:function(){return this._enabled},getMinScale:function(){return this._zoomHammer&&this._zoomHammer.parsedScale().min||1},setMinScale:function(a){return a=a||this._zoomHammer.options.minScale,this._zoomHammer.options.minScale=a,this},getMaxScale:function(){return this._zoomHammer&&this._zoomHammer.parsedScale().max||1},setMaxScale:function(a){return a=a||this._zoomHammer.options.maxScale,this._zoomHammer.options.maxScale=a,this},getScale:function(){return this._zoomHammer&&this._zoomHammer.scale()||1},getTranslation:function(){return this._zoomHammer&&this._zoomHammer.translate()||null},zoom:function(a,b,c){return this._zoomHammer&&this._zoomHammer.move({scale:a},b,c),this},translate:function(a,b){return a=a||{},"number"==typeof a.x&&(a.left=a.x),"number"==typeof a.y&&(a.top=a.y),delete a.x,delete a.y,this._zoomHammer&&this._zoomHammer.move(a,b),this},refresh:function(a,b){this._zoomHammer&&this._zoomHammer.adjust(a,b)},render:function(a){return this.$content.html(a),this}}),l.Dialog=a("./Dialog"),l.Palette=a("./Palette");var s=a("./infoPopupTemplate.html"),t=a("./pointerTemplate.html");l.InfoPopup=l.Dialog.extend({template:s,events:{"keypress input":"keyEnterPressed"},defaults:{autohide:!0,mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:d("body")},keyEnterPressed:function(a){l.Palette.prototype.keyEnterPressed.apply(a,arguments)},initialize:function(a){function b(){c._lastPostiton&&c.position()}var c=this,f=h.detectTouchDevice()?"touchend":"click";this.events[f+" .zd-infopopup-background"]="hide",this.options=d.extend({},this.options,a),this._lastPostiton=null,this._repostionCallback=e.debounce(b,300),d.extend(this.events,l.Dialog.prototype.events),l.Dialog.prototype.initialize.apply(this,arguments),this.$pointer=this.$wrapElement(t()),d("body").on("dragstart",function(){c.hide()}),this.$el.on("dragstart",!1),d(window).on("resize",this.hide.bind(this)),(this.options.autohide===!0||"string"==typeof this.options.autohide&&-1!==this.options.autohide.search("onStop"))&&this.listenTo(g,"visualization:stop",this.hide)},render:function(){return l.Dialog.prototype.render.apply(this,arguments),this.$(".zd-infopopup-background").show(),this.options.docked&&this.$el.addClass("docked"),
this.$el.on("mousewheel","textarea",function(a,b,c,e){a.preventDefault();var f=d(this).scrollTop();d(this).scrollTop(f+e)}),this},position:function(a){function b(b,d){b.top+=a.pointerTop||0,d.topDelta=b.top<44?44-b.top:0,b.top+=d.topDelta,c.$el.css(b),a.isVertical&&(d.target.width=d.target.height),c._showPointer(d)}var c=this;return a?(this._lastPostiton=a,a.using=a.using||b):a=this._lastPostiton,this.positionOptions=a||this._lastPostiton||{},l.Dialog.prototype.position.call(this,a)},_showPointer:function(a){if(this.options.showPointer!==!1){var b=this.options.pointerWidth?this.options.pointerWidth:14,c=a.element,d=a.target,e={},f="behind",g=b+"px solid transparent",h=b+"px solid rgba(50, 50, 50, 0.9)",i=parseInt(this.$el.css("border-radius"));if(d.center={left:d.left+d.width/2,top:d.top+d.height/2},c.center={left:c.left+c.width/2,top:c.top+c.height/2+a.topDelta},d.center.top-=this.positionOptions.pointerTop||0,e.vertical=d.center.top-c.center.top,e.vertical<0?e.vertical=e.vertical+"px":e.vertical="+"+e.vertical+"px",e.horizontal=d.center.left-c.center.left,e.horizontal<0?e.horizontal=e.horizontal+"px":e.horizontal="+"+e.horizontal+"px",c.left+c.width<=d.center.left&&(f+=" right"),c.left>=d.center.left&&(f+=" left"),c.top+c.height<=d.center.top&&(f+=" bottom"),c.top>=d.center.top&&(f+=" top"),f=f.split(" ").splice(1),1===f.length||this.options.showPointer){switch(this.$pointer.appendTo(this.$el),f[0]){case"left":this.$pointer.css({"border-top":g,"border-bottom":g,"border-left":g,"border-right":h}).position({my:"right center",at:"left center"+e.vertical,of:this.$el[0]}),0===d.width&&a.element.element.css({left:"+=20"});break;case"right":this.$pointer.css({"border-top":g,"border-bottom":g,"border-right":g,"border-left":h}).position({my:"left center",at:"right center"+e.vertical,of:this.$el[0]}),0===d.width&&a.element.element.css({left:"-=20"});break;case"top":this.$pointer.css({"border-top":h,"border-right":g,"border-bottom":g,"border-left":g}).position({my:"center bottom",at:"left+"+(this.$el.width()-5)+"px top",of:this.$el[0]});break;case"bottom":this.$pointer.css({"border-right":g,"border-bottom":g,"border-top":h,"border-left":g}).position({my:"center top",at:"center"+e.horizontal+" bottom",of:this.$el[0]})}var j={};switch(j.top=parseInt(this.$pointer.css("top")),j.left=parseInt(this.$pointer.css("left")),j.offset=this.$pointer.offset(),f[0]){case"left":break;case"right":c.top+i>j.offset.top&&this.$pointer.css("top",j.top+i);break;case"top":break;case"bottom":c.left+i>j.offset.left&&this.$pointer.css("left",j.left+i)}}}},remove:function(){d(window).off("resize",this.hide.bind(this)),l.Dialog.prototype.remove.apply(this,arguments)}});var u=a("./smallPopupTemplate.html"),v=a("./smallPointerTemplate.html");l.SmallPopup=l.Dialog.extend({template:u,events:{"click .zd-smallpopup-background":"hide","keypress input":"keyEnterPressed"},defaults:{mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:d("body")},keyEnterPressed:function(a){l.Palette.prototype.keyEnterPressed.apply(a,arguments)},initialize:function(a){function b(){c._lastPostiton&&c.position()}var c=this;this._lastPostiton=null,this._repostionCallback=e.debounce(b,300),d.extend(this.events,l.Dialog.prototype.events),this.options=d.extend({},this.options,a),this._undockParentView(),l.Dialog.prototype.initialize.apply(this,arguments),this.$pointer=this.$wrapElement(v()),d("body").one("dragstart",function(){c.hide()}),this.$el.on("dragstart",!1),d(window).on("resize",this._repostionCallback),this.listenTo(g,"visualization:stop",this.hide)},render:function(){return l.Dialog.prototype.render.apply(this,arguments),this.$(".zd-smallpopup-background").show(),this.$el.on("mousewheel","textarea",function(a,b,c,e){a.preventDefault();var f=d(this).scrollTop();d(this).scrollTop(f+e)}),this},_undockParentView:function(){this.options.$parentView&&this.options.$parentView.closest(".docked").removeClass("docked")},position:function(a){function b(b,d){b.top-=a.pointerTop||0,c.$el.css(b),c._showPointer(d)}var c=this;return a=a||this._lastPostiton||{},this._lastPostiton=a,a.using=a.using||b,l.Dialog.prototype.position.call(this,a)},_showPointer:function(a){var b=a.element,c=a.target,d={},e="behind",f="10px solid transparent",g="10px solid rgb(230, 230, 230)";if(c.center={left:c.left+c.width/2,top:c.top+c.height/2},b.center={left:b.left+b.width/2,top:b.top+b.height/2},d.vertical=c.center.top-b.center.top,d.vertical<0?d.vertical=d.vertical+"px":d.vertical="+"+d.vertical+"px",d.horizontal=c.center.left-b.center.left,d.horizontal<0?d.horizontal=d.horizontal+"px":d.horizontal="+"+d.horizontal+"px",b.left+b.width<c.center.left&&(e+=" right"),b.left>c.center.left&&(e+=" left"),b.top+b.height<c.center.top&&(e+=" bottom"),b.top>c.center.top&&(e+=" top"),e=e.split(" ").splice(1),1===e.length)switch(this.$pointer.appendTo(this.$el),e[0]){case"left":this.$pointer.addClass("pointer-left").css({"border-top":f,"border-bottom":f,"border-right":g}).position({my:"right center",at:"left center"+d.vertical,of:this.$el[0]});break;case"right":this.$pointer.addClass("pointer-right").css({"border-top":f,"border-bottom":f,"border-left":g}).position({my:"left center",at:"right center"+d.vertical,of:this.$el[0]});break;case"top":this.$pointer.addClass("pointer-top").css({"border-top":g,"border-right":f,"border-left":f}).position({my:"center bottom",at:"center"+d.horizontal+" top",of:this.$el[0]});break;case"bottom":this.$pointer.addClass("pointer-bottom").css({"border-right":f,"border-top":g,"border-left":f}).position({my:"center top",at:"center"+d.horizontal+" bottom",of:this.$el[0]})}},remove:function(){d(window).off("resize",this._repostionCallback),l.Dialog.prototype.remove.apply(this,arguments)},closeModal:function(){this.$el.fadeOut(300)}});var w=a("./infoPopupFooterTemplate.html");l.PalettePopup=l.InfoPopup.extend({initialize:function(a){return e.bindAll(this,"showBackButton","hideBackButton"),l.InfoPopup.prototype.initialize.apply(this,arguments),this.$el.on("dragstart",!1),this.handlers=this.options.handlers,this},render:function(a,b,c){return c=c||{top:12,bottom:66},l.InfoPopup.prototype.render.apply(this,arguments),this.$el.addClass("zd-palettepopup"),this.handlers&&this.showHandlers(this.handlers),this.$body.css("max-height",this.options.containment.height()-c.top-c.bottom-(this.$el.outerHeight()-this.$body.height())),this},ensureFooter:function(){return"undefined"==typeof this.$footer.context&&(this.$footer=this.$wrapElement(w())),this.$el.has(this.$footer).length||this.$el.append(this.$footer),this},showHandlers:function(a){var b=this;return a.forEach(function(a){b.addHandler(a)}),this},addHandler:function(a){var b=a.tagName||"button",c=d("<"+b+' class="">'+a.title+"</"+b+">");return a.icon&&c.prepend('<i class="zd icon '+a.icon+'"></i>'),a.className&&c.addClass(a.className),a.attr&&e.each(a.attr,function(a,b){c.attr(b,a)}),c.click(function(){a.callback()}),this.ensureFooter(),this.$footer.append(c),this},showBackButton:function(){return l.Palette.prototype.showBackButton.apply(this,arguments),this},hideBackButton:function(){return l.Palette.prototype.hideBackButton.apply(this,arguments),this}}),l.DetailsPopup=l.Dialog.extend({template:s,events:{"click .zd-infopopup-background":"hide"},defaults:{mode:"palette",draggable:!1,resizable:!1,modal:!1,containment:d("body")},initialize:function(){d.extend(this.events,l.Dialog.prototype.events),l.Dialog.prototype.initialize.apply(this,arguments)}});var x=a("./sidePaneTemplate.html"),y=a("./sidePaneTemplateModal.html");l.SidePane=f.View.extend({initialize:function(a){function b(){var a=c.user||new i;a.bootstrap().done(function(){var b=a.get("name");window.localStorage["sidePaneHasBeenClosedBy"+b]="true"}),c.$el.hide(),g.trigger("sidepane:manualhide")}a=a||{},f.View.prototype.initialize.apply(this,arguments),e.bindAll(this,"render","hide","show","close","getHeader","visible");var c=this;if(this.hasCloseButton=this.options.hasCloseButton,this.template=this.hasCloseButton?x:y,this.setElement(this.template()),this.$el.appendTo("body"),this.hide(),this.$loading=this.$(".zd-side-pane-loading"),this.$body=this.$(".zd-side-pane-body"),this.$header=this.$(".zd-side-pane-header"),this.$closeButton=this.$(".close"),!a.user)throw new Error("user (Zoomdata.user) must be defined");this.user=a.user,this.hasCloseButton||(this.$(".zd-side-pane").on("click",function(a){a.stopPropagation()}),this.$el.on("click",b))},events:{"click .close":"hide"},render:function(a){return this.$body.empty(),this.$body.append(a),this.setOffset(),this.delegateEvents(),this},setOffset:function(){var a=Zoomdata.pageData?Zoomdata.pageData.branding:this.options.branding,b=36,c=0,d=a.customHtml||a.get("customHtml");d.enableHeader&&(b+=d.headerHeight),d.enableFooter&&(c+=d.footerHeight),this.$el.css({top:b,bottom:c})},hide:function(){this.$el.hide()},show:function(){d(".zd-side-pane").parent("div").hide(),this.$el.show(),this.$el.find("input").blur()},close:function(){this.$el.remove()},getHeader:function(){return this.$header},visible:function(){return this.$el&&this.$el.is(":visible")}});var z=a("./confirmMessageTemplate.html");l.ConfirmMessage=f.View.extend({tagName:"span",className:"label label-warning pull-right confirmMessage",defaults:{template:z,message:"Warning",acceptTitle:"Accept",cancelTitle:"Cancel"},events:{"click .icon-ok":"accept","click .icon-remove":"cancel"},initialize:function(a){this.settings=d.extend({},this.defaults,a),this._deferred=d.Deferred(),this.result=this._deferred.promise()},accept:function(){var a=this;return this.$el.fadeOut(function(){a.remove(),a._deferred.resolve()}),!1},cancel:function(){var a=this;return this.$el.fadeOut(function(){a.remove(),a._deferred.reject()}),!1},render:function(){return this.$el.html(this.settings.template({message:this.settings.message,acceptTitle:this.settings.acceptTitle,cancelTitle:this.settings.cancelTitle})),this.$el.hide().fadeIn(),this.delegateEvents(),this}}),l.Notification=f.View.extend({className:"zd notification alert ",defaults:{delay:3e3,type:"info"},events:{click:"remove"},initialize:function(a){a=a||{},a.template&&(this.template=a.template,delete a.template),this.options=d.extend({},this.defaults,a),this.$el.appendTo("body").hide(),this.setType(this.options.type)},setType:function(a){var b=this.options.type,c="alert-"+b,d="alert-"+a;return this.$el.hasClass(c)&&this.$el.removeClass(c),this.$el.addClass(d),this.options.type=a,this},render:function(a){var b=this,c=this.options.delay;return this.empty(),this.$el.html(a),"number"==typeof c?setTimeout(function(){b.remove()},c):this.$el.append('<div class="zd icon remove"></div>'),this.show(),this},hide:function(a){return this.$el.slideUp(function(){"function"==typeof a&&a()}),this},show:function(a){return this.$el.slideDown(function(){"function"==typeof a&&a()}),this},remove:function(){var a=this,b=arguments;this.$el.slideUp(function(){f.View.prototype.remove.apply(a,b)})}});var A=a("./popoverHeadTemplate.html"),B=a("./popoverBodyTemplate.html");l.Popover=function(){var a=f.View.extend({contentView:null,_data:!1,_container:!1,_stopHide:!1,_setEvents:!1,_setHeadEvents:!1,_buttons:{},_headTemplate:A,_bodyTemplate:B,initialize:function(a){if(f.View.prototype.initialize.apply(this,arguments),e.bindAll(this,"render","buildPopoverHeader","buildPopoverBody","show","hide","setTemplate","data","stopHide"),a=d.extend({setEvents:!1,setHeadEvents:!1,body:!1,head:!1,container:d("body"),buttons:!1},a),this._buttons={zoom:!0,details:!1,trend:!1,twitter:!1},!a.main)throw new Error("main (Zoomdata.main) must be defined");this.main=a.main;return"function"==typeof a.setEvents&&(this._setEvents=a.setEvents),"function"==typeof a.setHeadEvents&&(this._setHeadEvents=a.setHeadEvents),a.body&&(this._bodyTemplate="string"==typeof a.body?e.template(a.body):a.body),a.buttons&&(this._buttons=d.extend(this._buttons,a.buttons)),a.head&&(this._headTemplate="string"==typeof a.head?e.template(a.head):a.head),a.container&&(this._container=a.container),d("#popoverElement").remove(),d("body").append(d("<div>").attr("id","popoverElement").css({position:"absolute",width:1,height:1,display:"none","z-index":1010}).append("<div>")),this.render()},render:function(){var a=this;return d("#popoverElement>div").popover({html:!0,title:function(){return a.buildPopoverHeader()},content:function(){return a.buildPopoverBody()}}).on("show",function(){console.log("popover shown"),d(".zd-main-section").off("click").on("click",function(b){a.hide(b)}),g.trigger("freezeTime")}).on("hide",function(){console.log("popover hidden"),d(".zd-main-section").off("click"),g.trigger("unfreezeTime")}),g.trigger("rendered"),this.listenToOnce(g,"visualization:stop",function(){d("#popoverElement").remove()}),this},buildPopoverHeader:function(){var a=this.$wrapElement(this._headTemplate(this._data));return"function"==typeof this._setHeadEvents&&this._setHeadEvents(a,this._data),a},buildPopoverBody:function(){this._data.buttons=this._buttons,this._data.height=Math.max(250,Math.min(500,d("body").height()/2));var a=this.$wrapElement(this._bodyTemplate(this._data));return"function"==typeof this._setEvents&&this._setEvents(a,this._data),a},hideDelay:!1,show:function(a,b){var c=b.x,e=b.y;this._data=a;var f=this;d("#popContainer").attr("class",this.main.$section.width()<500?"span3":"span4"),d("#popoverElement .popoverFooter .btn-group").css("paddingLeft",this.main.$section.width()<500?"6%":"15%");var g=d("body").height(),i=null,j=null,k=null,l=0,m=0,n=h.MODE.WIDGET!==h.mode()&&g>=450?300:10,o=h.MODE.WIDGET!==h.mode()&&g>=450?50:10;m=Math.max(200,Math.min(Math.max(e,n),g-o)),i=d("#popoverElement"),i.css({top:m,left:c}).show().find("div").popover("show"),j=d("#popoverElement .popover"),k=d("#popoverElement .arrow"),c+1*j.width()>this.main.$section.width()+d("#popContainer").width()/2&&i.css("left",Math.max(10,c-j.width()-10)).find(".popover").removeClass("right").addClass("left");var p=d("#popoverElement>.popover").height();m+p/2>g-o&&(m=g-o-p/2,i.css("top",m)),l=e-(m+j.position().top);var q=p,r=2,s=k[0].offsetHeight;l=Math.min(q-s/2-r,l),l=Math.max(s/2+2*r,l),k.css("top",l),this.hideDelay=!0,setTimeout(function(){f.hideDelay=!1},200)},hide:function(a){return this._stopHide?void(this._stopHide=!1):void(void 0!==a&&(d(a.target).parents(".popover").length||d(a.target).parent(".bar").length||this.hideDelay)||d("#popoverElement>div:first").popover("hide"))},setTemplate:function(a,b){"string"==typeof a&&(a=e.template(a)),void 0!==b&&b?this._headTemplate=a:this._bodyTemplate=a},data:function(){return this._data},stopHide:function(){this._stopHide=!0}});return a}(),l.TwittViewer=f.View.extend({contentView:null,_data:!1,_stopHide:!1,_setEvents:!1,_bodyTemplate:"<div></div>",initialize:function(a){f.View.prototype.initialize.apply(this,arguments),a=d.extend({setEvents:!1,body:!1},a);return"function"==typeof a.setEvents&&(this._setEvents=a.setEvents),a.body&&(this._bodyTemplate=a.body),d("#twittViewerElement").remove(),d("body").append(d("<div>").attr("id","twittViewerElement").attr("class","modal hide fade").attr("tabindex","-1").attr("role","dialog").attr("aria-labelledby","myModalLabel").attr("aria-hidden","true")),this.render()},render:function(){return d("#twittViewerElement").html(this.buildTwittViewerBody()),d("#twittViewerElement").modal({show:!1}),this},buildTwittViewerBody:function(){console.log(this._data);var a=this.$wrapElement(this._bodyTemplate(this._data));return"function"==typeof this._setEvents&&this._setEvents(a,this._data),a},show:function(a,b){this._data=a;d("#twittViewerElement").modal("show")},hide:function(a){d("#twittViewerElement").modal("hide"),g.trigger("twittViewerHide")},data:function(){return this._data}});var C=a("./radialMenuItemTemplate.html"),D=a("./radialMenuStartTemplate.html"),E=a("./radialMenuEndTemplate.html"),F=a("./radialMenuRemoveButton.html")();l.RadialMenu=f.View.extend({className:"zd-radial-menu",defaults:{template:C,arc:{start:-40,end:220,gap:4,radius:66,width:44,color:"rgba(0, 0, 0, 0.7)"},arcClosed:{radius:66,width:44,start:89,angle:2}},events:{},initialize:function(a){var b;if(a=a||{},e.bindAll(this,"close"),!(a.root instanceof HTMLElement))throw Error("options.root must be a HTMLElement");return this.$root=d(a.root),delete a.root,this.items=[],this.icons=[],this.closed=[],this.position={left:"50%",top:"50%"},f.View.prototype.initialize.apply(this,arguments),b={start:90,end:90,gap:0,radius:this.options.arc.radius,width:this.options.arc.width},d(window).on("resize",this.close),this.$el.appendTo(this.$root),this.$root.on("click dragstart",this.close),this.start=this.$wrapElement(D()),this._renderStart(b),this.end=this.$wrapElement(E()),this._renderEnd(b),a.items&&(this.reset(a.items),delete this.options.items),this},remove:function(){this.$root.off("click dragstart",this.close),d(window).off("resize",this.close),f.View.prototype.remove.apply(this,arguments)},render:function(a){var b=this;return a=a||{},this.empty(),""===a.group?this.$el.addClass("zd-empty-group"):this.$el.removeClass("zd-empty-group"),this.$el.append(this.start.show()),this.$el.append(this.end.show()),this.start.off("transitionend"),this.end.off("transitionend"),this.start.on("click",function(){b.items[0].arc.$donut.click()}).on("mouseenter",function(){b.items[0].arc.$donut.hasClass("active")||b.items[0].arc.$donut.addClass("active")}).on("mouseleave",function(){b.items[0].arc.$donut.hasClass("active")&&b.items[0].arc.$donut.removeClass("active")}),this.end.on("click",function(){var a=b.items.length-1;b.items[a].arc.$donut.click()}).on("mouseenter",function(){var a=b.items.length-1;b.items[a].arc.$donut.hasClass("active")||b.items[a].arc.$donut.addClass("active")}).on("mouseleave",function(){var a=b.items.length-1;b.items[a].arc.$donut.hasClass("active")&&b.items[a].arc.$donut.removeClass("active")}),window.requestAnimationFrame(function(){b._renderStart(),b._renderEnd()}),this.setPosition(a),this.open(),this},renderIcons:function(){var a=this;return e.each(this.icons,function(b,c){a.renderIcon(c)}),this},renderIcon:function(a){var b=this.icons;return 0>a||a>=b.length?this:(this.$el.children().has(b[a].$icon).length||this.$el.append(b[a].$icon),window.requestAnimationFrame(function(){b[a].$icon.css({top:-91,left:-30,opacity:1})}),this)},setPosition:function(a){return this.position.left=a.left||this.position.left,this.position.top=a.top||this.position.top,this.$el.css({left:this.position.left,top:this.position.top}),this},renderItems:function(){var a=this;this.items.length;return e.each(this.items,function(b,c){a.renderGroup(c)}),this},renderGroup:function(a){var b=this.items;return this.isClosed(a)?this:0>a||a>=b.length?this:(this._renderArc(a),b[a].arc.$el.show(200),this)},reset:function(a){var b=this;return this.clear(),e.each(a,function(a){b.add(a)}),this},clear:function(){return this.clearItems(),this.clearIcons(),this},clearItems:function(){for(;0!==this.items.length;)this.removeItem(0);return this.closed=[],this},clearIcons:function(){for(;0!==this.icons.length;)this.removeIcon(0);return this},add:function(a){switch(a.type){case"icon":this.addIcon(a);break;default:this.addItem(a)}return this},addIcon:function(a){var b=this;return d.isFunction(a.disabled)&&a.disabled()===!0?this:("exclude"===a.name?(a.$icon=d('<div class="zd-radial-icon-exclude" title="Exclude"></div>'),a.$icon.append(F)):(a.$icon=d('<div class="zd-radial-icon" title="'+a.label+'"></div>'),a.$icon.append('<i class="zd icon '+a.label.toLowerCase()+'"/>')),setTimeout(function(){a.$icon.on("click",function(c){return"function"==typeof a.action?a.action.call(this,c,b.$el):null})},300),this.icons.push(a),this)},addItem:function(a){var b=this,c=this.items,e=c[0],f=c[c.length-1];return a.arc=new h.Arc(this.options.arcClosed),setTimeout(function(){a.arc.$donut.on("click",function(c){return"function"==typeof a.action?a.action.call(this,c,b.$el):(""===a.group.group&&c.stopPropagation(),null)})},300),a.arc.$center.html(this.options.template(a)),f&&(f.arc.$donut.off("mouseenter"),f.arc.$donut.off("mouseleave")),a.arc.$donut.on("mouseenter",function(){b.end.hasClass("active")||b.end.addClass("active")}).on("mouseleave",function(){b.end.hasClass("active")&&b.end.removeClass("active")}),e&&e.arc.$donut.on("mouseenter",function(){b.start.hasClass("active")||b.start.addClass("active")}).on("mouseleave",function(){b.start.hasClass("active")&&b.start.removeClass("active")}),d.isFunction(a.disabled)&&a.disabled()===!0?this:(this.items.push(a),this)},removeItem:function(a){var b=this.items[a];return this.isClosed(a)&&this.closed.splice(this.closed.indexOf(a),1),b.arc.$donut.off("click"),b.arc.$donut.off("mouseenter"),b.arc.$donut.off("mouseleave"),b.arc.remove(),this.items.splice(a,1),this},removeIcon:function(a){var b=this.icons[a];return b.$icon.off("click"),b.$icon.remove(),this.icons.splice(a,2),this},close:function(){if(this.isOpen){var a=this,b={start:90,end:90,gap:0,radius:this.options.arc.radius,width:this.options.arc.width};e.each(this.items,function(b,c){a.closeItem(c)}),e.each(this.icons,function(b,c){a.closeIcon(c)}),this.start&&(this._renderStart(b),this.start.one("transitionend",function(){a.start.hide(),a.empty()})),this.end&&(this._renderEnd(b),this.end.one("transitionend",function(){a.end.hide(),a.empty()})),this.isOpen=!1,this.trigger("close")}return this},open:function(){var a=this,b="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend";return this.isOpen||(this.start.off(b).on(b,function(){a.isOpen=!0}),this.closed=[],this.renderItems(),this.renderIcons(),this.trigger("open")),this},closeItem:function(a){var b=this.items;return this.isClosed(a)?this:0>a||a>=b.length?this:(b[a].arc.set(this.options.arcClosed),b[a].arc.$el.fadeOut(200),this.closed.push(a),this)},closeIcon:function(a){var b=this.icons;return b[a].$icon.css({width:0,height:0,opacity:0}),this},openItem:function(a){var b=this.items;return this.isClosed(a)?0>a||a>=b.length?this:(this.closed.splice(this.closed.indexOf(a),1),this.renderGroup(a),this):this},isClosed:function(a){return-1!==this.closed.indexOf(a)},_renderArc:function(a){var b=a,c=this.items.length-this.closed.length,d=this.items[a].arc,f={};return e.each(this.closed,function(c){a>c&&b--}),f.gap=this.options.arc.gap,f.radius=this.options.arc.radius,f.angle=(this.options.arc.end-this.options.arc.start)/c,f.start=this.options.arc.start+f.angle*b,this.$el.children().has(d.$el).length||this.$el.append(d.$el),window.requestAnimationFrame(function(){d.set(f)}),this},_renderStart:function(a){a=a||this.options.arc;var b=this.start,c=a.end+90,d=a.width,e=a.radius-a.width,f=-a.width/2+a.gap/2;b.css({transform:"rotate("+c+"deg)",transformOrigin:-f+"px "+-e+"px",width:d/2,height:d,borderBottomLeftRadius:d/2,borderTopLeftRadius:d/2,top:e,left:f})},_renderEnd:function(a){a=a||this.options.arc;var b=this.end,c=a.start+90,d=a.width,e=a.radius-a.width,f=-a.gap/2;b.css({transform:"rotate("+c+"deg)",transformOrigin:-f+"px "+-e+"px",width:d/2,height:d,borderBottomRightRadius:d/2,borderTopRightRadius:d/2,top:e,left:f})}});var G=a("./colorPickerTemplate.html");l.ColorPicker=f.View.extend({template:G,initialize:function(a){return f.View.prototype.initialize.apply(this,arguments),this.color=a.color,this.render()},render:function(){return this.button=this.$wrapElement(this.template({color:this.color})),this.$el.append(this.button),this.renderPopup(),this},setColor:function(a){this.color=a,this.button.css("background",this.color),this.button.spectrum("set",this.color)},applyColor:function(a){this.button.css("background",a),this.trigger("change",a)},renderPopup:function(){var a,b,c=this;this.button.spectrum({color:this.color,preferredFormat:"hex",showInput:!0,showInitial:!0,chooseText:"Apply",cancelText:"Cancel",change:function(a){c.color=a.toHexString()},beforeShow:function(){c.trigger("beforeShow")},show:function(){if(!b){b=d(".sp-container:visible");var e=b.find(".sp-choose");e.addClass("zd btn btn-success btn-block"),b.find(".sp-cancel").addClass("zd btn btn-cancel btn-block").insertAfter(e),e.on("click",function(){c.applyColor(c.color)})}a=new l.SmallPopup({customClass:"colorPickerPalette",pointerWidth:14}),a.render(b).position({of:c.button,my:"left+10 center+10",at:"right center",collision:"flipfit flipfit"})},hide:function(){b.appendTo("body"),a.hide()}})}});var H=(a("./tooltipTemplate.html"),a("./tooltipInfoTemplate.html"));l.VisualizationTooltip=m.extend({infoTemplate:H,converter:function(a){var b=this.controller,c=b.state,f=Object.keys(b.metrics),g={format:"#,##0.##",locale:"us"},h={},i=a.current.metrics;if(e.isNumber(a.current.count)?h.current={count:d.formatNumber(a.current.count,g)}:h.current={count:d.formatNumber(parseInt(a.current.count.replace(/,/g,""),10),g)},h.group=a.group,a.key&&(h.key=a.key),f.length>0&&i&&(h.current.metrics={},e.each(b.metrics,function(b){if(Array.isArray(b))e.each(b,function(b){if("count"!==b.metric.name&&"none"!==b.metric.name&&i[b.metric.name]){var c=b.formatted(a);h.current.metrics[b.metric.label+" : "+b.objectField.label]=h.current.metrics[b.metric.label+" : "+b.objectField.label]||{},h.current.metrics[b.metric.label+" : "+b.objectField.label][b.metric.func]=c}});else{if("count"===b.metric.name||"none"===b.metric.name)return;if(h.current.metrics[b.objectField.label]=h.current.metrics[b.objectField.label]||{},b.metric.boxPlot){var c=b.formatted(a),d=h.current.metrics[b.objectField.label];return d.Max=c[4],d.Q3=c[3],d.Median=c[2],d.Q1=c[1],void(d.Min=c[0])}var f=b.formatted(a);h.current.metrics[b.objectField.label][b.metric.func]=f}})),a.historical&&(h.historical={count:d.formatNumber(a.historical.count,g)},f.length>0&&(h.historical.metrics={},e.each(this.controller.metrics,function(b){if("count"!==b.metric.name&&"none"!==b.metric.name){var c=b.formatted(a,null,{historical:!0});h.historical.metrics[b.objectField.label]=h.historical.metrics[b.objectField.label]||{},h.historical.metrics[b.objectField.label][b.metric.func]=c}}))),i){var j=c.groupBy.toJSON(),k=j.map(function(a){return{name:a.sort.name,func:a.sort.metricFunc||a.sort.func}});k.forEach(function(a){var c=a.name,d=a.func,e=b.fields.findWhere({name:c}),f=e.get("label"),g=!(!i[f]||!i[f][d]);if("count"!==c&&"none"!==c&&!g){var j=i[c];if(j){var k=e.get("storageConfig"),l=k.type||e.type,m=new n(l),o=j[d],p=m.format(o);h.current=h.current||{},h.current.metrics=h.current.metrics||{},h.current.metrics[f]=h.current.metrics[f]||{},h.current.metrics[f][d]=p}}})}return h},initialize:function(a){return j.prototype.initialize.apply(this,arguments),e.bindAll(this,"snap","unsnap","onMenuClose"),this.tid=Math.round(1e9*Math.random())+"",this.SETTINGS={radius:18,border:2,color:"#939393",bgColor:"white",opacity:1,edgeMargin:5},this.$body=d("body"),this.$root=this.$body,this.hidden=!0,this.at={left:0,top:0},this.getter=null,this.snapped=!1,this.temp={},a.template&&("string"==typeof a.template?this.infoTemplate=e.template(a.template):this.infoTemplate=a.template,delete a.template),a.at&&(this.at=a.at,delete a.at),a.converter&&(this.converter=a.converter,delete a.converter),a.controller&&(this.controller=a.controller,this.$root=this.controller.$el,delete a.controller,this.applyEvents()),this.options=a,this.$el.addClass("visualization-tooltip").appendTo(this.$body),this.position={x:0,y:0},this.SHAPES={corner:this.templateStroke({width:this.SETTINGS.radius,height:2*this.SETTINGS.radius}),between:this.templateStroke({width:this.SETTINGS.radius,height:3*this.SETTINGS.radius})},this.$styles=d("<style></style>"),this.$tailDiv=d('<div class="zd_controls_tooltip_tail"></div>'),this},applyEvents:function(){var a=this;return this.listenTo(this.controller.thread,"thread:message",function(){setTimeout(function(){a.update()},60)}),this},render:function(a){var b=null;return this.snapped?(this.temp.render=a,this):this.hidden?(this.$el.empty().hide(),this):(this.$el.html(this.template({content:""})),a.at&&(this.at=a.at,delete a.at),a.color&&(this.color=a.color,this.updateColor(),delete a.color),a.getter&&(this.updateGetter(a.getter),delete a.getter),a.contentGetter&&(this.contentGetter=a.contentGetter,delete a.contentGetter),a.event&&(b=a.event,delete a.event),this.$tailDiv.appendTo(this.$main()),this.prepareStyles(),this.prepareCurve(),this.$el.show(),this.update(),this.move(b?{event:b}:!1),this)},update:function(a){var b;if((!this.hidden||this.snapped)&&(this.getter||this.contentGetter||!this.controller)){if(this.contentGetter){var c=this.contentGetter();b=c()}else{var f,g=this.getter?this.getter():{},h=g(),i=JSON.stringify(h.group)+(h.key?h.key:"");this.tid=i,this.controller?(f=this.converter(g()),f.volumeMetric=this.controller.source.get("volumeMetric")):f={volumeMetric:{label:"Volume",visible:!0}},f.text=k.text,f._=e,this.options.editUrl&&(f.editUrl=this.options.editUrl),b=this.infoTemplate(f)}this.$in().html(b);var j=d(this.$el.find(".zd_tooltip_info_header")),l=j.width();return l%2!==0&&j.width(l+1),this.updateColor(),this.snapped?this:(a&&(a.event||a.at)&&this.move(a),this)}},updateGetter:function(a){this.getter!==a&&(this.getter=a,this.update())},prepareStyles:function(){function a(a,b){return"#"+i+" "+a+"{"+b+"}"}function b(a){var b="";for(var d in a)a.hasOwnProperty(d)&&(b+=c(d,a[d]));return b}function c(a,b){return" "+a+":"+b+"; "}function d(c,d){g+=a(c,b(d))}function e(a){return a+"px "}function f(a){var b=navigator.userAgent,c=/MSIE\s?(\d+)(?:\.(\d+))?/i,d=b.match(c);return d&&10===d[1]?a:0}var g="",h=this.SETTINGS,i=this.controller?"tid_"+this.controller.UUID:"tid_"+this.options.tooltipId;Math.round(h.radius/1.5);return this.$el.attr("id",i),d(".zd_controls_tooltip_shape",{opacity:h.opacity,"background-color":h.bgColor,border:e(h.border)+"solid "+h.color,"border-radius":e(h.radius/1.5)}),d(".zd_controls_tooltip_tail.corner",{width:e(h.radius),height:e(2*h.radius)}),d(".zd_controls_tooltip_tail.corner.right",{right:e(-h.border)}),d(".zd_controls_tooltip_tail.corner.left",{left:e(-h.border),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.corner.top",{top:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom",{transform:"scaleY(-1)",bottom:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom.left",{transform:"scaleY(-1) scaleX(-1)",bottom:e(-(h.radius+h.border/2))}),d(".zd_controls_tooltip_tail.between",{width:e(h.radius),height:e(3*h.radius)}),d(".zd_controls_tooltip_tail.between.right",{margin:e(1.5*-h.radius)+" "+e(f(0))+" 0 0",right:e(-h.radius)}),d(".zd_controls_tooltip_tail.between.left",{margin:e(1.5*-h.radius+f(4))+"0 0 "+e(f(0)),left:e(-h.radius),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.between.top",{top:e(2*-h.radius-h.border/2+1),left:"50%",margin:"0 0 0 "+e(-(h.radius/2+h.border/2)),transform:"rotate(-90deg)"}),d(".zd_controls_tooltip_tail.between.bottom",{bottom:e(2*-h.radius-h.border/2+1),left:"50%",margin:"0 0 0 "+e(-(h.radius/2+h.border/2)),transform:"rotate(90deg)"}),d(".zd_controls_tooltip_stroke",{stroke:h.color,fill:h.bgColor,"stroke-width":e(h.border),"stroke-linecap":"round"}),this.$styles.text(g),this.$styles.appendTo(this.$body),this}});var I=a("./addVisInfoPopupTemplate.html");l.AddVisualization=l.PalettePopup.extend({template:I,events:{"click .zd.icon.magnifying-glass":"toggleSearchField","click .zd-infopopup-background":"hide"},initialize:function(){l.PalettePopup.prototype.initialize.apply(this,arguments)},render:function(){return l.PalettePopup.prototype.render.apply(this,arguments),this},toggleSearchField:function(){var a=this.searchBox.$el.is(":visible")?"slideUp":"slideDown";this.searchBox.$el.velocity(a,{duration:150})},updatePalette:function(a,b,c){b instanceof d||b instanceof HTMLElement?(this.$head.empty().append(b),this.$head.show()):"string"==typeof b?(this.$head.text(b),this.$head.show()):this.$head.hide(),this.$body.html(a),this.$body.css("max-height",this.options.containment.height()-c.top-c.bottom-(this.$el.outerHeight()-this.$body.height()))}}),b.exports=l},{"../Core/MVC":6,"../Core/MVC/View":5,"../components/Vocabulary":60,"../utilities/MetricFormatter":146,
"../views/Tooltip":232,"./../models/User":139,"./../utilities":151,"./../views/SearchBox/index.js":223,"./Dialog":62,"./Palette":63,"./addVisInfoPopupTemplate.html":64,"./arrowAllTemplate.html":65,"./arrowHorizontalTemplate.html":66,"./arrowVerticalTemplate.html":67,"./colorPickerTemplate.html":68,"./confirmMessageTemplate.html":69,"./fullscreenTemplate.html":72,"./infoPopupFooterTemplate.html":74,"./infoPopupTemplate.html":75,"./pointerTemplate.html":78,"./popoverBodyTemplate.html":79,"./popoverHeadTemplate.html":80,"./radialMenuEndTemplate.html":81,"./radialMenuItemTemplate.html":82,"./radialMenuRemoveButton.html":83,"./radialMenuStartTemplate.html":84,"./sidePaneTemplate.html":85,"./sidePaneTemplateModal.html":86,"./smallPointerTemplate.html":87,"./smallPopupTemplate.html":88,"./tooltipInfoTemplate.html":89,"./tooltipTemplate.html":90,jquery:109,underscore:244,"velocity-animate":245}],71:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide fade '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-header">\n        <button title="Close" value="dialog-reject" class="close">&times;</button>\n        <h3 class="dialog-head pull-left"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body">\n    </div>\n    <div class="modal-footer dialog-controls">\n        <button title="'+(null==(__t=rejectButtonTitle)?"":__t)+'" value="dialog-reject" class="btn btnNo" aria-hidden="true">'+(null==(__t=rejectButtonLabel)?"":__t)+'</button>\n        <button title="'+(null==(__t=acceptButtonTitle)?"":__t)+'" value="dialog-accept" class="btn btn-primary btnYes">'+(null==(__t=acceptButtonLabel)?"":__t)+"</button>\n    </div>\n</div>";return __p}},{lodash:242}],72:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="fsWrapper">\n    <div class="fsHeader">\n        <div class="fsHead"></div>\n        <div class="exitFullscreen"><i class="zd icon exit-fullscreen"></i></div>\n        <div class="clearfix"></div>\n    </div>\n    <div class="fsBody">\n        <div class="fullScreenContainer"></div>\n    </div>\n    <div class="fsFooter">\n        <div class="fullScreenFooter"></div>\n    </div> \n</div>\n<div class="fsExpander"></div>';return __p}},{lodash:242}],73:[function(a,b,c){"use strict";b.exports=a("./controls")},{"./controls":70}],74:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-infopopup-footer"></div>';return __p}},{lodash:242}],75:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide zd-infopopup '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-header zd-infopopup-titlebar">\n        <button title="Close" value="dialog-reject" class="zd icon close" />\n        <button title="" value="dialog-back" class="zd icon back" style="display:none;" />  \n        <h3 class="dialog-head zd-infopopup-header"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body zd-infopopup-body">\n    </div>\n    <div class="zd-infopopup-background">\n    </div>\n    <div class="zd-infopopup-background small">\n    </div>\n</div>';return __p}},{lodash:242}],76:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<button title="'+(null==(__t=title)?"":__t)+'" class="zd btn btn-'+(null==(__t=type)?"":__t)+'">'+(null==(__t=label)?"":__t)+"</button>";return __p}},{lodash:242}],77:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide zd-palette '+(null==(__t=customClass)?"":__t)+'">\n    <div class="modal-header zd-palette-titlebar">\n        <button title="Close" value="dialog-reject" class="zd icon close" /> \n        <button title="" value="dialog-back" class="zd icon back" style="display:none;" /> \n        <div class="zd icon header"/> \n        <h3 class="dialog-head zd-palette-header"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body zd-palette-body">\n    </div>\n    <div class="zd-palette-background">\n    </div>\n    <div class="zd-palette-background small">\n    </div>\n</div>';return __p}},{lodash:242}],78:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-infopopup-pointer">\n	<div class="zd-infopopup-pointer-arrow"></div>\n</div>';return __p}},{lodash:242}],79:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="span4" style="margin-left:0"> \n    <div class="row-fluid">   \n        <div class="popoverWindow" id="popowerWindow_1" style="min-height:'+(null==(__t=height)?"":__t)+'px;">\n        <div style="height: '+(null==(__t=height-40)?"":__t)+'px; overflow: auto;"> \n        ',data.forEach(function(a){__p+='\n            <div class="span12 popoverSmallHeader">\n                '+(null==(__t=a.name)?"":__t)+' \n            </div>  \n            <div class="span12 popoverDataInfo">\n                Time Window \n                <div>'+(null==(__t=a.time)?"":__t)+"</div> \n            </div>  \n            ",a.values.forEach(function(a){__p+='\n                <div class="span12 popoverDataInfo">\n                    '+(null==(__t=a.name)?"":__t)+" \n                    <div>"+(null==(__t=a.value)?"":__t)+"</div> \n                </div>  \n            "}),__p+="\n        "}),__p+='\n        </div> \n            <div class="span12 popoverFooter">\n                <span></span>\n                <div class="btn-group">\n                    <button class="btn',0==buttons.zoom&&(__p+=" dis"),__p+='" data-type="zoom">Zoom In</button>\n                    <button class="btn',0==buttons.details&&(__p+=" dis"),__p+='" data-type="details">Details</button>\n                    <button class="btn',0==buttons.trend&&(__p+=" dis"),__p+='" data-type="trend" data-name="_ts">Trend</button>\n                    ',buttons.twitter&&(__p+='<button class="btn" data-type="twitter" data-name="_ts">Twitter</button>'),__p+='\n                </div>\n            </div>\n        </div>\n        <div class="popoverWindow" id="popowerWindow_2" style="display:none;min-height:'+(null==(__t=height)?"":__t)+'px;">\n            <div style="height: '+(null==(__t=height)?"":__t)+'px; overflow: auto;"> \n                ',zoomInFields.forEach(function(a){__p+='\n                    <div class="span12 popoverDataInfo">\n                        <div class="popoverZoomTo" data-name="'+(null==(__t=a.name)?"":__t)+'">'+(null==(__t=a.label)?"":__t)+"</div> \n                    </div>  \n                "}),__p+="\n            </div>\n        </div>\n        \n    </div>\n</div>";return __p}},{lodash:242}],80:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<span style="overflow: hidden;display: block;">'+(null==(__t=name)?"":__t)+"</span>";return __p}},{lodash:242}],81:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-radial-end"></div>';return __p}},{lodash:242}],82:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<span class="zd-radial-item-label" data-name="'+(null==(__t=name)?"":__t)+'">'+(null==(__t=label)?"":__t)+"</span>";return __p}},{lodash:242}],83:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="61" height="25" viewBox="0 0 61 25">\n    <defs>\n        <path id="radialMenuRemoveTitlePath" d="M 96, 96 m -96, 0 a 96,96 0 1,1 192,0 a 96,96 0 1,1 -192,0"></path>\n    </defs>\n    <g>\n        <g transform="translate(0, 5)">\n            <path class="background" d="M8.2,19.6c-3.5,0-6.6-2.3-7.7-5.7c-1.2-4.2,1.2-8.7,5.4-9.9c8-2.3,16.3-3.5,24.6-3.5\n                  C39,0.4,47,1.5,55.1,3.9c4.2,1.2,6.7,5.7,5.4,9.9c-1.2,4.2-5.7,6.7-9.9,5.4c-6.6-1.9-13.1-2.9-20-2.9c-6.8,0-13.6,1-20.1,2.9\n                  C9.7,19.5,8.9,19.6,8.2,19.6z"/>\n        </g>\n    </g>\n    <g transform="translate(-65, 17)">\n        <text font-size="10" text-anchor="middle" fill="white">\n            <textPath startOffset="25%" xlink:href="#radialMenuRemoveTitlePath" id="title">REMOVE</textPath>\n        </text>\n    </g>\n</svg>';return __p}},{lodash:242}],84:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-radial-start"></div>';return __p}},{lodash:242}],85:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div>\n    <div class="zd-side-pane">\n        <div class="zd-side-pane-header"/>\n        <button value="closeSidePane" class="close">&times;</button>\n        <div class="zd-side-pane-body"/>\n    </div>\n</div>';return __p}},{lodash:242}],86:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-modal sidepane"> \n    <div class="zd-side-pane">\n        <div class="zd-side-pane-loading"/>\n        <div class="zd-side-pane-header"/>\n        <div class="zd-side-pane-body"/>\n    </div>\n</div> ';return __p}},{lodash:242}],87:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-smallpopup-pointer">\n	<div class="zd-smallpopup-pointer-arrow"></div>\n</div>';return __p}},{lodash:242}],88:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide zd-smallpopup '+(null==(__t=customClass)?"":__t)+'" >\n    <div class="modal-body dialog-body zd-smallpopup-body">\n    </div>\n    <div class="zd-smallpopup-background">\n    </div>\n    <div class="zd-smallpopup-background small">\n    </div>\n</div>';return __p}},{lodash:242}],89:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj){__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n";var key=key||!1;__p+='\n<h4 class="zd_tooltip_info_header">'+__e(Array.isArray(group)?group.join(", "):key?key+", "+group:group)+'</h4>\n<div class="zd_tooltip_info_group">\n    ',historical&&(__p+='\n        <span class="zd_tooltip_info_title">Current</span>\n    '),__p+='\n    <div class="zd_tooltip_info_table">\n        ',volumeMetric.visible&&(__p+='\n            <div class="zd_tooltip_info_table_row">\n                <div class="zd_tooltip_info_table_col">\n                    '+__e(volumeMetric.label)+'\n                </div>\n                <div class="zd_tooltip_info_table_col">\n                    '+__e(current.count)+"\n                </div>\n            </div>\n        "),__p+="\n        ",current.metrics&&(__p+="\n            ",_.each(current.metrics,function(a,b){__p+="\n                ",_.each(a,function(a,c){__p+='\n                    <div class="zd_tooltip_info_table_row">\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(b)+" ("+__e(text(c))+')\n                        </div>\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(a)+"\n                        </div>\n                    </div>\n                "}),__p+="\n            "}),__p+="\n        "),__p+="\n    </div>\n</div>\n";var historical=historical||!1;__p+="\n",historical&&(__p+='\n<div class="zd_tooltip_info_group">\n    <span class="zd_tooltip_info_title">Historical</span>\n    <div class="zd_tooltip_info_table">\n        <div class="zd_tooltip_info_table_row">\n            <div class="zd_tooltip_info_table_col">\n                Volume\n            </div>\n            <div class="zd_tooltip_info_table_col">\n                '+__e(historical.count)+"\n            </div>\n        </div>\n        ",historical.metrics&&(__p+="\n            ",_.each(historical.metrics,function(a,b){__p+="\n                ",_.each(a,function(a,c){__p+='\n                    <div class="zd_tooltip_info_table_row">\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(b)+" ("+__e(c)+')\n                        </div>\n                        <div class="zd_tooltip_info_table_col">\n                            '+__e(a)+"\n                        </div>\n                    </div>\n                "}),__p+="\n            "}),__p+="\n        "),__p+="\n    </div>\n</div>\n")}return __p}},{lodash:242}],90:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd_controls_tooltip_content">\n    '+(null==(__t=content)?"":__t)+'\n</div>\n<div class="zd_controls_tooltip_shape"></div>';return __p}},{lodash:242}],91:[function(a,b,c){!function(a){function b(a){var b=new Date(Date.UTC.apply(Date,arguments));return new Date(b.setUTCFullYear(a))}function c(b,c){var d,e=a(b).data(),f={},g=new RegExp("^"+c.toLowerCase()+"([A-Z])"),c=new RegExp("^"+c.toLowerCase());for(var h in e)c.test(h)&&(d=h.replace(g,function(a,b){return b.toLowerCase()}),f[d]=e[h]);return f}function d(b){var c={};if(k[b]||(b=b.split("-")[0],k[b])){var d=k[b];return a.each(j,function(a,b){b in d&&(c[b]=d[b])}),c}}var e=a(window),f=function(b,c){this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(l.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};f.prototype={constructor:f,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(k[d]||(d=d.split("-")[0],k[d]||(d=i.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=l.parseFormat(c.format);c.startDate!==-(1/0)&&(c.startDate?c.startDate=l.parseDate(c.startDate,e,c.language):c.startDate=-(1/0)),c.endDate!==1/0&&(c.endDate?c.endDate=l.parseDate(c.endDate,e,c.language):c.endDate=1/0),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)});var f=String(c.orientation).toLowerCase().split(/\s+/g),g=c.orientation.toLowerCase();if(f=a.grep(f,function(a){return/^auto|left|right|top|bottom$/.test(a)}),c.orientation={x:"auto",y:"auto"},g&&"auto"!==g)if(1===f.length)switch(f[0]){case"top":case"bottom":c.orientation.y=f[0];break;case"left":case"right":c.orientation.x=f[0]}else g=a.grep(f,function(a){return/^left|right$/.test(a)}),c.orientation.x=g[0]||"auto",g=a.grep(f,function(a){return/^top|bottom$/.test(a)}),c.orientation.y=g[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.on(c)},_unapplyEvents:function(a){for(var b,c,d=0;d<a.length;d++)b=a[d][0],c=a[d][1],b.off(c)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).size()||this.picker.is(a.target)||this.picker.find(a.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.date,e=new Date(d.getTime()+6e4*d.getTimezoneOffset());this.element.trigger({type:b,date:e,format:a.proxy(function(a){var b=a||this.o.format;return l.formatDate(d,b,this.o.language)},this)})},show:function(a){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),a&&a.preventDefault(),this._trigger("show")},hide:function(a){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){this.date=a,this.setValue()},setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a):this.component&&this.element.find("input").val(a)},getFormattedDate:function(a){return void 0===a&&(a=this.o.format),l.formatDate(this.date,a,this.o.language)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,f=e.width(),g=e.height(),h=parseInt(this.element.parents().filter(function(){return"auto"!=a(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),j=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0),k=this.component?this.component.outerWidth(!0):this.element.outerWidth(!0),l=i.left,m=i.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(l-=b-k)):(this.picker.addClass("datepicker-orient-left"),i.left<0?l-=i.left-d:i.left+b>f&&(l=f-b-d));var n,o,p=this.o.orientation.y;"auto"===p&&(n=0+i.top-c,o=g-(i.top+j+c),p=Math.max(n,o)===o?"top":"bottom"),this.picker.addClass("datepicker-orient-"+p),"top"===p?m+=j:m-=c+parseInt(this.picker.css("padding")),this.picker.css({top:m,left:l,zIndex:h})}},_allow_update:!0,update:function(){if(this._allow_update){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=l.parseDate(a,this.o.format,this.o.language),b&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+k[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+k[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=this.date.valueOf(),g=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()==d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()==d&&b.getUTCMonth()>e)&&c.push("new"),this.o.todayHighlight&&b.getUTCFullYear()==g.getFullYear()&&b.getUTCMonth()==g.getMonth()&&b.getUTCDate()==g.getDate()&&c.push("today"),f&&b.valueOf()==f&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!=a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var c,d=new Date(this.viewDate),e=d.getUTCFullYear(),f=d.getUTCMonth(),g=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),i=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,j=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(k[this.o.language].months[f]+" "+e),this.picker.find("tfoot th.today").text(k[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(k[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var m=e;0===f&&(m=e-1);var n=b(m,f-1,28,0,0,0,0),o=l.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(o),n.setUTCDate(o-(n.getUTCDay()-this.o.weekStart+7)%7);var p=new Date(n);p.setUTCDate(p.getUTCDate()+42),p=p.valueOf();for(var q,r=[];n.valueOf()<p;){if(n.getUTCDay()==this.o.weekStart&&(r.push("<tr>"),this.o.calendarWeeks)){var s=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),t=new Date(+s+(11-s.getUTCDay())%7*864e5),u=new Date(+(u=b(t.getUTCFullYear(),0,1))+(11-u.getUTCDay())%7*864e5),v=(t-u)/864e5/7+1;r.push('<td class="cw">'+v+"</td>")}q=this.getClassNames(n),q.push("day");var w=this.o.beforeShowDay(n);void 0===w?w={}:"boolean"==typeof w?w={enabled:w}:"string"==typeof w&&(w={classes:w}),w.enabled===!1&&q.push("disabled"),w.classes&&(q=q.concat(w.classes.split(/\s+/))),w.tooltip&&(c=w.tooltip),q=a.unique(q),r.push('<td class="'+q.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+n.getUTCDate()+"</td>"),n.getUTCDay()==this.o.weekEnd&&r.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(r.join(""));var x=this.date&&this.date.getUTCFullYear(),y=this.picker.find(".datepicker-months").find("th:eq(1)").text(e).end().find("span").removeClass("active");x&&x==e&&y.eq(this.date.getUTCMonth()).addClass("active"),(g>e||e>i)&&y.addClass("disabled"),e==g&&y.slice(0,h).addClass("disabled"),e==i&&y.slice(j+1).addClass("disabled"),r="",e=10*parseInt(e/10,10);var z=this.picker.find(".datepicker-years").find("th:eq(1)").text(e+"-"+(e+9)).end().find("td");e-=1;for(var A=-1;11>A;A++)r+='<span class="year'+(-1==A?" old":10==A?" new":"")+(x==e?" active":"")+(g>e||e>i?" disabled":"")+'">'+e+"</span>",e+=1;z.html(r)},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(c){c.preventDefault();var d=a(c.target).closest("span, td, th");if(1==d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var e=l.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,e),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,e),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var f=new Date;f=b(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0),this.showMode(-2);var g="linked"==this.o.todayBtn?null:"view";this._setDate(f,g);break;case"clear":var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){if(this.viewDate.setUTCDate(1),d.is(".month")){var i=1,j=d.parent().find("span").index(d),k=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(j),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}else{var k=parseInt(d.text(),10)||0,i=1,j=0;this.viewDate.setUTCFullYear(k),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(b(k,j,i,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var i=parseInt(d.text(),10)||1,k=this.viewDate.getUTCFullYear(),j=this.viewDate.getUTCMonth();d.is(".old")?0===j?(j=11,k-=1):j-=1:d.is(".new")&&(11==j?(j=0,k+=1):j+=1),this._setDate(b(k,j,i,0,0,0,0))}}},_setDate:function(a,b){b&&"date"!=b||(this.date=new Date(a)),b&&"view"!=b||(this.viewDate=new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!=b||this.hide()},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38==a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.date),c.setUTCDate(this.date.getUTCDate()+7*b),d=new Date(this.viewDate),d.setUTCDate(this.viewDate.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:this.hide(),a.preventDefault();break;case 9:this.hide()}if(e){this._trigger("changeDate");var f;this.isInput?f=this.element:this.component&&(f=this.element.find("input")),f&&f.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+l.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var g=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,
a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};g.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.date}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!=e){if(d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates()}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var h=a.fn.datepicker;a.fn.datepicker=function(b){var e=Array.apply(null,arguments);e.shift();var h;return this.each(function(){var j=a(this),k=j.data("datepicker"),l="object"==typeof b&&b;if(!k){var m=c(this,"date"),n=a.extend({},i,m,l),o=d(n.language),p=a.extend({},i,o,m,l);if(j.is(".input-daterange")||p.inputs){var q={inputs:p.inputs||j.find("input").toArray()};j.data("datepicker",k=new g(this,a.extend(p,q)))}else j.data("datepicker",k=new f(this,p))}return"string"==typeof b&&"function"==typeof k[b]&&(h=k[b].apply(k,e),void 0!==h)?!1:void 0}),void 0!==h?h:this};var i=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},j=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=f;var k=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},l={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,l.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ \/:-@\[-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(c,d,e){if(c instanceof Date)return c;if("string"==typeof d&&(d=l.parseFormat(d)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(c)){var g,h,i=/([\-+]\d+)([dmwy])/,j=c.match(/([\-+]\d+)([dmwy])/g);c=new Date;for(var m=0;m<j.length;m++)switch(g=i.exec(j[m]),h=parseInt(g[1]),g[2]){case"d":c.setUTCDate(c.getUTCDate()+h);break;case"m":c=f.prototype.moveMonth.call(f.prototype,c,h);break;case"w":c.setUTCDate(c.getUTCDate()+7*h);break;case"y":c=f.prototype.moveYear.call(f.prototype,c,h)}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),0,0,0)}var n,o,g,j=c&&c.match(this.nonpunctuation)||[],c=new Date,p={},q=["yyyy","yy","M","MM","m","mm","d","dd"],r={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};r.M=r.MM=r.mm=r.m,r.dd=r.d,c=b(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0);var s=d.parts.slice();if(j.length!=s.length&&(s=a(s).filter(function(b,c){return-1!==a.inArray(c,q)}).toArray()),j.length==s.length){for(var m=0,t=s.length;t>m;m++){if(n=parseInt(j[m],10),g=s[m],isNaN(n))switch(g){case"MM":o=a(k[e].months).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[e].months)+1;break;case"M":o=a(k[e].monthsShort).filter(function(){var a=this.slice(0,j[m].length),b=j[m].slice(0,a.length);return a==b}),n=a.inArray(o[0],k[e].monthsShort)+1}p[g]=n}for(var u,v,m=0;m<q.length;m++)v=q[m],v in p&&!isNaN(p[v])&&(u=new Date(c),r[v](u,p[v]),isNaN(u)||(c=u))}return c},formatDate:function(b,c,d){"string"==typeof c&&(c=l.parseFormat(c));var e={d:b.getUTCDate(),D:k[d].daysShort[b.getUTCDay()],DD:k[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:k[d].monthsShort[b.getUTCMonth()],MM:k[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m;for(var b=[],f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};l.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+l.headTemplate+"<tbody></tbody>"+l.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+l.headTemplate+l.contTemplate+l.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=l,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=h,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery)},{}],92:[function(a,b,c){!function(a){"use strict";var b=function(b,c){if(this.$element=a(b),this.type=this.$element.data("uploadtype")||(this.$element.find(".thumbnail").length>0?"image":"file"),this.$input=this.$element.find(":file"),0!==this.$input.length){this.name=this.$input.attr("name")||c.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=a('<input type="hidden" />'),this.$element.prepend(this.$hidden)),this.$preview=this.$element.find(".fileupload-preview");var d=this.$preview.css("height");"inline"!=this.$preview.css("display")&&"0px"!=d&&"none"!=d&&this.$preview.css("line-height",d),this.original={exists:this.$element.hasClass("fileupload-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.$remove=this.$element.find('[data-dismiss="fileupload"]'),this.$element.find('[data-trigger="fileupload"]').on("click.fileupload",a.proxy(this.trigger,this)),this.listen()}};b.prototype={listen:function(){this.$input.on("change.fileupload",a.proxy(this.change,this)),a(this.$input[0].form).on("reset.fileupload",a.proxy(this.reset,this)),this.$remove&&this.$remove.on("click.fileupload",a.proxy(this.clear,this))},change:function(a,b){if("clear"!==b){var c=void 0!==a.target.files?a.target.files[0]:a.target.value?{name:a.target.value.replace(/^.+\\/,"")}:null;if(!c)return void this.clear();if(this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name),"image"===this.type&&this.$preview.length>0&&("undefined"!=typeof c.type?c.type.match("image.*"):c.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader){var d=new FileReader,e=this.$preview,f=this.$element;d.onload=function(a){e.html('<img src="'+a.target.result+'" '+("none"!=e.css("max-height")?'style="max-height: '+e.css("max-height")+';"':"")+" />"),f.addClass("fileupload-exists").removeClass("fileupload-new")},d.readAsDataURL(c)}else this.$preview.text(c.name),this.$element.addClass("fileupload-exists").removeClass("fileupload-new")}},clear:function(a){if(this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),navigator.userAgent.match(/msie/i)){var b=this.$input.clone(!0);this.$input.after(b),this.$input.remove(),this.$input=b}else this.$input.val("");this.$preview.html(""),this.$element.addClass("fileupload-new").removeClass("fileupload-exists"),a&&(this.$input.trigger("change",["clear"]),a.preventDefault())},reset:function(a){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.original.exists?this.$element.addClass("fileupload-exists").removeClass("fileupload-new"):this.$element.addClass("fileupload-new").removeClass("fileupload-exists")},trigger:function(a){this.$input.trigger("click"),a.preventDefault()}},a.fn.fileupload=function(c){return this.each(function(){var d=a(this),e=d.data("fileupload");e||d.data("fileupload",e=new b(this,c)),"string"==typeof c&&e[c]()})},a.fn.fileupload.Constructor=b,a(document).on("click.fileupload.data-api",'[data-provides="fileupload"]',function(b){var c=a(this);if(!c.data("fileupload")){c.fileupload(c.data());var d=a(b.target).closest('[data-dismiss="fileupload"],[data-trigger="fileupload"]');d.length>0&&(d.trigger("click.fileupload"),b.preventDefault())}})}(window.jQuery)},{}],93:[function(a,b,c){(function(c){jQuery=c.jQuery=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a){"use strict";a(function(){a.support.transition=function(){var a=function(){var a,b=document.createElement("bootstrap"),c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(a in c)if(void 0!==b.style[a])return c[a]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){d.trigger("closed").remove()}var d,e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,"")),d=a(f),b&&b.preventDefault(),d.length||(d=e.hasClass("alert")?e:e.parent()),d.trigger(b=a.Event("close")),b.isDefaultPrevented()||(d.removeClass("in"),a.support.transition&&d.hasClass("fade")?d.on(a.support.transition.end,c):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.alert.data-api",b,c.prototype.close)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f="object"==typeof c&&c;e||d.data("button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),d=this;if(!(b>this.$items.length-1||0>b))return this.sliding?this.$element.one("slid",function(){d.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(b,c){var d,e=this.$element.find(".item.active"),f=c||e[b](),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(this.sliding=!0,g&&this.pause(),f=f.length?f:this.$element.find(".item")[i](),d=a.Event("slide",{relatedTarget:f[0],direction:h}),!f.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(j.$indicators.children()[j.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(d),d.isDefaultPrevented())return;f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),this.$element.one(a.support.transition.end,function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})}else{if(this.$element.trigger(d),d.isDefaultPrevented())return;e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return g&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d,e=a(this),f=a(e.attr("data-target")||(c=e.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),g=a.extend({},f.data(),e.data());f.carousel(g),(d=e.attr("data-slide-to"))&&f.data("carousel").pause().to(d).cycle(),b.preventDefault()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(!this.transitioning&&!this.$element.hasClass("in")){if(b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in"),d&&d.length){if(e=d.data("collapse"),e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;!this.transitioning&&this.$element.hasClass("in")&&(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[null!==a?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){"show"==c.type&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c),c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=a.extend({},a.fn.collapse.defaults,d.data(),"object"==typeof c&&c);e||d.data("collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":d.data();d[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})}(window.jQuery),!function(a){"use strict";function b(){a(d).each(function(){c(a(this)).removeClass("open")})}function c(b){var c,d=b.attr("data-target");return d||(d=b.attr("href"),d=d&&/#/.test(d)&&d.replace(/.*(?=#[^\s]*$)/,"")),c=d&&a(d),c&&c.length||(c=b.parent()),c}var d="[data-toggle=dropdown]",e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(d){var e,f,g=a(this);if(!g.is(".disabled, :disabled"))return e=c(g),f=e.hasClass("open"),b(),f||e.toggleClass("open"),g.focus(),!1},keydown:function(b){var e,f,g,h,i;if(/(38|40|27)/.test(b.keyCode)&&(e=a(this),b.preventDefault(),b.stopPropagation(),!e.is(".disabled, :disabled"))){if(g=c(e),h=g.hasClass("open"),!h||h&&27==b.keyCode)return 27==b.which&&g.find(d).focus(),e.click();f=a("[role=menu] li:not(.divider):visible a",g),f.length&&(i=f.index(f.filter(":focus")),38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<f.length-1&&i++,~i||(i=0),f.eq(i).focus())}}};var f=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new e(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=e,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=f,this},a(document).on("click.dropdown.data-api",b).on("click.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.dropdown-menu",function(a){a.stopPropagation()}).on("click.dropdown.data-api",d,e.prototype.toggle).on("keydown.dropdown.data-api",d+", [role=menu]",e.prototype.keydown)}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.focus().trigger("shown")}):b.$element.focus().trigger("shown")}))},hide:function(b){b&&b.preventDefault();b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]===a.target||b.$element.has(a.target).length||b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?a.proxy(this.$element[0].focus,this.$element[0]):a.proxy(this.hide,this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b):b()):b&&b()}};var c=a.fn.modal;a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),"object"==typeof c&&c);e||d.data("modal",e=new b(this,f)),"string"==typeof c?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=("function"==typeof c.content?c.content.call(b[0]):c.content)||b.attr("data-content")},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f="object"==typeof c&&c;e||d.data("popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(window.jQuery),!function(a){"use strict";function b(b,c){var d,e=a.proxy(this.process,this),f=a(a(b).is("body")?window:b);this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=f.on("scroll.scroll-spy.data-api",e),this.selector=(this.options.target||(d=a(b).attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}b.prototype={constructor:b,refresh:function(){var b,c=this;this.offsets=a([]),this.targets=a([]),b=this.$body.find(this.selector).map(function(){var b=a(this),d=b.data("target")||b.attr("href"),e=/^#\w/.test(d)&&a(d);return e&&e.length&&[[e.position().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),d]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},process:function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f="object"==typeof c&&c;e||d.data("scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b,c,d,e=this.element,f=e.closest("ul:not(.dropdown-menu)"),g=e.attr("data-target");g||(g=e.attr("href"),g=g&&g.replace(/.*(?=#[^\s]*$)/,"")),e.parent("li").hasClass("active")||(b=f.find(".active:last a")[0],d=a.Event("show",{relatedTarget:b}),e.trigger(d),d.isDefaultPrevented()||(c=a(g),this.activate(e.parent("li"),f),this.activate(c,c.parent(),function(){e.trigger({type:"shown",relatedTarget:b})})))},activate:function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e):e(),f.removeClass("in")}};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){
b.preventDefault(),a(this).tab("show")})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=a(this.options.menu),this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:b.top+b.height,left:b.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){for(var b,c=[],d=[],e=[];b=a.shift();)b.toLowerCase().indexOf(this.query.toLowerCase())?~b.indexOf(this.query)?d.push(b):e.push(b):c.push(b);return c.concat(d,e)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("focus",a.proxy(this.focus,this)).on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this)).on("mouseleave","li",a.proxy(this.mouseleave,this))},eventSupported:function(a){var b=a in this.$element;return b||(this.$element.setAttribute(a,"return;"),b="function"==typeof this.$element[a]),b},move:function(a){if(this.shown){switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()}},keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){this.suppressKeyPressRepeat||this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},focus:function(a){this.focused=!0},blur:function(a){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(a){a.stopPropagation(),a.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(b){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var c=a.fn.typeahead;a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f="object"==typeof c&&c;e||d.data("typeahead",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a.fn.typeahead.noConflict=function(){return a.fn.typeahead=c,this},a(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||c.typeahead(c.data())})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)).on("click.affix.data-api",a.proxy(function(){setTimeout(a.proxy(this.checkPosition,this),1)},this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b,c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.bottom,h=f.top,i="affix affix-top affix-bottom";"object"!=typeof f&&(g=h=f),"function"==typeof h&&(h=f.top()),"function"==typeof g&&(g=f.bottom()),b=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=g&&e.top+this.$element.height()>=c-g?"bottom":null!=h&&h>=d?"top":!1,this.affixed!==b&&(this.affixed=b,this.unpin="bottom"==b?e.top-d:null,this.$element.removeClass(i).addClass("affix"+(b?"-"+b:"")))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f="object"==typeof c&&c;e||d.data("affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],94:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function a(){var a={};return a.FRAMERATE=30,a.MAX_VIRTUAL_PIXELS=3e4,a.init=function(b){var c=0;a.UniqueId=function(){return c++,"canvg"+c},a.Definitions={},a.Styles={},a.Animations=[],a.Images=[],a.ctx=b,a.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},a.init(),a.ImagesLoaded=function(){for(var b=0;b<a.Images.length;b++)if(!a.Images[b].loaded)return!1;return!0},a.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},a.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},a.ajax=function(a){var b;return b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b?(b.open("GET",a,!1),b.send(null),b.responseText):null},a.parseXml=function(a){if(window.DOMParser){var b=new DOMParser;return b.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var c=new ActiveXObject("Microsoft.XMLDOM");return c.async="false",c.loadXML(a),c},a.Property=function(a,b){this.name=a,this.value=b},a.Property.prototype.getValue=function(){return this.value},a.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},a.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},a.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},a.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},a.Property.prototype.addOpacity=function(c){var d=this.value;if(null!=c&&""!=c&&"string"==typeof this.value){var e=new b(this.value);e.ok&&(d="rgba("+e.r+", "+e.g+", "+e.b+", "+c+")")}return new a.Property(this.name,d)},a.Property.prototype.getDefinition=function(){var b=this.value.match(/#([^\)'"]+)/);return b&&(b=b[1]),b||(b=this.value),a.Definitions[b]},a.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},a.Property.prototype.getFillStyleDefinition=function(b,c){var d=this.getDefinition();if(null!=d&&d.createGradient)return d.createGradient(a.ctx,b,c);if(null!=d&&d.createPattern){if(d.getHrefAttribute().hasValue()){var e=d.attribute("patternTransform");d=d.getHrefAttribute().getDefinition(),e.hasValue()&&(d.attribute("patternTransform",!0).value=e.value)}return d.createPattern(a.ctx,b)}return null},a.Property.prototype.getDPI=function(a){return 96},a.Property.prototype.getEM=function(b){var c=12,d=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);return d.hasValue()&&(c=d.toPixels(b)),c},a.Property.prototype.getUnits=function(){var a=this.value+"";return a.replace(/[0-9\.\-]/g,"")},a.Property.prototype.toPixels=function(b,c){if(!this.hasValue())return 0;var d=this.value+"";if(d.match(/em$/))return this.numValue()*this.getEM(b);if(d.match(/ex$/))return this.numValue()*this.getEM(b)/2;if(d.match(/px$/))return this.numValue();if(d.match(/pt$/))return this.numValue()*this.getDPI(b)*(1/72);if(d.match(/pc$/))return 15*this.numValue();if(d.match(/cm$/))return this.numValue()*this.getDPI(b)/2.54;if(d.match(/mm$/))return this.numValue()*this.getDPI(b)/25.4;if(d.match(/in$/))return this.numValue()*this.getDPI(b);if(d.match(/%$/))return this.numValue()*a.ViewPort.ComputeSize(b);var e=this.numValue();return c&&1>e?e*a.ViewPort.ComputeSize(b):e},a.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():a.match(/ms$/)?this.numValue():this.numValue()},a.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},a.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(b,c,d,e,f,g){var h=null!=g?this.Parse(g):this.CreateFont("","","","","",a.ctx.font);return{fontFamily:f||h.fontFamily,fontSize:e||h.fontSize,fontStyle:b||h.fontStyle,fontWeight:d||h.fontWeight,fontVariant:c||h.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var b=this;this.Parse=function(c){for(var d={},e=a.trim(a.compressSpaces(c||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},g="",h=0;h<e.length;h++)f.fontStyle||-1==b.Styles.indexOf(e[h])?f.fontVariant||-1==b.Variants.indexOf(e[h])?f.fontWeight||-1==b.Weights.indexOf(e[h])?f.fontSize?"inherit"!=e[h]&&(g+=e[h]):("inherit"!=e[h]&&(d.fontSize=e[h].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):("inherit"!=e[h]&&(d.fontWeight=e[h]),f.fontStyle=f.fontVariant=f.fontWeight=!0):("inherit"!=e[h]&&(d.fontVariant=e[h]),f.fontStyle=f.fontVariant=!0):("inherit"!=e[h]&&(d.fontStyle=e[h]),f.fontStyle=!0);return""!=g&&(d.fontFamily=g),d}},a.ToNumberArray=function(b){for(var c=a.trim(a.compressSpaces((b||"").replace(/,/g," "))).split(" "),d=0;d<c.length;d++)c[d]=parseFloat(c[d]);return c},a.Point=function(a,b){this.x=a,this.y=b},a.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},a.Point.prototype.applyTransform=function(a){var b=this.x*a[0]+this.y*a[2]+a[4],c=this.x*a[1]+this.y*a[3]+a[5];this.x=b,this.y=c},a.CreatePoint=function(b){var c=a.ToNumberArray(b);return new a.Point(c[0],c[1])},a.CreatePath=function(b){for(var c=a.ToNumberArray(b),d=[],e=0;e<c.length;e+=2)d.push(new a.Point(c[e],c[e+1]));return d},a.BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){var g=a+2/3*(c-a),h=b+2/3*(d-b),i=g+1/3*(e-a),j=h+1/3*(f-b);this.addBezierCurve(a,b,g,i,h,j,e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;i<=1;i++){var n=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},o=6*j[i]-12*k[i]+6*l[i],p=-3*j[i]+9*k[i]-9*l[i]+3*m[i],q=3*k[i]-3*j[i];if(0!=p){var r=Math.pow(o,2)-4*q*p;if(!(0>r)){var s=(-o+Math.sqrt(r))/(2*p);s>0&&1>s&&(0==i&&this.addX(n(s)),1==i&&this.addY(n(s)));var t=(-o-Math.sqrt(r))/(2*p);t>0&&1>t&&(0==i&&this.addX(n(t)),1==i&&this.addY(n(t)))}}else{if(0==o)continue;var u=-q/o;u>0&&1>u&&(0==i&&this.addX(n(u)),1==i&&this.addY(n(u)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},a.Transform=function(b){var c=this;this.Type={},this.Type.translate=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(b){var c=a.ToNumberArray(b);this.angle=new a.Property("angle",c[0]),this.cx=c[1]||0,this.cy=c[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.unapply=function(a){a.translate(this.cx,this.cy),a.rotate(-1*this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]),a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(b){this.p=a.CreatePoint(b),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(b){this.m=a.ToNumberArray(b),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(b){this.base=c.Type.matrix,this.base(b),this.angle=new a.Property("angle",b)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)},this.unapply=function(a){for(var b=this.transforms.length-1;b>=0;b--)this.transforms[b].unapply(a)},this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};for(var d=a.trim(a.compressSpaces(b)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),e=0;e<d.length;e++){var f=a.trim(d[e].split("(")[0]),g=d[e].split("(")[1].replace(")",""),h=new this.Type[f](g);h.type=f,this.transforms.push(h)}},a.AspectRatio=function(b,c,d,e,f,g,h,i,j,k){c=a.compressSpaces(c),c=c.replace(/^defer\s/,"");var l=c.split(" ")[0]||"xMidYMid",m=c.split(" ")[1]||"meet",n=d/e,o=f/g,p=Math.min(n,o),q=Math.max(n,o);"meet"==m&&(e*=p,g*=p),"slice"==m&&(e*=q,g*=q),j=new a.Property("refX",j),k=new a.Property("refY",k),j.hasValue()&&k.hasValue()?b.translate(-p*j.toPixels("x"),-p*k.toPixels("y")):(l.match(/^xMid/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&b.translate(d/2-e/2,0),l.match(/YMid$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&b.translate(0,f/2-g/2),l.match(/^xMax/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&b.translate(d-e,0),l.match(/YMax$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&b.translate(0,f-g)),"none"==l?b.scale(n,o):"meet"==m?b.scale(p,p):"slice"==m&&b.scale(q,q),b.translate(null==h?0:-h,null==i?0:-i)},a.Element={},a.EmptyProperty=new a.Property("EMPTY",""),a.Element.ElementBase=function(b){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(b,c){var d=this.attributes[b];return null!=d?d:(1==c&&(d=new a.Property(b,""),this.attributes[b]=d),d||a.EmptyProperty)},this.getHrefAttribute=function(){for(var b in this.attributes)if(b.match(/:href$/))return this.attributes[b];return a.EmptyProperty},this.style=function(b,c){var d=this.styles[b];if(null!=d)return d;var e=this.attribute(b);if(null!=e&&e.hasValue())return this.styles[b]=e,e;var f=this.parent;if(null!=f){var g=f.style(b);if(null!=g&&g.hasValue())return g}return 1==c&&(d=new a.Property(b,""),this.styles[b]=d),d||a.EmptyProperty},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(a.save(),this.attribute("mask").hasValue()){var b=this.attribute("mask").getDefinition();null!=b&&b.apply(a,this)}else if(this.style("filter").hasValue()){var c=this.style("filter").getDefinition();null!=c&&c.apply(a,this)}else this.setContext(a),this.renderChildren(a),this.clearContext(a);a.restore()}},this.setContext=function(a){},this.clearContext=function(a){},this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)},this.addChild=function(b,c){var d=b;c&&(d=a.CreateElement(b)),d.parent=this,this.children.push(d)},null!=b&&1==b.nodeType){for(var c=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&3==d.nodeType){var e=d.nodeValue||d.text||"";""!=a.trim(a.compressSpaces(e))&&this.addChild(new a.Element.tspan(d),!1)}}for(var c=0;c<b.attributes.length;c++){var f=b.attributes[c];this.attributes[f.nodeName]=new a.Property(f.nodeName,f.nodeValue)}var g=a.Styles[b.nodeName];if(null!=g)for(var h in g)this.styles[h]=g[h];if(this.attribute("class").hasValue())for(var i=a.compressSpaces(this.attribute("class").value).split(" "),j=0;j<i.length;j++){if(g=a.Styles["."+i[j]],null!=g)for(var h in g)this.styles[h]=g[h];if(g=a.Styles[b.nodeName+"."+i[j]],null!=g)for(var h in g)this.styles[h]=g[h]}if(this.attribute("id").hasValue()){var g=a.Styles["#"+this.attribute("id").value];if(null!=g)for(var h in g)this.styles[h]=g[h]}if(this.attribute("style").hasValue())for(var g=this.attribute("style").value.split(";"),c=0;c<g.length;c++)if(""!=a.trim(g[c])){var k=g[c].split(":"),h=a.trim(k[0]),l=a.trim(k[1]);this.styles[h]=new a.Property(h,l)}this.attribute("id").hasValue()&&null==a.Definitions[this.attribute("id").value]&&(a.Definitions[this.attribute("id").value]=this)}},a.Element.RenderedElementBase=function(b){this.base=a.Element.ElementBase,this.base(b),this.setContext=function(b){if(this.style("fill").isUrlDefinition()){var c=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=c&&(b.fillStyle=c)}else if(this.style("fill").hasValue()){var d=this.style("fill");"currentColor"==d.value&&(d.value=this.style("color").value),b.fillStyle="none"==d.value?"rgba(0,0,0,0)":d.value}if(this.style("fill-opacity").hasValue()){var d=new a.Property("fill",b.fillStyle);d=d.addOpacity(this.style("fill-opacity").value),b.fillStyle=d.value}if(this.style("stroke").isUrlDefinition()){var c=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=c&&(b.strokeStyle=c)}else if(this.style("stroke").hasValue()){var e=this.style("stroke");"currentColor"==e.value&&(e.value=this.style("color").value),b.strokeStyle="none"==e.value?"rgba(0,0,0,0)":e.value}if(this.style("stroke-opacity").hasValue()){var e=new a.Property("stroke",b.strokeStyle);e=e.addOpacity(this.style("stroke-opacity").value),b.strokeStyle=e.value}if(this.style("stroke-width").hasValue()){var f=this.style("stroke-width").toPixels();b.lineWidth=0==f?.001:f}if(this.style("stroke-linecap").hasValue()&&(b.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(b.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(b.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()){var g=a.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof b.setLineDash?b.setLineDash(g):"undefined"!=typeof b.webkitLineDash?b.webkitLineDash=g:"undefined"!=typeof b.mozDash&&(b.mozDash=g);var h=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof b.lineDashOffset?b.lineDashOffset=h:"undefined"!=typeof b.webkitLineDashOffset?b.webkitLineDashOffset=h:"undefined"!=typeof b.mozDashOffset&&(b.mozDashOffset=h)}if("undefined"!=typeof b.font&&(b.font=a.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var i=new a.Transform(this.attribute("transform").value);i.apply(b)}if(this.style("clip-path").hasValue()){var j=this.style("clip-path").getDefinition();null!=j&&j.apply(b)}this.style("opacity").hasValue()&&(b.globalAlpha=this.style("opacity").numValue())}},a.Element.RenderedElementBase.prototype=new a.Element.ElementBase,a.Element.PathElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.path=function(b){return null!=b&&b.beginPath(),new a.BoundingBox},this.renderChildren=function(b){var c=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);c&&this.hiddenVisibility||this.path(b),a.Mouse.checkPath(this,b),""!=b.fillStyle&&(this.attribute("fill-rule").hasValue()?b.fill(this.attribute("fill-rule").value):c&&this instanceof a.Element.path||b.fill()),""!=b.strokeStyle&&(!c||this instanceof a.Element.circle||"rgba(0, 0, 0, 0)"!==b.strokeStyle||(b.strokeStyle="rgba(0, 0, 0, 1)"),b.stroke());var d=this.getMarkers();if(null!=d){if(this.style("marker-start").isUrlDefinition()){var e=this.style("marker-start").getDefinition();e.render(b,d[0][0],d[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var e=this.style("marker-mid").getDefinition(),f=1;f<d.length-1;f++)e.render(b,d[f][0],d[f][1]);if(this.style("marker-end").isUrlDefinition()){var e=this.style("marker-end").getDefinition();e.render(b,d[d.length-1][0],d[d.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},a.Element.PathElementBase.prototype=new a.Element.RenderedElementBase,a.Element.svg=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseClearContext=this.clearContext,this.clearContext=function(b){this.baseClearContext(b),a.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(b){b.strokeStyle="rgba(0,0,0,0)",b.lineCap="butt",b.lineJoin="miter",b.miterLimit=4,this.baseSetContext(b),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),b.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=a.ViewPort.width(),d=a.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");var e=0,f=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(e=-this.attribute("refX").toPixels("x"),f=-this.attribute("refY").toPixels("y")),b.beginPath(),b.moveTo(e,f),b.lineTo(c,f),b.lineTo(c,d),b.lineTo(e,d),b.closePath(),b.clip()}if(a.ViewPort.SetCurrent(c,d),this.attribute("viewBox").hasValue()){var g=a.ToNumberArray(this.attribute("viewBox").value),h=g[0],i=g[1];c=g[2],d=g[3],a.AspectRatio(b,this.attribute("preserveAspectRatio").value,a.ViewPort.width(),c,a.ViewPort.height(),d,h,i,this.attribute("refX").value,this.attribute("refY").value),a.ViewPort.RemoveCurrent(),a.ViewPort.SetCurrent(g[2],g[3])}}},a.Element.svg.prototype=new a.Element.RenderedElementBase,a.Element.rect=function(b){this.base=a.Element.PathElementBase,this.base(b),"hidden"===b.style.visibility&&(this.hiddenVisibility=!0),this.path=function(b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=g),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=h),g=Math.min(g,e/2),h=Math.min(h,f/2),null!=b&&(b.beginPath(),b.moveTo(c+g,d),b.lineTo(c+e-g,d),b.quadraticCurveTo(c+e,d,c+e,d+h),b.lineTo(c+e,d+f-h),b.quadraticCurveTo(c+e,d+f,c+e-g,d+f),b.lineTo(c+g,d+f),b.quadraticCurveTo(c,d+f,c,d+f-h),b.lineTo(c,d+h),b.quadraticCurveTo(c,d,c+g,d),b.closePath()),new a.BoundingBox(c,d,c+e,d+f)}},a.Element.rect.prototype=new a.Element.PathElementBase,a.Element.circle=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y"),e=this.attribute("r").toPixels();return null!=b&&(b.beginPath(),b.arc(c,d,e,0,2*Math.PI,!0),b.closePath()),new a.BoundingBox(c-e,d-e,c+e,d+e)}},a.Element.circle.prototype=new a.Element.PathElementBase,a.Element.ellipse=function(b){this.base=a.Element.PathElementBase,this.base(b),this.path=function(b){var c=4*((Math.sqrt(2)-1)/3),d=this.attribute("rx").toPixels("x"),e=this.attribute("ry").toPixels("y"),f=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");return null!=b&&(b.beginPath(),b.moveTo(f,g-e),b.bezierCurveTo(f+c*d,g-e,f+d,g-c*e,f+d,g),b.bezierCurveTo(f+d,g+c*e,f+c*d,g+e,f,g+e),b.bezierCurveTo(f-c*d,g+e,f-d,g+c*e,f-d,g),b.bezierCurveTo(f-d,g-c*e,f-c*d,g-e,f,g-e),b.closePath()),new a.BoundingBox(f-d,g-e,f+d,g+e)}},a.Element.ellipse.prototype=new a.Element.PathElementBase,a.Element.line=function(b){this.base=a.Element.PathElementBase,this.base(b),this.getPoints=function(){return[new a.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new a.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(b){var c=this.getPoints();return null!=b&&(b.beginPath(),b.moveTo(c[0].x,c[0].y),b.lineTo(c[1].x,c[1].y)),new a.BoundingBox(c[0].x,c[0].y,c[1].x,c[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},a.Element.line.prototype=new a.Element.PathElementBase,a.Element.polyline=function(b){this.base=a.Element.PathElementBase,this.base(b),this.points=a.CreatePath(this.attribute("points").value),this.path=function(b){var c=new a.BoundingBox(this.points[0].x,this.points[0].y);null!=b&&(b.beginPath(),b.moveTo(this.points[0].x,this.points[0].y));for(var d=1;d<this.points.length;d++)c.addPoint(this.points[d].x,this.points[d].y),null!=b&&b.lineTo(this.points[d].x,this.points[d].y);return c},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},a.Element.polyline.prototype=new a.Element.PathElementBase,a.Element.polygon=function(b){this.base=a.Element.polyline,this.base(b),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},a.Element.polygon.prototype=new a.Element.polyline,a.Element.path=function(b){this.base=a.Element.PathElementBase,this.base(b);var c=this.attribute("d").value;c=c.replace(/,/gm," "),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),c=c.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([0-9])([+\-])/gm,"$1 $2"),c=c.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),c=c.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),c=a.compressSpaces(c),c=a.trim(c),this.PathParser=new function(b){this.tokens=b.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new a.Point(0,0),this.control=new a.Point(0,0),this.current=new a.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var b=new a.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(b)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a,a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a,a},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var b=new a.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return b},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(c),this.path=function(b){var c=this.PathParser;c.reset();var d=new a.BoundingBox;for(null!=b&&b.beginPath();!c.isEnd();)switch(c.nextCommand(),c.command){case"M":case"m":var e=c.getAsCurrentPoint();for(c.addMarker(e),d.addPoint(e.x,e.y),null!=b&&b.moveTo(e.x,e.y),c.start=c.current;!c.isCommandOrEnd();){var e=c.getAsCurrentPoint();c.addMarker(e,c.start),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y)}break;case"L":case"l":for(;!c.isCommandOrEnd();){var f=c.current,e=c.getAsCurrentPoint();c.addMarker(e,f),d.addPoint(e.x,e.y),null!=b&&b.lineTo(e.x,e.y)}break;case"H":case"h":for(;!c.isCommandOrEnd();){var g=new a.Point((c.isRelativeCommand()?c.current.x:0)+c.getScalar(),c.current.y);
c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y)}break;case"V":case"v":for(;!c.isCommandOrEnd();){var g=new a.Point(c.current.x,(c.isRelativeCommand()?c.current.y:0)+c.getScalar());c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=b&&b.lineTo(c.current.x,c.current.y)}break;case"C":case"c":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=b&&b.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"S":case"s":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getReflectedControlPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=b&&b.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"Q":case"q":for(;!c.isCommandOrEnd();){var h=c.current,j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=b&&b.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"T":case"t":for(;!c.isCommandOrEnd();){var h=c.current,j=c.getReflectedControlPoint();c.control=j;var k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=b&&b.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"A":case"a":for(;!c.isCommandOrEnd();){var h=c.current,l=c.getScalar(),m=c.getScalar(),n=c.getScalar()*(Math.PI/180),o=c.getScalar(),p=c.getScalar(),k=c.getAsCurrentPoint(),q=new a.Point(Math.cos(n)*(h.x-k.x)/2+Math.sin(n)*(h.y-k.y)/2,-Math.sin(n)*(h.x-k.x)/2+Math.cos(n)*(h.y-k.y)/2),r=Math.pow(q.x,2)/Math.pow(l,2)+Math.pow(q.y,2)/Math.pow(m,2);r>1&&(l*=Math.sqrt(r),m*=Math.sqrt(r));var s=(o==p?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(m,2)-Math.pow(l,2)*Math.pow(q.y,2)-Math.pow(m,2)*Math.pow(q.x,2))/(Math.pow(l,2)*Math.pow(q.y,2)+Math.pow(m,2)*Math.pow(q.x,2)));isNaN(s)&&(s=0);var t=new a.Point(s*l*q.y/m,s*-m*q.x/l),u=new a.Point((h.x+k.x)/2+Math.cos(n)*t.x-Math.sin(n)*t.y,(h.y+k.y)/2+Math.sin(n)*t.x+Math.cos(n)*t.y),v=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},w=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(v(a)*v(b))},x=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(w(a,b))},y=x([1,0],[(q.x-t.x)/l,(q.y-t.y)/m]),z=[(q.x-t.x)/l,(q.y-t.y)/m],A=[(-q.x-t.x)/l,(-q.y-t.y)/m],B=x(z,A);w(z,A)<=-1&&(B=Math.PI),w(z,A)>=1&&(B=0);var C=1-p?1:-1,D=y+C*(B/2),E=new a.Point(u.x+l*Math.cos(D),u.y+m*Math.sin(D));if(c.addMarkerAngle(E,D-C*Math.PI/2),c.addMarkerAngle(k,D-C*Math.PI),d.addPoint(k.x,k.y),null!=b){var w=l>m?l:m,F=l>m?1:l/m,G=l>m?m/l:1;b.translate(u.x,u.y),b.rotate(n),b.scale(F,G),b.arc(0,0,w,y,y+B,1-p),b.scale(1/F,1/G),b.rotate(-n),b.translate(-u.x,-u.y)}}break;case"Z":case"z":null!=b&&b.closePath(),c.current=c.start}return d},this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}},a.Element.path.prototype=new a.Element.PathElementBase,a.Element.pattern=function(b){this.base=a.Element.ElementBase,this.base(b),this.createPattern=function(b,c){var d=this.attribute("width").toPixels("x",!0),e=this.attribute("height").toPixels("y",!0),f=new a.Element.svg;f.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),f.attributes.width=new a.Property("width",d+"px"),f.attributes.height=new a.Property("height",e+"px"),f.attributes.transform=new a.Property("transform",this.attribute("patternTransform").value),f.children=this.children;var g=document.createElement("canvas");g.width=d,g.height=e;var h=g.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&h.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var i=-1;1>=i;i++)for(var j=-1;1>=j;j++)h.save(),h.translate(i*g.width,j*g.height),f.render(h),h.restore();var k=b.createPattern(g,"repeat");return k}},a.Element.pattern.prototype=new a.Element.ElementBase,a.Element.marker=function(b){this.base=a.Element.ElementBase,this.base(b),this.baseRender=this.render,this.render=function(b,c,d){b.translate(c.x,c.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(d),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(b.lineWidth,b.lineWidth),b.save();var e=new a.Element.svg;e.attributes.viewBox=new a.Property("viewBox",this.attribute("viewBox").value),e.attributes.refX=new a.Property("refX",this.attribute("refX").value),e.attributes.refY=new a.Property("refY",this.attribute("refY").value),e.attributes.width=new a.Property("width",this.attribute("markerWidth").value),e.attributes.height=new a.Property("height",this.attribute("markerHeight").value),e.attributes.fill=new a.Property("fill",this.attribute("fill").valueOrDefault("black")),e.attributes.stroke=new a.Property("stroke",this.attribute("stroke").valueOrDefault("none")),e.children=this.children,e.render(b),b.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&b.scale(1/b.lineWidth,1/b.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&b.rotate(-d),b.translate(-c.x,-c.y)}},a.Element.marker.prototype=new a.Element.ElementBase,a.Element.defs=function(b){this.base=a.Element.ElementBase,this.base(b),this.render=function(a){}},a.Element.defs.prototype=new a.Element.ElementBase,a.Element.GradientBase=function(b){this.base=a.Element.ElementBase,this.base(b),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"stop"==d.type&&this.stops.push(d)}this.getGradient=function(){},this.createGradient=function(b,c,d){var e=this;this.getHrefAttribute().hasValue()&&(e=this.getHrefAttribute().getDefinition());var f=function(b){if(d.hasValue()){var c=new a.Property("color",b);return c.addOpacity(d.value).value}return b},g=this.getGradient(b,c);if(null==g)return f(e.stops[e.stops.length-1].color);for(var h=0;h<e.stops.length;h++)g.addColorStop(e.stops[h].offset,f(e.stops[h].color));if(this.attribute("gradientTransform").hasValue()){var i=a.ViewPort.viewPorts[0],j=new a.Element.rect;j.attributes.x=new a.Property("x",-a.MAX_VIRTUAL_PIXELS/3),j.attributes.y=new a.Property("y",-a.MAX_VIRTUAL_PIXELS/3),j.attributes.width=new a.Property("width",a.MAX_VIRTUAL_PIXELS),j.attributes.height=new a.Property("height",a.MAX_VIRTUAL_PIXELS);var k=new a.Element.g;k.attributes.transform=new a.Property("transform",this.attribute("gradientTransform").value),k.children=[j];var l=new a.Element.svg;l.attributes.x=new a.Property("x",0),l.attributes.y=new a.Property("y",0),l.attributes.width=new a.Property("width",i.width),l.attributes.height=new a.Property("height",i.height),l.children=[k];var m=document.createElement("canvas");m.width=i.width,m.height=i.height;var n=m.getContext("2d");return n.fillStyle=g,l.render(n),n.createPattern(m,"no-repeat")}return g}},a.Element.GradientBase.prototype=new a.Element.ElementBase,a.Element.linearGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==g?null:a.createLinearGradient(d,e,f,g)}},a.Element.linearGradient.prototype=new a.Element.GradientBase,a.Element.radialGradient=function(b){this.base=a.Element.GradientBase,this.base(b),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var h="objectBoundingBox"==this.gradientUnits?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(f,g,0,d,e,h)}},a.Element.radialGradient.prototype=new a.Element.GradientBase,a.Element.stop=function(b){this.base=a.Element.ElementBase,this.base(b),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var c=this.style("stop-color");this.style("stop-opacity").hasValue()&&(c=c.addOpacity(this.style("stop-opacity").value)),this.color=c.value},a.Element.stop.prototype=new a.Element.ElementBase,a.Element.AnimateBase=function(b){this.base=a.Element.ElementBase,this.base(b),a.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+a;var b=!1;if(this.begin<this.duration){var c=this.calcValue();if(this.attribute("type").hasValue()){var d=this.attribute("type").value;c=d+"("+c+")"}this.getProperty().value=c,b=!0}return b},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var b={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var c=b.progress*(this.values.value.length-1),d=Math.floor(c),e=Math.ceil(c);b.from=new a.Property("from",parseFloat(this.values.value[d])),b.to=new a.Property("to",parseFloat(this.values.value[e])),b.progress=(c-d)/(e-d)}else b.from=this.from,b.to=this.to;return b}},a.Element.AnimateBase.prototype=new a.Element.ElementBase,a.Element.animate=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){var a=this.progress(),b=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return b+this.initialUnits}},a.Element.animate.prototype=new a.Element.AnimateBase,a.Element.animateColor=function(c){this.base=a.Element.AnimateBase,this.base(c),this.calcValue=function(){var a=this.progress(),c=new b(a.from.value),d=new b(a.to.value);if(c.ok&&d.ok){var e=c.r+(d.r-c.r)*a.progress,f=c.g+(d.g-c.g)*a.progress,g=c.b+(d.b-c.b)*a.progress;return"rgb("+parseInt(e,10)+","+parseInt(f,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}},a.Element.animateColor.prototype=new a.Element.AnimateBase,a.Element.animateTransform=function(b){this.base=a.Element.AnimateBase,this.base(b),this.calcValue=function(){for(var b=this.progress(),c=a.ToNumberArray(b.from.value),d=a.ToNumberArray(b.to.value),e="",f=0;f<c.length;f++)e+=c[f]+(d[f]-c[f])*b.progress+" ";return e}},a.Element.animateTransform.prototype=new a.Element.animate,a.Element.font=function(b){this.base=a.Element.ElementBase,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"font-face"==d.type?(this.fontFace=d,d.style("font-family").hasValue()&&(a.Definitions[d.style("font-family").value]=this)):"missing-glyph"==d.type?this.missingGlyph=d:"glyph"==d.type&&(""!=d.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[d.unicode]&&(this.glyphs[d.unicode]=[]),this.glyphs[d.unicode][d.arabicForm]=d):this.glyphs[d.unicode]=d)}},a.Element.font.prototype=new a.Element.ElementBase,a.Element.fontface=function(b){this.base=a.Element.ElementBase,this.base(b),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},a.Element.fontface.prototype=new a.Element.ElementBase,a.Element.missingglyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=0},a.Element.missingglyph.prototype=new a.Element.path,a.Element.glyph=function(b){this.base=a.Element.path,this.base(b),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},a.Element.glyph.prototype=new a.Element.path,a.Element.text=function(b){this.captureTextNodes=!0,this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new a.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)},this.renderChildren=function(a){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,b)},this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,f=c;f<b.children.length;f++){var g=b.children[f];if(f>c&&g.attribute("x").hasValue())break;e+=g.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0},this.renderChild=function(a,b,c){var d=b.children[c];d.attribute("x").hasValue()?d.x=d.attribute("x").toPixels("x")+this.getAnchorDelta(a,b,c):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),d.attribute("dx").hasValue()&&(this.x+=d.attribute("dx").toPixels("x")),d.x=this.x),this.x=d.x+d.measureText(a),d.attribute("y").hasValue()?d.y=d.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),d.attribute("dy").hasValue()&&(this.y+=d.attribute("dy").toPixels("y")),d.y=this.y),this.y=d.y,d.render(a);for(var c=0;c<d.children.length;c++)this.renderChild(a,d,c)}},a.Element.text.prototype=new a.Element.RenderedElementBase,a.Element.TextElementBase=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&(f="terminal"),c>0&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial"),c>0&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial"),"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];return null==e&&(e=a.missingGlyph),e},this.renderChildren=function(b){var c=this.parent.style("font-family").getDefinition();if(null==c)""!=b.fillStyle&&b.fillText(a.compressSpaces(this.getText()),this.x,this.y),""!=b.strokeStyle&&b.strokeText(a.compressSpaces(this.getText()),this.x,this.y);else{var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),e=this.parent.style("font-style").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h),j=d/c.fontFace.unitsPerEm;b.translate(this.x,this.y),b.scale(j,-j);var k=b.lineWidth;b.lineWidth=b.lineWidth*c.fontFace.unitsPerEm/d,"italic"==e&&b.transform(1,0,.4,1,0,0),i.render(b),"italic"==e&&b.transform(1,0,-.4,1,0,0),b.lineWidth=k,b.scale(1/j,-1/j),b.translate(-this.x,-this.y),this.x+=d*(i.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(this.x+=g[h])}}},this.getText=function(){},this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b},this.measureText=function(b){var c=this.parent.style("font-family").getDefinition();if(null!=c){var d=this.parent.style("font-size").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),e=0,f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=a.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h);e+=(i.horizAdvX||c.horizAdvX)*d/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(e+=g[h])}return e}var j=a.compressSpaces(this.getText());if(!b.measureText)return 10*j.length;b.save(),this.setContext(b);var k=b.measureText(j).width;return b.restore(),k}},a.Element.TextElementBase.prototype=new a.Element.RenderedElementBase,a.Element.tspan=function(b){this.captureTextNodes=!0,this.base=a.Element.TextElementBase,this.base(b),this.text=b.nodeValue||b.text||"",this.getText=function(){return this.text}},a.Element.tspan.prototype=new a.Element.TextElementBase,a.Element.tref=function(b){this.base=a.Element.TextElementBase,this.base(b),this.getText=function(){var a=this.getHrefAttribute().getDefinition();return null!=a?a.children[0].getText():void 0}},a.Element.tref.prototype=new a.Element.TextElementBase,a.Element.a=function(b){this.base=a.Element.TextElementBase,this.base(b),this.hasText=!0;for(var c=0;c<b.childNodes.length;c++)3!=b.childNodes[c].nodeType&&(this.hasText=!1);this.text=this.hasText?b.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(b){if(this.hasText){this.baseRenderChildren(b);var c=new a.Property("fontSize",a.Font.Parse(a.ctx.font).fontSize);a.Mouse.checkBoundingBox(this,new a.BoundingBox(this.x,this.y-c.toPixels("y"),this.x+this.measureText(b),this.y))}else{var d=new a.Element.g;d.children=this.children,d.parent=this,d.render(b)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){a.ctx.canvas.style.cursor="pointer"}},a.Element.a.prototype=new a.Element.TextElementBase,a.Element.image=function(b){this.base=a.Element.RenderedElementBase,this.base(b);var c=this.getHrefAttribute().value,d=c.match(/\.svg$/);if(a.Images.push(this),this.loaded=!1,d)this.img=a.ajax(c),this.loaded=!0;else{this.img=document.createElement("img");var e=this;this.img.onload=function(){e.loaded=!0},this.img.onerror=function(){"undefined"!=typeof console&&(console.log('ERROR: image "'+c+'" not found'),e.loaded=!0)},this.img.src=c}this.renderChildren=function(b){var c=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");0!=f&&0!=g&&(b.save(),d?b.drawSvg(this.img,c,e,f,g):(b.translate(c,e),a.AspectRatio(b,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),b.drawImage(this.img,0,0)),b.restore())},this.getBoundingBox=function(){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new a.BoundingBox(b,c,b+d,c+e)}},a.Element.image.prototype=new a.Element.RenderedElementBase,a.Element.g=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.getBoundingBox=function(){for(var b=new a.BoundingBox,c=0;c<this.children.length;c++)b.addBoundingBox(this.children[c].getBoundingBox());return b}},a.Element.g.prototype=new a.Element.RenderedElementBase,a.Element.symbol=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(b){if(this.baseSetContext(b),this.attribute("viewBox").hasValue()){var c=a.ToNumberArray(this.attribute("viewBox").value),d=c[0],e=c[1];width=c[2],height=c[3],a.AspectRatio(b,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,e),a.ViewPort.SetCurrent(c[2],c[3])}}},a.Element.symbol.prototype=new a.Element.RenderedElementBase,a.Element.style=function(b){this.base=a.Element.ElementBase,this.base(b);for(var c="",d=0;d<b.childNodes.length;d++)c+=b.childNodes[d].nodeValue;c=c.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),c=a.compressSpaces(c);for(var e=c.split("}"),d=0;d<e.length;d++)if(""!=a.trim(e[d]))for(var f=e[d].split("{"),g=f[0].split(","),h=f[1].split(";"),i=0;i<g.length;i++){var j=a.trim(g[i]);if(""!=j){for(var k={},l=0;l<h.length;l++){var m=h[l].indexOf(":"),n=h[l].substr(0,m),o=h[l].substr(m+1,h[l].length-m);null!=n&&null!=o&&(k[a.trim(n)]=new a.Property(a.trim(n),a.trim(o)))}if(a.Styles[j]=k,"@font-face"==j)for(var p=k["font-family"].value.replace(/"/g,""),q=k.src.value.split(","),r=0;r<q.length;r++)if(q[r].indexOf('format("svg")')>0)for(var s=q[r].indexOf("url"),t=q[r].indexOf(")",s),u=q[r].substr(s+5,t-s-6),v=a.parseXml(a.ajax(u)),w=v.getElementsByTagName("font"),x=0;x<w.length;x++){var y=a.CreateElement(w[x]);a.Definitions[p]=y}}}},a.Element.style.prototype=new a.Element.ElementBase,a.Element.use=function(b){this.base=a.Element.RenderedElementBase,this.base(b),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var b=this.getDefinition();null!=b&&b.path(a)},this.getBoundingBox=function(){var a=this.getDefinition();return null!=a?a.getBoundingBox():void 0},this.renderChildren=function(a){var b=this.getDefinition();if(null!=b){var c=b.parent;b.parent=null,b.render(a),b.parent=c}}},a.Element.use.prototype=new a.Element.RenderedElementBase,a.Element.mask=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b,c){var d=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");if(0==f&&0==g){for(var h=new a.BoundingBox,i=0;i<this.children.length;i++)h.addBoundingBox(this.children[i].getBoundingBox());var d=Math.floor(h.x1),e=Math.floor(h.y1),f=Math.floor(h.width()),g=Math.floor(h.height())}var j=c.attribute("mask").value;c.attribute("mask").value="";var k=document.createElement("canvas");k.width=d+f,k.height=e+g;var l=k.getContext("2d");this.renderChildren(l);var m=document.createElement("canvas");m.width=d+f,m.height=e+g;var n=m.getContext("2d");c.render(n),n.globalCompositeOperation="destination-in",n.fillStyle=l.createPattern(k,"no-repeat"),n.fillRect(0,0,d+f,e+g),b.fillStyle=n.createPattern(m,"no-repeat"),b.fillRect(0,0,d+f,e+g),c.attribute("mask").value=j},this.render=function(a){}},a.Element.mask.prototype=new a.Element.ElementBase,a.Element.clipPath=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(b){for(var c=0;c<this.children.length;c++){var d=this.children[c];if("undefined"!=typeof d.path){var e=null;d.attribute("transform").hasValue()&&(e=new a.Transform(d.attribute("transform").value),e.apply(b)),d.path(b),b.clip(),e&&e.unapply(b)}}},this.render=function(a){}},a.Element.clipPath.prototype=new a.Element.ElementBase,a.Element.filter=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),f=Math.floor(c.width()),g=Math.floor(c.height()),h=b.style("filter").value;b.style("filter").value="";for(var i=0,j=0,k=0;k<this.children.length;k++){var l=this.children[k].extraFilterDistance||0;i=Math.max(i,l),j=Math.max(j,l)}var m=document.createElement("canvas");m.width=f+2*i,m.height=g+2*j;var n=m.getContext("2d");n.translate(-d+i,-e+j),b.render(n);for(var k=0;k<this.children.length;k++)this.children[k].apply(n,0,0,f+2*i,g+2*j);a.drawImage(m,0,0,f+2*i,g+2*j,d-i,e-j,f+2*i,g+2*j),b.style("filter",!0).value=h},this.render=function(a){}},a.Element.filter.prototype=new a.Element.ElementBase,a.Element.feMorphology=function(b){this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b,c,d,e){}},a.Element.feMorphology.prototype=new a.Element.ElementBase,a.Element.feColorMatrix=function(b){function c(a,b,c,d,e,f){return a[c*d*4+4*b+f]}function d(a,b,c,d,e,f,g){a[c*d*4+4*b+f]=g}this.base=a.Element.ElementBase,this.base(b),this.apply=function(a,b,e,f,g){for(var h=a.getImageData(0,0,f,g),e=0;g>e;e++)for(var b=0;f>b;b++){var i=c(h.data,b,e,f,g,0),j=c(h.data,b,e,f,g,1),k=c(h.data,b,e,f,g,2),l=(i+j+k)/3;d(h.data,b,e,f,g,0,l),d(h.data,b,e,f,g,1,l),d(h.data,b,e,f,g,2,l)}a.clearRect(0,0,f,g),a.putImageData(h,0,0)}},a.Element.feColorMatrix.prototype=new a.Element.ElementBase,a.Element.feGaussianBlur=function(b){this.base=a.Element.ElementBase,this.base(b),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(b,c,d,e,f){return"undefined"==typeof stackBlurCanvasRGBA?void("undefined"!=typeof console&&console.log("ERROR: StackBlur.js must be included for blur to work")):(b.canvas.id=a.UniqueId(),b.canvas.style.display="none",document.body.appendChild(b.canvas),stackBlurCanvasRGBA(b.canvas.id,c,d,e,f,this.blurRadius),void document.body.removeChild(b.canvas))}},a.Element.feGaussianBlur.prototype=new a.Element.ElementBase,a.Element.title=function(a){},a.Element.title.prototype=new a.Element.ElementBase,a.Element.desc=function(a){},a.Element.desc.prototype=new a.Element.ElementBase,a.Element.MISSING=function(a){"undefined"!=typeof console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},a.Element.MISSING.prototype=new a.Element.ElementBase,a.CreateElement=function(b){var c=b.nodeName.replace(/^[^:]+:/,"");c=c.replace(/\-/g,"");var d=null;return d="undefined"!=typeof a.Element[c]?new a.Element[c](b):new a.Element.MISSING(b),d.type=b.nodeName,d},a.load=function(b,c){a.loadXml(b,a.ajax(c))},a.loadXml=function(b,c){a.loadXmlDoc(b,a.parseXml(c))},a.loadXmlDoc=function(b,c){a.init(b);var d=function(a){for(var c=b.canvas;c;)a.x-=c.offsetLeft,a.y-=c.offsetTop,c=c.offsetParent;return window.scrollX&&(a.x+=window.scrollX),window.scrollY&&(a.y+=window.scrollY),a};1!=a.opts.ignoreMouse&&(b.canvas.onclick=function(b){var c=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onclick(c.x,c.y)},b.canvas.onmousemove=function(b){var c=d(new a.Point(null!=b?b.clientX:event.clientX,null!=b?b.clientY:event.clientY));a.Mouse.onmousemove(c.x,c.y)});var e=a.CreateElement(c.documentElement);e.root=!0;var f=!0,g=function(){a.ViewPort.Clear(),b.canvas.parentNode&&a.ViewPort.SetCurrent(b.canvas.parentNode.clientWidth,b.canvas.parentNode.clientHeight),1!=a.opts.ignoreDimensions&&(e.style("width").hasValue()&&(b.canvas.width=e.style("width").toPixels("x"),b.canvas.style.width=b.canvas.width+"px"),e.style("height").hasValue()&&(b.canvas.height=e.style("height").toPixels("y"),b.canvas.style.height=b.canvas.height+"px"));var d=b.canvas.clientWidth||b.canvas.width,g=b.canvas.clientHeight||b.canvas.height;if(1==a.opts.ignoreDimensions&&e.style("width").hasValue()&&e.style("height").hasValue()&&(d=e.style("width").toPixels("x"),g=e.style("height").toPixels("y")),a.ViewPort.SetCurrent(d,g),null!=a.opts.offsetX&&(e.attribute("x",!0).value=a.opts.offsetX),null!=a.opts.offsetY&&(e.attribute("y",!0).value=a.opts.offsetY),null!=a.opts.scaleWidth&&null!=a.opts.scaleHeight){var h=1,i=1,j=a.ToNumberArray(e.attribute("viewBox").value);e.attribute("width").hasValue()?h=e.attribute("width").toPixels("x")/a.opts.scaleWidth:isNaN(j[2])||(h=j[2]/a.opts.scaleWidth),e.attribute("height").hasValue()?i=e.attribute("height").toPixels("y")/a.opts.scaleHeight:isNaN(j[3])||(i=j[3]/a.opts.scaleHeight),e.attribute("width",!0).value=a.opts.scaleWidth,e.attribute("height",!0).value=a.opts.scaleHeight,e.attribute("viewBox",!0).value="0 0 "+d*h+" "+g*i,e.attribute("preserveAspectRatio",!0).value="none"}1!=a.opts.ignoreClear&&b.clearRect(0,0,d,g),e.render(b),f&&(f=!1,"function"==typeof a.opts.renderCallback&&a.opts.renderCallback(c))},h=!0;a.ImagesLoaded()&&(h=!1,g()),a.intervalID=setInterval(function(){var b=!1;if(h&&a.ImagesLoaded()&&(h=!1,b=!0),1!=a.opts.ignoreMouse&&(b|=a.Mouse.hasEvents()),1!=a.opts.ignoreAnimation)for(var c=0;c<a.Animations.length;c++)b|=a.Animations[c].update(1e3/a.FRAMERATE);"function"==typeof a.opts.forceRedraw&&1==a.opts.forceRedraw()&&(b=!0),b&&(g(),a.Mouse.runEvents())},1e3/a.FRAMERATE)},a.stop=function(){a.intervalID&&clearInterval(a.intervalID)},a.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}},this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}},this.runEvents=function(){a.ctx.canvas.style.cursor="";for(var b=0;b<this.events.length;b++)for(var c=this.events[b],d=this.eventElements[b];d;)c.run(d),d=d.parent;this.events=[],this.eventElements=[]}},a}function b(a){this.ok=!1,"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",
indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var d in c)a==d&&(a=c[d]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],f=0;f<e.length;f++){var g=e[f].re,h=e[f].process,i=g.exec(a);i&&(channels=h(i),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var a=new Array,d=0;d<e.length;d++)for(var f=e[d].example,g=0;g<f.length;g++)a[a.length]=f[g];for(var h in c)a[a.length]=h;var i=document.createElement("ul");i.setAttribute("id","rgbcolor-examples");for(var d=0;d<a.length;d++)try{var j=document.createElement("li"),k=new b(a[d]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+k.toHex()+"; color:"+k.toHex(),l.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+a[d]+" -> "+k.toRGB()+" -> "+k.toHex());j.appendChild(l),j.appendChild(m),i.appendChild(j)}catch(n){}return i}}this.canvg=function(b,c,d){if(null!=b||null!=c||null!=d){d=d||{},"string"==typeof b&&(b=document.getElementById(b)),null!=b.svg&&b.svg.stop();var e=a();(1!=b.childNodes.length||"OBJECT"!=b.childNodes[0].nodeName)&&(b.svg=e),e.opts=d;var f=b.getContext("2d");"undefined"!=typeof c.documentElement?e.loadXmlDoc(f,c):"<"==c.substr(0,1)?e.loadXml(f,c):e.load(f,c)}else for(var g=document.getElementsByTagName("svg"),h=0;h<g.length;h++){var i=g[h],j=document.createElement("canvas");j.width=i.clientWidth,j.height=i.clientHeight,i.parentNode.insertBefore(j,i),i.parentNode.removeChild(i);var k=document.createElement("div");k.appendChild(i),canvg(j,k.innerHTML)}}}(),e("undefined"!=typeof canvg?canvg:window.canvg)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){var f={ZoomSequential:{3:["#ffc65f","#9eb778","#0096b6"],4:["#ffd27c","#ccbd67","#7eb184","#008db6"],5:["#ffd27c","#ccbd67","#7eb184","#0096b6","#0082b5"],6:["#ffd27c","#efc15e","#9eb778","#7eb184","#0096b6","#0082b5"],7:["#ffd27c","#efc15e","#9eb778","#7eb184","#43a79b","#008db6","#097bb1"],8:["#ffdc9c","#ffc65f","#efc15e","#9eb778","#7eb184","#43a79b","#008db6","#097bb1"],9:["#ffdc9c","#ffc65f","#efc15e","#9eb778","#7eb184","#43a79b","#008db6","#0082b5","#1473ac"]},ZoomPalette:{3:["#0095b7","#a0b774","#f4c658"],4:["#0095b7","#a0b774","#f4c658","#fe8b3e"],5:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23"],6:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56"],7:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896"],8:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896","#47a694"],9:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896","#47a694","#f9a94b"],10:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896","#47a694","#f9a94b","#ff6b30"],11:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896","#47a694","#f9a94b","#ff6b30","#e94d29"],12:["#0095b7","#a0b774","#f4c658","#fe8b3e","#cf2f23","#756c56","#007896","#47a694","#f9a94b","#ff6b30","#e94d29","#005b76"]},YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};e("undefined"!=typeof f?f:window.colorbrewer)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(a,b,c){!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function c(a){return null===a?NaN:+a}function d(a){return!isNaN(a)}function e(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function f(a){return a.length}function g(a){for(var b=1;a*b%1;)b*=10;return b}function h(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function i(){this._=Object.create(null)}function j(a){return(a+="")===kg||a[0]===lg?lg+a:a}function k(a){return(a+="")[0]===lg?a.slice(1):a}function l(a){return j(a)in this._}function m(a){return(a=j(a))in this._&&delete this._[a]}function n(){var a=[];for(var b in this._)a.push(k(b));return a}function o(){var a=0;for(var b in this._)++a;return a}function p(){for(var a in this._)return!1;return!0}function q(){this._=Object.create(null)}function r(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function s(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=mg.length;d>c;++c){var e=mg[c]+b;if(e in a)return e}}function t(){}function u(){}function v(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new i;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function w(){Xf.event.preventDefault()}function x(){for(var a,b=Xf.event;a=b.sourceEvent;)b=a;return b}function y(a){for(var b=new u,c=0,d=arguments.length;++c<d;)b[arguments[c]]=v(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Xf.event;e.target=a,Xf.event=e,b[e.type].apply(c,d)}finally{Xf.event=f}}},b}function z(a){return og(a,tg),a}function A(a){return"function"==typeof a?a:function(){return pg(a,this)}}function B(a){return"function"==typeof a?a:function(){return qg(a,this)}}function C(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Xf.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function D(a){return a.trim().replace(/\s+/g," ")}function E(a){return new RegExp("(?:^|\\s+)"+Xf.requote(a)+"(?:\\s+|$)","g")}function F(a){return(a+"").trim().split(/^|\s+/)}function G(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=F(a).map(H);var e=a.length;return"function"==typeof b?d:c}function H(a){var b=E(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",D(e+" "+a))):c.setAttribute("class",D(e.replace(b," ")))}}function I(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function J(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function K(a){return"function"==typeof a?a:(a=Xf.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function L(a){return{__data__:a}}function M(a){return function(){return sg(this,a)}}function N(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function O(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function P(a){return og(a,vg),a}function Q(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function R(){var a=this.__transition__;a&&++a.active}function S(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,Zf(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Xf.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=T;h>0&&(a=a.slice(0,h));var j=xg.get(a);return j&&(a=j,i=U),h?b?e:d:b?t:f}function T(a,b){return function(c){var d=Xf.event;Xf.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Xf.event=d}}}function U(a,b){var c=T(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function V(){var a=".dragsuppress-"+ ++zg,b="click"+a,c=Xf.select(ag).on("touchmove"+a,w).on("dragstart"+a,w).on("selectstart"+a,w);if(yg){var d=_f.style,e=d[yg];d[yg]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),yg&&(d[yg]=e),f&&(c.on(b,function(){w(),g()},!0),setTimeout(g,0))}}function W(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>Ag&&(ag.scrollX||ag.scrollY)){c=Xf.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();Ag=!(e.f||e.e),c.remove()}return Ag?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function X(){return Xf.event.changedTouches[0].identifier}function Y(){return Xf.event.target}function Z(){return ag}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function aa(a){return a>1?0:-1>a?Bg:Math.acos(a)}function ba(a){return a>1?Dg:-1>a?-Dg:Math.asin(a)}function ca(a){return((a=Math.exp(a))-1/a)/2}function da(a){return((a=Math.exp(a))+1/a)/2}function ea(a){return((a=Math.exp(2*a))-1)/(a+1)}function fa(a){return(a=Math.sin(a/2))*a}function ga(){}function ha(a,b,c){return this instanceof ha?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof ha?new ha(a.h,a.s,a.l):va(""+a,wa,ha):new ha(a,b,c)}function ia(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new ra(e(a+120),e(a),e(a-120))}function ja(a,b,c){return this instanceof ja?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof ja?new ja(a.h,a.c,a.l):a instanceof la?na(a.l,a.a,a.b):na((a=xa((a=Xf.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new ja(a,b,c)}function ka(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new la(c,Math.cos(a*=Gg)*b,Math.sin(a)*b)}function la(a,b,c){return this instanceof la?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof la?new la(a.l,a.a,a.b):a instanceof ja?ka(a.h,a.c,a.l):xa((a=ra(a)).r,a.g,a.b):new la(a,b,c)}function ma(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=oa(e)*Rg,d=oa(d)*Sg,f=oa(f)*Tg,new ra(qa(3.2404542*e-1.5371385*d-.4985314*f),qa(-.969266*e+1.8760108*d+.041556*f),qa(.0556434*e-.2040259*d+1.0572252*f))}function na(a,b,c){return a>0?new ja(Math.atan2(c,b)*Hg,Math.sqrt(b*b+c*c),a):new ja(NaN,NaN,a)}function oa(a){return a>.206893034?a*a*a:(a-4/29)/7.787037;
}function pa(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qa(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function ra(a,b,c){return this instanceof ra?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof ra?new ra(a.r,a.g,a.b):va(""+a,ra,ia):new ra(a,b,c)}function sa(a){return new ra(a>>16,255&a>>8,255&a)}function ta(a){return sa(a)+""}function ua(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function va(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(za(e[0]),za(e[1]),za(e[2]))}return(f=Wg.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new ha(d,e,i)}function xa(a,b,c){a=ya(a),b=ya(b),c=ya(c);var d=pa((.4124564*a+.3575761*b+.1804375*c)/Rg),e=pa((.2126729*a+.7151522*b+.072175*c)/Sg),f=pa((.0193339*a+.119192*b+.9503041*c)/Tg);return la(116*e-16,500*(d-e),200*(e-f))}function ya(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function za(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Aa(a){return"function"==typeof a?a:function(){return a}}function Ba(a){return a}function Ca(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Da(b,c,a,d)}}function Da(a,b,c,d){function e(){var a,b=i.status;if(!b&&Fa(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Xf.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!ag.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Xf.event;Xf.event=a;try{g.progress.call(f,i)}finally{Xf.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Zf(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Xf.rebind(f,g,"on"),null==d?f:f.get(Ea(d))}function Ea(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Fa(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Ga(){var a=Ha(),b=Ia()-a;b>24?(isFinite(b)&&(clearTimeout($g),$g=setTimeout(Ga,b)),Zg=0):(Zg=1,ah(Ga))}function Ha(){var a=Date.now();for(_g=Xg;_g;)a>=_g.t&&(_g.f=_g.c(a-_g.t)),_g=_g.n;return a}function Ia(){for(var a,b=Xg,c=1/0;b;)b.f?b=a?a.n=b.n:Xg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Yg=a,c}function Ja(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ka(a,b){var c=Math.pow(10,3*jg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function La(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:Ba;return function(a){var c=ch.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=dh.get(n)||Ma;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=Xf.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Ma(a){return a+""}function Na(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Oa(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new fh(c-1)),1),c}function f(a,c){return b(a=new fh(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{fh=Na;var d=new Na;return d._=a,g(d,b,c)}finally{fh=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Pa(a);return i.floor=i,i.round=Pa(d),i.ceil=Pa(e),i.offset=Pa(f),i.range=h,a}function Pa(a){return function(b,c){try{fh=Na;var d=new Na;return d._=b,a(d,c)._}finally{fh=Date}}}function Qa(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=hh[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&fh!==Na,g=new(f?Na:fh);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(0|d.Z/100),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in hh?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{fh=Na;var b=new fh;return b._=a,d(b)}finally{fh=Date}}var d=b(a);return c.parse=function(a){try{fh=Na;var b=d.parse(a);return b&&b._}finally{fh=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=ib;var t=Xf.map(),u=Sa(p),v=Ta(p),w=Sa(q),x=Ta(q),y=Sa(r),z=Ta(r),A=Sa(s),B=Ta(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ra(a.getDate(),b,2)},e:function(a,b){return Ra(a.getDate(),b,2)},H:function(a,b){return Ra(a.getHours(),b,2)},I:function(a,b){return Ra(a.getHours()%12||12,b,2)},j:function(a,b){return Ra(1+eh.dayOfYear(a),b,3)},L:function(a,b){return Ra(a.getMilliseconds(),b,3)},m:function(a,b){return Ra(a.getMonth()+1,b,2)},M:function(a,b){return Ra(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ra(a.getSeconds(),b,2)},U:function(a,b){return Ra(eh.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ra(eh.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ra(a.getFullYear()%100,b,2)},Y:function(a,b){return Ra(a.getFullYear()%1e4,b,4)},Z:gb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:ab,e:ab,H:cb,I:cb,j:bb,L:fb,m:_a,M:db,p:k,S:eb,U:Va,w:Ua,W:Wa,x:i,X:j,y:Ya,Y:Xa,Z:Za,"%":hb};return b}function Ra(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Sa(a){return new RegExp("^(?:"+a.map(Xf.requote).join("|")+")","i")}function Ta(a){for(var b=new i,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Ua(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Va(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Wa(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Xa(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ya(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.y=$a(+d[0]),c+d[0].length):-1}function Za(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function $a(a){return a+(a>68?1900:2e3)}function _a(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function ab(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function bb(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function cb(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function db(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function eb(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function fb(a,b,c){ih.lastIndex=0;var d=ih.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function gb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=0|jg(b)/60,e=jg(b)%60;return c+Ra(d,"0",2)+Ra(e,"0",2)}function hb(a,b,c){jh.lastIndex=0;var d=jh.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function ib(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function jb(){}function kb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function lb(a,b){a&&nh.hasOwnProperty(a.type)&&nh[a.type](a,b)}function mb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function nb(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)mb(a[c],b,1);b.polygonEnd()}function ob(){function a(a,b){a*=Gg,b=b*Gg/2+Bg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);ph.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;qh.point=function(g,h){qh.point=a,d=(b=g)*Gg,e=Math.cos(h=(c=h)*Gg/2+Bg/4),f=Math.sin(h)},qh.lineEnd=function(){a(b,c)}}function pb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function qb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function rb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function sb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function tb(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function ub(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function vb(a){return[Math.atan2(a[1],a[0]),ba(a[2])]}function wb(a,b){return jg(a[0]-b[0])<Eg&&jg(a[1]-b[1])<Eg}function xb(a,b){a*=Gg;var c=Math.cos(b*=Gg);yb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function yb(a,b,c){++rh,th+=(a-th)/rh,uh+=(b-uh)/rh,vh+=(c-vh)/rh}function zb(){function a(a,e){a*=Gg;var f=Math.cos(e*=Gg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);sh+=j,wh+=j*(b+(b=g)),xh+=j*(c+(c=h)),yh+=j*(d+(d=i)),yb(b,c,d)}var b,c,d;Ch.point=function(e,f){e*=Gg;var g=Math.cos(f*=Gg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Ch.point=a,yb(b,c,d)}}function Ab(){Ch.point=xb}function Bb(){function a(a,b){a*=Gg;var c=Math.cos(b*=Gg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-aa(n)/m,p=Math.atan2(m,n);zh+=o*j,Ah+=o*k,Bh+=o*l,sh+=p,wh+=p*(d+(d=g)),xh+=p*(e+(e=h)),yh+=p*(f+(f=i)),yb(d,e,f)}var b,c,d,e,f;Ch.point=function(g,h){b=g,c=h,Ch.point=a,g*=Gg;var i=Math.cos(h*=Gg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),yb(d,e,f)},Ch.lineEnd=function(){a(b,c),Ch.lineEnd=Ab,Ch.point=xb}}function Cb(){return!0}function Db(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(wb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Fb(c,a,null,!0),j=new Fb(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Fb(d,a,null,!1),j=new Fb(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Eb(f),Eb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Eb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Fb(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Gb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Hb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Xf.merge(n);var a=Nb(r,o);n.length?(v||(f.polygonStart(),v=!0),Db(n,Jb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Ib(),u=b(t),v=!1;return s}}function Hb(a){return a.length>1}function Ib(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:t,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Jb(a,b){return((a=a.x)[0]<0?a[1]-Dg-Eg:Dg-a[1])-((b=b.x)[0]<0?b[1]-Dg-Eg:Dg-b[1])}function Kb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Bg:-Bg,i=jg(f-c);jg(i-Bg)<Eg?(a.point(c,d=(d+g)/2>0?Dg:-Dg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Bg&&(jg(c-e)<Eg&&(c-=e*Eg),jg(f-h)<Eg&&(f-=h*Eg),d=Lb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Lb(a,b,c,d){var e,f,g=Math.sin(a-c);return jg(g)>Eg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Mb(a,b,c,d){var e;if(null==a)e=c*Dg,d.point(-Bg,e),d.point(0,e),d.point(Bg,e),d.point(Bg,0),d.point(Bg,-e),d.point(0,-e),d.point(-Bg,-e),d.point(-Bg,0),d.point(-Bg,e);else if(jg(a[0]-b[0])>Eg){var f=a[0]<b[0]?Bg:-Bg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Nb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;ph.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Bg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Bg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Bg,z=o*t;if(ph.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Cg:v,y^m>=c^r>=c){var A=rb(pb(l),pb(a));ub(A);var B=rb(e,A);ub(B);var C=(y^v>=0?-1:1)*ba(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Eg>f||Eg>f&&0>ph)^1&g}function Ob(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Bg:-Bg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(wb(c,n)||wb(o,n))&&(o[0]+=Eg,o[1]+=Eg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&wb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=pb(a),e=pb(b),g=[1,0,0],h=rb(d,e),i=qb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=rb(g,h),o=tb(g,l),p=tb(h,m);sb(o,p);var q=n,r=qb(o,q),s=qb(q,q),t=r*r-s*(qb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=tb(q,(-r-u)/s);if(sb(v,o),v=vb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=jg(B-Bg)<Eg,D=C||Eg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(jg(v[0]-x)<Eg?z:A):z<=v[1]&&v[1]<=A:B>Bg^(x<=v[0]&&v[0]<=y)){var E=tb(q,(-r+u)/s);return sb(E,o),[v,vb(E)]}}}function e(b,c){var d=g?a:Bg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=jg(f)>Eg,i=oc(a,6*Gg);return Gb(b,c,i,g?[0,-a]:[-Bg,a-Bg])}function Pb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Qb(a,b,c,d){function e(d,e){return jg(d[0]-a)<Eg?e>0?0:3:jg(d[0]-c)<Eg?e>0?2:1:jg(d[1]-b)<Eg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Eh,Math.min(Eh,a)),b=Math.max(-Eh,Math.min(Eh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Ib(),C=Pb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=Xf.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Db(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Rb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Sb(a){var b=0,c=Bg/3,d=gc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Bg/180,c=a[1]*Bg/180):[180*(b/Bg),180*(c/Bg)]},e}function Tb(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,ba((f-(a*a+c*c)*e*e)/(2*e))]},c}function Ub(){function a(a,b){Gh+=e*a-d*b,d=a,e=b}var b,c,d,e;Lh.point=function(f,g){Lh.point=a,b=d=f,c=e=g},Lh.lineEnd=function(){a(b,c)}}function Vb(a,b){Hh>a&&(Hh=a),a>Jh&&(Jh=a),Ih>b&&(Ih=b),b>Kh&&(Kh=b)}function Wb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Xb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Xb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Xb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Yb(a,b){th+=a,uh+=b,++vh}function Zb(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);wh+=g*(b+a)/2,xh+=g*(c+d)/2,yh+=g,Yb(b=a,c=d)}var b,c;Nh.point=function(d,e){Nh.point=a,Yb(b=d,c=e)}}function $b(){Nh.point=Yb}function _b(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);wh+=g*(d+a)/2,xh+=g*(e+b)/2,yh+=g,g=e*a-d*b,zh+=g*(d+a),Ah+=g*(e+b),Bh+=3*g,Yb(d=a,e=b)}var b,c,d,e;Nh.point=function(f,g){Nh.point=a,Yb(b=d=f,c=e=g)},Nh.lineEnd=function(){a(b,c)}}function ac(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,Cg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:t};return h}function bc(a){function b(a){return(h?d:c)(a)}function c(b){return ec(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=pb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=jg(jg(x)-1)<Eg||jg(d-m)<Eg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||jg((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Gg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function cc(a){var b=bc(function(b,c){return a([b*Hg,c*Hg])});return function(a){return hc(b(a))}}function dc(a){this.stream=a}function ec(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function fc(a){return gc(function(){return a})()}function gc(a){function b(a){return a=h(a[0]*Gg,a[1]*Gg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Hg,a[1]*Hg]}function d(){h=Rb(g=kc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=bc(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=Dh,v=Ba,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=hc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,Dh):Ob((w=+a)*Gg),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Qb(a[0][0],a[0][1],a[1][0],a[1][1]):Ba,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Gg,q=a[1]%360*Gg,d()):[p*Hg,q*Hg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Gg,s=a[1]%360*Gg,t=a.length>2?a[2]%360*Gg:0,d()):[r*Hg,s*Hg,t*Hg]},Xf.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function hc(a){return ec(a,function(b,c){a.point(b*Gg,c*Gg)})}function ic(a,b){return[a,b]}function jc(a,b){return[a>Bg?a-Cg:-Bg>a?a+Cg:a,b]}function kc(a,b,c){return a?b||c?Rb(mc(a),nc(b,c)):mc(a):b||c?nc(b,c):jc}function lc(a){return function(b,c){return b+=a,[b>Bg?b-Cg:-Bg>b?b+Cg:b,c]}}function mc(a){var b=lc(a);return b.invert=lc(-a),b}function nc(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),ba(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),ba(k*d-h*e)]},c}function oc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=pc(c,e),f=pc(c,f),(g>0?f>e:e>f)&&(e+=g*Cg)):(e=a+g*Cg,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=vb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function pc(a,b){var c=pb(b);c[0]-=a,ub(c);var d=aa(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Eg)%(2*Math.PI)}function qc(a,b,c){var d=Xf.range(a,b-Eg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function rc(a,b,c){var d=Xf.range(a,b-Eg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function sc(a){return a.source}function tc(a){return a.target}function uc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fa(d-b)+e*g*fa(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Hg,Math.atan2(g,Math.sqrt(d*d+e*e))*Hg]}:function(){return[a*Hg,b*Hg]};return o.distance=m,o}function vc(){function a(a,e){var f=Math.sin(e*=Gg),g=Math.cos(e),h=jg((a*=Gg)-b),i=Math.cos(h);Oh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Ph.point=function(e,f){b=e*Gg,c=Math.sin(f*=Gg),d=Math.cos(f),Ph.point=a},Ph.lineEnd=function(){Ph.point=Ph.lineEnd=t}}function wc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function xc(a,b){function c(a,b){g>0?-Dg+Eg>b&&(b=-Dg+Eg):b>Dg-Eg&&(b=Dg-Eg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Bg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Dg]},c):zc}function yc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return jg(e)<Eg?ic:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function zc(a,b){return[a,Math.log(Math.tan(Bg/4+b/2))]}function Ac(a){var b,c=fc(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Bg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Bc(a,b){return[Math.log(Math.tan(Bg/4+b/2)),-a]}function Cc(a){return a[0]}function Dc(a){return a[1]}function Ec(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Fc(a,b){return a[0]-b[0]||a[1]-b[1]}function Gc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Hc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Ic(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Jc(){cd(this),this.edge=this.site=this.circle=null}function Kc(a){var b=_h.pop()||new Jc;return b.site=a,b}function Lc(a){Vc(a),Yh.remove(a),_h.push(a),cd(a)}function Mc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Lc(a);for(var i=f;i.circle&&jg(c-i.circle.x)<Eg&&jg(d-i.circle.cy)<Eg;)f=i.P,h.unshift(i),Lc(i),i=f;h.unshift(i),Vc(i);for(var j=g;j.circle&&jg(c-j.circle.x)<Eg&&jg(d-j.circle.cy)<Eg;)g=j.N,h.push(j),Lc(j),j=g;h.push(j),Vc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],_c(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Zc(i.site,j.site,null,e),Uc(i),Uc(j)}function Nc(a){for(var b,c,d,e,f=a.x,g=a.y,h=Yh._;h;)if(d=Oc(h,g)-f,d>Eg)h=h.L;else{if(e=f-Pc(h,g),!(e>Eg)){d>-Eg?(b=h.P,c=h):e>-Eg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Kc(a);if(Yh.insert(b,i),b||c){if(b===c)return Vc(b),c=Kc(b.site),Yh.insert(i,c),i.edge=c.edge=Zc(b.site,i.site),Uc(b),void Uc(c);if(!c)return void(i.edge=Zc(b.site,i.site));Vc(b),Vc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};_c(c.edge,j,o,u),i.edge=Zc(j,a,null,u),c.edge=Zc(a,o,null,u),Uc(b),Uc(c)}}function Oc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Pc(a,b){var c=a.N;if(c)return Oc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Qc(a){this.site=a,this.edges=[]}function Rc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Xh,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(jg(d-b)>Eg||jg(e-c)>Eg)&&(h.splice(g,0,new ad($c(f.site,k,jg(d-l)<Eg&&o-e>Eg?{x:l,y:jg(b-l)<Eg?c:o}:jg(e-o)<Eg&&m-d>Eg?{x:jg(c-o)<Eg?b:m,y:o}:jg(d-m)<Eg&&e-n>Eg?{x:m,y:jg(b-m)<Eg?c:n}:jg(e-n)<Eg&&d-l>Eg?{
x:jg(c-n)<Eg?b:l,y:n}:null),f.site,null)),++i)}function Sc(a,b){return b.angle-a.angle}function Tc(){cd(this),this.x=this.y=this.arc=this.site=this.cy=null}function Uc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Fg)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=ai.pop()||new Tc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=$h._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}$h.insert(s,r),s||(Zh=r)}}}}function Vc(a){var b=a.circle;b&&(b.P||(Zh=b.N),$h.remove(b),ai.push(b),cd(b),a.circle=null)}function Wc(a){for(var b,c=Wh,d=Pb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Xc(b,a)||!d(b)||jg(b.a.x-b.b.x)<Eg&&jg(b.a.y-b.b.y)<Eg)&&(b.a=b.b=null,c.splice(e,1))}function Xc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Yc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Zc(a,b,c,d){var e=new Yc(a,b);return Wh.push(e),c&&_c(e,a,b,c),d&&_c(e,b,a,d),Xh[a.i].edges.push(new ad(e,a,b)),Xh[b.i].edges.push(new ad(e,b,a)),e}function $c(a,b,c){var d=new Yc(a,null);return d.a=b,d.b=c,Wh.push(d),d}function _c(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ad(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function bd(){this._=null}function cd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function dd(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function ed(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function fd(a){for(;a.L;)a=a.L;return a}function gd(a,b){var c,d,e,f=a.sort(hd).pop();for(Wh=[],Xh=new Array(a.length),Yh=new bd,$h=new bd;;)if(e=Zh,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(Xh[f.i]=new Qc(f),Nc(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Mc(e.arc)}b&&(Wc(b),Rc(b));var g={cells:Xh,edges:Wh};return Yh=$h=Wh=Xh=null,g}function hd(a,b){return b.y-a.y||b.x-a.x}function id(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function jd(a){return a.x}function kd(a){return a.y}function ld(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function md(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&md(a,i[0],c,d,g,h),i[1]&&md(a,i[1],g,d,e,h),i[2]&&md(a,i[2],c,h,g,f),i[3]&&md(a,i[3],g,h,e,f)}}function nd(a,b){a=Xf.rgb(a),b=Xf.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ua(Math.round(c+f*a))+ua(Math.round(d+g*a))+ua(Math.round(e+h*a))}}function od(a,b){var c,d={},e={};for(c in a)c in b?d[c]=rd(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function pd(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function qd(a,b){var c,d,e,f=ci.lastIndex=di.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=ci.exec(a))&&(d=di.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:pd(c,d)})),f=di.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function rd(a,b){for(var c,d=Xf.interpolators.length;--d>=0&&!(c=Xf.interpolators[d](a,b)););return c}function sd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(rd(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function td(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function ud(a){return function(b){return 1-a(1-b)}}function vd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function wd(a){return a*a}function xd(a){return a*a*a}function yd(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function zd(a){return function(b){return Math.pow(b,a)}}function Ad(a){return 1-Math.cos(a*Dg)}function Bd(a){return Math.pow(2,10*(a-1))}function Cd(a){return 1-Math.sqrt(1-a*a)}function Dd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Cg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Cg/b)}}function Ed(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Fd(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Gd(a,b){a=Xf.hcl(a),b=Xf.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ka(c+f*a,d+g*a,e+h*a)+""}}function Hd(a,b){a=Xf.hsl(a),b=Xf.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Id(a,b){a=Xf.lab(a),b=Xf.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ma(c+f*a,d+g*a,e+h*a)+""}}function Jd(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Kd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Md(b),e=Ld(b,c),f=Md(Nd(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Hg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Hg:0}function Ld(a,b){return a[0]*b[0]+a[1]*b[1]}function Md(a){var b=Math.sqrt(Ld(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Nd(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Od(a,b){var c,d=[],e=[],f=Xf.transform(a),g=Xf.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:pd(h[0],i[0])},{i:3,x:pd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:pd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:pd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:pd(n[0],o[0])},{i:c-2,x:pd(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Pd(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Qd(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Rd(a){for(var b=a.source,c=a.target,d=Td(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Sd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Td(a,b){if(a===b)return a;for(var c=Sd(a),d=Sd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Ud(a){a.fixed|=2}function Vd(a){a.fixed&=-7}function Wd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Xd(a){a.fixed&=-5}function Yd(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Yd(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Zd(a,b){return Xf.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=de,a}function $d(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function _d(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function ae(a){return a.children}function be(a){return a.value}function ce(a,b){return b.value-a.value}function de(a){return Xf.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ee(a){return a.x}function fe(a){return a.y}function ge(a,b,c){a.y0=b,a.y=c}function he(a){return Xf.range(a.length)}function ie(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function je(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function ke(a){return a.reduce(le,0)}function le(a,b){return a+b[1]}function me(a,b){return ne(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ne(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function oe(a){return[Xf.min(a),Xf.max(a)]}function pe(a,b){return a.value-b.value}function qe(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function re(a,b){a._pack_next=b,b._pack_prev=a}function se(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function te(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(ue),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],xe(d,e,f),b(f),qe(d,f),d._pack_prev=f,qe(f,e),e=d._pack_next,g=3;j>g;g++){xe(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(se(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!se(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?re(d,e=h):re(d=i,e),g--):(qe(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(ve)}}function ue(a){a._pack_next=a._pack_prev=a}function ve(a){delete a._pack_next,delete a._pack_prev}function we(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)we(e[f],b,c,d)}function xe(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function ye(a,b){return a.parent==b.parent?1:2}function ze(a){var b=a.children;return b.length?b[0]:a.t}function Ae(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Be(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Ce(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function De(a,b,c){return a.a.parent===b.parent?a.a:c}function Ee(a){return 1+Xf.max(a,function(a){return a.y})}function Fe(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Ge(a){var b=a.children;return b&&b.length?Ge(b[0]):a}function He(a){var b,c=a.children;return c&&(b=c.length)?He(c[b-1]):a}function Ie(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Je(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Ke(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Le(a){return a.rangeExtent?a.rangeExtent():Ke(a.range())}function Me(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ne(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Oe(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:oi}function Pe(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Xf.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Qe(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Pe:Me,i=d?Qd:Pd;return g=e(a,b,i,c),h=e(b,a,i,rd),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Jd)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Ue(a,b)},f.tickFormat=function(b,c){return Ve(a,b,c)},f.nice=function(b){return Se(a,b),e()},f.copy=function(){return Qe(a,b,c,d)},e()}function Re(a,b){return Xf.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Se(a,b){return Ne(a,Oe(Te(a,b)[2]))}function Te(a,b){null==b&&(b=10);var c=Ke(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Ue(a,b){return Xf.range.apply(Xf,Te(a,b))}function Ve(a,b,c){var d=Te(a,b);if(c){var e=ch.exec(c);if(e.shift(),"s"===e[8]){var f=Xf.formatPrefix(Math.max(jg(d[0]),jg(d[1])));return e[7]||(e[7]="."+We(f.scale(d[2]))),e[8]="f",c=Xf.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Xe(e[8],d)),c=e.join("")}else c=",."+We(d[2])+"f";return Xf.format(c)}function We(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Xe(a,b){var c=We(b[2]);return a in pi?Math.abs(c-We(Math.max(jg(b[0]),jg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ye(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ne(d.map(e),c?Math:ri);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Ke(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return qi;arguments.length<2?b=qi:"function"!=typeof b&&(b=Xf.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Ye(a.copy(),b,c,d)},Re(g,a)}function Ze(a,b,c){function d(b){return a(e(b))}var e=$e(b),f=$e(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Ue(c,a)},d.tickFormat=function(a,b){return Ve(c,a,b)},d.nice=function(a){return d.domain(Se(c,a))},d.exponent=function(g){return arguments.length?(e=$e(b=g),f=$e(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ze(a.copy(),b,c)},Re(d,a)}function $e(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function _e(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return Xf.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new i;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+h);return f=d(a.length<2?(i+j)/2:i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i)),n=l-k-(a.length-h)*m;return f=d(k+Math.round(n/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Ke(b.a[0])},c.copy=function(){return _e(a,b)},c.domain(a)}function af(b,e){function f(){var a=0,c=e.length;for(h=[];++a<c;)h[a-1]=Xf.quantile(b,a/c);return g}function g(a){return isNaN(a=+a)?void 0:e[Xf.bisect(h,a)]}var h;return g.domain=function(e){return arguments.length?(b=e.map(c).filter(d).sort(a),f()):b},g.range=function(a){return arguments.length?(e=a,f()):e},g.quantiles=function(){return h},g.invertExtent=function(a){return a=e.indexOf(a),0>a?[NaN,NaN]:[a>0?h[a-1]:b[0],a<h.length?h[a]:b[b.length-1]]},g.copy=function(){return af(b,e)},f()}function bf(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return bf(a,b,c)},e()}function cf(a,b){function c(c){return c>=c?b[Xf.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return cf(a,b)},c}function df(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Ue(a,b)},b.tickFormat=function(b,c){return Ve(a,b,c)},b.copy=function(){return df(a)},b}function ef(a){return a.innerRadius}function ff(a){return a.outerRadius}function gf(a){return a.startAngle}function hf(a){return a.endAngle}function jf(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Aa(c),o=Aa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Cc,d=Dc,e=Cb,f=kf,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=yi.get(a)||kf).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function kf(a){return a.join("L")}function lf(a){return kf(a)+"Z"}function mf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function nf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function of(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function pf(a,b){return a.length<4?kf(a):a[1]+sf(a.slice(1,a.length-1),tf(a,b))}function qf(a,b){return a.length<3?kf(a):a[0]+sf((a.push(a[0]),a),tf([a[a.length-2]].concat(a,[a[1]]),b))}function rf(a,b){return a.length<3?kf(a):a[0]+sf(a,tf(a,b))}function sf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return kf(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function tf(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function uf(a){if(a.length<3)return kf(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",yf(Bi,g),",",yf(Bi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),zf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function vf(a){if(a.length<4)return kf(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(yf(Bi,f)+","+yf(Bi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),zf(c,f,g);return c.join("")}function wf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[yf(Bi,g),",",yf(Bi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),zf(b,g,h);return b.join("")}function xf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return uf(a)}function yf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function zf(a,b,c){a.push("C",yf(zi,b),",",yf(zi,c),",",yf(Ai,b),",",yf(Ai,c),",",yf(Bi,b),",",yf(Bi,c))}function Af(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Bf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Af(e,f);++b<c;)d[b]=(g+(g=Af(e=f,f=a[b+1])))/2;return d[b]=g,d}function Cf(a){for(var b,c,d,e,f=[],g=Bf(a),h=-1,i=a.length-1;++h<i;)b=Af(a[h],a[h+1]),jg(b)<Eg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Df(a){return a.length<3?kf(a):a[0]+sf(a,Cf(a))}function Ef(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+wi,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Ff(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Aa(c),v=Aa(e),w=c===d?function(){return n}:Aa(d),x=e===f?function(){return o}:Aa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Cc,d=Cc,e=0,f=Dc,g=Cb,h=kf,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=yi.get(a)||kf).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Gf(a){return a.radius}function Hf(a){return[a.x,a.y]}function If(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+wi;return[c*Math.cos(d),c*Math.sin(d)]}}function Jf(){return 64}function Kf(){return"circle"}function Lf(a){var b=Math.sqrt(a/Bg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Mf(a,b){return og(a,Hi),a.id=b,a}function Nf(a,b,c,d){var e=a.id;return O(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Of(a){return null==a&&(a=""),function(){this.textContent=a}}function Pf(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var g=d.time;f=e[c]={tween:new i,time:g,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,Xf.timer(function(d){function h(d){return e.active>c?j():(e.active=c,f.event&&f.event.start.call(a,k,b),f.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),void Xf.timer(function(){return o.c=i(d||1)?Cb:i,1},0,g))}function i(d){if(e.active!==c)return j();for(var g=d/n,h=l(g),i=p.length;i>0;)p[--i].call(a,h);return g>=1?(f.event&&f.event.end.call(a,k,b),j()):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=f.ease,m=f.delay,n=f.duration,o=_g,p=[];return o.t=m+g,d>=m?h(d-m):void(o.c=h)},0,g)}}function Qf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Rf(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Sf(a){return a.toISOString()}function Tf(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Xf.bisect(Qi,e);return f==Qi.length?[b.year,Te(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Qi[f-1]<Qi[f]/e?f-1:f]:[Ti,Te(a,c)[2]]}return d.invert=function(b){return Uf(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Uf)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Uf(+c+1),b).length}var f=d.domain(),g=Ke(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ne(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Uf(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Uf(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Ke(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Uf(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Tf(a.copy(),b,c)},Re(d,a)}function Uf(a){return new Date(a)}function Vf(a){return JSON.parse(a.responseText)}function Wf(a){var b=$f.createRange();return b.selectNode($f.body),b.createContextualFragment(a.responseText)}var Xf={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Yf=[].slice,Zf=function(a){return Yf.call(a)},$f=document,_f=$f.documentElement,ag=window;try{Zf(_f.childNodes)[0].nodeType}catch(bg){Zf=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{$f.createElement("div").style.setProperty("opacity",0,"")}catch(cg){var dg=ag.Element.prototype,eg=dg.setAttribute,fg=dg.setAttributeNS,gg=ag.CSSStyleDeclaration.prototype,hg=gg.setProperty;dg.setAttribute=function(a,b){eg.call(this,a,b+"")},dg.setAttributeNS=function(a,b,c){fg.call(this,a,b,c+"")},gg.setProperty=function(a,b,c){hg.call(this,a,b+"",c)}}Xf.ascending=a,Xf.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},Xf.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Xf.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Xf.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},Xf.sum=function(a,b){var c,e=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)d(c=+a[g])&&(e+=c);else for(;++g<f;)d(c=+b.call(a,a[g],g))&&(e+=c);return e},Xf.mean=function(a,b){var e,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)d(e=c(a[h]))?f+=e:--i;else for(;++h<g;)d(e=c(b.call(a,a[h],h)))?f+=e:--i;return i?f/i:void 0},Xf.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Xf.median=function(b,e){var f,g=[],h=b.length,i=-1;if(1===arguments.length)for(;++i<h;)d(f=c(b[i]))&&g.push(f);else for(;++i<h;)d(f=c(e.call(b,b[i],i)))&&g.push(f);return g.length?Xf.quantile(g.sort(a),.5):void 0};var ig=e(a);Xf.bisectLeft=ig.left,Xf.bisect=Xf.bisectRight=ig.right,Xf.bisector=function(b){return e(1===b.length?function(c,d){return a(b(c),d)}:b)},Xf.shuffle=function(a){for(var b,c,d=a.length;d;)c=0|Math.random()*d--,b=a[d],a[d]=a[c],a[c]=b;return a},Xf.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Xf.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},Xf.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=Xf.min(arguments,f),c=new Array(b);++a<b;)for(var d,e=-1,g=c[a]=new Array(d);++e<d;)g[e]=arguments[e][a];return c},Xf.transpose=function(a){return Xf.zip.apply(Xf,a)},Xf.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Xf.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Xf.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Xf.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var jg=Math.abs;Xf.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),1/0===(b-a)/c)throw new Error("infinite range");var d,e=[],f=g(jg(c)),h=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++h)>b;)e.push(d/f);else for(;(d=a+c*++h)<b;)e.push(d/f);return e},Xf.map=function(a){var b=new i;if(a instanceof i)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};var kg="__proto__",lg="\x00";h(i,{has:l,get:function(a){return this._[j(a)]},set:function(a,b){return this._[j(a)]=b},remove:m,keys:n,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:k(b),value:this._[b]});return a},size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b),this._[b])}}),Xf.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var j,k,l,m,n=-1,o=g.length,p=f[h++],q=new i;++n<o;)(m=q.get(j=p(k=g[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(Xf.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},Xf.set=function(a){var b=new q;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},h(q,{has:l,add:function(a){return this._[j(a+="")]=!0,a},remove:m,values:n,size:o,empty:p,forEach:function(a){for(var b in this._)a.call(this,k(b))}}),Xf.behavior={},Xf.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=r(a,b,b[c]);return a};var mg=["webkit","ms","moz","Moz","o","O"];Xf.dispatch=function(){for(var a=new u,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=v(a);return a},u.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Xf.event=null,Xf.requote=function(a){return a.replace(ng,"\\$&")};var ng=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,og={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},pg=function(a,b){return b.querySelector(a)},qg=function(a,b){return b.querySelectorAll(a)},rg=_f.matches||_f[s(_f,"matchesSelector")],sg=function(a,b){return rg.call(a,b)};"function"==typeof Sizzle&&(pg=function(a,b){
return Sizzle(a,b)[0]||null},qg=Sizzle,sg=Sizzle.matchesSelector),Xf.selection=function(){return wg};var tg=Xf.selection.prototype=[];tg.select=function(a){var b,c,d,e,f=[];a=A(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return z(f)},tg.selectAll=function(a){var b,c,d=[];a=B(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Zf(a.call(c,c.__data__,h,e))),b.parentNode=c);return z(d)};var ug={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Xf.ns={prefix:ug,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),ug.hasOwnProperty(c)?{space:ug[c],local:a}:a}},tg.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Xf.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(C(b,a[b]));return this}return this.each(C(a,b))},tg.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=F(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!E(a[e]).test(b))return!1;return!0}for(b in a)this.each(G(b,a[b]));return this}return this.each(G(a,b))},tg.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(I(c,a[c],b));return this}if(2>d)return ag.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(I(a,b,c))},tg.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(J(b,a[b]));return this}return this.each(J(a,b))},tg.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},tg.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},tg.append=function(a){return a=K(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},tg.insert=function(a,b){return a=K(a),b=A(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},tg.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},tg.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new i,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=L(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=L(f);for(;l>d;++d)o[d]=L(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),j.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=P([]),j=z([]),k=z([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return j.enter=function(){return h},j.exit=function(){return k},j},tg.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},tg.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return z(e)},tg.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},tg.sort=function(a){a=N.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},tg.each=function(a){return O(this,function(b,c,d){a.call(b,b.__data__,c,d)})},tg.call=function(a){var b=Zf(arguments);return a.apply(b[0]=this,b),this},tg.empty=function(){return!this.node()},tg.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},tg.size=function(){var a=0;return O(this,function(){++a}),a};var vg=[];Xf.selection.enter=P,Xf.selection.enter.prototype=vg,vg.append=tg.append,vg.empty=tg.empty,vg.node=tg.node,vg.call=tg.call,vg.size=tg.size,vg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return z(g)},vg.insert=function(a,b){return arguments.length<2&&(b=Q(this)),tg.insert.call(this,a,b)},tg.transition=function(){for(var a,b,c=Di||++Ii,d=[],e=Ei||{time:Date.now(),ease:yd,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&Pf(b,i,c,e),a.push(b)}return Mf(d,c)},tg.interrupt=function(){return this.each(R)},Xf.select=function(a){var b=["string"==typeof a?pg(a,$f):a];return b.parentNode=_f,z([b])},Xf.selectAll=function(a){var b=Zf("string"==typeof a?qg(a,$f):a);return b.parentNode=_f,z([b])};var wg=Xf.select(_f);tg.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(S(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(S(a,b,c))};var xg=Xf.map({mouseenter:"mouseover",mouseleave:"mouseout"});xg.forEach(function(a){"on"+a in $f&&xg.remove(a)});var yg="onselectstart"in $f?null:s(_f.style,"userSelect"),zg=0;Xf.mouse=function(a){return W(a,x())};var Ag=/WebKit/.test(ag.navigator.userAgent)?-1:0;Xf.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=x().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return W(a,d)},Xf.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&Xf.event.target===l),n({type:"dragend"}))}var j,k=this,l=Xf.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=Xf.select(e()).on(f+q,h).on(g+q,i),s=V(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=y(a,"drag","dragstart","dragend"),d=null,e=b(t,Xf.mouse,Z,"mousemove","mouseup"),f=b(X,Xf.touch,Y,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},Xf.rebind(a,c,"on")},Xf.touches=function(a,b){return arguments.length<2&&(b=x().touches),b?Zf(b).map(function(b){var c=W(a,b);return c.identifier=b.identifier,c}):[]};var Bg=Math.PI,Cg=2*Bg,Dg=Bg/2,Eg=1e-6,Fg=Eg*Eg,Gg=Bg/180,Hg=180/Bg,Ig=Math.SQRT2,Jg=2,Kg=4;Xf.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=da(p),g=f/(Jg*m)*(c*ea(Ig*b+p)-ca(p));return[d+g*j,e+g*k,f*c/da(Ig*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Ig*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Kg*l)/(2*f*Jg*m),o=(i*i-f*f-Kg*l)/(2*i*Jg*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Ig;return c.duration=1e3*s,c},Xf.behavior.zoom=function(){function a(a){a.on(B,j).on(Ng+".zoom",l).on("dblclick.zoom",m).on(E,k)}function b(a){return[(a[0]-x.x)/x.k,(a[1]-x.y)/x.k]}function c(a){return[a[0]*x.k+x.x,a[1]*x.k+x.y]}function d(a){x.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),x.x+=a[0]-b[0],x.y+=a[1]-b[1]}function f(){t&&t.domain(s.range().map(function(a){return(a-x.x)/x.k}).map(s.invert)),v&&v.domain(u.range().map(function(a){return(a-x.y)/x.k}).map(u.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:x.k,translate:[x.x,x.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Xf.mouse(d),m),h(j)}function c(){l.on(C,null).on(D,null),n(k&&Xf.event.target===f),i(j)}var d=this,f=Xf.event.target,j=F.of(d,arguments),k=0,l=Xf.select(ag).on(C,a).on(D,c),m=b(Xf.mouse(d)),n=V();R.call(d),g(j)}function k(){function a(){var a=Xf.touches(n);return m=x.k,a.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),a}function c(){var b=Xf.event.target;Xf.select(b).on(t,f).on(u,l),v.push(b);for(var c=Xf.event.changedTouches,g=0,i=c.length;i>g;++g)p[c[g].identifier]=null;var j=a(),k=Date.now();if(1===j.length){if(500>k-r){var m=j[0],n=p[m.identifier];d(2*x.k),e(m,n),w(),h(o)}r=k}else if(j.length>1){var m=j[0],s=j[1],y=m[0]-s[0],z=m[1]-s[1];q=y*y+z*z}}function f(){for(var a,b,c,f,g=Xf.touches(n),i=0,j=g.length;j>i;++i,f=null)if(c=g[i],f=p[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=q&&Math.sqrt(k/q);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*m)}r=null,e(a,b),h(o)}function l(){if(Xf.event.touches.length){for(var b=Xf.event.changedTouches,c=0,d=b.length;d>c;++c)delete p[b[c].identifier];for(var e in p)return void a()}Xf.selectAll(v).on(s,null),y.on(B,j).on(E,k),z(),i(o)}var m,n=this,o=F.of(n,arguments),p={},q=0,s=".zoom-"+Xf.event.changedTouches[0].identifier,t="touchmove"+s,u="touchend"+s,v=[],y=Xf.select(n),z=V();R.call(n),c(),g(o),y.on(B,null).on(E,c)}function l(){var a=F.of(this,arguments);q?clearTimeout(q):(n=b(o=p||Xf.mouse(this)),R.call(this),g(a)),q=setTimeout(function(){q=null,i(a)},50),w(),d(Math.pow(2,.002*Lg())*x.k),e(o,n),h(a)}function m(){var a=F.of(this,arguments),c=Xf.mouse(this),f=b(c),j=Math.log(x.k)/Math.LN2;g(a),d(Math.pow(2,Xf.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var n,o,p,q,r,s,t,u,v,x={x:0,y:0,k:1},z=[960,500],A=Mg,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=y(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=x;Di?Xf.select(this).transition().each("start.zoom",function(){x=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Xf.interpolateZoom([(e-x.x)/x.k,(f-x.y)/x.k,c/x.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=x={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=x,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(x={x:+b[0],y:+b[1],k:x.k},f(),a):[x.x,x.y]},a.scale=function(b){return arguments.length?(x={x:x.x,y:x.y,k:+b},f(),a):x.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Mg:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(p=b&&[+b[0],+b[1]],a):p},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(t=b,s=b.copy(),x={x:0,y:0,k:1},a):t},a.y=function(b){return arguments.length?(v=b,u=b.copy(),x={x:0,y:0,k:1},a):v},Xf.rebind(a,F,"on")};var Lg,Mg=[0,1/0],Ng="onwheel"in $f?(Lg=function(){return-Xf.event.deltaY*(Xf.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $f?(Lg=function(){return Xf.event.wheelDelta},"mousewheel"):(Lg=function(){return-Xf.event.detail},"MozMousePixelScroll");Xf.color=ga,ga.prototype.toString=function(){return this.rgb()+""},Xf.hsl=ha;var Og=ha.prototype=new ga;Og.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,this.l/a)},Og.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ha(this.h,this.s,a*this.l)},Og.rgb=function(){return ia(this.h,this.s,this.l)},Xf.hcl=ja;var Pg=ja.prototype=new ga;Pg.brighter=function(a){return new ja(this.h,this.c,Math.min(100,this.l+Qg*(arguments.length?a:1)))},Pg.darker=function(a){return new ja(this.h,this.c,Math.max(0,this.l-Qg*(arguments.length?a:1)))},Pg.rgb=function(){return ka(this.h,this.c,this.l).rgb()},Xf.lab=la;var Qg=18,Rg=.95047,Sg=1,Tg=1.08883,Ug=la.prototype=new ga;Ug.brighter=function(a){return new la(Math.min(100,this.l+Qg*(arguments.length?a:1)),this.a,this.b)},Ug.darker=function(a){return new la(Math.max(0,this.l-Qg*(arguments.length?a:1)),this.a,this.b)},Ug.rgb=function(){return ma(this.l,this.a,this.b)},Xf.rgb=ra;var Vg=ra.prototype=new ga;Vg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new ra(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new ra(e,e,e)},Vg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new ra(a*this.r,a*this.g,a*this.b)},Vg.hsl=function(){return wa(this.r,this.g,this.b)},Vg.toString=function(){return"#"+ua(this.r)+ua(this.g)+ua(this.b)};var Wg=Xf.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wg.forEach(function(a,b){Wg.set(a,sa(b))}),Xf.functor=Aa,Xf.xhr=Ca(Ba),Xf.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Da(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new q,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},Xf.csv=Xf.dsv(",","text/csv"),Xf.tsv=Xf.dsv("	","text/tab-separated-values");var Xg,Yg,Zg,$g,_g,ah=ag[s(ag,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Xf.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Yg?Yg.n=f:Xg=f,Yg=f,Zg||($g=clearTimeout($g),Zg=1,ah(Ga))},Xf.timer.flush=function(){Ha(),Ia()},Xf.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var bh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ka);Xf.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=Xf.round(a,Ja(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),bh[8+c/3]};var ch=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,dh=Xf.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Xf.round(a,Ja(a,b))).toFixed(Math.max(0,Math.min(20,Ja(a*(1+1e-15),b))))}}),eh=Xf.time={},fh=Date;Na.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){gh.setUTCDate.apply(this._,arguments)},setDay:function(){gh.setUTCDay.apply(this._,arguments)},setFullYear:function(){gh.setUTCFullYear.apply(this._,arguments)},setHours:function(){gh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){gh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){gh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){gh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){gh.setUTCSeconds.apply(this._,arguments)},setTime:function(){gh.setTime.apply(this._,arguments)}};var gh=Date.prototype;eh.year=Oa(function(a){return a=eh.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),eh.years=eh.year.range,eh.years.utc=eh.year.utc.range,eh.day=Oa(function(a){var b=new fh(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),eh.days=eh.day.range,eh.days.utc=eh.day.utc.range,eh.dayOfYear=function(a){var b=eh.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=eh[a]=Oa(function(a){return(a=eh.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=eh.year(a).getDay();return Math.floor((eh.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});eh[a+"s"]=c.range,eh[a+"s"].utc=c.utc.range,eh[a+"OfYear"]=function(a){var c=eh.year(a).getDay();return Math.floor((eh.dayOfYear(a)+(c+b)%7)/7)}}),eh.week=eh.sunday,eh.weeks=eh.sunday.range,eh.weeks.utc=eh.sunday.utc.range,eh.weekOfYear=eh.sundayOfYear;var hh={"-":"",_:" ",0:"0"},ih=/^\s*\d+/,jh=/^%/;Xf.locale=function(a){return{numberFormat:La(a),timeFormat:Qa(a)}};var kh=Xf.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Xf.format=kh.numberFormat,Xf.geo={},jb.prototype={s:0,t:0,add:function(a){kb(a,this.t,lh),kb(lh.s,this.s,this),this.s?this.t+=lh.t:this.s=lh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var lh=new jb;Xf.geo.stream=function(a,b){a&&mh.hasOwnProperty(a.type)?mh[a.type](a,b):lb(a,b)};var mh={Feature:function(a,b){lb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)lb(c[d].geometry,b)}},nh={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){mb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mb(c[d],b,0)},Polygon:function(a,b){nb(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)nb(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)lb(c[d],b)}};Xf.geo.area=function(a){return oh=0,Xf.geo.stream(a,qh),oh};var oh,ph=new jb,qh={sphere:function(){oh+=4*Bg},point:t,lineStart:t,lineEnd:t,polygonStart:function(){ph.reset(),qh.lineStart=ob},polygonEnd:function(){var a=2*ph;oh+=0>a?4*Bg+a:a,qh.lineStart=qh.lineEnd=qh.point=t}};Xf.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=pb([b*Gg,c*Gg]);if(r){var e=rb(r,d),f=[e[1],-e[0],0],g=rb(f,e);ub(g),g=vb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Hg*j,q=jg(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Hg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Hg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=jg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;qh.point(a,c),b(a,c)}function f(){qh.lineStart()}function g(){e(p,q),qh.lineEnd(),jg(s)>Eg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,qh.polygonStart()},polygonEnd:function(){qh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>ph?(k=-(m=180),l=-(n=90)):s>Eg?n=90:-Eg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Xf.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,1/0===k||1/0===l?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),Xf.geo.centroid=function(a){rh=sh=th=uh=vh=wh=xh=yh=zh=Ah=Bh=0,Xf.geo.stream(a,Ch);var b=zh,c=Ah,d=Bh,e=b*b+c*c+d*d;return Fg>e&&(b=wh,c=xh,d=yh,Eg>sh&&(b=th,c=uh,d=vh),e=b*b+c*c+d*d,Fg>e)?[NaN,NaN]:[Math.atan2(c,b)*Hg,ba(d/Math.sqrt(e))*Hg]};var rh,sh,th,uh,vh,wh,xh,yh,zh,Ah,Bh,Ch={sphere:t,point:xb,lineStart:zb,lineEnd:Ab,polygonStart:function(){Ch.lineStart=Bb},polygonEnd:function(){Ch.lineStart=zb}},Dh=Gb(Cb,Kb,Mb,[-Bg,-Bg/2]),Eh=1e9;Xf.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Qb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Xf.geo.conicEqualArea=function(){return Sb(Tb)}).raw=Tb,Xf.geo.albers=function(){return Xf.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Xf.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Xf.geo.albers(),g=Xf.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Xf.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Eg,l+.12*j+Eg],[k-.214*j-Eg,l+.234*j-Eg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Eg,l+.166*j+Eg],[k-.115*j-Eg,l+.234*j-Eg]]).stream(i).point,a},a.scale(1070)};var Fh,Gh,Hh,Ih,Jh,Kh,Lh={point:t,lineStart:t,lineEnd:t,polygonStart:function(){Gh=0,Lh.lineStart=Ub},polygonEnd:function(){Lh.lineStart=Lh.lineEnd=Lh.point=t,Fh+=jg(Gh/2)}},Mh={point:Vb,lineStart:t,lineEnd:t,polygonStart:t,polygonEnd:t},Nh={point:Yb,lineStart:Zb,lineEnd:$b,polygonStart:function(){Nh.lineStart=_b},polygonEnd:function(){Nh.point=Yb,Nh.lineStart=Zb,Nh.lineEnd=$b}};Xf.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Xf.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Fh=0,Xf.geo.stream(a,e(Lh)),Fh},a.centroid=function(a){return th=uh=vh=wh=xh=yh=zh=Ah=Bh=0,Xf.geo.stream(a,e(Nh)),Bh?[zh/Bh,Ah/Bh]:yh?[wh/yh,xh/yh]:vh?[th/vh,uh/vh]:[NaN,NaN]},a.bounds=function(a){return Jh=Kh=-(Hh=Ih=1/0),Xf.geo.stream(a,e(Mh)),[[Hh,Ih],[Jh,Kh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||cc(a):Ba,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Wb:new ac(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Xf.geo.albersUsa()).context(null)},Xf.geo.transform=function(a){return{stream:function(b){var c=new dc(b);for(var d in a)c[d]=a[d];return c}}},dc.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Xf.geo.projection=fc,Xf.geo.projectionMutator=gc,(Xf.geo.equirectangular=function(){return fc(ic)}).raw=ic.invert=ic,Xf.geo.rotation=function(a){function b(b){return b=a(b[0]*Gg,b[1]*Gg),b[0]*=Hg,b[1]*=Hg,b}return a=kc(a[0]%360*Gg,a[1]*Gg,a.length>2?a[2]*Gg:0),b.invert=function(b){return b=a.invert(b[0]*Gg,b[1]*Gg),b[0]*=Hg,b[1]*=Hg,b},b},jc.invert=ic,Xf.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=kc(-a[0]*Gg,-a[1]*Gg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Hg,a[1]*=Hg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=oc((b=+d)*Gg,e*Gg),a):b},a.precision=function(d){return arguments.length?(c=oc(b*Gg,(e=+d)*Gg),a):e},a.angle(90)},Xf.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Gg,e=a[1]*Gg,f=b[1]*Gg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Xf.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Xf.range(Math.ceil(f/q)*q,e,q).map(m).concat(Xf.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Xf.range(Math.ceil(d/o)*o,c,o).filter(function(a){return jg(a%q)>Eg}).map(k)).concat(Xf.range(Math.ceil(h/p)*p,g,p).filter(function(a){return jg(a%r)>Eg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=qc(h,g,90),l=rc(d,c,s),m=qc(j,i,90),n=rc(f,e,s),a):s},a.majorExtent([[-180,-90+Eg],[180,90-Eg]]).minorExtent([[-180,-80-Eg],[180,80+Eg]])},Xf.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=sc,e=tc;return a.distance=function(){return Xf.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Xf.geo.interpolate=function(a,b){return uc(a[0]*Gg,a[1]*Gg,b[0]*Gg,b[1]*Gg)},Xf.geo.length=function(a){return Oh=0,Xf.geo.stream(a,Ph),Oh};var Oh,Ph={sphere:t,
point:t,lineStart:vc,lineEnd:t,polygonStart:t,polygonEnd:t},Qh=wc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Xf.geo.azimuthalEqualArea=function(){return fc(Qh)}).raw=Qh;var Rh=wc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},Ba);(Xf.geo.azimuthalEquidistant=function(){return fc(Rh)}).raw=Rh,(Xf.geo.conicConformal=function(){return Sb(xc)}).raw=xc,(Xf.geo.conicEquidistant=function(){return Sb(yc)}).raw=yc;var Sh=wc(function(a){return 1/a},Math.atan);(Xf.geo.gnomonic=function(){return fc(Sh)}).raw=Sh,zc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Dg]},(Xf.geo.mercator=function(){return Ac(zc)}).raw=zc;var Th=wc(function(){return 1},Math.asin);(Xf.geo.orthographic=function(){return fc(Th)}).raw=Th;var Uh=wc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Xf.geo.stereographic=function(){return fc(Uh)}).raw=Uh,Bc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Dg]},(Xf.geo.transverseMercator=function(){var a=Ac(Bc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Bc,Xf.geom={},Xf.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Aa(c),f=Aa(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Fc),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Ec(h),k=Ec(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Cc,d=Dc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Xf.geom.polygon=function(a){return og(a,Vh),a};var Vh=Xf.geom.polygon.prototype=[];Vh.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Vh.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Vh.clip=function(a){for(var b,c,d,e,f,g,h=Ic(a),i=-1,j=this.length-Ic(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Gc(g,k,e)?(Gc(f,k,e)||a.push(Hc(f,g,k,e)),a.push(g)):Gc(f,k,e)&&a.push(Hc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Wh,Xh,Yh,Zh,$h,_h=[],ai=[];Qc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Sc),b.length},ad.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},bd.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=fd(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(dd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ed(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(ed(this,c),a=c,c=a.U),c.C=!1,d.C=!0,dd(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?fd(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,dd(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,ed(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,dd(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,ed(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,dd(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,ed(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Xf.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return gd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Eg)*Eg,y:Math.round(g(a,b)/Eg)*Eg,i:b}})}var d=Cc,e=Dc,f=d,g=e,h=bi;return a?b(a):(b.links=function(a){return gd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return gd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Sc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&id(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Aa(d=a),b):d},b.y=function(a){return arguments.length?(g=Aa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?bi:a,b):h===bi?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===bi?null:h&&h[1]},b)};var bi=[[-1e6,-1e6],[1e6,1e6]];Xf.geom.delaunay=function(a){return Xf.geom.voronoi().triangles(a)},Xf.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(jg(i-c)+jg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=ld()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Aa(h),u=Aa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=ld();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){md(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Cc,i=Dc;return(g=arguments.length)?(h=jd,i=kd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Xf.interpolateRgb=nd,Xf.interpolateObject=od,Xf.interpolateNumber=pd,Xf.interpolateString=qd;var ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,di=new RegExp(ci.source,"g");Xf.interpolate=rd,Xf.interpolators=[function(a,b){var c=typeof b;return("string"===c?Wg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?nd:qd:b instanceof ga?nd:Array.isArray(b)?sd:"object"===c&&isNaN(b)?od:pd)(a,b)}],Xf.interpolateArray=sd;var ei=function(){return Ba},fi=Xf.map({linear:ei,poly:zd,quad:function(){return wd},cubic:function(){return xd},sin:function(){return Ad},exp:function(){return Bd},circle:function(){return Cd},elastic:Dd,back:Ed,bounce:function(){return Fd}}),gi=Xf.map({"in":Ba,out:ud,"in-out":vd,"out-in":function(a){return vd(ud(a))}});Xf.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=fi.get(c)||ei,d=gi.get(d)||Ba,td(d(c.apply(null,Yf.call(arguments,1))))},Xf.interpolateHcl=Gd,Xf.interpolateHsl=Hd,Xf.interpolateLab=Id,Xf.interpolateRound=Jd,Xf.transform=function(a){var b=$f.createElementNS(Xf.ns.prefix.svg,"g");return(Xf.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Kd(c?c.matrix:hi)})(a)},Kd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hi={a:1,b:0,c:0,d:1,e:0,f:0};Xf.interpolateTransform=Od,Xf.layout={},Xf.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Rd(a[c]));return b}},Xf.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Xf.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Xf.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Cg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Xf.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=Xf.event.x,a.py=Xf.event.y,h.resume()}var c,d,e,f,g,h={},i=Xf.dispatch("start","tick","end"),j=[1,1],k=.9,l=ii,m=ji,n=-30,o=ki,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Yd(b=Xf.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Xf.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=Xf.behavior.drag().origin(Ba).on("dragstart.force",Ud).on("drag.force",b).on("dragend.force",Vd)),arguments.length?void this.on("mouseover.force",Wd).on("mouseout.force",Xd).call(c):c},Xf.rebind(h,i,"on")};var ii=20,ji=1,ki=1/0;Xf.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return _d(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=ce,c=ae,d=be;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&($d(b,function(a){a.children&&(a.value=0)}),_d(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},Xf.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Xf.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Zd(c,d)},Xf.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Xf.sum(g),j=Xf.range(f.length);null!=c&&j.sort(c===li?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=li,d=0,e=Cg;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var li={};Xf.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Xf.permute(j,l),k=Xf.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=Ba,c=he,d=ie,e=ge,f=ee,g=fe;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:mi.get(b)||he,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:ni.get(b)||ie,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var mi=Xf.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(je),f=a.map(ke),g=Xf.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Xf.range(a.length).reverse()},"default":he}),ni=Xf.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:ie});Xf.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[Xf.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=oe,e=me;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Aa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ne(a,b)}:Aa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Xf.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,_d(h,function(a){a.r=+k(a.value)}),_d(h,te),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;_d(h,function(a){a.r+=l}),_d(h,te),_d(h,function(a){a.r-=l})}return we(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Xf.layout.hierarchy().sort(pe),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Zd(a,c)},Xf.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(_d(m,c),m.parent.m=-m.z,$d(m,d),j)$d(l,f);else{var n=l,o=l,p=l;$d(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);$d(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Ce(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Ae(g),e=ze(e),g&&e;)i=ze(i),f=Ae(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Be(De(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Ae(f)&&(f.t=g,f.m+=l-k),e&&!ze(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=Xf.layout.hierarchy().sort(null).value(null),h=ye,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Zd(a,g)},Xf.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;_d(i,function(a){var b=a.children;b&&b.length?(a.x=Fe(b),a.y=Ee(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Ge(i),l=He(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return _d(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Xf.layout.hierarchy().sort(null).value(null),c=ye,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Zd(a,b)},Xf.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Xf.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Ie,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Ie(b):Je(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Je(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Ie:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Zd(f,h)},Xf.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=Xf.random.normal.apply(Xf,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Xf.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},Xf.scale={};var oi={floor:Ba,ceil:Ba};Xf.scale.linear=function(){return Qe([0,1],[0,1],rd,!1)};var pi={s:1,g:1,p:1,r:1,e:1};Xf.scale.log=function(){return Ye(Xf.scale.linear().domain([0,1]),10,!0,[1,10])};var qi=Xf.format(".0e"),ri={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Xf.scale.pow=function(){return Ze(Xf.scale.linear(),1,[0,1])},Xf.scale.sqrt=function(){return Xf.scale.pow().exponent(.5)},Xf.scale.ordinal=function(){return _e([],{t:"range",a:[[]]})},Xf.scale.category10=function(){return Xf.scale.ordinal().range(si)},Xf.scale.category20=function(){return Xf.scale.ordinal().range(ti)},Xf.scale.category20b=function(){return Xf.scale.ordinal().range(ui)},Xf.scale.category20c=function(){return Xf.scale.ordinal().range(vi)};var si=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ta),ti=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ta),ui=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ta),vi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ta);Xf.scale.quantile=function(){return af([],[])},Xf.scale.quantize=function(){return bf(0,1,[0,1])},Xf.scale.threshold=function(){return cf([.5],[0,1])},Xf.scale.identity=function(){return df([0,1])},Xf.svg={},Xf.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+wi,h=e.apply(this,arguments)+wi,i=(g>h&&(i=g,g=h,h=i),h-g),j=Bg>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=xi?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=ef,c=ff,d=gf,e=hf;return a.innerRadius=function(c){return arguments.length?(b=Aa(c),a):b},a.outerRadius=function(b){return arguments.length?(c=Aa(b),a):c},a.startAngle=function(b){return arguments.length?(d=Aa(b),a):d},a.endAngle=function(b){return arguments.length?(e=Aa(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+wi;return[Math.cos(f)*a,Math.sin(f)*a]},a};var wi=-Dg,xi=Cg-Eg;Xf.svg.line=function(){return jf(Ba)};var yi=Xf.map({linear:kf,"linear-closed":lf,step:mf,"step-before":nf,"step-after":of,basis:uf,"basis-open":vf,"basis-closed":wf,bundle:xf,cardinal:rf,"cardinal-open":pf,"cardinal-closed":qf,monotone:Df});yi.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var zi=[0,2/3,1/3,0],Ai=[0,1/3,2/3,0],Bi=[0,1/6,2/3,1/6];Xf.svg.line.radial=function(){var a=jf(Ef);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},nf.reverse=of,of.reverse=nf,Xf.svg.area=function(){return Ff(Ba)},Xf.svg.area.radial=function(){var a=Ff(Ef);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Xf.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+wi,k=j.call(a,e,d)+wi;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Bg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=sc,g=tc,h=Gf,i=gf,j=hf;return a.radius=function(b){return arguments.length?(h=Aa(b),a):h},a.source=function(b){return arguments.length?(f=Aa(b),a):f},a.target=function(b){return arguments.length?(g=Aa(b),a):g},a.startAngle=function(b){return arguments.length?(i=Aa(b),a):i},a.endAngle=function(b){return arguments.length?(j=Aa(b),a):j},a},Xf.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=sc,c=tc,d=Hf;return a.source=function(c){return arguments.length?(b=Aa(c),a):b},a.target=function(b){return arguments.length?(c=Aa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Xf.svg.diagonal.radial=function(){var a=Xf.svg.diagonal(),b=Hf,c=a.projection;return a.projection=function(a){return arguments.length?c(If(b=a)):b},a},Xf.svg.symbol=function(){function a(a,d){return(Ci.get(b.call(this,a,d))||Lf)(c.call(this,a,d))}var b=Kf,c=Jf;return a.type=function(c){return arguments.length?(b=Aa(c),a):b},a.size=function(b){return arguments.length?(c=Aa(b),a):c},a};var Ci=Xf.map({circle:Lf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Gi)),c=b*Gi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Fi),c=b*Fi/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Fi),c=b*Fi/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Xf.svg.symbolTypes=Ci.keys();var Di,Ei,Fi=Math.sqrt(3),Gi=Math.tan(30*Gg),Hi=[],Ii=0;Hi.call=tg.call,Hi.empty=tg.empty,Hi.node=tg.node,Hi.size=tg.size,Xf.transition=function(a){return arguments.length?Di?a.transition():a:wg.transition()},Xf.transition.prototype=Hi,Hi.select=function(a){var b,c,d,e=this.id,f=[];a=A(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),Pf(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Mf(f,e)},Hi.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=B(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&Pf(e,n,g,f),b.push(e)}return Mf(h,g)},Hi.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=M(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Mf(e,this.id)},Hi.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):O(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Hi.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Od:rd,h=Xf.ns.qualify(a);return Nf(this,"attr."+a,b,h.local?f:e)},Hi.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Xf.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Hi.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=ag.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=rd(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Nf(this,"style."+a,b,e)},Hi.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,ag.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Hi.text=function(a){return Nf(this,"text",a,Of)},Hi.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Hi.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Xf.ease.apply(Xf,arguments)),O(this,function(c){c.__transition__[b].ease=a}))},Hi.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:O(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},
Hi.duration=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].duration:O(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Hi.each=function(a,b){var c=this.id;if(arguments.length<2){var d=Ei,e=Di;Di=c,O(this,function(b,d,e){Ei=b.__transition__[c],a.call(b,b.__data__,d,e)}),Ei=d,Di=e}else O(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Xf.dispatch("start","end"))).on(a,b)});return this},Hi.transition=function(){for(var a,b,c,d,e=this.id,f=++Ii,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Pf(c,j,f,d)),a.push(c)}return Mf(g,f)},Xf.svg.axis=function(){function a(a){a.each(function(){var a,j=Xf.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):Ba:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Eg),q=Xf.transition(o.exit()).style("opacity",Eg).remove(),r=Xf.transition(o.order()).style("opacity",1),s=Math.max(e,0)+g,t=Le(l),u=j.selectAll(".domain").data([0]),v=(u.enter().append("path").attr("class","domain"),Xf.transition(u));p.append("line"),p.append("text");var w,x,y,z,A=p.select("line"),B=r.select("line"),C=o.select("text").text(n),D=p.select("text"),E=r.select("text"),F="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Qf,w="x",y="y",x="x2",z="y2",C.attr("dy",0>F?"0em":".71em").style("text-anchor","middle"),v.attr("d","M"+t[0]+","+F*f+"V0H"+t[1]+"V"+F*f)):(a=Rf,w="y",y="x",x="y2",z="x2",C.attr("dy",".32em").style("text-anchor",0>F?"end":"start"),v.attr("d","M"+F*f+","+t[0]+"H0V"+t[1]+"H"+F*f)),A.attr(z,F*e),D.attr(y,F*s),B.attr(x,0).attr(z,F*e),E.attr(w,0).attr(y,F*s),l.rangeBand){var G=l,H=G.rangeBand()/2;k=l=function(a){return G(a)+H}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=Xf.scale.linear(),d=Ji,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Ki?b+"":Ji,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ji="bottom",Ki={top:1,right:1,bottom:1,left:1};Xf.svg.brush=function(){function a(f){f.each(function(){var f=Xf.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,Ba);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Li[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Xf.transition(f),m=Xf.transition(g);i&&(k=Le(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Le(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==Xf.event.keyCode&&(C||(s=null,E[0]-=k[1],E[1]-=l[1],C=2),w())}function o(){32==Xf.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,w())}function p(){var a=Xf.mouse(u),e=!1;t&&(a[0]+=t[0],a[1]+=t[1]),C||(Xf.event.altKey?(s||(s=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<s[0])],E[1]=l[+(a[1]<s[1])]):s=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Le(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(s&&(o=Math.max(i,Math.min(j,2*s[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Xf.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var s,t,u=this,v=Xf.select(Xf.event.target),x=h.of(u,arguments),y=Xf.select(u),z=v.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=v.classed("extent"),D=V(),E=Xf.mouse(u),F=Xf.select(ag).on("keydown.brush",e).on("keyup.brush",o);if(Xf.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);t=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else Xf.event.altKey&&(s=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Xf.select("body").style("cursor",v.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=y(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Mi[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,Di?Xf.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=sd(k,b.x),d=sd(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Mi[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Mi[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),(e!=l[0]||h!=l[1])&&(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},Xf.rebind(a,h,"on")};var Li={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ni=eh.format=kh.timeFormat,Oi=Ni.utc,Pi=Oi("%Y-%m-%dT%H:%M:%S.%LZ");Ni.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sf:Pi,Sf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Sf.toString=Pi.toString,eh.second=Oa(function(a){return new fh(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),eh.seconds=eh.second.range,eh.seconds.utc=eh.second.utc.range,eh.minute=Oa(function(a){return new fh(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),eh.minutes=eh.minute.range,eh.minutes.utc=eh.minute.utc.range,eh.hour=Oa(function(a){var b=a.getTimezoneOffset()/60;return new fh(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),eh.hours=eh.hour.range,eh.hours.utc=eh.hour.utc.range,eh.month=Oa(function(a){return a=eh.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),eh.months=eh.month.range,eh.months.utc=eh.month.utc.range;var Qi=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ri=[[eh.second,1],[eh.second,5],[eh.second,15],[eh.second,30],[eh.minute,1],[eh.minute,5],[eh.minute,15],[eh.minute,30],[eh.hour,1],[eh.hour,3],[eh.hour,6],[eh.hour,12],[eh.day,1],[eh.day,2],[eh.week,1],[eh.month,1],[eh.month,3],[eh.year,1]],Si=Ni.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Cb]]),Ti={range:function(a,b,c){return Xf.range(Math.ceil(a/c)*c,+b,c).map(Uf)},floor:Ba,ceil:Ba};Ri.year=eh.year,eh.scale=function(){return Tf(Xf.scale.linear(),Ri,Si)};var Ui=Ri.map(function(a){return[a[0].utc,a[1]]}),Vi=Oi.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Cb]]);Ui.year=eh.year.utc,eh.scale.utc=function(){return Tf(Xf.scale.linear(),Ui,Vi)},Xf.text=Ca(function(a){return a.responseText}),Xf.json=function(a,b){return Da(a,"application/json",Vf,b)},Xf.html=function(a,b){return Da(a,"text/html",Wf,b)},Xf.xml=Ca(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(Xf):"object"==typeof b&&b.exports&&(b.exports=Xf),this.d3=Xf}()},{}],97:[function(a,b,c){(function(c){$=c.$=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a,c){"function"==typeof b&&b.amd?b("gridster-coords",["jquery"],c):a.GridsterCoords=c(a.$||a.jQuery)}(window,function(a){function b(b){return b[0]&&a.isPlainObject(b[0])?this.data=b[0]:this.el=b,this.isCoords=!0,this.coords={},this.init(),this}var c=b.prototype;return c.init=function(){this.set(),this.original_coords=this.get()},c.set=function(a,b){var c=this.el;if(c&&!a&&(this.data=c.offset(),this.data.width=c.width(),this.data.height=c.height()),c&&a&&!b){var d=c.offset();this.data.top=d.top,this.data.left=d.left}var e=this.data;return"undefined"==typeof e.left&&(e.left=e.x1),"undefined"==typeof e.top&&(e.top=e.y1),this.coords.x1=e.left,this.coords.y1=e.top,this.coords.x2=e.left+e.width,this.coords.y2=e.top+e.height,this.coords.cx=e.left+e.width/2,this.coords.cy=e.top+e.height/2,this.coords.width=e.width,this.coords.height=e.height,this.coords.el=c||!1,this},c.update=function(b){if(!b&&!this.el)return this;if(b){var c=a.extend({},this.data,b);return this.data=c,this.set(!0,!0)}return this.set(!0),this},c.get=function(){return this.coords},c.destroy=function(){this.el.removeData("coords"),delete this.el},a.fn.coords=function(){if(this.data("coords"))return this.data("coords");var a=new b(this,arguments[0]);return this.data("coords",a),a},b}),function(a,c){"function"==typeof b&&b.amd?b("gridster-collision",["jquery","gridster-coords"],c):a.GridsterCollision=c(a.$||a.jQuery,a.GridsterCoords)}(window,function(a,b){function c(b,c,e){this.options=a.extend(d,e),this.$element=b,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(c),this.init()}var d={colliders_context:document.body,overlapping_region:"C"};c.defaults=d;var e=c.prototype;return e.init=function(){this.find_collisions()},e.overlaps=function(a,b){var c=!1,d=!1;return(b.x1>=a.x1&&b.x1<=a.x2||b.x2>=a.x1&&b.x2<=a.x2||a.x1>=b.x1&&a.x2<=b.x2)&&(c=!0),(b.y1>=a.y1&&b.y1<=a.y2||b.y2>=a.y1&&b.y2<=a.y2||a.y1>=b.y1&&a.y2<=b.y2)&&(d=!0),c&&d},e.detect_overlapping_region=function(a,b){var c="",d="";return a.y1>b.cy&&a.y1<b.y2&&(c="N"),a.y2>b.y1&&a.y2<b.cy&&(c="S"),a.x1>b.cx&&a.x1<b.x2&&(d="W"),a.x2>b.x1&&a.x2<b.cx&&(d="E"),c+d||"C"},e.calculate_overlapped_area_coords=function(b,c){var d=Math.max(b.x1,c.x1),e=Math.max(b.y1,c.y1),f=Math.min(b.x2,c.x2),g=Math.min(b.y2,c.y2);return a({left:d,top:e,width:f-d,height:g-e}).coords().get()},e.calculate_overlapped_area=function(a){return a.width*a.height},e.manage_colliders_start_stop=function(b,c,d){for(var e=this.last_colliders_coords,f=0,g=e.length;g>f;f++)-1===a.inArray(e[f],b)&&c.call(this,e[f]);for(var h=0,i=b.length;i>h;h++)-1===a.inArray(b[h],e)&&d.call(this,b[h])},e.find_collisions=function(b){for(var c=this,d=this.options.overlapping_region,e=[],f=[],g=this.colliders||this.$colliders,h=g.length,i=c.$element.coords().update(b||!1).get();h--;){var j=c.$colliders?a(g[h]):g[h],k=j.isCoords?j:j.coords(),l=k.get(),m=c.overlaps(i,l);if(m){var n=c.detect_overlapping_region(i,l);if(n===d||"all"===d){var o=c.calculate_overlapped_area_coords(i,l),p=c.calculate_overlapped_area(o),q={area:p,area_coords:o,region:n,coords:l,player_coords:i,el:j};c.options.on_overlap&&c.options.on_overlap.call(this,q),e.push(k),f.push(q)}}}return(c.options.on_overlap_stop||c.options.on_overlap_start)&&this.manage_colliders_start_stop(e,c.options.on_overlap_start,c.options.on_overlap_stop),this.last_colliders_coords=e,f},e.get_closest_colliders=function(a){var b=this.find_collisions(a);return b.sort(function(a,b){return"C"===a.region&&"C"===b.region?a.coords.y1<b.coords.y1||a.coords.x1<b.coords.x1?-1:1:(a.area<b.area,1)}),b},e.set_colliders=function(b){"string"==typeof b||b instanceof a?this.$colliders=a(b,this.options.colliders_context).not(this.$element):this.colliders=a(b)},a.fn.collision=function(a,b){return new c(this,a,b)},c}),function(a,b){a.delay=function(a,b){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},a.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),clearTimeout(d),d=setTimeout(g,b)}},a.throttle=function(a,b){var c,d,e,f,g,h,i=debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var j=function(){e=null,g&&a.apply(c,d),i()};return e||(e=setTimeout(j,b)),f?g=!0:h=a.apply(c,d),i(),f=!0,h}}}(window),function(a,c){"function"==typeof b&&b.amd?b("gridster-draggable",["jquery"],c):a.GridsterDraggable=c(a.$||a.jQuery)}(window,function(a){function b(b,d){this.options=a.extend({},c,d),this.$document=a(document),this.$container=a(b),this.$dragitems=a(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.id=i(),this.ns=".gridster-draggable-"+this.id,this.init()}var c={items:"li",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},d=a(window),e={x:"left",y:"top"},f=!!("ontouchstart"in window),g=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},h=0,i=function(){return++h+""};b.defaults=c;var j=b.prototype;return j.init=function(){var b=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===b?"relative":b),this.disabled=!1,this.events(),a(window).bind(this.nsEvent("resize"),throttle(a.proxy(this.calculate_dimensions,this),200))},j.nsEvent=function(a){return(a||"")+this.ns},j.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),a.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,a.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,a.proxy(function(a){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(a))},this))},j.get_actual_pos=function(a){var b=a.position();return b},j.get_mouse_pos=function(a){if(a.originalEvent&&a.originalEvent.touches){var b=a.originalEvent;a=b.touches.length?b.touches[0]:b.changedTouches[0]}return{left:a.clientX,top:a.clientY}},j.get_offset=function(b){b.preventDefault();var c=this.get_mouse_pos(b),d=Math.round(c.left-this.mouse_init_pos.left),e=Math.round(c.top-this.mouse_init_pos.top),f=Math.round(this.el_init_offset.left+d-this.baseX+a(window).scrollLeft()-this.win_offset_x),g=Math.round(this.el_init_offset.top+e-this.baseY+a(window).scrollTop()-this.win_offset_y);return this.options.limit&&(f>this.player_max_left?f=this.player_max_left:f<this.player_min_left&&(f=this.player_min_left)),{position:{left:f,top:g},pointer:{left:c.left,top:c.top,diff_left:d+(a(window).scrollLeft()-this.win_offset_x),diff_top:e+(a(window).scrollTop()-this.win_offset_y)}}},j.get_drag_data=function(a){var b=this.get_offset(a);return b.$player=this.$player,b.$helper=this.helper?this.$helper:this.$player,b},j.set_limits=function(a){return a||(a=this.$container.width()),this.player_max_left=a-this.player_width+-this.options.offset_left,this.options.container_width=a,this},j.scroll_in=function(b,c){var f,h=e[b],i=50,j=30,k="x"===b,l=k?this.window_width:this.window_height,m=k?a(document).width():a(document).height(),n=k?this.$player.width():this.$player.height(),o=d["scroll"+g(h)](),p=o,q=p+l,r=q-i,s=p+i,t=p+c.pointer[h],u=m-l+n;return t>=r&&(f=o+j,u>f&&(d["scroll"+g(h)](f),this["scroll_offset_"+b]+=j)),s>=t&&(f=o-j,f>0&&(d["scroll"+g(h)](f),this["scroll_offset_"+b]-=j)),this},j.manage_scroll=function(a){this.scroll_in("x",a),this.scroll_in("y",a)},j.calculate_dimensions=function(a){this.window_height=d.height(),this.window_width=d.width()},j.drag_handler=function(b){b.target.nodeName;if(!this.disabled&&(1===b.which||f)&&!this.ignore_drag(b)){var c=this,d=!0;return this.$player=a(b.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(b),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(a){var b=c.get_mouse_pos(a),e=Math.abs(b.left-c.mouse_init_pos.left),f=Math.abs(b.top-c.mouse_init_pos.top);return e>c.options.distance||f>c.options.distance?d?(d=!1,c.on_dragstart.call(c,a),!1):(c.is_dragging===!0&&c.on_dragmove.call(c,a),!1):!1}),f?void 0:!1}},j.on_dragstart=function(b){if(b.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var c=this.$container.offset();return this.baseX=Math.round(c.left),this.baseY=Math.round(c.top),this.initial_container_width=this.options.container_width||this.$container.width(),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.win_offset_y=a(window).scrollTop(),this.win_offset_x=a(window).scrollLeft(),this.scroll_offset_y=0,this.scroll_offset_x=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,b,this.get_drag_data(b)),!1},j.on_dragmove=function(a){var b=this.get_drag_data(a);this.options.autoscroll&&this.manage_scroll(b),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:b.position.left,top:b.position.top});var c=this.last_position||b.position;return b.prev_position=c,this.options.drag&&this.options.drag.call(this.$player,a,b),this.last_position=b.position,!1},j.on_dragstop=function(a){var b=this.get_drag_data(a);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,a,b),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},j.on_select_start=function(a){return this.disabled||this.ignore_drag(a)?void 0:!1},j.enable=function(){this.disabled=!1},j.disable=function(){this.disabled=!0},j.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),a(window).off(this.ns),a.removeData(this.$container,"drag")},j.ignore_drag=function(b){return this.options.handle?!a(b.target).is(this.options.handle):a.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(b):a(b.target).is(this.options.ignore_dragging.join(", "))},a.fn.drag=function(a){return new b(this,a)},b}),function(a,c){"function"==typeof b&&b.amd?b(["jquery","gridster-draggable","gridster-collision"],c):a.Gridster=c(a.$||a.jQuery,a.GridsterDraggable,a.GridsterCollision)}(window,function(a,b,c){function d(b,c){this.options=a.extend(!0,{},e,c),this.$el=a(b),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.widgets=[],this.$changed=a([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.generated_stylesheets=[],this.$style_tags=a([]),this.options.auto_init&&this.init()}var e={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,min_rows:15,max_size_x:!1,autogrow_cols:!1,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,serialize_params:function(a,b){return{col:b.col,row:b.row,size_x:b.size_x,size_y:b.size_y}},collision:{},draggable:{items:".gs-w",distance:4,ignore_dragging:b.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]}};d.defaults=e,d.generated_stylesheets=[],d.sort_by_row_asc=function(b){return b=b.sort(function(b,c){return b.row||(b=a(b).coords().grid,c=a(c).coords().grid),b.row>c.row?1:-1})},d.sort_by_row_and_col_asc=function(a){return a=a.sort(function(a,b){return a.row>b.row||a.row===b.row&&a.col>b.col?1:-1})},d.sort_by_col_asc=function(a){return a=a.sort(function(a,b){return a.col>b.col?1:-1})},d.sort_by_row_desc=function(a){return a=a.sort(function(a,b){return a.row+a.size_y<b.row+b.size_y?1:-1})};var f=d.prototype;return f.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),a(window).bind("resize.gridster",throttle(a.proxy(this.recalculate_faux_grid,this),200))},f.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},f.enable=function(){return this.drag_api.enable(),this},f.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},f.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},f.add_widget=function(b,c,d,e,f,g,h){var i;c||(c=1),d||(d=1),!e&!f?i=this.next_position(c,d):(i={col:e,row:f,size_x:c,size_y:d},this.empty_cells(e,f,c,d));var j=a(b).attr({"data-col":i.col,"data-row":i.row,"data-sizex":c,"data-sizey":d}).addClass("gs-w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(j),this.register_widget(j),this.add_faux_rows(i.size_y),g&&this.set_widget_max_size(j,g),h&&this.set_widget_min_size(j,h),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width),j.fadeIn()},f.set_widget_min_size=function(a,b){if(a="number"==typeof a?this.$widgets.eq(a):a,!a.length)return this;var c=a.data("coords").grid;return c.min_size_x=b[0],c.min_size_y=b[1],this},f.set_widget_max_size=function(a,b){if(a="number"==typeof a?this.$widgets.eq(a):a,!a.length)return this;var c=a.data("coords").grid;return c.max_size_x=b[0],c.max_size_y=b[1],this},f.add_resize_handle=function(b){var c=this.options.resize.handle_append_to;return a(this.resize_handle_tpl).appendTo(c?a(c,b):b),this},f.resize_widget=function(a,b,c,d){var e=a.coords().grid,f=e.col,g=this.options.max_cols,h=e.size_y,i=e.col,j=i;b||(b=e.size_x),c||(c=e.size_y),g!==1/0&&(b=Math.min(b,g-f+1)),c>h&&this.add_faux_rows(Math.max(c-h,0));var k=f+b-1;k>this.cols&&this.add_faux_cols(k-this.cols);var l={col:j,row:e.row,size_x:b,size_y:c};return this.mutate_widget_in_gridmap(a,e,l),this.set_dom_grid_height(),this.set_dom_grid_width(),d&&d.call(this,l.size_x,l.size_y),a},f.mutate_widget_in_gridmap=function(b,c,d){var e=(c.size_x,c.size_y),f=this.get_cells_occupied(c),g=this.get_cells_occupied(d),h=[];a.each(f.cols,function(b,c){-1===a.inArray(c,g.cols)&&h.push(c)});var i=[];a.each(g.cols,function(b,c){-1===a.inArray(c,f.cols)&&i.push(c)});var j=[];a.each(f.rows,function(b,c){-1===a.inArray(c,g.rows)&&j.push(c)});var k=[];if(a.each(g.rows,function(b,c){-1===a.inArray(c,f.rows)&&k.push(c)}),this.remove_from_gridmap(c),i.length){var l=[d.col,d.row,d.size_x,Math.min(e,d.size_y),b];this.empty_cells.apply(this,l)}if(k.length){var m=[d.col,d.row,d.size_x,d.size_y,b];this.empty_cells.apply(this,m)}if(c.col=d.col,c.row=d.row,c.size_x=d.size_x,c.size_y=d.size_y,this.add_to_gridmap(d,b),b.removeClass("player-revert"),b.data("coords").update({width:d.size_x*this.options.widget_base_dimensions[0]+(d.size_x-1)*this.options.widget_margins[0]*2,height:d.size_y*this.options.widget_base_dimensions[1]+(d.size_y-1)*this.options.widget_margins[1]*2}),b.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}),h.length){var n=[h[0],d.row,h.length,Math.min(e,d.size_y),b];this.remove_empty_cells.apply(this,n)}if(j.length){var o=[d.col,d.row,d.size_x,d.size_y,b];this.remove_empty_cells.apply(this,o)}return this.move_widget_up(b),this},f.empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c-e,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,d){var f=a(d).coords().grid;if(f.row<=c+e-1){var g=c+e-f.row;this.move_widget_down(a(d),g)}},this)),this.set_dom_grid_height(),this},f.remove_empty_cells=function(b,c,d,e,f){var g=this.widgets_below({col:b,row:c,size_x:d,size_y:e});return g.not(f).each(a.proxy(function(b,c){this.move_widget_up(a(c),e)},this)),this.set_dom_grid_height(),this},f.next_position=function(a,b){a||(a=1),b||(b=1);for(var c,e=this.gridmap,f=e.length,g=[],h=1;f>h;h++){c=e[h].length;for(var i=1;c>=i;i++){var j=this.can_move_to({size_x:a,size_y:b},h,i);j&&g.push({col:h,row:i,size_y:b,size_x:a})}}return g.length?d.sort_by_row_and_col_asc(g)[0]:!1},f.remove_widget=function(b,c,d){var e=b instanceof a?b:a(b),f=e.coords().grid;a.isFunction(c)&&(d=c,c=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(e);var g=this.widgets_below(e);return this.remove_from_gridmap(f),e.fadeOut(a.proxy(function(){e.remove(),c||g.each(a.proxy(function(b,c){this.move_widget_up(a(c),f.size_y)},this)),this.set_dom_grid_height(),d&&d.call(this,b)},this)),this},f.remove_all_widgets=function(b){return this.$widgets.each(a.proxy(function(a,c){this.remove_widget(c,!0,b)},this)),this},f.serialize=function(b){return b||(b=this.$widgets),b.map(a.proxy(function(b,c){var d=a(c);return this.options.serialize_params(d,d.coords().grid)},this)).get()},f.serialize_changed=function(){return this.serialize(this.$changed)},f.dom_to_coords=function(a){return{col:parseInt(a.attr("data-col"),10),row:parseInt(a.attr("data-row"),10),size_x:parseInt(a.attr("data-sizex"),10)||1,size_y:parseInt(a.attr("data-sizey"),10)||1,max_size_x:parseInt(a.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(a.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(a.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(a.attr("data-min-sizey"),10)||!1,el:a}},f.register_widget=function(b){var c=b instanceof jQuery,d=c?this.dom_to_coords(b):b,e=!1;c||(b=d.el);var f=this.can_go_widget_up(d);return f&&(d.row=f,b.attr("data-row",f),this.$el.trigger("gridster:positionchanged",[d]),e=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:d.size_x,size_y:d.size_y},d.col,d.row)&&(a.extend(d,this.next_position(d.size_x,d.size_y)),b.attr({"data-col":d.col,"data-row":d.row,"data-sizex":d.size_x,"data-sizey":d.size_y}),e=!0),b.data("coords",b.coords()),b.data("coords").grid=d,this.add_to_gridmap(d,b),this.options.resize.enabled&&this.add_resize_handle(b),e},f.update_widget_position=function(a,b){return this.for_each_cell_occupied(a,function(a,c){return this.gridmap[a]?void(this.gridmap[a][c]=b):this}),this},f.remove_from_gridmap=function(a){return this.update_widget_position(a,!1)},f.add_to_gridmap=function(b,c){if(this.update_widget_position(b,c||b.el),b.el){var d=this.widgets_below(b.el);d.each(a.proxy(function(b,c){this.move_widget_up(a(c))},this))}},f.draggable=function(){var b=this,c=a.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width,limit:!0,start:function(c,d){b.$widgets.filter(".player-revert").removeClass("player-revert"),b.$player=a(this),b.$helper=a(d.$helper),b.helper=!b.$helper.is(b.$player),b.on_start_drag.call(b,c,d),b.$el.trigger("gridster:dragstart")},stop:function(a,c){b.on_stop_drag.call(b,a,c),b.$el.trigger("gridster:dragstop")},drag:throttle(function(a,c){b.on_drag.call(b,a,c),b.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(c),this},f.resizable=function(){return this.resize_api=this.$el.drag({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:this.options.autogrow_cols?!1:!0,start:a.proxy(this.on_start_resize,this),stop:a.proxy(function(b,c){delay(a.proxy(function(){this.on_stop_resize(b,c)},this),120)},this),drag:throttle(a.proxy(this.on_resize,this),60)}),this},f.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var b=this.options.resize.axes,c='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=a.map(b,function(a){return c.replace("{type}",a)}).join(""),a.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},f.on_start_drag=function(b,c){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=a.extend({},this.player_grid_data),this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var d=this.player_grid_data.size_x,e=this.cols-this.highest_col;this.options.autogrow_cols&&d>=e&&this.add_faux_cols(Math.min(d-e,1));var f=this.faux_grid,g=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(f,this.options.collision),this.$preview_holder=a("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),
"data-col":this.$player.attr("data-col"),css:{width:g.width,height:g.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,b,c)},f.on_drag=function(a,b){if(null===this.$player)return!1;var c={left:b.position.left+this.baseX,top:b.position.top+this.baseY};if(this.options.autogrow_cols){var d=this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1;d>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.container_width)),this.collision_api.set_colliders(this.faux_grid)}this.colliders_data=this.collision_api.get_closest_colliders(c),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:b.position.left,top:b.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,a,b)},f.on_stop_drag=function(a,b){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),b.position.left=b.position.left+this.baseX,b.position.top=b.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(b.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,a,b),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},f.on_start_resize=function(b,c){this.$resized_widget=c.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:c.$player.is("."+this.resize_handle_class+"-x"),bottom:c.$player.is("."+this.resize_handle_class+"-y")},this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var d=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=a("<"+d+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,b,c,this.$resized_widget),this.$el.trigger("gridster:resizestart")},f.on_stop_resize=function(b,c){this.$resized_widget.removeClass("resizing").css({width:"",height:""}),delay(a.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,b,c,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.options.autogrow_cols&&this.drag_api.set_limits(this.cols*this.min_widget_width)},f.on_resize=function(a,b){var c,d=b.pointer.diff_left,e=b.pointer.diff_top,f=this.options.widget_base_dimensions[0],g=this.options.widget_base_dimensions[1],h=this.options.widget_margins[0],i=this.options.widget_margins[1],j=this.resize_max_size_x,k=this.resize_min_size_x,l=this.resize_max_size_y,m=this.resize_min_size_y,n=this.options.autogrow_cols,o=1/0,p=1/0,q=Math.ceil(d/(f+2*h)-.2),r=Math.ceil(e/(g+2*i)-.2),s=Math.max(1,this.resize_initial_sizex+q),t=Math.max(1,this.resize_initial_sizey+r),u=this.container_width/this.min_widget_width-this.resize_initial_col+1,v=u*this.min_widget_width-2*h;if(s=Math.max(Math.min(s,j),k),s=Math.min(u,s),c=j*f+(s-1)*h*2,o=Math.min(c,v),min_width=k*f+(s-1)*h*2,t=Math.max(Math.min(t,l),m),p=l*g+(t-1)*i*2,min_height=m*g+(t-1)*i*2,this.resize_dir.right?t=this.resize_initial_sizey:this.resize_dir.bottom&&(s=this.resize_initial_sizex),n){var w=this.resize_initial_col+s-1;n&&this.resize_initial_last_col<=w&&(this.set_dom_grid_width(Math.max(w+1,this.cols)),this.cols<w&&this.add_faux_cols(w-this.cols))}var x={};!this.resize_dir.bottom&&(x.width=Math.max(Math.min(this.resize_initial_width+d,o),min_width)),!this.resize_dir.right&&(x.height=Math.max(Math.min(this.resize_initial_height+e,p),min_height)),this.$resized_widget.css(x),(s!==this.resize_last_sizex||t!==this.resize_last_sizey)&&(this.resize_widget(this.$resized_widget,s,t),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":s,"data-sizey":t})),this.options.resize.resize&&this.options.resize.resize.call(this,a,b,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=s,this.resize_last_sizey=t},f.on_overlapped_column_change=function(b,c){if(!this.colliders_data.length)return this;var d,e=this.get_targeted_columns(this.colliders_data[0].el.data.col),f=this.last_cols.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_cols)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_cols[d],e)&&(c||a.noop).call(this,this.last_cols[d]);return this.last_cols=e,this},f.on_overlapped_row_change=function(b,c){if(!this.colliders_data.length)return this;var d,e=this.get_targeted_rows(this.colliders_data[0].el.data.row),f=this.last_rows.length,g=e.length;for(d=0;g>d;d++)-1===a.inArray(e[d],this.last_rows)&&(b||a.noop).call(this,e[d]);for(d=0;f>d;d++)-1===a.inArray(this.last_rows[d],e)&&(c||a.noop).call(this,this.last_rows[d]);this.last_rows=e},f.set_player=function(a,b,c){var d=this;c||this.empty_cells_player_occupies();var e=c?{col:a}:d.colliders_data[0].el.data,f=e.col,g=b||e.row;this.player_grid_data={col:f,row:g,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var h=this.get_widgets_overlapped(this.player_grid_data),i=this.widgets_constraints(h);if(this.manage_movements(i.can_go_up,f,g),this.manage_movements(i.can_not_go_up,f,g),!h.length){var j=this.can_go_player_up(this.player_grid_data);j!==!1&&(g=j),this.set_placeholder(f,g)}return{col:f,row:g}},f.widgets_constraints=function(b){var c,e=a([]),f=[],g=[];return b.each(a.proxy(function(b,c){var d=a(c),h=d.coords().grid;this.can_go_widget_up(h)?(e=e.add(d),f.push(h)):g.push(h)},this)),c=b.not(e),{can_go_up:d.sort_by_row_asc(f),can_not_go_up:d.sort_by_row_desc(g)}},f.manage_movements=function(b,c,d){return a.each(b,a.proxy(function(a,b){var e=b,f=e.el,g=this.can_go_widget_up(e);if(g)this.move_widget_to(f,g),this.set_placeholder(c,g+e.size_y);else{var h=this.can_go_player_up(this.player_grid_data);if(!h){var i=d+this.player_grid_data.size_y-e.row;this.move_widget_down(f,i),this.set_placeholder(c,d)}}},this)),this},f.is_player=function(a,b){if(b&&!this.gridmap[a])return!1;var c=b?this.gridmap[a][b]:a;return c&&(c.is(this.$player)||c.is(this.$helper))},f.is_player_in=function(b,c){var d=this.cells_occupied_by_player||{};return a.inArray(b,d.cols)>=0&&a.inArray(c,d.rows)>=0},f.is_placeholder_in=function(b,c){var d=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(b)&&a.inArray(c,d.rows)>=0},f.is_placeholder_in_col=function(b){var c=this.cells_occupied_by_placeholder||[];return a.inArray(b,c.cols)>=0},f.is_empty=function(a,b){return"undefined"!=typeof this.gridmap[a]?"undefined"!=typeof this.gridmap[a][b]&&this.gridmap[a][b]===!1?!0:!1:!0},f.is_occupied=function(a,b){return this.gridmap[a]&&this.gridmap[a][b]?!0:!1},f.is_widget=function(a,b){var c=this.gridmap[a];return c?(c=c[b],c?c:!1):!1},f.is_widget_under_player=function(a,b){return this.is_widget(a,b)?this.is_player_in(a,b):!1},f.get_widgets_under_player=function(b){b||(b=this.cells_occupied_by_player||{cols:[],rows:[]});var c=a([]);return a.each(b.cols,a.proxy(function(d,e){a.each(b.rows,a.proxy(function(a,b){this.is_widget(e,b)&&(c=c.add(this.gridmap[e][b]))},this))},this)),c},f.set_placeholder=function(b,c){var d=a.extend({},this.placeholder_grid_data),e=this.widgets_below({col:d.col,row:d.row,size_y:d.size_y,size_x:d.size_x}),f=b+d.size_x-1;f>this.cols&&(b-=f-b);var g=this.placeholder_grid_data.row<c,h=this.placeholder_grid_data.col!==b;this.placeholder_grid_data.col=b,this.placeholder_grid_data.row=c,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":c,"data-col":b}),(g||h)&&e.each(a.proxy(function(c,e){this.move_widget_up(a(e),this.placeholder_grid_data.col-b+d.size_y)},this));var i=this.get_widgets_under_player(this.cells_occupied_by_placeholder);i.length&&i.each(a.proxy(function(b,e){var f=a(e);this.move_widget_down(f,c+d.size_y-f.data("coords").grid.row)},this))},f.can_go_player_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4,f=this.get_widgets_under_player();return this.for_each_column_occupied(a,function(a){var g=this.gridmap[a],h=b+1;for(d[a]=[];--h>0&&(this.is_empty(a,h)||this.is_player(a,h)||this.is_widget(a,h)&&g[h].is(f));)d[a].push(h),e=e>h?h:e;return 0===d[a].length?(c=!1,!0):void d[a].sort(function(a,b){return a-b})}),c?this.get_valid_rows(a,d,e):!1},f.can_go_widget_up=function(a){var b=a.row+a.size_y-1,c=!0,d=[],e=1e4;return this.for_each_column_occupied(a,function(f){var g=this.gridmap[f];d[f]=[];for(var h=b+1;--h>0&&(!this.is_widget(f,h)||this.is_player_in(f,h)||g[h].is(a.el));)this.is_player(f,h)||this.is_placeholder_in(f,h)||this.is_player_in(f,h)||d[f].push(h),e>h&&(e=h);return 0===d[f].length?(c=!1,!0):void d[f].sort(function(a,b){return a-b})}),c?this.get_valid_rows(a,d,e):!1},f.get_valid_rows=function(b,c,d){for(var e=b.row,f=b.row+b.size_y-1,g=b.size_y,h=d-1,i=[];++h<=f;){var j=!0;if(a.each(c,function(b,c){a.isArray(c)&&-1===a.inArray(h,c)&&(j=!1)}),j===!0&&(i.push(h),i.length===g))break}var k=!1;return 1===g?i[0]!==e&&(k=i[0]||!1):i[0]!==e&&(k=this.get_consecutive_numbers_index(i,g)),k},f.get_consecutive_numbers_index=function(a,b){for(var c=a.length,d=[],e=!0,f=-1,g=0;c>g;g++){if(e||a[g]===f+1){if(d.push(g),d.length===b)break;e=!1}else d=[],e=!0;f=a[g]}return d.length>=b?a[d[0]]:!1},f.get_widgets_overlapped=function(){var b=a([]),c=[],d=this.cells_occupied_by_player.rows.slice(0);return d.reverse(),a.each(this.cells_occupied_by_player.cols,a.proxy(function(e,f){a.each(d,a.proxy(function(d,e){if(!this.gridmap[f])return!0;var g=this.gridmap[f][e];this.is_occupied(f,e)&&!this.is_player(g)&&-1===a.inArray(g,c)&&(b=b.add(g),c.push(g))},this))},this)),b},f.on_start_overlapping_column=function(a){this.set_player(a,!1)},f.on_start_overlapping_row=function(a){this.set_player(!1,a)},f.on_stop_overlapping_column=function(a){this.set_player(a,!1);var b=this;this.for_each_widget_below(a,this.cells_occupied_by_player.rows[0],function(a,c){b.move_widget_up(this,b.player_grid_data.size_y)})},f.on_stop_overlapping_row=function(a){this.set_player(!1,a);for(var b=this,c=this.cells_occupied_by_player.cols,d=0,e=c.length;e>d;d++)this.for_each_widget_below(c[d],a,function(a,c){b.move_widget_up(this,b.player_grid_data.size_y)})},f.move_widget_to=function(b,c){var d=this,e=b.coords().grid,f=(c-e.row,this.widgets_below(b)),g=this.can_move_to(e,e.col,c,b);return g===!1?!1:(this.remove_from_gridmap(e),e.row=c,this.add_to_gridmap(e),b.attr("data-row",c),this.$changed=this.$changed.add(b),f.each(function(b,c){var e=a(c),f=e.coords().grid,g=d.can_go_widget_up(f);g&&g!==f.row&&d.move_widget_to(e,g)}),this)},f.move_widget_up=function(b,c){var d=b.coords().grid,e=d.row,f=[];return c||(c=1),this.can_go_up(b)?void this.for_each_column_occupied(d,function(d){if(-1===a.inArray(b,f)){var g=b.coords().grid,h=e-c;if(h=this.can_go_up_to_row(g,d,h),!h)return!0;var i=this.widgets_below(b);this.remove_from_gridmap(g),g.row=h,this.add_to_gridmap(g),b.attr("data-row",g.row),this.$changed=this.$changed.add(b),f.push(b),i.each(a.proxy(function(b,d){this.move_widget_up(a(d),c)},this))}}):!1},f.move_widget_down=function(b,c){var d,e,f,g;if(0>=c)return!1;if(d=b.coords().grid,e=d.row,f=[],g=c,!b)return!1;if(-1===a.inArray(b,f)){var h=b.coords().grid,i=e+c,j=this.widgets_below(b);this.remove_from_gridmap(h),j.each(a.proxy(function(b,c){var d=a(c),e=d.coords().grid,f=this.displacement_diff(e,h,g);f>0&&this.move_widget_down(d,f)},this)),h.row=i,this.update_widget_position(h,b),b.attr("data-row",h.row),this.$changed=this.$changed.add(b),f.push(b)}},f.can_go_up_to_row=function(b,c,d){var e,f=this.gridmap,g=!0,h=[],i=b.row;if(this.for_each_column_occupied(b,function(a){f[a];for(h[a]=[],e=i;e--&&this.is_empty(a,e)&&!this.is_placeholder_in(a,e);)h[a].push(e);return h[a].length?void 0:(g=!1,!0)}),!g)return!1;for(e=d,e=1;i>e;e++){for(var j=!0,k=0,l=h.length;l>k;k++)h[k]&&-1===a.inArray(e,h[k])&&(j=!1);if(j===!0){g=e;break}}return g},f.displacement_diff=function(a,b,c){var d=a.row,e=[],f=b.row+b.size_y;this.for_each_column_occupied(a,function(a){for(var b=0,c=f;d>c;c++)this.is_empty(a,c)&&(b+=1);e.push(b)});var g=Math.max.apply(Math,e);return c-=g,c>0?c:0},f.widgets_below=function(b){var c=a.isPlainObject(b)?b:b.coords().grid,e=this,f=(this.gridmap,c.row+c.size_y-1),g=a([]);return this.for_each_column_occupied(c,function(b){e.for_each_widget_below(b,f,function(b,c){return e.is_player(this)||-1!==a.inArray(this,g)?void 0:(g=g.add(this),!0)})}),d.sort_by_row_asc(g)},f.set_cells_player_occupies=function(a,b){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=a,this.placeholder_grid_data.row=b,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},f.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},f.can_go_up=function(a){var b=a.coords().grid,c=b.row,d=c-1,e=(this.gridmap,!0);return 1===c?!1:(this.for_each_column_occupied(b,function(a){this.is_widget(a,d);return this.is_occupied(a,d)||this.is_player(a,d)||this.is_placeholder_in(a,d)||this.is_player_in(a,d)?(e=!1,!0):void 0}),e)},f.can_move_to=function(a,b,c,d){var e=(this.gridmap,a.el),f={size_y:a.size_y,size_x:a.size_x,col:b,row:c},g=!0,h=b+a.size_x-1;return h>this.cols?!1:d&&d<c+a.size_y-1?!1:(this.for_each_cell_occupied(f,function(b,c){var d=this.is_widget(b,c);!d||a.el&&!d.is(e)||(g=!1)}),g)},f.get_targeted_columns=function(a){for(var b=(a||this.player_grid_data.col)+(this.player_grid_data.size_x-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_targeted_rows=function(a){for(var b=(a||this.player_grid_data.row)+(this.player_grid_data.size_y-1),c=[],d=a;b>=d;d++)c.push(d);return c},f.get_cells_occupied=function(b){var c,d={cols:[],rows:[]};for(arguments[1]instanceof a&&(b=arguments[1].coords().grid),c=0;c<b.size_x;c++){var e=b.col+c;d.cols.push(e)}for(c=0;c<b.size_y;c++){var f=b.row+c;d.rows.push(f)}return d},f.for_each_cell_occupied=function(a,b){return this.for_each_column_occupied(a,function(c){this.for_each_row_occupied(a,function(a){b.call(this,c,a)})}),this},f.for_each_column_occupied=function(a,b){for(var c=0;c<a.size_x;c++){var d=a.col+c;b.call(this,d,a)}},f.for_each_row_occupied=function(a,b){for(var c=0;c<a.size_y;c++){var d=a.row+c;b.call(this,d,a)}},f._traversing_widgets=function(b,c,d,e,f){var g=this.gridmap;if(g[d]){var h,i,j=b+"/"+c;if(arguments[2]instanceof a){var k=arguments[2].coords().grid;d=k.col,e=k.row,f=arguments[3]}var l=[],m=e,n={"for_each/above":function(){for(;m--&&!(m>0&&this.is_widget(d,m)&&-1===a.inArray(g[d][m],l)&&(h=f.call(g[d][m],d,m),l.push(g[d][m]),h)););},"for_each/below":function(){for(m=e+1,i=g[d].length;i>m&&(!this.is_widget(d,m)||-1!==a.inArray(g[d][m],l)||(h=f.call(g[d][m],d,m),l.push(g[d][m]),!h));m++);}};n[j]&&n[j].call(this)}},f.for_each_widget_above=function(a,b,c){return this._traversing_widgets("for_each","above",a,b,c),this},f.for_each_widget_below=function(a,b,c){return this._traversing_widgets("for_each","below",a,b,c),this},f.get_highest_occupied_cell=function(){for(var a,b=this.gridmap,c=b[1].length,d=[],e=[],f=b.length-1;f>=1;f--)for(a=c-1;a>=1;a--)if(this.is_widget(f,a)){d.push(a),e.push(f);break}return{col:Math.max.apply(Math,e),row:Math.max.apply(Math,d)}},f.get_widgets_from=function(b,c){var d=(this.gridmap,a());return b&&(d=d.add(this.$widgets.filter(function(){var c=a(this).attr("data-col");return c===b||c>b}))),c&&(d=d.add(this.$widgets.filter(function(){var b=a(this).attr("data-row");return b===c||b>c}))),d},f.set_dom_grid_height=function(a){if("undefined"==typeof a){var b=this.get_highest_occupied_cell().row;a=b*this.min_widget_height}return this.container_height=a,this.$el.css("height",this.container_height),this},f.set_dom_grid_width=function(a){"undefined"==typeof a&&(a=this.get_highest_occupied_cell().col);var b=this.options.autogrow_cols?this.options.max_cols:this.cols;return a=Math.min(b,Math.max(a,this.options.min_cols)),this.container_width=a*this.min_widget_width,this.$el.css("width",this.container_width),this},f.generate_stylesheet=function(b){var c,e="",f=this.options.max_size_x||this.cols;b||(b={}),b.cols||(b.cols=this.cols),b.rows||(b.rows=this.rows),b.namespace||(b.namespace=this.options.namespace),b.widget_base_dimensions||(b.widget_base_dimensions=this.options.widget_base_dimensions),b.widget_margins||(b.widget_margins=this.options.widget_margins),b.min_widget_width=2*b.widget_margins[0]+b.widget_base_dimensions[0],b.min_widget_height=2*b.widget_margins[1]+b.widget_base_dimensions[1];var g=a.param(b);if(a.inArray(g,d.generated_stylesheets)>=0)return!1;for(this.generated_stylesheets.push(g),d.generated_stylesheets.push(g),c=b.cols;c>=0;c--)e+=b.namespace+' [data-col="'+(c+1)+'"] { left:'+(c*b.widget_base_dimensions[0]+c*b.widget_margins[0]+(c+1)*b.widget_margins[0])+"px; }\n";for(c=b.rows;c>=0;c--)e+=b.namespace+' [data-row="'+(c+1)+'"] { top:'+(c*b.widget_base_dimensions[1]+c*b.widget_margins[1]+(c+1)*b.widget_margins[1])+"px; }\n";for(var h=1;h<=b.rows;h++)e+=b.namespace+' [data-sizey="'+h+'"] { height:'+(h*b.widget_base_dimensions[1]+2*(h-1)*b.widget_margins[1])+"px; }\n";for(var i=1;f>=i;i++)e+=b.namespace+' [data-sizex="'+i+'"] { width:'+(i*b.widget_base_dimensions[0]+2*(i-1)*b.widget_margins[0])+"px; }\n";return this.remove_style_tags(),this.add_style_tag(e)},f.add_style_tag=function(a){var b=document,c=b.createElement("style");return b.getElementsByTagName("head")[0].appendChild(c),c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),this.$style_tags=this.$style_tags.add(c),this},f.remove_style_tags=function(){var b=d.generated_stylesheets,c=this.generated_stylesheets;this.$style_tags.remove(),d.generated_stylesheets=a.map(b,function(b){return-1===a.inArray(b,c)?b:void 0})},f.generate_faux_grid=function(a,b){this.faux_grid=[],this.gridmap=[];var c,d;for(c=b;c>0;c--)for(this.gridmap[c]=[],d=a;d>0;d--)this.add_faux_cell(d,c);return this},f.add_faux_cell=function(b,c){var d=a({left:this.baseX+(c-1)*this.min_widget_width,top:this.baseY+(b-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:c,row:b,original_col:c,original_row:b}).coords();return a.isArray(this.gridmap[c])||(this.gridmap[c]=[]),this.gridmap[c][b]=!1,this.faux_grid.push(d),this},f.add_faux_rows=function(a){for(var b=this.rows,c=b+(a||1),d=c;d>b;d--)for(var e=this.cols;e>=1;e--)this.add_faux_cell(d,e);return this.rows=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.add_faux_cols=function(a){var b=this.cols,c=b+(a||1);c=Math.min(c,this.options.max_cols);for(var d=b+1;c>=d;d++)for(var e=this.rows;e>=1;e--)this.add_faux_cell(e,d);return this.cols=c,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},f.recalculate_faux_grid=function(){var b=this.$wrapper.width();return this.baseX=(a(window).width()-b)/2,this.baseY=this.$wrapper.offset().top,a.each(this.faux_grid,a.proxy(function(a,b){this.faux_grid[a]=b.update({left:this.baseX+(b.data.col-1)*this.min_widget_width,top:this.baseY+(b.data.row-1)*this.min_widget_height})},this)),this},f.get_widgets_from_DOM=function(){var b=this.$widgets.map(a.proxy(function(b,c){var d=a(c);return this.dom_to_coords(d)},this));b=d.sort_by_row_and_col_asc(b);var c=a(b).map(a.proxy(function(a,b){return this.register_widget(b)||null},this));return c.length&&this.$el.trigger("gridster:positionschanged"),this},f.generate_grid_and_stylesheet=function(){var b=this.$wrapper.width(),c=this.options.max_cols,d=Math.floor(b/this.min_widget_width)+this.options.extra_cols,e=this.$widgets.map(function(){return a(this).attr("data-col")}).get();e.length||(e=[0]);var f=Math.max.apply(Math,e);this.cols=Math.max(f,d,this.options.min_cols),c!==1/0&&c>=f&&c<this.cols&&(this.cols=c);var g=this.options.extra_rows;return this.$widgets.each(function(b,c){g+=+a(c).attr("data-sizey")}),this.rows=Math.max(g,this.options.min_rows),this.baseX=(a(window).width()-b)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},f.destroy=function(b){return this.$el.removeData("gridster"),a(window).unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.remove_style_tags(),b&&this.$el.remove(),this},a.fn.gridster=function(b){return this.each(function(){a(this).data("gridster")||a(this).data("gridster",new d(this,b))})},d})}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],98:[function(a,b,c){!function(a,c){"use strict";function d(){if(!e.READY){e.event.determineEventTypes();for(var a in e.gestures)e.gestures.hasOwnProperty(a)&&e.detection.register(e.gestures[a]);e.event.onTouch(e.DOCUMENT,e.EVENT_MOVE,e.detection.detect),e.event.onTouch(e.DOCUMENT,e.EVENT_END,e.detection.detect),e.READY=!0}}var e=function(a,b){return new e.Instance(a,b||{})};e.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},e.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,e.HAS_TOUCHEVENTS="ontouchstart"in a,e.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&navigator.userAgent.match(e.MOBILE_REGEX),e.EVENT_TYPES={},e.DIRECTION_DOWN="down",e.DIRECTION_LEFT="left",e.DIRECTION_UP="up",e.DIRECTION_RIGHT="right",e.POINTER_MOUSE="mouse",e.POINTER_TOUCH="touch",e.POINTER_PEN="pen",e.EVENT_START="start",e.EVENT_MOVE="move",e.EVENT_END="end",e.DOCUMENT=document,e.plugins={},e.READY=!1,e.Instance=function(a,b){var c=this;return d(),this.element=a,this.enabled=!0,this.options=e.utils.extend(e.utils.extend({},e.defaults),b||{}),this.options.stop_browser_behavior&&e.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),e.event.onTouch(a,e.EVENT_START,function(a){c.enabled&&e.detection.startDetect(c,a)}),this},e.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;c.length>d;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=e.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var d=this.element;return e.utils.hasParent(b.target,d)&&(d=b.target),d.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var f=null,g=!1,h=!1;e.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;d.length>e;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var d=this;this.bindDom(a,e.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!h){(j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which)&&(g=!0),j.match(/touch|pointer/)&&(h=!0);var k=0;g&&(e.HAS_POINTEREVENTS&&b!=e.EVENT_END?k=e.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:h||(k=j.match(/up/)?0:1),k>0&&b==e.EVENT_END?b=e.EVENT_MOVE:k||(b=e.EVENT_END),k||null===f?f=i:i=f,c.call(e.detection,d.collectEventData(a,b,i)),e.HAS_POINTEREVENTS&&b==e.EVENT_END&&(k=e.PointerEvent.updatePointer(b,i))),k||(f=null,g=!1,h=!1,e.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=e.HAS_POINTEREVENTS?e.PointerEvent.getEvents():e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.EVENT_TYPES[e.EVENT_START]=a[0],e.EVENT_TYPES[e.EVENT_MOVE]=a[1],e.EVENT_TYPES[e.EVENT_END]=a[2]},getTouchList:function(a){return e.HAS_POINTEREVENTS?e.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,c){var d=this.getTouchList(c,b),f=e.POINTER_TOUCH;return(c.type.match(/mouse/)||e.PointerEvent.matchType(e.POINTER_MOUSE,c))&&(f=e.POINTER_MOUSE),{center:e.utils.getCenter(d),timeStamp:(new Date).getTime(),target:c.target,touches:d,eventType:b,pointerType:f,srcEvent:c,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return e.detection.stopDetect()}}}},e.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==e.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[e.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==e.POINTER_MOUSE,c[e.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==e.POINTER_TOUCH,c[e.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==e.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},e.utils={extend:function(a,b,d){for(var e in b)a[e]!==c&&d||(a[e]=b[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;e>d;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),d=Math.abs(a.pageY-b.pageY);return c>=d?a.pageX-b.pageX>0?e.DIRECTION_LEFT:e.DIRECTION_RIGHT:a.pageY-b.pageY>0?e.DIRECTION_UP:e.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==e.DIRECTION_UP||a==e.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;d.length>e;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:e.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,d=this.gestures.length;d>c;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==e.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=e.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,d=a.touches.length;d>c;c++)b.touches.push(e.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=e.utils.getVelocity(f,g,h);return e.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:e.utils.getDistance(b.center,a.center),angle:e.utils.getAngle(b.center,a.center),direction:e.utils.getDirection(b.center,a.center),scale:e.utils.getScale(b.touches,a.touches),rotation:e.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var b=a.defaults||{};return b[a.name]===c&&(b[a.name]=!0),e.utils.extend(e.defaults,b,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},e.gestures=e.gestures||{},e.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case e.EVENT_START:clearTimeout(this.timer),e.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==e.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case e.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case e.EVENT_END:clearTimeout(this.timer)}}},e.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==e.EVENT_END){var c=e.detection.previous,d=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),d=!0),(!d||b.options.tap_always)&&(e.detection.current.name="tap",b.trigger(e.detection.current.name,a))}}},e.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==e.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;
(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},e.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(e.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,c;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&e.detection.current.name!=this.name)return;e.detection.current.name=this.name,(e.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var d=e.detection.current.lastEvent.direction;a.drag_locked_to_axis&&d!==a.direction&&(a.direction=e.utils.isVertical(d)?0>a.deltaY?e.DIRECTION_UP:e.DIRECTION_DOWN:0>a.deltaX?e.DIRECTION_LEFT:e.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&e.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!e.utils.isVertical(a.direction))&&a.preventDefault();break;case e.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},e.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(e.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,c;if(!(2>a.touches.length))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case e.EVENT_START:this.triggered=!1;break;case e.EVENT_MOVE:var d=Math.abs(1-a.scale),f=Math.abs(a.rotation);if(b.options.transform_min_scale>d&&b.options.transform_min_rotation>f)return;e.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),f>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(1>a.scale?"in":"out"),a));break;case e.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},e.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==e.POINTER_MOUSE?(a.stopDetect(),c):(b.options.prevent_default&&a.preventDefault(),a.eventType==e.EVENT_START&&b.trigger(this.name,a),c)}},e.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==e.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof b&&"object"==typeof b.exports?b.exports=e:(a.Hammer=e,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return e}))}(this)},{}],99:[function(a,b,c){!function(c,d){"use strict";function e(a,b,c){var d,e;return function(){var f=this,g=arguments,h=function(){d=null,c||(e=a.apply(f,g))},i=c&&!d;return clearTimeout(d),d=setTimeout(h,b),i&&(e=a.apply(f,g)),e}}function f(a,b){this.modes[b.mode]&&(this.defaults=d.extend({},this.defaults,this.modes[b.mode]),delete b.mode),this.options=d.extend({},this.defaults,b),this._animated=null,this._state="idle",this.container=a,this.$container=d(this.container),this.$container.css("user-select","none"),this.hammer=new g(this.$root()[0],this.options),this.hammer.enable(!1),this.enable()}var g="object"==typeof b&&"object"==typeof b.exports?a("./hammer.min.js"):c.Hammer;f.prototype={$root:function(){return this.$container.parent()},modes:{scroll:{snapToEdges:!0,minScale:1,maxScale:1,gestures:"drag"},"scroll-x":{snapToEdges:!0,minScale:1,maxScale:1,gestures:"dragleft dragright"},"scroll-y":{snapToEdges:!0,minScale:1,maxScale:1,gestures:"dragup dragdown"},disabled:{snapToEdges:!0,minScale:1,maxScale:1,gestures:"drag pinch",disabled:!0}},defaults:{snapToEdges:!0,eventNamespace:"zh",gestures:"drag pinch",transitionDuration:250,adjustTimeout:300,drag_min_distance:5,mouseWheel:!0,wheelZoomStep:.4,minScale:"fill",maxScale:3,disabled:!1},_event:function(a){return this.options.eventNamespace+a},_notify:function(a){switch(a){case"start":"transforming"!==this._state&&(this._state="transforming",this.$container.trigger(this._event("transformstart"),this));break;case"stop":"transforming"===this._state&&(this._state="idle",this.$container.trigger(this._event("transformend"),this));break;case"progress":"transforming"===this._state?this.$container.trigger(this._event("transform"),this):this._notify("start")}},_applyAnimationStyles:function(a){return"number"==typeof a&&0!==a&&this.$container.css({transition:"all "+a+"ms","transition-timing-function":"cubic-bezier(0,0,0.25,1);"}),this},_removeAnimationStyles:function(){this.$container.css({transition:"none"})},_handleTouches:function(a){switch(a.type){case"touch":return this._startCapturing(a);case"release":return this._stopCapturing(a)}},_handleWheel:e(function(a,b){var c=this,d=c.offset(),e=parseInt(b)/Math.abs(parseInt(b)),f=c.scale(),g=f*(1+c.options.wheelZoomStep*e),h={left:a.originalEvent.pageX-d.left,top:a.originalEvent.pageY-d.top},i={left:h.left/f,top:h.top/f},j=this.parsedScale();return g<j.min&&(g=j.min),g>j.max&&(g=j.max),g!==f&&(this._notify("start"),this._removeAnimationStyles(),this.origin(i),this.move({scale:g},this.options.transitionDuration,c.adjust)),!1},100,!0),_startCapturing:function(a){function b(a){var b,d,f={};switch(a.gesture.preventDefault(),a.stopPropagation(),b=c.transform(),d=e*a.gesture.scale,f.left=h.left+a.gesture.deltaX,f.top=h.top+a.gesture.deltaY,a.type){case"pinch":b[0]=b[3]=d;break;case"drag":b[4]=f.left,b[5]=f.top;break;case"dragleft":case"dragright":b[4]=f.left;break;case"dragup":case"dragdown":b[5]=f.top}return c._animated?cancelAnimationFrame(c._animated):null,c._animated=requestAnimationFrame(function(){c.transform(b)}),!1}var c=this,d=this.offset(),e=this.scale(),f={left:a.gesture.srcEvent.pageX-d.left,top:a.gesture.srcEvent.pageY-d.top},g={left:f.left/e,top:f.top/e},h=this.translate();return this._notify("start"),this._removeAnimationStyles(),this.origin(g),h=this.translate(),this.hammer.on(this.options.gestures,b),2===a.gesture.touches.length&&-1===c.options.gestures.split(" ").indexOf("pinch")},_stopCapturing:function(a){return this.hammer.off(this.options.gestures),this.adjust(),a&&2===a.gesture.touches.length&&-1===this.options.gestures.split(" ").indexOf("pinch")},parsedScale:function(){var a={},b=this.options.minScale,c=this.options.maxScale,d=this.transform()[0],e={width:this.$container.width()*d,height:this.$container.height()*d},f={width:this.$root().width(),height:this.$root().height()};if(b)if("number"==typeof b)a.min=b;else switch(b){case"fill":a.min=Math.max(f.width/e.width*d,f.height/e.height*d);break;case"fit":default:a.min=Math.min(f.width/e.width*d,f.height/e.height*d)}if(c)if("number"==typeof c)a.max=c;else switch(c){case"fill":a.max=Math.max(f.width/e.width*d,f.height/e.height*d);break;case"fit":default:a.max=Math.min(f.width/e.width*d,f.height/e.height*d)}return a},adjust:function(a,b){"function"==typeof a&&(b=a,a=null);var c=this,d=this.transform(),e=this.offset(),f=this.origin(),g=this.$container.position(),h={left:d[4],top:d[5]},i=d[0],j={scale:d[0],left:d[4],top:d[5]},k={width:this.$container.width(),height:this.$container.height()},l={width:this.$root().width(),height:this.$root().height()},m=this.parsedScale();m.min&&i<m.min&&(j.scale=m.min),m.max&&i>m.max&&(j.scale=m.max),k.width*=j.scale,k.height*=j.scale,this.options.snapToEdges&&(k.height<l.height?j.top=f.top*(j.scale-1):e.top>0?j.top=f.top*(j.scale-1):e.top+k.height<l.height&&(j.top=f.top*(j.scale-1)+(l.height-k.height)),k.width<l.width?j.left=f.left*(j.scale-1):g.left>0?j.left=f.left*(j.scale-1):g.left+k.width<l.width&&(j.left=f.left*(j.scale-1)+(l.width-k.width))),j.scale!==i||Math.abs(j.left-h.left)>1||Math.abs(j.top-h.top)>1?c.move(j,a,function(){var a={width:c.$container.width(),heiht:c.$container.height()};c.origin({left:a.width/2,top:a.heiht/2})}):("function"==typeof b?b.apply(c,arguments):null,this._notify("stop"))},move:function(a,b,c){function d(){return 0==b?void(h=!0):void(g||(g=!0,f._notify("start"),f._applyAnimationStyles(b||f.options.transitionDuration)))}function e(){f._removeAnimationStyles(),f._notify("stop"),"function"==typeof c?c.apply(f):null}var f=this,g=!1,h=!1,i=this.transform();"function"==typeof b&&(c=b,b=null),"number"==typeof a.scale&&(i[0]!==a.scale?d():null,i[0]=i[3]=a.scale),"number"==typeof a.left&&(i[4]!==a.left?d():null,i[4]=a.left),"number"==typeof a.top&&(i[5]!==a.top?d():null,i[5]=a.top),g?(requestAnimationFrame(function(){f.transform(i)}),f.$container.off("transitionend",e),f.$container.one("transitionend",e)):h?(f.transform(i),e()):e()},origin:function(a){function b(){var a=d.$container.css("transform-origin").match(/-?[0-9.]+/g);return{left:a&&a[0],top:a&&a[1]}}function c(a){var b,c=d.offset(),e=d.translate();d.$container.css("transform-origin",a.left+"px "+a.top+"px"),b=d.offset(),d.translate({left:e.left+c.left-b.left,top:e.top+c.top-b.top})}var d=this;return a?(c(a),this):b()},transform:function(a){function b(){return e.$container.css("transform").match(/-?[0-9.]+/g)||[1,0,0,1,0,0]}function d(a){"Microsoft Internet Explorer"===c.navigator.appName||navigator.appVersion.indexOf("Trident/")>0?e.$container.css("transform","matrix("+a.join(",")+")"):e.$container.css("transform","matrix("+a.join(",")+") translateZ(0)"),e._notify("progress")}var e=this;return a?(d(a),this):b()},scale:function(a){function b(){var a=d.transform();return parseFloat(a[0])}function c(a){var b=d.transform();b[0]=b[3]=a,d.transform(b)}var d=this;return a?(c(a),this):b()},translate:function(a){function b(){var a=d.transform(),b={};return b.left=parseInt(a[4]),b.top=parseInt(a[5]),b}function c(a){var b=d.transform();b[4]=a.left,b[5]=a.top,d.transform(b)}var d=this;return a?(c(a),this):b()},offset:function(){var a=this.$container.offset();return{left:parseInt(a.left),top:parseInt(a.top)}},disable:function(){this.hammer.enable(!1),this._stopCapturing(),this.hammer.off("touch release"),this.$root().off("mousewheel")},enable:function(){var a=this;if(!this.hammer.enabled){this.hammer.enable(!0);var b=!1;this.hammer.on("touch",function(b){return b.preventDefault(),a.options.disabled?!1:a._handleTouches(b)}),this.hammer.on("drag",function(a){return a.preventDefault(),b=!0,!0}),this.hammer.on("release",function(c){return b&&(a.$root().addClass("prevent-click"),setTimeout(function(){b||a.$root().removeClass("prevent-click")},1)),b=!1,c.preventDefault(),a.options.disabled?!1:a._handleTouches(c)}),-1!==a.options.gestures.split(" ").indexOf("pinch")&&a.options.mouseWheel&&this.$root().on("mousewheel",function(b,c){return b.preventDefault(),a.options.disabled?!1:a._handleWheel(b,c)})}}},d.fn.zoomHammer=function(a){return this.each(function(){var b=d(this),c=b.data("zoomHammer");c?(c.adjust(),g.utils.extend(c.options,a||{})):b.data("zoomHammer",new f(this,a||{}))})}}(window,jQuery)},{"./hammer.min.js":98}],100:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(a,b,c){"use strict";function d(b){j.logging&&a.console&&a.console.log&&a.console.log(b)}function e(a,b,c,d,e,f){var g,h,i,k,l=j.Util.getCSS(b,a,e);if(1===l.length&&(k=l[0],l=[],l[0]=k,l[1]=k),-1!==l[0].toString().indexOf("%"))i=parseFloat(l[0])/100,h=c.width*i,"backgroundSize"!==a&&(h-=(f||d).width*i);else if("backgroundSize"===a)if("auto"===l[0])h=d.width;else if(l[0].match(/contain|cover/)){var m=j.Util.resizeBounds(d.width,d.height,c.width,c.height,l[0]);h=m.width,g=m.height}else h=parseInt(l[0],10);else h=parseInt(l[0],10);return"auto"===l[1]?g=h/d.width*d.height:-1!==l[1].toString().indexOf("%")?(i=parseFloat(l[1])/100,g=c.height*i,"backgroundSize"!==a&&(g-=(f||d).height*i)):g=parseInt(l[1],10),[h,g]}function f(a,b){var c=[];return{storage:c,width:a,height:b,clip:function(){c.push({type:"function",name:"clip",arguments:arguments})},translate:function(){c.push({type:"function",name:"translate",arguments:arguments})},setTransform:function(){c.push({type:"function",name:"setTransform",arguments:arguments})},fill:function(){c.push({type:"function",name:"fill",arguments:arguments})},save:function(){c.push({type:"function",name:"save",arguments:arguments})},restore:function(){c.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){c.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){c.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var a=[];return c.push({type:"function",name:"drawShape",arguments:a}),{moveTo:function(){a.push({name:"moveTo",arguments:arguments})},lineTo:function(){a.push({name:"lineTo",arguments:arguments})},arcTo:function(){a.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){a.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){a.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){c.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){c.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(a,b){c.push({type:"variable",name:a,arguments:b})},drawLinearGradient:function(){c.push({type:"function",name:"drawLinearGradient",arguments:arguments})}}}function g(a){return{zindex:a,children:[]}}var h,i,j={};j.Util={},j.Util.trimText=function(a){return function(b){return a?a.apply(b):((b||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),j.Util.multiplyMatrices=function(a,b){for(var c=[],d=0;d<a.length;d++){c[d]=[];for(var e=0;e<b[0].length;e++){for(var f=0,g=0;g<a[0].length;g++)f+=a[d][g]*b[g][e];c[d][e]=f}}return c},j.Util.transformToMatrix=function(a){var b=[];return b[0]=[a[0],a[1],0],b[1]=[a[2],a[3],0],b[2]=[a[4],a[5],1],b},j.Util.matrixToTransform=function(a){return[a[0][0],a[0][1],a[1][0],a[1][1],a[2][0],a[2][1]]},j.Util.parseBackgroundImage=function(a){var b,c,d,e,f,g,h,i,j=" \r\n	",k=[],l=0,m=0,n=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&i.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),k.push({prefix:d,method:b.toLowerCase(),value:f,args:i})),i=[],b=d=c=f=""};n();for(var o=0,p=a.length;p>o;o++)if(g=a[o],!(0===l&&j.indexOf(g)>-1)){switch(g){case'"':h?h===g&&(h=null):h=g;break;case"(":if(h)break;if(0===l){l=1,f+=g;continue}m++;break;case")":if(h)break;if(1===l){if(0===m){l=0,f+=g,n();continue}m--}break;case",":if(h)break;if(0===l){n();continue}if(1===l&&0===m&&!b.match(/^url$/i)){i.push(c),c="",f+=g;continue}}f+=g,0===l?b+=g:c+=g}return n(),k},j.Util.Bounds=function(a){var b,c={};return a.getBoundingClientRect?(b=a.getBoundingClientRect(),c.top=b.top,c.bottom=b.bottom||b.top+b.height,c.left=b.left,c.width=b.width||b.right-b.left,c.height=b.height||b.bottom-b.top,c):void 0},j.Util.getCSS=function k(a,d,e){function f(b,c){var d,e=a.runtimeStyle&&a.runtimeStyle[b],f=a.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(c)&&/^-?\d/.test(c)&&(d=f.left,e&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":c||0,c=f.pixelLeft+"px",f.left=d,e&&(a.runtimeStyle.left=e)),/^(thin|medium|thick)$/i.test(c)?c:Math.round(parseFloat(c))+"px"}var g,l,m=j.Util.matrixToTransform,n=j.Util.transformToMatrix,o=j.Util.multiplyMatrices,p=a.parentElement,q=d.match(/^background(Size|Position)$/),r=d.match(/transform$/);if(h!==a&&(i=b.defaultView.getComputedStyle(a,null)),g=i[d]||i.getPropertyValue(d),q)if(g=(g||"").split(","),g=g[e||0]||g[0]||"auto",g=j.Util.trimText(g).split(" "),"backgroundSize"!==d||g[0]&&!g[0].match(/cover|contain|auto/)){if(g[0]=-1===g[0].indexOf("%")?f(d+"X",g[0]):g[0],g[1]===c){if("backgroundSize"===d)return g[1]="auto",g;g[1]=g[0]}g[1]=-1===g[1].indexOf("%")?f(d+"Y",g[1]):g[1]}else;else if(/border(Top|Bottom)(Left|Right)Radius/.test(d)){var s=g.split(" ");s.length<=1&&(s[1]=s[0]),s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10),g=s}if(r){if(l=g&&"none"!==g?g.substring(7,g.indexOf(")")).split(",").map(function(a){return+Number(a)}):[1,0,0,1,0,0],p){var t=k(p,d,e);isNaN(t[0])||(l=m(o(n(l),n(t))))}g=l}return g},j.Util.resizeBounds=function(a,b,c,d,e){var f,g,h=c/d,i=a/b;return e&&"auto"!==e?i>h^"contain"===e?(g=d,f=d*i):(f=c,g=c/i):(f=c,g=d),{width:f,height:g}},j.Util.BackgroundPosition=function(a,b,c,d,f){var g=e("backgroundPosition",a,b,c,d,f);return{left:g[0],top:g[1]}},j.Util.BackgroundSize=function(a,b,c,d){var f=e("backgroundSize",a,b,c,d);return{width:f[0],height:f[1]}},j.Util.Extend=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},j.Util.Children=function(a){var b;try{b=a.nodeName&&"IFRAME"===a.nodeName.toUpperCase()?a.contentDocument||a.contentWindow.document:function(a){var b=[];return null!==a&&!function(a,b){var d=a.length,e=0;if("number"==typeof b.length)for(var f=b.length;f>e;e++)a[d++]=b[e];else for(;b[e]!==c;)a[d++]=b[e++];return a.length=d,a}(b,a),b}(a.childNodes)}catch(e){d("html2canvas.Util.Children failed with exception: "+e.message),b=[]}return b},j.Util.Font=function(){var a={};return function(b,d,e){if(a[b+"-"+d]!==c)return a[b+"-"+d];var f,g,h,i=e.createElement("div"),j=e.createElement("img"),k=e.createElement("span"),l="Hidden Text";return i.style.visibility="hidden",i.style.fontFamily=b,i.style.fontSize=d,i.style.margin=0,i.style.padding=0,e.body.appendChild(i),j.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",j.width=1,j.height=1,j.style.margin=0,j.style.padding=0,j.style.verticalAlign="baseline",k.style.fontFamily=b,k.style.fontSize=d,k.style.margin=0,k.style.padding=0,k.appendChild(e.createTextNode(l)),i.appendChild(k),i.appendChild(j),f=j.offsetTop-k.offsetTop+1,i.removeChild(k),i.appendChild(e.createTextNode(l)),i.style.lineHeight="normal",j.style.verticalAlign="super",g=j.offsetTop-i.offsetTop+1,h={baseline:f,lineWidth:1,middle:g},a[b+"-"+d]=h,e.body.removeChild(i),h}}(),function(){j.Generate={};var a=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];j.Generate.parseGradient=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p=a.length;for(e=0;p>e&&!(f=b.match(a[e]));e+=1);if(f)switch(f[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(d={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},h=f[2].match(/\w+/g))for(i=h.length,e=0;i>e;e+=1)switch(h[e]){case"top":d.y0=0,d.y1=c.height;break;case"right":d.x0=c.width,d.x1=0;break;case"bottom":d.y0=c.height,d.y1=0;break;case"left":d.x0=0,d.x1=c.width}if(null===d.x0&&null===d.x1&&(d.x0=d.x1=c.width/2),null===d.y0&&null===d.y1&&(d.y0=d.y1=c.height/2),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-gradient":if(d={type:"radial"===f[2]?"circle":f[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=h[3]*c.width/100,d.y1=h[4]*c.height/100),h=f[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=h.length,e=0;i>e;e+=1)k=h[e].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),g=parseFloat(k[2]),"from"===k[1]&&(g=0),"to"===k[1]&&(g=1),d.colorStops.push({color:k[3],stop:g});break;case"-moz-linear-gradient":if(d={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.x0=h[1]*c.width/100,d.y0=h[2]*c.height/100,d.x1=c.width-d.x0,d.y1=c.height-d.y0),h=f[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),k[2]?(g=parseFloat(k[2]),k[3]&&(g/=100)):g=e*j,d.colorStops.push({color:k[1],stop:g});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(d={type:"circle",x0:0,y0:0,x1:c.width,y1:c.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},h=f[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),h&&(d.cx=h[1]*c.width/100,d.cy=h[2]*c.height/100),h=f[3].match(/\w+/),k=f[4].match(/[a-z\-]*/),h&&k)switch(k[0]){case"farthest-corner":case"cover":case"":l=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),n=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.max(l,m,n,o);break;case"closest-corner":l=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.cy,2)),m=Math.sqrt(Math.pow(d.cx,2)+Math.pow(d.y1-d.cy,2)),n=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.y1-d.cy,2)),o=Math.sqrt(Math.pow(d.x1-d.cx,2)+Math.pow(d.cy,2)),d.rx=d.ry=Math.min(l,m,n,o);break;case"farthest-side":"circle"===h[0]?d.rx=d.ry=Math.max(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.max(d.cx,d.x1-d.cx),d.ry=Math.max(d.cy,d.y1-d.cy));break;case"closest-side":case"contain":"circle"===h[0]?d.rx=d.ry=Math.min(d.cx,d.cy,d.x1-d.cx,d.y1-d.cy):(d.type=h[0],d.rx=Math.min(d.cx,d.x1-d.cx),d.ry=Math.min(d.cy,d.y1-d.cy))}if(h=f[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=h.length,j=1/Math.max(i-1,1),e=0;i>e;e+=1)k=h[e].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),k[2]?(g=parseFloat(k[2]),g/="%"===k[3]?100:c.width):g=e*j,d.colorStops.push({color:k[1],stop:g})}return d},j.Generate.Gradient=function(a,c){if(0!==c.width&&0!==c.height){var e,f,g,h,i=b.createElement("canvas"),k=i.getContext("2d");if(i.width=c.width,i.height=c.height,e=j.Generate.parseGradient(a,c))if("linear"===e.type){for(f=k.createLinearGradient(e.x0,e.y0,e.x1,e.y1),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}k.fillStyle=f,k.fillRect(0,0,c.width,c.height)}else if("circle"===e.type){for(f=k.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.rx),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}k.fillStyle=f,k.fillRect(0,0,c.width,c.height)}else if("ellipse"===e.type){var m=b.createElement("canvas"),n=m.getContext("2d"),o=Math.max(e.rx,e.ry),p=2*o;for(m.width=m.height=p,f=n.createRadialGradient(e.rx,e.ry,0,e.rx,e.ry,o),g=0,h=e.colorStops.length;h>g;g+=1)try{f.addColorStop(e.colorStops[g].stop,e.colorStops[g].color)}catch(l){d(["failed to add color stop: ",l,"; tried to add: ",e.colorStops[g],"; stop: ",g,"; in: ",a])}n.fillStyle=f,n.fillRect(0,0,p,p),k.fillStyle=e.colorStops[g-1].color,k.fillRect(0,0,i.width,i.height),k.drawImage(m,e.cx-e.rx,e.cy-e.ry,2*e.rx,2*e.ry)}return i}},j.Generate.ListAlpha=function(a){var b,c="";do b=a%26,c=String.fromCharCode(b+64)+c,a/=26;while(26*a>26);return c},j.Generate.ListRoman=function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}}(),j.Parse=function(e,h){function i(){return Math.max(Math.max(ja.body.scrollWidth,ja.documentElement.scrollWidth),Math.max(ja.body.offsetWidth,ja.documentElement.offsetWidth),Math.max(ja.body.clientWidth,ja.documentElement.clientWidth))}function k(){return Math.max(Math.max(ja.body.scrollHeight,ja.documentElement.scrollHeight),Math.max(ja.body.offsetHeight,ja.documentElement.offsetHeight),Math.max(ja.body.clientHeight,ja.documentElement.clientHeight))}function l(a,b){var c=parseInt(na(a,b),10);return isNaN(c)?0:c}function m(a,b,c,d,e,f){"transparent"!==f&&(a.setVariable("fillStyle",f),a.fillRect(b,c,d,e),ia+=1)}function n(a,b){switch(b){case"lowercase":return a.toLowerCase();case"capitalize":return a.replace(/(^|\s|:|-|\(|\))([a-z])/g,function(a,b,c){return a.length>0?b+c.toUpperCase():void 0});case"uppercase":return a.toUpperCase();default:return a}}function o(a){return/^(normal|none|0px)$/.test(a)}function p(a,b,c,d,e){null!==a&&j.Util.trimText(a).length>0&&(d.setTransform(e[0],e[1],e[2],e[3],b,c),d.fillText(a,0,0),d.setTransform(1,0,0,1,0,0),ia+=1)}function q(a,b,c,d){var e=!1,f=na(b,"fontWeight"),g=na(b,"fontFamily"),h=na(b,"fontSize");switch(parseInt(f,10)){case 401:f="bold";break;case 400:f="normal"}return a.setVariable("fillStyle",d),a.setVariable("font",[na(b,"fontStyle"),na(b,"fontVariant"),f,h,g].join(" ")),a.setVariable("textAlign",e?"right":"left"),"none"!==c?j.Util.Font(g,h,ja):void 0}function r(a,b,c,d,e){switch(b){case"underline":m(a,c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,e);break;case"overline":m(a,c.left,Math.round(c.top),c.width,1,e);break;case"line-through":m(a,c.left,Math.ceil(c.top+d.middle+d.lineWidth),c.width,1,e)}}function s(a,b,c,d){var e;if(ka.rangeBounds)("none"!==c||0!==j.Util.trimText(b).length)&&(e=t(b,a.node,a.textOffset)),a.textOffset+=b.length;else if(a.node&&"string"==typeof a.node.nodeValue){var f=d?a.node.splitText(b.length):null;e=u(a.node),a.node=f}return e}function t(a,b,c){var d=ja.createRange();return d.setStart(b,c),d.setEnd(b,c+a.length),d.getBoundingClientRect()}function u(a){var b=a.parentNode,c=ja.createElement("wrapper"),d=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),b.replaceChild(c,a);var e=j.Util.Bounds(c);return b.replaceChild(d,c),e}function v(a,b,c){function d(a){var b=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./);if(b&&isNaN(a[0])){var c=f();a=[1,0,0,1,c.x,c.y]}return a}function e(){var b=$(a).parents('[style*="translate3d"]');return b.length>0?b:null}function f(a){var b=a||e(),c={x:0,y:0};return b&&b.each(function(a,b){var d=b.getAttribute("style").match(/translate3d\(([^\)]*)/)[1],e=parseFloat(d.split(" ")[0]),f=parseFloat(d.split(" ")[1]);c.y+=f,c.x+=e}),c}var g,i,k=c.ctx,l=na(a,"color"),m=(navigator.userAgent.toLowerCase().indexOf("firefox")>-1,navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0),t=na(a,"textDecoration"),u=na(a,"textAlign"),v=d(na(a,m?"-webkit-transform":"transform")),w=na(a,m?"-webkit-transform-origin":"transform-origin"),x=w?w.split(" "):[0,0],y=Math.atan(v[1]/v[3]),z=Math.sin(y),A=(Math.cos(y),{node:b,textOffset:0});1===Math.abs(z);j.Util.trimText(b.nodeValue).length>0&&(b.nodeValue=n(b.nodeValue,na(a,"textTransform")),u=u.replace(["-webkit-auto"],["auto"]),i=!h.letterRendering&&/^(left|right|justify|auto)$/.test(u)&&o(na(a,"letterSpacing"))?b.nodeValue.split(/(\b| )/):b.nodeValue.split(""),g=q(k,a,t,l),h.chinese&&i.forEach(function(a,b){/.*[\u4E00-\u9FA5].*$/.test(a)&&(a=a.split(""),a.unshift(b,1),i.splice.apply(i,a))}),i.forEach(function(a,b){var c=s(A,a,t,b<i.length-1);c&&(p(a,c.left+parseFloat(x[1])*Math.abs(z),c.bottom,k,v),r(k,t,c,g,l))}))}function w(a,b){var c,d,e=ja.createElement("boundelement");return e.style.display="inline",c=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(ja.createTextNode(b)),a.insertBefore(e,a.firstChild),d=j.Util.Bounds(e),a.removeChild(e),a.style.listStyleType=c,d}function x(a){var b=-1,c=1,d=a.parentNode.childNodes;if(a.parentNode){for(;d[++b]!==a;)1===d[b].nodeType&&c++;return c}return-1}function y(a,b){var c,d=x(a);switch(b){case"decimal":c=d;break;case"decimal-leading-zero":c=1===d.toString().length?d="0"+d.toString():d.toString();break;case"upper-roman":c=j.Generate.ListRoman(d);break;case"lower-roman":c=j.Generate.ListRoman(d).toLowerCase();break;case"lower-alpha":c=j.Generate.ListAlpha(d).toLowerCase();break;case"upper-alpha":c=j.Generate.ListAlpha(d)}return c+=". "}function z(a,b,c){var d,e,f,g=b.ctx,h=na(a,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(h)){if(e=y(a,h),f=w(a,e),q(g,a,"none",na(a,"color")),"inside"!==na(a,"listStylePosition"))return;g.setVariable("textAlign","left"),d=c.left,p(e,d,f.bottom,g)}}function A(a){var b=e[a];return b&&b.succeeded===!0?b.img:!1}function B(a,b){var c=Math.max(a.left,b.left),d=Math.max(a.top,b.top),e=Math.min(a.left+a.width,b.left+b.width),f=Math.min(a.top+a.height,b.top+b.height);return{left:c,top:d,width:e-c,height:f-d}}function C(a,b){var c;return b?"auto"!==a?(c=g(a),b.children.push(c),c):b:c=g(0)}function D(a,b,c,d,e){var f=l(b,"paddingLeft"),g=l(b,"paddingTop"),h=l(b,"paddingRight"),i=l(b,"paddingBottom");P(a,c,0,0,c.width,c.height,d.left+f+e[3].width,d.top+g+e[0].width,d.width-(e[1].width+e[3].width+f+h),d.height-(e[0].width+e[2].width+g+i))}function E(a){return["Top","Right","Bottom","Left"].map(function(b){return{width:l(a,"border"+b+"Width"),color:na(a,"border"+b+"Color")}})}function F(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){return na(a,"border"+b+"Radius")})}function G(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[G(a,g,j,l),G(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function H(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function I(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function J(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-l,r=f-m,s=g-o;return{topLeftOuter:qa(d,e,h,i).topLeft.subdivide(.5),topLeftInner:qa(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:qa(d+p,e,j,k).topRight.subdivide(.5),topRightInner:qa(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:qa(d+r,e+q,m,l).bottomRight.subdivide(.5),bottomRightInner:qa(d+Math.min(r,f+c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,m-c[1].width),Math.max(0,l-c[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:qa(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:qa(d+c[3].width,e+s,Math.max(0,n-c[3].width),Math.max(0,o-c[2].width)).bottomLeft.subdivide(.5)}}function K(a,b,c,d,e){var f=na(a,"backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":H(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),
H(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),H(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),H(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:H(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),H(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),H(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),H(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g}function L(a,b,c){var d,e,f,g,h,i,j=b.left,k=b.top,l=b.width,m=b.height,n=F(a),o=J(b,n,c),p={clip:K(a,o,c,n,b),borders:[]};for(d=0;4>d;d++)if(c[d].width>0){switch(e=j,f=k,g=l,h=m-c[2].width,d){case 0:h=c[0].width,i=I({c1:[e,f],c2:[e+g,f],c3:[e+g-c[1].width,f+h],c4:[e+c[3].width,f+h]},n[0],n[1],o.topLeftOuter,o.topLeftInner,o.topRightOuter,o.topRightInner);break;case 1:e=j+l-c[1].width,g=c[1].width,i=I({c1:[e+g,f],c2:[e+g,f+h+c[2].width],c3:[e,f+h],c4:[e,f+c[0].width]},n[1],n[2],o.topRightOuter,o.topRightInner,o.bottomRightOuter,o.bottomRightInner);break;case 2:f=f+m-c[2].width,h=c[2].width,i=I({c1:[e+g,f+h],c2:[e,f+h],c3:[e+c[3].width,f],c4:[e+g-c[2].width,f]},n[2],n[3],o.bottomRightOuter,o.bottomRightInner,o.bottomLeftOuter,o.bottomLeftInner);break;case 3:g=c[3].width,i=I({c1:[e,f+h+c[2].width],c2:[e,f],c3:[e+g,f+c[0].width],c4:[e+g,f+h]},n[3],n[0],o.bottomLeftOuter,o.bottomLeftInner,o.topLeftOuter,o.topLeftInner)}p.borders.push({args:i,color:c[d].color})}return p}function M(a,b){var c=a.drawShape();return b.forEach(function(a,b){c[0===b?"moveTo":a[0]+"To"].apply(null,a.slice(1))}),c}function N(a,b,c){"transparent"!==c&&(a.setVariable("fillStyle",c),M(a,b),a.fill(),ia+=1)}function O(a,b,c){var e,f,g=ja.createElement("valuewrap"),h=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];h.forEach(function(b){try{g.style[b]=na(a,b)}catch(c){d("html2canvas: Parse: Exception caught in renderFormValue: "+c.message)}}),g.style.borderColor="black",g.style.borderStyle="solid",g.style.display="block",g.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(a.type)||"SELECT"===a.nodeName)&&(g.style.lineHeight=na(a,"height")),g.style.top=b.top+"px",g.style.left=b.left+"px",e="SELECT"===a.nodeName?(a.options[a.selectedIndex]||0).text:a.value,e||(e=a.placeholder),f=ja.createTextNode(e),g.appendChild(f),ma.appendChild(g),v(a,f,c),ma.removeChild(g)}function P(a){a.drawImage.apply(a,Array.prototype.slice.call(arguments,1)),ia+=1}function Q(c,d){var e=a.getComputedStyle(c,d);if(e&&e.content&&"none"!==e.content&&"-moz-alt-content"!==e.content){var f=e.content+"",g=f.substr(0,1);g===f.substr(f.length-1)&&g.match(/'|"/)&&(f=f.substr(1,f.length-2));var h="url"===f.substr(0,3),i=b.createElement(h?"img":"span");return i.className=oa+"-before "+oa+"-after",i.style.cssText=R(c,d),h?i.src=j.Util.parseBackgroundImage(f)[0].args[0]:i.innerHTML=f,i}}function R(b,c){var d,e=a.getComputedStyle(b,c);if(""!=e.cssText)return e.cssText;d="";for(var f=0;f<e.length;f++)d+=e[f]+": "+e.getPropertyValue(e[f])+"; ";return d}function S(a,b){var c=Q(a,":before"),d=Q(a,":after");(c||d)&&(c&&(a.className+=" "+oa+"-before",a.parentNode.insertBefore(c,a),ea(c,b,!0),a.parentNode.removeChild(c),a.className=a.className.replace(oa+"-before","").trim()),d&&(a.className+=" "+oa+"-after",a.appendChild(d),ea(d,b,!0),a.removeChild(d),a.className=a.className.replace(oa+"-after","").trim()))}function T(a,b,c,d){var e=Math.round(d.left+c.left),f=Math.round(d.top+c.top);a.createPattern(b),a.translate(e,f),a.fill(),a.translate(-e,-f)}function U(a,b,c,d,e,f,g,h){var i=[];i.push(["line",Math.round(e),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(f)]),i.push(["line",Math.round(e+g),Math.round(h+f)]),i.push(["line",Math.round(e),Math.round(h+f)]),M(a,i),a.save(),a.clip(),T(a,b,c,d),a.restore()}function V(a,b,c){m(a,b.left,b.top,b.width,b.height,c)}function W(a,b,c){if(c.length){var d=[];c.forEach(function(a,b){var e=1/(c.length-1)*b;d.push({point:e,color:a})}),a.drawLinearGradient({gradientStops:d,x0:b.left,y0:b.top,x1:b.left+b.width,y1:b.top+b.height}),ia+=1}}function X(a,b,c,d,e){var f=j.Util.BackgroundSize(a,b,d,e),g=j.Util.BackgroundPosition(a,b,d,e,f),h=na(a,"backgroundRepeat").split(",").map(function(a){return a.trim()});switch(d=Z(d,f),h=h[e]||h[0]){case"repeat-x":U(c,d,g,b,b.left,b.top+g.top,99999,d.height);break;case"repeat-y":U(c,d,g,b,b.left+g.left,b.top,d.width,99999);break;case"no-repeat":U(c,d,g,b,b.left+g.left,b.top+g.top,d.width,d.height);break;default:T(c,d,g,{top:b.top,left:b.left,width:d.width,height:d.height})}}function Y(a,b,c){for(var e,f=na(a,"backgroundImage"),g=j.Util.parseBackgroundImage(f),h=g.length;h--;)if(f=g[h],f.args&&0!==f.args.length){var i="url"===f.method?f.args[0]:f.value;e=A(i),e?X(a,b,c,e,h):d("html2canvas: Error loading background:",f)}}function Z(a,b){if(a.width===b.width&&a.height===b.height)return a;var c,d=ja.createElement("canvas");return d.width=b.width,d.height=b.height,c=d.getContext("2d"),P(c,a,0,0,a.width,a.height,0,0,b.width,b.height),d}function _(a,b,c){var d=na(b,"opacity")*(c?c.opacity:1);return a.setVariable("globalAlpha",d),d}function aa(a,b,c){var d=f(b?c.width:i(),b?c.height:k()),e={ctx:d,zIndex:C(na(a,"zIndex"),b?b.zIndex:null),opacity:_(d,a,b),cssPosition:na(a,"position"),borders:E(a),clip:b&&b.clip?j.Util.Extend({},b.clip):null},g=/(hidden|scroll|auto)/.test(na(a,"overflow"))||/(hidden|scroll|auto)/.test(na(a,"overflow-x"))||/(hidden|scroll|auto)/.test(na(a,"overflow-y"));return h.useOverflow===!0&&g&&/(BODY)/i.test(a.nodeName)===!1&&(e.clip=e.clip?B(e.clip,c):c),e.zIndex.children.push(e),e}function ba(a,b,c){var d={left:b.left+a[3].width,top:b.top+a[0].width,width:b.width-(a[1].width+a[3].width),height:b.height-(a[0].width+a[2].width)};return c&&(d=B(d,c)),d}function ca(a,b,c){function e(a){if(a&&-1!=a.search("linear-gradient")){var b=a.match(/linear-gradient\(.*(\)|(\#\d{3,6}))\)/g);if(b.length){var c=b[0].match(/(rgba?\([^/)]+\))|(\#\d{3,6})/g);return c}}return null}var f,g=j.Util.Bounds(a),h=la.test(a.nodeName)?"#efefef":na(a,"backgroundColor"),i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,k=-1!==navigator.userAgent.toLowerCase().indexOf("msie")||navigator.userAgent.match(/Trident\/7\./),l=e(na(a,i||k?"backgroundImage":"background")),m=aa(a,b,g),n=m.borders,o=m.ctx,p=ba(n,g,m.clip),q=L(a,g,n);switch(M(o,q.clip),o.save(),o.clip(),g.height>0&&g.width>0&&(V(o,g,h),l&&W(o,g,l)),p.height>0&&p.width>0&&Y(a,p,o),o.restore(),q.borders.forEach(function(a){N(o,a.args,a.color)}),c||S(a,m),a.nodeName){case"IMG":(f=A(a.getAttribute("src")))?D(o,a,f,g,n):d("html2canvas: Error loading <img>:"+a.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(a.type)&&(a.value||a.placeholder).length>0&&O(a,g,m);break;case"TEXTAREA":(a.value||a.placeholder||"").length>0&&O(a,g,m);break;case"SELECT":(a.options||a.placeholder||"").length>0&&O(a,g,m);break;case"LI":z(a,m,p);break;case"CANVAS":D(o,a,a,g,n)}return m}function da(a){return"none"!==na(a,"display")&&"hidden"!==na(a,"visibility")&&!a.hasAttribute("data-html2canvas-ignore")}function ea(a,b,c){da(a)&&(b=ca(a,b,c)||b,la.test(a.nodeName)||j.Util.Children(a).forEach(function(d){1===d.nodeType?ea(d,b,c):3===d.nodeType&&v(a,d,b)}))}function fa(a,b){function c(a){var b,d,e,f,h,i=j.Util.Children(a),k=i.length;for(h=0;k>h;h+=1)if(f=i[h],3===f.nodeType)g+=f.nodeValue.replace(/</g,"&lt;").replace(/>/g,"&gt;");else if(1===f.nodeType&&!/^(script|meta|title)$/.test(f.nodeName.toLowerCase())){if(g+="<"+f.nodeName.toLowerCase(),f.hasAttributes())for(b=f.attributes,e=b.length,d=0;e>d;d+=1)g+=" "+b[d].name+'="'+b[d].value+'"';g+=">",c(f),g+="</"+f.nodeName.toLowerCase()+">"}}var d=new Image,e=i(),f=k(),g="";c(a),d.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='"+e+"' height='"+f+"'>","<foreignObject width='"+e+"' height='"+f+"'>","<html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;'>",g.replace(/\#/g,"%23"),"</html>","</foreignObject>","</svg>"].join(""),d.onload=function(){b.svgRender=d}}function ga(){var a=ca(ha,null);return ka.svgRendering&&fa(b.documentElement,a),Array.prototype.slice.call(ha.children,0).forEach(function(b){ea(b,a)}),a.backgroundColor=na(b.documentElement,"backgroundColor"),ma.removeChild(pa),a}a.scroll(0,0);var ha=h.elements===c?b.body:h.elements[0],ia=0,ja=ha.ownerDocument,ka=j.Util.Support(h,ja),la=new RegExp("("+h.ignoreElements+")"),ma=ja.body,na=j.Util.getCSS,oa="___html2canvas___pseudoelement",pa=ja.createElement("style");pa.innerHTML="."+oa+'-before:before { content: "" !important; display: none !important; }.'+oa+'-after:after { content: "" !important; display: none !important; }',ma.appendChild(pa),e=e||{};var qa=function(a){return function(b,c,d,e){var f=d*a,g=e*a,h=b+d,i=c+e;return{topLeft:G({x:b,y:i},{x:b,y:i-g},{x:h-f,y:c},{x:h,y:c}),topRight:G({x:b,y:c},{x:b+f,y:c},{x:h,y:i-g},{x:h,y:i}),bottomRight:G({x:h,y:c},{x:h,y:c+g},{x:b+f,y:i},{x:b,y:i}),bottomLeft:G({x:h,y:i},{x:h-f,y:i},{x:b,y:c+g},{x:b,y:c})}}}(4*((Math.sqrt(2)-1)/3));return ga()},j.Preload=function(e){function f(a){A.href=a,A.href=A.href;var b=A.protocol+A.host;return b===q}function g(){u.numLoaded>u.numTotal||(d("html2canvas: start: images: "+u.numLoaded+" / "+u.numTotal+" (failed: "+u.numFailed+")"),u.firstRun||u.numLoaded!==u.numTotal||(d("Finished loading images: # "+u.numTotal+" (failed: "+u.numFailed+")"),"function"==typeof e.complete&&e.complete(u)))}function h(b,d,f){var h,i,j=e.proxy;A.href=b,b=A.href,h="html2canvas_"+v++,f.callbackname=h,j+=j.indexOf("?")>-1?"&":"?",j+="url="+encodeURIComponent(b)+"&callback="+h,i=x.createElement("script"),a[h]=function(b){"error:"===b.substring(0,6)?(f.succeeded=!1,u.numLoaded++,u.numFailed++,g()):(p(d,f),d.src=b),a[h]=c;try{delete a[h]}catch(e){}i.parentNode.removeChild(i),i=null,delete f.script,delete f.callbackname},i.setAttribute("type","text/javascript"),i.setAttribute("src",j),f.script=i,a.document.body.appendChild(i)}function i(b,c){var d=a.getComputedStyle(b,c),e=d.content;"url"===e.substr(0,3)&&r.loadImage(j.Util.parseBackgroundImage(e)[0].args[0]),n(d.backgroundImage,b)}function k(a){i(a,":before"),i(a,":after")}function l(a,b){var d=j.Generate.Gradient(a,b);d!==c&&(u[a]={img:d,succeeded:!0},u.numTotal++,u.numLoaded++,g())}function m(a){return a&&a.method&&a.args&&a.args.length>0}function n(a,b){var d;j.Util.parseBackgroundImage(a).filter(m).forEach(function(a){"url"===a.method?r.loadImage(a.args[0]):a.method.match(/\-?gradient$/)&&(d===c&&(d=j.Util.Bounds(b)),l(a.value,d))})}function o(a){var b=!1;try{j.Util.Children(a).forEach(function(a){o(a)})}catch(e){}try{b=a.nodeType}catch(f){b=!1,d("html2canvas: failed to access some element's nodeType - Exception: "+f.message)}if(1===b||b===c){k(a);try{n(j.Util.getCSS(a,"backgroundImage"),a)}catch(e){d("html2canvas: failed to get background-image - Exception: "+e.message)}n(a)}}function p(b,d){b.onload=function(){d.timer!==c&&a.clearTimeout(d.timer),u.numLoaded++,d.succeeded=!0,b.onerror=b.onload=null,g()},b.onerror=function(){if("anonymous"===b.crossOrigin&&(a.clearTimeout(d.timer),e.proxy)){var c=b.src;return b=new Image,d.img=b,b.src=c,void h(b.src,b,d)}u.numLoaded++,u.numFailed++,d.succeeded=!1,b.onerror=b.onload=null,g()}}var q,r,s,t,u={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},v=0,w=e.elements[0]||b.body,x=w.ownerDocument,y=x.images,z=y.length,A=x.createElement("a"),B=function(a){return a.crossOrigin!==c}(new Image);for(A.href=a.location.href,q=A.protocol+A.host,r={loadImage:function(b){var d,g;b&&u[b]===c&&(d=new Image,b.match(/data:image\/.*;base64,/i)?(d.src=b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),g=u[b]={img:d},u.numTotal++,p(d,g)):f(b)||e.allowTaint===!0?(g=u[b]={img:d},u.numTotal++,p(d,g),d.src=b):B&&!e.allowTaint&&e.useCORS?(d.crossOrigin="anonymous",g=u[b]={img:d},u.numTotal++,p(d,g),d.src=b,d.customComplete=function(){this.img.complete?this.img.onerror():this.timer=a.setTimeout(this.img.customComplete,100)}.bind(g),d.customComplete()):e.proxy&&(g=u[b]={img:d},u.numTotal++,h(b,d,g)))},cleanupDOM:function(f){var h,i;if(!u.cleanupDone){d(f&&"string"==typeof f?"html2canvas: Cleanup because: "+f:"html2canvas: Cleanup after timeout: "+e.timeout+" ms.");for(i in u)if(u.hasOwnProperty(i)&&(h=u[i],"object"==typeof h&&h.callbackname&&h.succeeded===c)){a[h.callbackname]=c;try{delete a[h.callbackname]}catch(j){}h.script&&h.script.parentNode&&(h.script.setAttribute("src","about:blank"),h.script.parentNode.removeChild(h.script)),u.numLoaded++,u.numFailed++,d("html2canvas: Cleaned up failed img: '"+i+"' Steps: "+u.numLoaded+" / "+u.numTotal)}a.stop!==c?a.stop():b.execCommand!==c&&b.execCommand("Stop",!1),b.close!==c&&b.close(),u.cleanupDone=!0,f&&"string"==typeof f||g()}},renderingDone:function(){t&&a.clearTimeout(t)}},e.timeout>0&&(t=a.setTimeout(r.cleanupDOM,e.timeout)),d("html2canvas: Preload starts: finding background-images"),u.firstRun=!0,o(w),d("html2canvas: Preload: Finding images"),s=0;z>s;s+=1)r.loadImage(y[s].getAttribute("src"));return u.firstRun=!1,d("html2canvas: Preload: Done."),u.numTotal===u.numLoaded&&g(),r},j.Renderer=function(a,d){function e(a){var b=[],c=function(a){var d=[],e=[];a.children.forEach(function(a){a.children&&a.children.length>0?(d.push(a),e.push(a.zindex)):b.push(a)}),e.sort(function(a,b){return a-b}),e.forEach(function(a){var b;d.some(function(c,d){return b=d,c.zindex===a}),c(d.splice(b,1)[0])})};return c(a.zIndex),b}function f(a){var b;if("string"==typeof d.renderer&&j.Renderer[a]!==c)b=j.Renderer[a](d);else{if("function"!=typeof a)throw new Error("Unknown renderer");b=a(d)}if("function"!=typeof b)throw new Error("Invalid renderer defined");return b}return f(d.renderer)(a,d,b,e(a),j)},j.Util.Support=function(a,b){function e(){var a=new Image,e=b.createElement("canvas"),f=e.getContext===c?!1:e.getContext("2d");if(f===!1)return!1;e.width=e.height=10,a.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{f.drawImage(a,0,0),e.toDataURL()}catch(g){return!1}return d("html2canvas: Parse: SVG powered rendering available"),!0}function f(){var a,c,d,e,f=!1;return b.createRange&&(a=b.createRange(),a.getBoundingClientRect&&(c=b.createElement("boundtest"),c.style.height="123px",c.style.display="block",b.body.appendChild(c),a.selectNode(c),d=a.getBoundingClientRect(),e=d.height,123===e&&(f=!0),b.body.removeChild(c))),f}return{rangeBounds:f(),svgRendering:a.svgRendering&&e()}},a.html2canvas=function(b,c){b=b.length?b:[b];var e,f,g={logging:!1,elements:b,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return g=j.Util.Extend(c,g),j.logging=g.logging,g.complete=function(a){("function"!=typeof g.onpreloaded||g.onpreloaded(a)!==!1)&&(e=j.Parse(a,g),("function"!=typeof g.onparsed||g.onparsed(e)!==!1)&&(f=j.Renderer(e,g),"function"==typeof g.onrendered&&g.onrendered(f)))},a.setTimeout(function(){j.Preload(g)},0),{render:function(a,b){return j.Renderer(a,j.Util.Extend(b,g))},parse:function(a,b){return j.Parse(a,j.Util.Extend(b,g))},preload:function(a){return j.Preload(j.Util.Extend(a,g))},log:d}},a.html2canvas.log=d,a.html2canvas.Renderer={Canvas:c},j.Renderer.Canvas=function(a){function e(a,b){a.beginPath(),b.forEach(function(b){a[b.name].apply(a,b.arguments)}),a.closePath()}function f(a){if(-1===j.indexOf(a.arguments[0].src)){l.drawImage(a.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(b){return k=i.createElement("canvas"),l=k.getContext("2d"),!1}j.push(a.arguments[0].src)}return!0}function g(a){return"transparent"===a||"rgba(0, 0, 0, 0)"===a}function h(b,c){switch(c.type){case"variable":b[c.name]=c.arguments;break;case"function":if("createPattern"===c.name){if(c.arguments[0].width>0&&c.arguments[0].height>0)try{b.fillStyle=b.createPattern(c.arguments[0],"repeat")}catch(g){d("html2canvas: Renderer: Error creating pattern",g.message)}}else if("drawShape"===c.name)e(b,c.arguments);else if("drawImage"===c.name)c.arguments[8]>0&&c.arguments[7]>0&&(!a.taintTest||a.taintTest&&f(c))&&b.drawImage.apply(b,c.arguments);else if("drawLinearGradient"===c.name){var h=c.arguments[0],i=h.gradientStops,j=b.createLinearGradient(h.x0,h.y0,h.x1,h.y1);i.forEach(function(a){j.addColorStop(a.point,a.color)}),b.fillStyle=j,b.fillRect(h.x0,h.y0,h.x1,h.y1)}else b[c.name].apply(b,c.arguments)}}a=a||{};var i=b,j=[],k=b.createElement("canvas"),l=k.getContext("2d"),m=a.canvas||i.createElement("canvas");return function(a,b,e,f,i){var j,k,l,n,o,p,q=m.getContext("2d");if(m.width=m.style.width=b.width||a.ctx.width,m.height=m.style.height=b.height||a.ctx.height,p=q.fillStyle,q.fillStyle=g(a.backgroundColor)&&b.background!==c?b.background:a.backgroundColor,q.fillRect(0,0,m.width,m.height),q.fillStyle=p,b.svgRendering&&a.svgRender!==c)q.drawImage(a.svgRender,0,0);else for(k=0,l=f.length;l>k;k+=1)j=f.splice(0,1)[0],j.canvasPosition=j.canvasPosition||{},q.textBaseline="bottom",j.clip&&j.clip.width>0&&j.clip.height>0&&(q.save(),q.beginPath(),q.rect(j.clip.left,j.clip.top,j.clip.width,j.clip.height),q.clip()),j.ctx.storage&&j.ctx.storage.forEach(h.bind(null,q)),j.clip&&q.restore();if(d("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),l=b.elements.length,1===l&&"object"==typeof b.elements[0]&&"BODY"!==b.elements[0].nodeName){o=i.Util.Bounds(b.elements[0]),n=e.createElement("canvas"),n.width=o.width,n.height=o.height,q=n.getContext("2d");var r=m.getContext("2d").getImageData(o.left,o.top,o.width,o.height);return q.putImageData(r,0,0),m=null,n}return m}}}(window,document),e("undefined"!=typeof html2canvas?html2canvas:window.html2canvas)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],101:[function(a,b,c){(function(c){jQuery=c.jQuery=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-ui-1.10.3.custom.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a){"use strict";a.widget("ui.rangeSliderMouseTouch",a.ui.mouse,{enabled:!0,_mouseInit:function(){var b=this;a.ui.mouse.prototype._mouseInit.apply(this),this._mouseDownEvent=!1,this.element.bind("touchstart."+this.widgetName,function(a){return b._touchStart(a)})},_mouseDestroy:function(){a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),a.ui.mouse.prototype._mouseDestroy.apply(this)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},destroy:function(){this._mouseDestroy(),a.ui.mouse.prototype.destroy.apply(this),this._mouseInit=null},_touchStart:function(b){if(!this.enabled)return!1;b.which=1,b.preventDefault(),this._fillTouchEvent(b);var c=this,d=this._mouseDownEvent;this._mouseDown(b),d!==this._mouseDownEvent&&(this._touchEndDelegate=function(a){c._touchEnd(a)},this._touchMoveDelegate=function(a){c._touchMove(a)},a(document).bind("touchmove."+this.widgetName,this._touchMoveDelegate).bind("touchend."+this.widgetName,this._touchEndDelegate))},_mouseDown:function(b){return this.enabled?a.ui.mouse.prototype._mouseDown.apply(this,[b]):!1},_touchEnd:function(b){this._fillTouchEvent(b),this._mouseUp(b),a(document).unbind("touchmove."+this.widgetName,this._touchMoveDelegate).unbind("touchend."+this.widgetName,this._touchEndDelegate),this._mouseDownEvent=!1,a(document).trigger("mouseup")},_touchMove:function(a){return a.preventDefault(),this._fillTouchEvent(a),this._mouseMove(a)},_fillTouchEvent:function(a){var b;b="undefined"==typeof a.targetTouches&&"undefined"==typeof a.changedTouches?a.originalEvent.targetTouches[0]||a.originalEvent.changedTouches[0]:a.targetTouches[0]||a.changedTouches[0],a.pageX=b.pageX,a.pageY=b.pageY}})}(jQuery),function(a){"use strict";a.widget("ui.rangeSliderDraggable",a.ui.rangeSliderMouseTouch,{cache:null,options:{containment:null},_create:function(){a.ui.rangeSliderMouseTouch.prototype._create.apply(this),setTimeout(a.proxy(this._initElementIfNotDestroyed,this),10)},destroy:function(){this.cache=null,a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_initElementIfNotDestroyed:function(){this._mouseInit&&this._initElement()},_initElement:function(){this._mouseInit(),this._cache()},_setOption:function(b,c){"containment"===b&&(this.options.containment=null===c||0===a(c).length?null:a(c))},_mouseStart:function(a){return this._cache(),this.cache.click={left:a.pageX,top:a.pageY},this.cache.initialOffset=this.element.offset(),this._triggerMouseEvent("mousestart"),!0},_mouseDrag:function(a){var b=a.pageX-(this.cache.click?this.cache.click.left:0);return b=this._constraintPosition(b+(this.cache.initialOffset?this.cache.initialOffset.left:0)),this._applyPosition(b),this._triggerMouseEvent("sliderDrag"),!1},_mouseStop:function(){this._triggerMouseEvent("stop")},_constraintPosition:function(a){return 0!==this.element.parent().length&&null!==this.cache.parent.offset&&(a=Math.min(a,this.cache.parent.offset.left+this.cache.parent.width-this.cache.width.outer),a=Math.max(a,this.cache.parent.offset.left)),a},_applyPosition:function(a){var b={top:this.cache.offset.top,left:a};this.element.offset({left:a}),this.cache.offset=b},_cacheIfNecessary:function(){null===this.cache&&this._cache()},_cache:function(){this.cache={},this._cacheMargins(),this._cacheParent(),this._cacheDimensions(),this.cache.offset=this.element.offset()},_cacheMargins:function(){this.cache.margin={left:this._parsePixels(this.element,"marginLeft"),right:this._parsePixels(this.element,"marginRight"),top:this._parsePixels(this.element,"marginTop"),bottom:this._parsePixels(this.element,"marginBottom")}},_cacheParent:function(){if(null!==this.options.parent){var a=this.element.parent();this.cache.parent={offset:a.offset(),width:a.width()}}else this.cache.parent=null},_cacheDimensions:function(){this.cache.width={outer:this.element.outerWidth(),inner:this.element.width()}},_parsePixels:function(a,b){return parseInt(a.css(b),10)||0},_triggerMouseEvent:function(a){var b=this._prepareEventData();this.element.trigger(a,b)},_prepareEventData:function(){return{element:this.element,offset:this.cache.offset||null}}})}(jQuery),function(a,b){"use strict";a.widget("ui.rangeSlider",{options:{bounds:{min:0,max:100},defaultValues:{min:20,max:50},wheelMode:null,wheelSpeed:4,arrows:!0,valueLabels:"show",formatter:null,durationIn:0,durationOut:400,delayOut:200,range:{min:!1,max:!1},step:!1,scales:!1,enabled:!0},_values:null,_valuesChanged:!1,bar:null,leftHandle:null,rightHandle:null,innerBar:null,container:null,arrows:null,labels:null,changing:{min:!1,max:!1},changed:{min:!1,max:!1},ruler:null,_create:function(){this._setDefaultValues(),this.labels={left:null,right:null,leftDisplayed:!0,rightDisplayed:!0},this.arrows={left:null,right:null},this.changing={min:!1,max:!1},this.changed={min:!1,max:!1},this._createElements(),this._bindResize(),setTimeout(a.proxy(this.resize,this),1),setTimeout(a.proxy(this._initValues,this),1)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min,max:this.options.defaultValues.max}},_bindResize:function(){var b=this;this._resizeProxy=function(a){b.resize(a)},a(window).resize(this._resizeProxy)},_initWidth:function(){this.container.css("width",this.element.width()-this.container.outerWidth(!0)+this.container.width()),this.innerBar.css("width",this.container.width()-this.innerBar.outerWidth(!0)+this.innerBar.width())},_initValues:function(){this.values(this._values.min,this._values.max)},_setOption:function(a,b){this._setWheelOption(a,b),this._setArrowsOption(a,b),this._setLabelsOption(a,b),this._setLabelsDurations(a,b),this._setFormatterOption(a,b),this._setBoundsOption(a,b),this._setRangeOption(a,b),this._setStepOption(a,b),this._setScalesOption(a,b),this._setEnabledOption(a,b)},_validProperty:function(a,b,c){return null===a||"undefined"==typeof a[b]?c:a[b]},_setStepOption:function(a,b){"step"===a&&(this.options.step=b,this._leftHandle("option","step",b),this._rightHandle("option","step",b),this._changed(!0))},_setScalesOption:function(a,b){"scales"===a&&(b===!1||null===b?(this.options.scales=!1,this._destroyRuler()):b instanceof Array&&(this.options.scales=b,this._updateRuler()))},_setRangeOption:function(a,b){"range"===a&&(this._bar("option","range",b),this.options.range=this._bar("option","range"),this._changed(!0))},_setBoundsOption:function(a,b){"bounds"===a&&"undefined"!=typeof b.min&&"undefined"!=typeof b.max&&this.bounds(b.min,b.max)},_setWheelOption:function(a,b){("wheelMode"===a||"wheelSpeed"===a)&&(this._bar("option",a,b),this.options[a]=this._bar("option",a))},_setLabelsOption:function(a,b){if("valueLabels"===a){if("hide"!==b&&"show"!==b&&"change"!==b)return;this.options.valueLabels=b,"hide"!==b?(this._createLabels(),this._leftLabel("update"),this._rightLabel("update")):this._destroyLabels()}},_setFormatterOption:function(a,b){"formatter"===a&&null!==b&&"function"==typeof b&&(this.options.formatter=b,"hide"!==this.options.valueLabels&&(this._destroyLabels(),this._createLabels()))},_setArrowsOption:function(a,b){"arrows"!==a||b!==!0&&b!==!1||b===this.options.arrows||(b===!0?(this.element.removeClass("ui-rangeSlider-noArrow").addClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","block"),this.arrows.right.css("display","block"),this.options.arrows=!0):b===!1&&(this.element.addClass("ui-rangeSlider-noArrow").removeClass("ui-rangeSlider-withArrows"),this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.options.arrows=!1),this._initWidth())},_setLabelsDurations:function(a,b){if("durationIn"===a||"durationOut"===a||"delayOut"===a){if(parseInt(b,10)!==b)return;null!==this.labels.left&&this._leftLabel("option",a,b),null!==this.labels.right&&this._rightLabel("option",a,b),this.options[a]=b}},_setEnabledOption:function(a,b){"enabled"===a&&this.toggle(b)},_createElements:function(){"absolute"!==this.element.css("position")&&this.element.css("position","relative"),this.element.addClass("ui-rangeSlider"),this.container=a("<div class='ui-rangeSlider-container' />").css("position","absolute").appendTo(this.element),this.innerBar=a("<div class='ui-rangeSlider-innerBar' />").css("position","absolute").css("top",0).css("left",0),this._createHandles(),this._createBar(),this.container.prepend(this.innerBar),this._createArrows(),"hide"!==this.options.valueLabels?this._createLabels():this._destroyLabels(),this._updateRuler(),this.options.enabled||this._toggle(this.options.enabled)},_createHandle:function(b){return a("<div />")[this._handleType()](b).bind("sliderDrag",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this))},_createHandles:function(){this.leftHandle=this._createHandle({isLeft:!0,bounds:this.options.bounds,value:this._values.min,step:this.options.step}).appendTo(this.container),this.rightHandle=this._createHandle({isLeft:!1,bounds:this.options.bounds,value:this._values.max,step:this.options.step}).appendTo(this.container)},_createBar:function(){this.bar=a("<div />").prependTo(this.container).bind("sliderDrag scroll zoom",a.proxy(this._changing,this)).bind("stop",a.proxy(this._changed,this)),this._bar({leftHandle:this.leftHandle,rightHandle:this.rightHandle,values:{min:this._values.min,max:this._values.max},type:this._handleType(),range:this.options.range,wheelMode:this.options.wheelMode,wheelSpeed:this.options.wheelSpeed}),this.options.range=this._bar("option","range"),this.options.wheelMode=this._bar("option","wheelMode"),this.options.wheelSpeed=this._bar("option","wheelSpeed")},_createArrows:function(){this.arrows.left=this._createArrow("left"),this.arrows.right=this._createArrow("right"),this.options.arrows?this.element.addClass("ui-rangeSlider-withArrows"):(this.arrows.left.css("display","none"),this.arrows.right.css("display","none"),this.element.addClass("ui-rangeSlider-noArrow"))},_createArrow:function(b){var c,d=a("<div class='ui-rangeSlider-arrow' />").append("<div class='ui-rangeSlider-arrow-inner' />").addClass("ui-rangeSlider-"+b+"Arrow").css("position","absolute").css(b,0).appendTo(this.element);return c="right"===b?a.proxy(this._scrollRightClick,this):a.proxy(this._scrollLeftClick,this),d.bind("mousedown touchstart",c),d},_proxy:function(a,b,c){var d=Array.prototype.slice.call(c);return a[b].apply(a,d)},_handleType:function(){return"rangeSliderHandle"},_barType:function(){return"rangeSliderBar"},_bar:function(){return this._proxy(this.bar,this._barType(),arguments)},_labelType:function(){return"rangeSliderLabel"},_leftLabel:function(){return this._proxy(this.labels.left,this._labelType(),arguments)},_rightLabel:function(){return this._proxy(this.labels.right,this._labelType(),arguments)},_leftHandle:function(){return this._proxy(this.leftHandle,this._handleType(),arguments)},_rightHandle:function(){return this._proxy(this.rightHandle,this._handleType(),arguments)},_getValue:function(a,b){return b===this.rightHandle&&(a-=b.outerWidth()),a*(this.options.bounds.max-this.options.bounds.min)/(this.container.innerWidth()-b.outerWidth(!0))+this.options.bounds.min},_trigger:function(a){var b=this;setTimeout(function(){b.element.trigger(a,{label:b.element,values:b.values()})},1)},_changing:function(){this._updateValues()&&(this._trigger("valuesChanging"),this._valuesChanged=!0)},_deactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","hide"),this._rightLabel("option","show","hide"))},_reactivateLabels:function(){"change"===this.options.valueLabels&&(this._leftLabel("option","show","change"),this._rightLabel("option","show","change"))},_changed:function(a){a===!0&&this._deactivateLabels(),(this._updateValues()||this._valuesChanged)&&(this._trigger("valuesChanged"),a!==!0&&this._trigger("userValuesChanged"),this._valuesChanged=!1),a===!0&&this._reactivateLabels()},_updateValues:function(){var a=this._leftHandle("value"),b=this._rightHandle("value"),c=this._min(a,b),d=this._max(a,b),e=c!==this._values.min||d!==this._values.max;return this._values.min=this._min(a,b),this._values.max=this._max(a,b),e},_min:function(a,b){return Math.min(a,b)},_max:function(a,b){return Math.max(a,b)},_createLabel:function(b,c){var d;return null===b?(d=this._getLabelConstructorParameters(b,c),b=a("<div />").appendTo(this.element)[this._labelType()](d)):(d=this._getLabelRefreshParameters(b,c),b[this._labelType()](d)),b},_getLabelConstructorParameters:function(a,b){return{handle:b,handleType:this._handleType(),formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getLabelRefreshParameters:function(){return{formatter:this._getFormatter(),show:this.options.valueLabels,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}},_getFormatter:function(){return this.options.formatter===!1||null===this.options.formatter?this._defaultFormatter:this.options.formatter},_defaultFormatter:function(a){return Math.round(a)},_destroyLabel:function(a){return null!==a&&(a[this._labelType()]("destroy"),a.remove(),a=null),a},_createLabels:function(){this.labels.left=this._createLabel(this.labels.left,this.leftHandle),this.labels.right=this._createLabel(this.labels.right,this.rightHandle),this._leftLabel("pair",this.labels.right)},_destroyLabels:function(){this.labels.left=this._destroyLabel(this.labels.left),this.labels.right=this._destroyLabel(this.labels.right);
},_stepRatio:function(){return this._leftHandle("stepRatio")},_scrollRightClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollRight",4*this._stepRatio(),1)):!1},_continueScrolling:function(a,b,c,d){if(!this.options.enabled)return!1;this._bar(a,c),d=d||5,d--;var e=this,f=16,g=Math.max(1,4/this._stepRatio());this._scrollTimeout=setTimeout(function(){0===d&&(b>f?b=Math.max(f,b/1.5):c=Math.min(g,2*c),d=5),e._continueScrolling(a,b,c,d)},b)},_scrollLeftClick:function(a){return this.options.enabled?(a.preventDefault(),this._bar("startScroll"),this._bindStopScroll(),void this._continueScrolling("scrollLeft",4*this._stepRatio(),1)):!1},_bindStopScroll:function(){var b=this;this._stopScrollHandle=function(a){a.preventDefault(),b._stopScroll()},a(document).bind("mouseup touchend",this._stopScrollHandle)},_stopScroll:function(){a(document).unbind("mouseup touchend",this._stopScrollHandle),this._stopScrollHandle=null,this._bar("stopScroll"),clearTimeout(this._scrollTimeout)},_createRuler:function(){this.ruler=a("<div class='ui-rangeSlider-ruler' />").appendTo(this.innerBar)},_setRulerParameters:function(){this.ruler.ruler({min:this.options.bounds.min,max:this.options.bounds.max,scales:this.options.scales})},_destroyRuler:function(){null!==this.ruler&&a.fn.ruler&&(this.ruler.ruler("destroy"),this.ruler.remove(),this.ruler=null)},_updateRuler:function(){this._destroyRuler(),this.options.scales!==!1&&a.fn.ruler&&(this._createRuler(),this._setRulerParameters())},values:function(a,b){var c;return"undefined"!=typeof a&&"undefined"!=typeof b?(this._deactivateLabels(),c=this._bar("values",a,b),this._changed(!0),this._reactivateLabels()):c=this._bar("values",a,b),c},min:function(a){return this._values.min=this.values(a,this._values.max).min,this._values.min},max:function(a){return this._values.max=this.values(this._values.min,a).max,this._values.max},bounds:function(a,b){return this._isValidValue(a)&&this._isValidValue(b)&&b>a&&(this._setBounds(a,b),this._updateRuler(),this._changed(!0)),this.options.bounds},_isValidValue:function(a){return"undefined"!=typeof a&&parseFloat(a)===a},_setBounds:function(a,b){this.options.bounds={min:a,max:b},this._leftHandle("option","bounds",this.options.bounds),this._rightHandle("option","bounds",this.options.bounds),this._bar("option","bounds",this.options.bounds)},zoomIn:function(a){this._bar("zoomIn",a)},zoomOut:function(a){this._bar("zoomOut",a)},scrollLeft:function(a){this._bar("startScroll"),this._bar("scrollLeft",a),this._bar("stopScroll")},scrollRight:function(a){this._bar("startScroll"),this._bar("scrollRight",a),this._bar("stopScroll")},resize:function(){this._initWidth(),this._leftHandle("update"),this._rightHandle("update"),this._bar("update")},enable:function(){this.toggle(!0)},disable:function(){this.toggle(!1)},toggle:function(a){a===b&&(a=!this.options.enabled),this.options.enabled!==a&&this._toggle(a)},_toggle:function(a){this.options.enabled=a,this.element.toggleClass("ui-rangeSlider-disabled",!a);var b=a?"enable":"disable";this._bar(b),this._leftHandle(b),this._rightHandle(b),this._leftLabel(b),this._rightLabel(b)},destroy:function(){this.element.removeClass("ui-rangeSlider-withArrows ui-rangeSlider-noArrow ui-rangeSlider-disabled"),this._destroyWidgets(),this._destroyElements(),this.element.removeClass("ui-rangeSlider"),this.options=null,a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this._bindResize=null,a.Widget.prototype.destroy.apply(this,arguments)},_destroyWidget:function(a){this["_"+a]("destroy"),this[a].remove(),this[a]=null},_destroyWidgets:function(){this._destroyWidget("bar"),this._destroyWidget("leftHandle"),this._destroyWidget("rightHandle"),this._destroyRuler(),this._destroyLabels()},_destroyElements:function(){this.container.remove(),this.container=null,this.innerBar.remove(),this.innerBar=null,this.arrows.left.remove(),this.arrows.right.remove(),this.arrows=null}})}(jQuery),function(a){"use strict";a.widget("ui.rangeSliderHandle",a.ui.rangeSliderDraggable,{currentMove:null,margin:0,parentElement:null,options:{isLeft:!0,bounds:{min:0,max:100},range:!1,value:0,step:!1},_value:0,_left:0,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-handle").toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this.element.append("<div class='ui-rangeSlider-handle-inner' />"),this._value=this._constraintValue(this.options.value)},destroy:function(){this.element.empty(),a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(b,c){"isLeft"!==b||c!==!0&&c!==!1||c===this.options.isLeft?"step"===b&&this._checkStep(c)?(this.options.step=c,this.update()):"bounds"===b?(this.options.bounds=c,this.update()):"range"===b&&this._checkRange(c)&&(this.options.range=c,this.update()):(this.options.isLeft=c,this.element.toggleClass("ui-rangeSlider-leftHandle",this.options.isLeft).toggleClass("ui-rangeSlider-rightHandle",!this.options.isLeft),this._position(this._value),this.element.trigger("switch",this.options.isLeft)),a.ui.rangeSliderDraggable.prototype._setOption.apply(this,[b,c])},_checkRange:function(a){return a===!1||!this._isValidValue(a.min)&&!this._isValidValue(a.max)},_isValidValue:function(a){return"undefined"!=typeof a&&a!==!1&&parseFloat(a)!==a},_checkStep:function(a){return a===!1||parseFloat(a)===a},_initElement:function(){a.ui.rangeSliderDraggable.prototype._initElement.apply(this),0===this.cache.parent.width||null===this.cache.parent.width?setTimeout(a.proxy(this._initElementIfNotDestroyed,this),500):(this._position(this._value),this._triggerMouseEvent("initialize"))},_bounds:function(){return this.options.bounds},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheParent()},_cacheParent:function(){var a=this.element.parent();this.cache.parent={element:a,offset:a.offset(),padding:{left:this._parsePixels(a,"paddingLeft")},width:a.width()}},_position:function(a){var b=this._getPositionForValue(a);this._applyPosition(b)},_constraintPosition:function(a){var b=this._getValueForPosition(a);return this._getPositionForValue(b)},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b]),this._left=b,this._setValue(this._getValueForPosition(b)),this._triggerMouseEvent("moving")},_prepareEventData:function(){var b=a.ui.rangeSliderDraggable.prototype._prepareEventData.apply(this);return b.value=this._value,b},_setValue:function(a){a!==this._value&&(this._value=a)},_constraintValue:function(a){if(a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min),a=this._round(a),this.options.range!==!1){var b=this.options.range.min||!1,c=this.options.range.max||!1;b!==!1&&(a=Math.max(a,this._round(b))),c!==!1&&(a=Math.min(a,this._round(c))),a=Math.min(a,this._bounds().max),a=Math.max(a,this._bounds().min)}return a},_round:function(a){return this.options.step!==!1&&this.options.step>0?Math.round(a/this.options.step)*this.options.step:a},_getPositionForValue:function(a){if(!this.cache||!this.cache.parent||null===this.cache.parent.offset)return 0;a=this._constraintValue(a);var b=(a-this.options.bounds.min)/(this.options.bounds.max-this.options.bounds.min),c=this.cache.parent.width-this.cache.width.outer,d=this.cache.parent.offset.left;return b*c+d},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min,this.options.bounds.max);return this._constraintValue(b)},_getRawValueForPositionAndBounds:function(a,b,c){var d=null===this.cache.parent.offset?0:this.cache.parent.offset.left,e=this.cache.parent.width-this.cache.width.outer,f=(a-d)/e;return f*(c-b)+b},value:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintValue(a),this._position(a)),this._value},update:function(){this._cache();var a=this._constraintValue(this._value),b=this._getPositionForValue(a);a!==this._value?(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update")):b!==this.cache.offset.left&&(this._triggerMouseEvent("updating"),this._position(a),this._triggerMouseEvent("update"))},position:function(a){return"undefined"!=typeof a&&(this._cache(),a=this._constraintPosition(a),this._applyPosition(a)),this._left},add:function(a,b){return a+b},substract:function(a,b){return a-b},stepsBetween:function(a,b){return this.options.step===!1?b-a:(b-a)/this.options.step},multiplyStep:function(a,b){return a*b},moveRight:function(a){var b;return this.options.step===!1?(b=this._left,this.position(this._left+a),this._left-b):(b=this._value,this.value(this.add(b,this.multiplyStep(this.options.step,a))),this.stepsBetween(b,this._value))},moveLeft:function(a){return-this.moveRight(-a)},stepRatio:function(){if(this.options.step===!1)return 1;var a=(this.options.bounds.max-this.options.bounds.min)/this.options.step;return this.cache.parent.width/a}})}(jQuery),function(a){"use strict";function b(a,b){return"undefined"==typeof a?b||!1:a}a.widget("ui.rangeSliderBar",a.ui.rangeSliderDraggable,{options:{leftHandle:null,rightHandle:null,bounds:{min:0,max:100},type:"rangeSliderHandle",range:!1,drag:function(){},stop:function(){},values:{min:0,max:20},wheelSpeed:4,wheelMode:null},_values:{min:0,max:20},_waitingToInit:2,_wheelTimeout:!1,_create:function(){a.ui.rangeSliderDraggable.prototype._create.apply(this),this.element.css("position","absolute").css("top",0).addClass("ui-rangeSlider-bar"),this.options.leftHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this.options.rightHandle.bind("initialize",a.proxy(this._onInitialized,this)).bind("mousestart",a.proxy(this._cache,this)).bind("stop",a.proxy(this._onHandleStop,this)),this._bindHandles(),this._values=this.options.values,this._setWheelModeOption(this.options.wheelMode)},destroy:function(){this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this.options=null,a.ui.rangeSliderDraggable.prototype.destroy.apply(this)},_setOption:function(a,b){"range"===a?this._setRangeOption(b):"wheelSpeed"===a?this._setWheelSpeedOption(b):"wheelMode"===a&&this._setWheelModeOption(b)},_setRangeOption:function(a){if(("object"!=typeof a||null===a)&&(a=!1),a!==!1||this.options.range!==!1){if(a!==!1){var c=b(a.min,this.options.range.min),d=b(a.max,this.options.range.max);this.options.range={min:c,max:d}}else this.options.range=!1;this._setLeftRange(),this._setRightRange()}},_setWheelSpeedOption:function(a){"number"==typeof a&&a>0&&(this.options.wheelSpeed=a)},_setWheelModeOption:function(a){(null===a||a===!1||"zoom"===a||"scroll"===a)&&(this.options.wheelMode!==a&&this.element.parent().unbind("mousewheel.bar"),this._bindMouseWheel(a),this.options.wheelMode=a)},_bindMouseWheel:function(b){"zoom"===b?this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelZoom,this)):"scroll"===b&&this.element.parent().bind("mousewheel.bar",a.proxy(this._mouseWheelScroll,this))},_setLeftRange:function(){if(this.options.range===!1)return!1;var a=this._values.max,b={min:!1,max:!1};b.max=(this.options.range.min||!1)!==!1?this._leftHandle("substract",a,this.options.range.min):!1,b.min=(this.options.range.max||!1)!==!1?this._leftHandle("substract",a,this.options.range.max):!1,this._leftHandle("option","range",b)},_setRightRange:function(){var a=this._values.min,b={min:!1,max:!1};b.min=(this.options.range.min||!1)!==!1?this._rightHandle("add",a,this.options.range.min):!1,b.max=(this.options.range.max||!1)!==!1?this._rightHandle("add",a,this.options.range.max):!1,this._rightHandle("option","range",b)},_deactivateRange:function(){this._leftHandle("option","range",!1),this._rightHandle("option","range",!1)},_reactivateRange:function(){this._setRangeOption(this.options.range)},_onInitialized:function(){this._waitingToInit--,0===this._waitingToInit&&this._initMe()},_initMe:function(){this._cache(),this.min(this._values.min),this.max(this._values.max);var a=this._leftHandle("position"),b=this._rightHandle("position")+this.options.rightHandle.width();this.element.offset({left:a}),this.element.css("width",b-a)},_leftHandle:function(){return this._handleProxy(this.options.leftHandle,arguments)},_rightHandle:function(){return this._handleProxy(this.options.rightHandle,arguments)},_handleProxy:function(a,b){var c=Array.prototype.slice.call(b);return a[this.options.type].apply(a,c)},_cache:function(){a.ui.rangeSliderDraggable.prototype._cache.apply(this),this._cacheHandles()},_cacheHandles:function(){this.cache.rightHandle={},this.cache.rightHandle.width=this.options.rightHandle.width(),this.cache.rightHandle.offset=this.options.rightHandle.offset(),this.cache.leftHandle={},this.cache.leftHandle.offset=this.options.leftHandle.offset()},_mouseStart:function(b){a.ui.rangeSliderDraggable.prototype._mouseStart.apply(this,[b]),this._deactivateRange()},_mouseStop:function(b){a.ui.rangeSliderDraggable.prototype._mouseStop.apply(this,[b]),this._cacheHandles(),this._values.min=this._leftHandle("value"),this._values.max=this._rightHandle("value"),this._reactivateRange(),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},_onDragLeftHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.leftHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragRightHandle(a,b);this._values.min=b.value,this.cache.offset.left=b.offset.left,this.cache.leftHandle.offset=b.offset,this._positionBar()}},_onDragRightHandle:function(a,b){if(this._cacheIfNecessary(),b.element[0]===this.options.rightHandle[0]){if(this._switchedValues())return this._switchHandles(),void this._onDragLeftHandle(a,b);this._values.max=b.value,this.cache.rightHandle.offset=b.offset,this._positionBar()}},_positionBar:function(){var a=this.cache.rightHandle.offset.left+this.cache.rightHandle.width-this.cache.leftHandle.offset.left;this.cache.width.inner=a,this.element.css("width",a).offset({left:this.cache.leftHandle.offset.left})},_onHandleStop:function(){this._setLeftRange(),this._setRightRange()},_switchedValues:function(){if(this.min()>this.max()){var a=this._values.min;return this._values.min=this._values.max,this._values.max=a,!0}return!1},_switchHandles:function(){var a=this.options.leftHandle;this.options.leftHandle=this.options.rightHandle,this.options.rightHandle=a,this._leftHandle("option","isLeft",!0),this._rightHandle("option","isLeft",!1),this._bindHandles(),this._cacheHandles()},_bindHandles:function(){this.options.leftHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragLeftHandle,this)),this.options.rightHandle.unbind(".bar").bind("sliderDrag.bar update.bar moving.bar",a.proxy(this._onDragRightHandle,this))},_constraintPosition:function(b){var c,d={};return d.left=a.ui.rangeSliderDraggable.prototype._constraintPosition.apply(this,[b]),d.left=this._leftHandle("position",d.left),c=this._rightHandle("position",d.left+this.cache.width.outer-this.cache.rightHandle.width),d.width=c-d.left+this.cache.rightHandle.width,d},_applyPosition:function(b){a.ui.rangeSliderDraggable.prototype._applyPosition.apply(this,[b.left]),this.element.width(b.width)},_mouseWheelZoom:function(b,c,d,e){if(!this.enabled)return!1;var f=this._values.min+(this._values.max-this._values.min)/2,g={},h={};return this.options.range===!1||this.options.range.min===!1?(g.max=f,h.min=f):(g.max=f-this.options.range.min/2,h.min=f+this.options.range.min/2),this.options.range!==!1&&this.options.range.max!==!1&&(g.min=f-this.options.range.max/2,h.max=f+this.options.range.max/2),this._leftHandle("option","range",g),this._rightHandle("option","range",h),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.zoomOut(e*this.options.wheelSpeed),!1},_mouseWheelScroll:function(b,c,d,e){return this.enabled?(this._wheelTimeout===!1?this.startScroll():clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(a.proxy(this._wheelStop,this),200),this.scrollLeft(e*this.options.wheelSpeed),!1):!1},_wheelStop:function(){this.stopScroll(),this._wheelTimeout=!1},min:function(a){return this._leftHandle("value",a)},max:function(a){return this._rightHandle("value",a)},startScroll:function(){this._deactivateRange()},stopScroll:function(){this._reactivateRange(),this._triggerMouseEvent("stop"),this._leftHandle().trigger("stop"),this._rightHandle().trigger("stop")},scrollLeft:function(a){return a=a||1,0>a?this.scrollRight(-a):(a=this._leftHandle("moveLeft",a),this._rightHandle("moveLeft",a),this.update(),void this._triggerMouseEvent("scroll"))},scrollRight:function(a){return a=a||1,0>a?this.scrollLeft(-a):(a=this._rightHandle("moveRight",a),this._leftHandle("moveRight",a),this.update(),void this._triggerMouseEvent("scroll"))},zoomIn:function(a){if(a=a||1,0>a)return this.zoomOut(-a);var b=this._rightHandle("moveLeft",a);a>b&&(b/=2,this._rightHandle("moveRight",b)),this._leftHandle("moveRight",b),this.update(),this._triggerMouseEvent("zoom")},zoomOut:function(a){if(a=a||1,0>a)return this.zoomIn(-a);var b=this._rightHandle("moveRight",a);a>b&&(b/=2,this._rightHandle("moveLeft",b)),this._leftHandle("moveLeft",b),this.update(),this._triggerMouseEvent("zoom")},values:function(a,b){if("undefined"!=typeof a&&"undefined"!=typeof b){var c=Math.min(a,b),d=Math.max(a,b);this._deactivateRange(),this.options.leftHandle.unbind(".bar"),this.options.rightHandle.unbind(".bar"),this._values.min=this._leftHandle("value",c),this._values.max=this._rightHandle("value",d),this._bindHandles(),this._reactivateRange(),this.update()}return{min:this._values.min,max:this._values.max}},update:function(){this._values.min=this.min(),this._values.max=this.max(),this._cache(),this._positionBar()}})}(jQuery),function(a){"use strict";function b(b,c,d,e){this.label1=b,this.label2=c,this.type=d,this.options=e,this.handle1=this.label1[this.type]("option","handle"),this.handle2=this.label2[this.type]("option","handle"),this.cache=null,this.left=b,this.right=c,this.moving=!1,this.initialized=!1,this.updating=!1,this.Init=function(){this.BindHandle(this.handle1),this.BindHandle(this.handle2),"show"===this.options.show?(setTimeout(a.proxy(this.PositionLabels,this),1),this.initialized=!0):setTimeout(a.proxy(this.AfterInit,this),1e3),this._resizeProxy=a.proxy(this.onWindowResize,this),a(window).resize(this._resizeProxy)},this.Destroy=function(){this._resizeProxy&&(a(window).unbind("resize",this._resizeProxy),this._resizeProxy=null,this.handle1.unbind(".positionner"),this.handle1=null,this.handle2.unbind(".positionner"),this.handle2=null,this.label1=null,this.label2=null,this.left=null,this.right=null),this.cache=null},this.AfterInit=function(){this.initialized=!0},this.Cache=function(){this.label1&&"none"!==this.label1.css("display")&&(this.cache={},this.cache.label1={},this.cache.label2={},this.cache.handle1={},this.cache.handle2={},this.cache.offsetParent={},this.CacheElement(this.label1,this.cache.label1),this.CacheElement(this.label2,this.cache.label2),this.CacheElement(this.handle1,this.cache.handle1),this.CacheElement(this.handle2,this.cache.handle2),this.CacheElement(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheIfNecessary=function(){null===this.cache?this.Cache():(this.CacheWidth(this.label1,this.cache.label1),this.CacheWidth(this.label2,this.cache.label2),this.CacheHeight(this.label1,this.cache.label1),this.CacheHeight(this.label2,this.cache.label2),this.CacheWidth(this.label1.offsetParent(),this.cache.offsetParent))},this.CacheElement=function(a,b){this.CacheWidth(a,b),this.CacheHeight(a,b),b.offset=a.offset(),b.margin={left:this.ParsePixels("marginLeft",a),right:this.ParsePixels("marginRight",a)},b.border={left:this.ParsePixels("borderLeftWidth",a),right:this.ParsePixels("borderRightWidth",a)}},this.CacheWidth=function(a,b){b.width=a.width(),b.outerWidth=a.outerWidth()},this.CacheHeight=function(a,b){b.outerHeightMargin=a.outerHeight(!0)},this.ParsePixels=function(a,b){return parseInt(b.css(a),10)||0},this.BindHandle=function(b){b.bind("updating.positionner",a.proxy(this.onHandleUpdating,this)),b.bind("update.positionner",a.proxy(this.onHandleUpdated,this)),b.bind("moving.positionner",a.proxy(this.onHandleMoving,this)),b.bind("stop.positionner",a.proxy(this.onHandleStop,this))},this.PositionLabels=function(){if(this.CacheIfNecessary(),null!==this.cache){var a=this.GetRawPosition(this.cache.label1,this.cache.handle1),b=this.GetRawPosition(this.cache.label2,this.cache.handle2);this.ConstraintPositions(a,b),this.PositionLabel(this.label1,a.left,this.cache.label1),this.PositionLabel(this.label2,b.left,this.cache.label2)}},this.PositionLabel=function(a,b,c){var d,e,f,g=this.cache.offsetParent.offset.left+this.cache.offsetParent.border.left;g-b>=0?(a.css("right",""),a.offset({left:b})):(d=g+this.cache.offsetParent.width,e=b+c.margin.left+c.outerWidth+c.margin.right,f=d-e,a.css("left",""),a.css("right",f))},this.ConstraintPositions=function(a,b){a.center<b.center&&a.outerRight>b.outerLeft?(a=this.getLeftPosition(a,b),b=this.getRightPosition(a,b)):a.center>b.center&&b.outerRight>a.outerLeft&&(b=this.getLeftPosition(b,a),a=this.getRightPosition(b,a))},this.getLeftPosition=function(a,b){var c=(b.center+a.center)/2,d=c-a.cache.outerWidth-a.cache.margin.right+a.cache.border.left;return a.left=d,a},this.getRightPosition=function(a,b){var c=(b.center+a.center)/2;return b.left=c+b.cache.margin.left+b.cache.border.left,b},this.ShowIfNecessary=function(){"show"===this.options.show||this.moving||!this.initialized||this.updating||(this.label1.stop(!0,!0).fadeIn(this.options.durationIn||0),this.label2.stop(!0,!0).fadeIn(this.options.durationIn||0),this.moving=!0)},this.HideIfNeeded=function(){this.moving===!0&&(this.label1.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.label2.stop(!0,!0).delay(this.options.delayOut||0).fadeOut(this.options.durationOut||0),this.moving=!1)},this.onHandleMoving=function(a,b){this.ShowIfNecessary(),this.CacheIfNecessary(),this.UpdateHandlePosition(b),this.PositionLabels()},this.onHandleUpdating=function(){this.updating=!0},this.onHandleUpdated=function(){this.updating=!1,this.cache=null},this.onHandleStop=function(){this.HideIfNeeded()},this.onWindowResize=function(){this.cache=null},this.UpdateHandlePosition=function(a){null!==this.cache&&(a.element[0]===this.handle1[0]?this.UpdatePosition(a,this.cache.handle1):this.UpdatePosition(a,this.cache.handle2))},this.UpdatePosition=function(a,b){b.offset=a.offset},this.GetRawPosition=function(a,b){var c=b.offset.left+b.outerWidth/2,d=c-a.outerWidth/2,e=d+a.outerWidth-a.border.left-a.border.right,f=d-a.margin.left-a.border.left,g=b.offset.top-a.outerHeightMargin;return{left:d,outerLeft:f,top:g,right:e,outerRight:f+a.outerWidth+a.margin.left+a.margin.right,cache:a,center:c}},this.Init()}a.widget("ui.rangeSliderLabel",a.ui.rangeSliderMouseTouch,{options:{handle:null,formatter:!1,handleType:"rangeSliderHandle",show:"show",durationIn:0,durationOut:500,delayOut:500,isLeft:!1},cache:null,_positionner:null,_valueContainer:null,_innerElement:null,_create:function(){this.options.isLeft=this._handle("option","isLeft"),this.element.addClass("ui-rangeSlider-label").css("position","absolute").css("display","block"),this._createElements(),this._toggleClass(),this.options.handle.bind("moving.label",a.proxy(this._onMoving,this)).bind("update.label",a.proxy(this._onUpdate,this)).bind("switch.label",a.proxy(this._onSwitch,this)),"show"!==this.options.show&&this.element.hide(),this._mouseInit()},destroy:function(){this.options.handle.unbind(".label"),this.options.handle=null,this._valueContainer=null,this._innerElement=null,this.element.empty(),this._positionner&&(this._positionner.Destroy(),this._positionner=null),a.ui.rangeSliderMouseTouch.prototype.destroy.apply(this)},_createElements:function(){this._valueContainer=a("<div class='ui-rangeSlider-label-value' />").appendTo(this.element),this._innerElement=a("<div class='ui-rangeSlider-label-inner' />").appendTo(this.element)},_handle:function(){var a=Array.prototype.slice.apply(arguments);return this.options.handle[this.options.handleType].apply(this.options.handle,a)},_setOption:function(a,b){"show"===a?this._updateShowOption(b):("durationIn"===a||"durationOut"===a||"delayOut"===a)&&this._updateDurations(a,b)},_updateShowOption:function(a){this.options.show=a,"show"!==this.options.show?this.element.hide():(this.element.show(),this._display(this.options.handle[this.options.handleType]("value")),this._positionner.PositionLabels()),this._positionner.options.show=this.options.show},_updateDurations:function(a,b){parseInt(b,10)===b&&(this._positionner.options[a]=b,this.options[a]=b)},_display:function(a){this.options.formatter===!1?this._displayText(Math.round(a)):this._displayText(this.options.formatter(a))},_displayText:function(a){this._valueContainer.text(a)},_toggleClass:function(){this.element.toggleClass("ui-rangeSlider-leftLabel",this.options.isLeft).toggleClass("ui-rangeSlider-rightLabel",!this.options.isLeft)},_mouseDown:function(a){this.options.handle.trigger(a)},_mouseUp:function(a){this.options.handle.trigger(a)},_mouseMove:function(a){this.options.handle.trigger(a)},_onMoving:function(a,b){this._display(b.value)},_onUpdate:function(){"show"===this.options.show&&this.update()},_onSwitch:function(a,b){this.options.isLeft=b,this._toggleClass(),this._positionner.PositionLabels()},pair:function(a){null===this._positionner&&(this._positionner=new b(this.element,a,this.widgetName,{show:this.options.show,durationIn:this.options.durationIn,durationOut:this.options.durationOut,delayOut:this.options.delayOut}),a[this.widgetName]("positionner",this._positionner))},positionner:function(a){return"undefined"!=typeof a&&(this._positionner=a),this._positionner},update:function(){this._positionner.cache=null,this._display(this._handle("value")),"show"===this.options.show&&this._positionner.PositionLabels()}})}(jQuery),function(a){"use strict";a.widget("ui.dateRangeSlider",a.ui.rangeSlider,{options:{bounds:{min:new Date(2010,0,1).valueOf(),max:new Date(2012,0,1).valueOf()},defaultValues:{min:new Date(2010,1,11).valueOf(),max:new Date(2011,1,11).valueOf()}},_create:function(){a.ui.rangeSlider.prototype._create.apply(this),this.element.addClass("ui-dateRangeSlider")},destroy:function(){this.element.removeClass("ui-dateRangeSlider"),a.ui.rangeSlider.prototype.destroy.apply(this)},_setDefaultValues:function(){this._values={min:this.options.defaultValues.min.valueOf(),max:this.options.defaultValues.max.valueOf()}},_setRulerParameters:function(){this.ruler.ruler({min:new Date(this.options.bounds.min),max:new Date(this.options.bounds.max),scales:this.options.scales})},_setOption:function(b,c){("defaultValues"===b||"bounds"===b)&&"undefined"!=typeof c&&null!==c&&this._isValidDate(c.min)&&this._isValidDate(c.max)?a.ui.rangeSlider.prototype._setOption.apply(this,[b,{min:c.min.valueOf(),max:c.max.valueOf()}]):a.ui.rangeSlider.prototype._setOption.apply(this,this._toArray(arguments))},_handleType:function(){return"dateRangeSliderHandle"},option:function(b){if("bounds"===b||"defaultValues"===b){var c=a.ui.rangeSlider.prototype.option.apply(this,arguments);return{min:new Date(c.min),max:new Date(c.max)}}return a.ui.rangeSlider.prototype.option.apply(this,this._toArray(arguments))},_defaultFormatter:function(a){var b=a.getMonth()+1,c=a.getDate();return""+a.getFullYear()+"-"+(10>b?"0"+b:b)+"-"+(10>c?"0"+c:c)},_getFormatter:function(){var a=this.options.formatter;return(this.options.formatter===!1||null===this.options.formatter)&&(a=this._defaultFormatter),function(a){return function(b){return a(new Date(b))}}(a)},values:function(b,c){var d=null;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.values.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.values.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},min:function(b){return this._isValidDate(b)?new Date(a.ui.rangeSlider.prototype.min.apply(this,[b.valueOf()])):new Date(a.ui.rangeSlider.prototype.min.apply(this))},max:function(b){return this._isValidDate(b)?new Date(a.ui.rangeSlider.prototype.max.apply(this,[b.valueOf()])):new Date(a.ui.rangeSlider.prototype.max.apply(this))},bounds:function(b,c){var d;return d=this._isValidDate(b)&&this._isValidDate(c)?a.ui.rangeSlider.prototype.bounds.apply(this,[b.valueOf(),c.valueOf()]):a.ui.rangeSlider.prototype.bounds.apply(this,this._toArray(arguments)),{min:new Date(d.min),max:new Date(d.max)}},_isValidDate:function(a){return"undefined"!=typeof a&&a instanceof Date},_toArray:function(a){return Array.prototype.slice.call(a)}})}(jQuery),function(a){"use strict";a.widget("ui.dateRangeSliderHandle",a.ui.rangeSliderHandle,{_steps:!1,_boundsValues:{},_create:function(){this._createBoundsValues(),a.ui.rangeSliderHandle.prototype._create.apply(this)},_getValueForPosition:function(a){var b=this._getRawValueForPositionAndBounds(a,this.options.bounds.min.valueOf(),this.options.bounds.max.valueOf());return this._constraintValue(new Date(b))},_setOption:function(b,c){return"step"===b?(this.options.step=c,this._createSteps(),void this.update()):(a.ui.rangeSliderHandle.prototype._setOption.apply(this,[b,c]),void("bounds"===b&&this._createBoundsValues()))},_createBoundsValues:function(){this._boundsValues={min:this.options.bounds.min.valueOf(),max:this.options.bounds.max.valueOf()}},_bounds:function(){return this._boundsValues},_createSteps:function(){if(this.options.step===!1||!this._isValidStep())return void(this._steps=!1);var a=new Date(this.options.bounds.min),b=new Date(this.options.bounds.max),c=a,d=0,e=new Date;for(this._steps=[];b>=c&&(1===d||e.valueOf()!==c.valueOf());)e=c,this._steps.push(c.valueOf()),c=this._addStep(a,d,this.options.step),d++;e.valueOf()===c.valueOf()&&(this._steps=!1)},_isValidStep:function(){return"object"==typeof this.options.step},_addStep:function(a,b,c){var d=new Date(a.valueOf());return d=this._addThing(d,"FullYear",b,c.years),d=this._addThing(d,"Month",b,c.months),d=this._addThing(d,"Date",b,7*c.weeks),d=this._addThing(d,"Date",b,c.days),d=this._addThing(d,"Hours",b,c.hours),d=this._addThing(d,"Minutes",b,c.minutes),d=this._addThing(d,"Seconds",b,c.seconds)},_addThing:function(a,b,c,d){return 0===c||0===(d||0)?a:(a["set"+b](a["get"+b]()+c*(d||0)),a)},_round:function(a){if(this._steps===!1)return a;for(var b,c,d=this.options.bounds.max.valueOf(),e=this.options.bounds.min.valueOf(),f=Math.max(0,(a-e)/(d-e)),g=Math.floor(this._steps.length*f);this._steps[g]>a;)g--;for(;g+1<this._steps.length&&this._steps[g+1]<=a;)g++;return g>=this._steps.length-1?this._steps[this._steps.length-1]:0===g?this._steps[0]:(b=this._steps[g],c=this._steps[g+1],c-a>a-b?b:c)},update:function(){this._createBoundsValues(),this._createSteps(),a.ui.rangeSliderHandle.prototype.update.apply(this)},add:function(a,b){return this._addStep(new Date(a),1,b).valueOf()},substract:function(a,b){return this._addStep(new Date(a),-1,b).valueOf()},stepsBetween:function(a,b){if(this.options.step===!1)return b-a;var c=Math.min(a,b),d=Math.max(a,b),e=0,f=!1,g=a>b;for(this.add(c,this.options.step)-c<0&&(f=!0);d>c;)f?d=this.add(d,this.options.step):c=this.add(c,this.options.step),e++;return g?-e:e},multiplyStep:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]*b);return c},stepRatio:function(){if(this.options.step===!1)return 1;var a=this._steps.length;return this.cache.parent.width/a}})}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104,"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-ui-1.10.3.custom.min.js":105}],102:[function(require,module,exports){
(function(global){$=global.$=require("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=require,function browserifyShim(module,define,require){!function(window,document,undefined){!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)}(function($){"use strict";var DataTable=function(oInit){function _fnAddColumn(a,b){var c=DataTable.defaults.columns,d=a.aoColumns.length,e=$.extend({},DataTable.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:document.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.oDefaults:d});if(a.aoColumns.push(e),a.aoPreSearchCols[d]===undefined||null===a.aoPreSearchCols[d])a.aoPreSearchCols[d]=$.extend({},DataTable.models.oSearch);else{var f=a.aoPreSearchCols[d];f.bRegex===undefined&&(f.bRegex=!0),f.bSmart===undefined&&(f.bSmart=!0),f.bCaseInsensitive===undefined&&(f.bCaseInsensitive=!0)}_fnColumnOptions(a,d,null)}function _fnColumnOptions(a,b,c){var d=a.aoColumns[b];c!==undefined&&null!==c&&(c.mDataProp&&!c.mData&&(c.mData=c.mDataProp),c.sType!==undefined&&(d.sType=c.sType,d._bAutoType=!1),$.extend(d,c),_fnMap(d,c,"sWidth","sWidthOrig"),c.iDataSort!==undefined&&(d.aDataSort=[c.iDataSort]),_fnMap(d,c,"aDataSort"));var e=d.mRender?_fnGetObjectDataFn(d.mRender):null,f=_fnGetObjectDataFn(d.mData);d.fnGetData=function(a,b){var c=f(a,b);return d.mRender&&b&&""!==b?e(c,b,a):c},d.fnSetData=_fnSetObjectDataFn(d.mData),a.oFeatures.bSort||(d.bSortable=!1),!d.bSortable||-1==$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableNone,d.sSortingClassJUI=""):-1==$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortable,d.sSortingClassJUI=a.oClasses.sSortJUI):-1!=$.inArray("asc",d.asSorting)&&-1==$.inArray("desc",d.asSorting)?(d.sSortingClass=a.oClasses.sSortableAsc,d.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==$.inArray("asc",d.asSorting)&&-1!=$.inArray("desc",d.asSorting)&&(d.sSortingClass=a.oClasses.sSortableDesc,d.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function _fnAdjustColumnSizing(a){if(a.oFeatures.bAutoWidth===!1)return!1;_fnCalculateColumnWidths(a);for(var b=0,c=a.aoColumns.length;c>b;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function _fnVisibleToColumnIndex(a,b){var c=_fnGetColumns(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function _fnColumnIndexToVisible(a,b){var c=_fnGetColumns(a,"bVisible"),d=$.inArray(b,c);return-1!==d?d:null}function _fnVisbleColumns(a){return _fnGetColumns(a,"bVisible").length}function _fnGetColumns(a,b){var c=[];return $.map(a.aoColumns,function(a,d){a[b]&&c.push(d)}),c}function _fnDetectType(a){for(var b=DataTable.ext.aTypes,c=b.length,d=0;c>d;d++){var e=b[d](a);if(null!==e)return e}return"string"}function _fnReOrderIndex(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;f>e;e++)for(var g=0;f>g;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function _fnColumnOrdering(a){for(var b="",c=0,d=a.aoColumns.length;d>c;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function _fnApplyColumnDefs(a,b,c,d){var e,f,g,h,i,j;if(b)for(e=b.length-1;e>=0;e--){var k=b[e].aTargets;for($.isArray(k)||_fnLog(a,1,"aTargets must be an array of targets, not a "+typeof k),g=0,h=k.length;h>g;g++)if("number"==typeof k[g]&&k[g]>=0){for(;a.aoColumns.length<=k[g];)_fnAddColumn(a);d(k[g],b[e])}else if("number"==typeof k[g]&&k[g]<0)d(a.aoColumns.length+k[g],b[e]);else if("string"==typeof k[g])for(i=0,j=a.aoColumns.length;j>i;i++)("_all"==k[g]||$(a.aoColumns[i].nTh).hasClass(k[g]))&&d(i,b[e])}if(c)for(e=0,f=c.length;f>e;e++)d(e,c[e])}function _fnAddData(a,b){var c,d=$.isArray(b)?b.slice():$.extend(!0,{},b),e=a.aoData.length,f=$.extend(!0,{},DataTable.models.oRow);f._aData=d,a.aoData.push(f);for(var g,h=0,i=a.aoColumns.length;i>h;h++)if(c=a.aoColumns[h],"function"==typeof c.fnRender&&c.bUseRendered&&null!==c.mData?_fnSetCellData(a,e,h,_fnRender(a,e,h)):_fnSetCellData(a,e,h,_fnGetCellData(a,e,h)),c._bAutoType&&"string"!=c.sType){var j=_fnGetCellData(a,e,h,"type");null!==j&&""!==j&&(g=_fnDetectType(j),null===c.sType?c.sType=g:c.sType!=g&&"html"!=c.sType&&(c.sType="string"))}return a.aiDisplayMaster.push(e),a.oFeatures.bDeferRender||_fnCreateTr(a,e),e}function _fnGatherData(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(a.bDeferLoading||null===a.sAjaxSource)for(h=a.nTBody.firstChild;h;){if("TR"==h.nodeName.toUpperCase())for(i=a.aoData.length,h._DT_RowIndex=i,a.aoData.push($.extend(!0,{},DataTable.models.oRow,{nTr:h})),a.aiDisplayMaster.push(i),g=h.firstChild,d=0;g;)n=g.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&(_fnSetCellData(a,i,d,$.trim(g.innerHTML)),d++),g=g.nextSibling;h=h.nextSibling}for(f=_fnGetTrNodes(a),e=[],b=0,c=f.length;c>b;b++)for(g=f[b].firstChild;g;)n=g.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&e.push(g),g=g.nextSibling;for(l=0,m=a.aoColumns.length;m>l;l++){o=a.aoColumns[l],null===o.sTitle&&(o.sTitle=o.nTh.innerHTML);var q,r,s,t,u=o._bAutoType,v="function"==typeof o.fnRender,w=null!==o.sClass,x=o.bVisible;if(u||v||w||!x)for(j=0,k=a.aoData.length;k>j;j++)p=a.aoData[j],q=e[j*m+l],u&&"string"!=o.sType&&(t=_fnGetCellData(a,j,l,"type"),""!==t&&(r=_fnDetectType(t),null===o.sType?o.sType=r:o.sType!=r&&"html"!=o.sType&&(o.sType="string"))),o.mRender?q.innerHTML=_fnGetCellData(a,j,l,"display"):o.mData!==l&&(q.innerHTML=_fnGetCellData(a,j,l,"display")),v&&(s=_fnRender(a,j,l),q.innerHTML=s,o.bUseRendered&&_fnSetCellData(a,j,l,s)),w&&(q.className+=" "+o.sClass),x?p._anHidden[l]=null:(p._anHidden[l]=q,q.parentNode.removeChild(q)),o.fnCreatedCell&&o.fnCreatedCell.call(a.oInstance,q,_fnGetCellData(a,j,l,"display"),p._aData,j,l)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;c>b;b++)p=a.aoData[b],_fnCallbackFire(a,"aoRowCreatedCallback",null,[p.nTr,p._aData,b])}function _fnNodeToDataIndex(a,b){return b._DT_RowIndex!==undefined?b._DT_RowIndex:null}function _fnNodeToColumnIndex(a,b,c){for(var d=_fnGetTdNodes(a,b),e=0,f=a.aoColumns.length;f>e;e++)if(d[e]===c)return e;return-1}function _fnGetRowData(a,b,c,d){for(var e=[],f=0,g=d.length;g>f;f++)e.push(_fnGetCellData(a,b,d[f],c));return e}function _fnGetCellData(a,b,c,d){var e,f=a.aoColumns[c],g=a.aoData[b]._aData;if((e=f.fnGetData(g,d))===undefined)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(_fnLog(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),f.sDefaultContent;if(null===e&&null!==f.sDefaultContent)e=f.sDefaultContent;else if("function"==typeof e)return e();return"display"==d&&null===e?"":e}function _fnSetCellData(a,b,c,d){var e=a.aoColumns[c],f=a.aoData[b]._aData;e.fnSetData(f,d)}function _fnGetObjectDataFn(a){if(null===a)return function(a,b){return null};if("function"==typeof a)return function(b,c,d){return a(b,c,d)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){return b[a]};var b=function(a,c,d){var e,f,g,h=d.split(".");if(""!==d)for(var i=0,j=h.length;j>i;i++){if(e=h[i].match(__reArray)){h[i]=h[i].replace(__reArray,""),""!==h[i]&&(a=a[h[i]]),f=[],h.splice(0,i+1),g=h.join(".");for(var k=0,l=a.length;l>k;k++)f.push(b(a[k],c,g));var m=e[0].substring(1,e[0].length-1);a=""===m?f:f.join(m);break}if(null===a||a[h[i]]===undefined)return undefined;a=a[h[i]]}return a};return function(c,d){return b(c,d,a)}}function _fnSetObjectDataFn(a){if(null===a)return function(a,b){};if("function"==typeof a)return function(b,c){a(b,"set",c)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){b[a]=c};var b=function(a,c,d){for(var e,f,g,h,i=d.split("."),j=0,k=i.length-1;k>j;j++){if(f=i[j].match(__reArray)){i[j]=i[j].replace(__reArray,""),a[i[j]]=[],e=i.slice(),e.splice(0,j+1),h=e.join(".");for(var l=0,m=c.length;m>l;l++)g={},b(g,c[l],h),a[i[j]].push(g);return}(null===a[i[j]]||a[i[j]]===undefined)&&(a[i[j]]={}),a=a[i[j]]}a[i[i.length-1].replace(__reArray,"")]=c};return function(c,d){return b(c,d,a)}}function _fnGetDataMaster(a){for(var b=[],c=a.aoData.length,d=0;c>d;d++)b.push(a.aoData[d]._aData);return b}function _fnClearTable(a){a.aoData.splice(0,a.aoData.length),a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length),a.aiDisplay.splice(0,a.aiDisplay.length),_fnCalculateEnd(a)}function _fnDeleteIndex(a,b){for(var c=-1,d=0,e=a.length;e>d;d++)a[d]==b?c=d:a[d]>b&&a[d]--;-1!=c&&a.splice(c,1)}function _fnRender(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},_fnGetCellData(a,b,c,"display"))}function _fnCreateTr(a,b){var c,d=a.aoData[b];if(null===d.nTr){d.nTr=document.createElement("tr"),d.nTr._DT_RowIndex=b,d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId),d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var e=0,f=a.aoColumns.length;f>e;e++){var g=a.aoColumns[e];c=document.createElement(g.sCellType),c.innerHTML="function"!=typeof g.fnRender||g.bUseRendered&&null!==g.mData?_fnGetCellData(a,b,e,"display"):_fnRender(a,b,e),null!==g.sClass&&(c.className=g.sClass),g.bVisible?(d.nTr.appendChild(c),d._anHidden[e]=null):d._anHidden[e]=c,g.fnCreatedCell&&g.fnCreatedCell.call(a.oInstance,c,_fnGetCellData(a,b,e,"display"),d._aData,b,e)}_fnCallbackFire(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}function _fnBuildHead(a){var b,c,d,e=$("th, td",a.nTHead).length;if(0!==e)for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&$(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML&&(c.innerHTML=a.aoColumns[b].sTitle);else{var f=document.createElement("tr");for(b=0,d=a.aoColumns.length;d>b;b++)c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&$(c).addClass(a.aoColumns[b].sClass),f.appendChild(c);$(a.nTHead).html("")[0].appendChild(f),_fnDetectHeader(a.aoHeader,a.nTHead)}if($(a.nTHead).children("tr").attr("role","row"),a.bJUI)for(b=0,d=a.aoColumns.length;d>b;b++){c=a.aoColumns[b].nTh;var g=document.createElement("div");g.className=a.oClasses.sSortJUIWrapper,$(c).contents().appendTo(g);var h=document.createElement("span");h.className=a.oClasses.sSortIcon,g.appendChild(h),c.appendChild(g)}if(a.oFeatures.bSort)for(b=0;b<a.aoColumns.length;b++)a.aoColumns[b].bSortable!==!1?_fnSortAttachListener(a,a.aoColumns[b].nTh,b):$(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone);if(""!==a.oClasses.sFooterTH&&$(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH),null!==a.nTFoot){var i=_fnGetUniqueThs(a,null,a.aoFooter);for(b=0,d=a.aoColumns.length;d>b;b++)i[b]&&(a.aoColumns[b].nTf=i[b],a.aoColumns[b].sClass&&$(i[b]).addClass(a.aoColumns[b].sClass))}}function _fnDrawHead(a,b,c){var d,e,f,g,h,i,j,k,l,m=[],n=[],o=a.aoColumns.length;for(c===undefined&&(c=!1),d=0,e=b.length;e>d;d++){for(m[d]=b[d].slice(),m[d].nTr=b[d].nTr,f=o-1;f>=0;f--)a.aoColumns[f].bVisible||c||m[d].splice(f,1);n.push([])}for(d=0,e=m.length;e>d;d++){if(j=m[d].nTr)for(;i=j.firstChild;)j.removeChild(i);for(f=0,g=m[d].length;g>f;f++)if(k=1,l=1,n[d][f]===undefined){for(j.appendChild(m[d][f].cell),n[d][f]=1;m[d+k]!==undefined&&m[d][f].cell==m[d+k][f].cell;)n[d+k][f]=1,k++;for(;m[d][f+l]!==undefined&&m[d][f].cell==m[d][f+l].cell;){for(h=0;k>h;h++)n[d+h][f+l]=1;l++}m[d][f].cell.rowSpan=k,m[d][f].cell.colSpan=l}}}function _fnDraw(a){var b=_fnCallbackFire(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==$.inArray(!1,b))return void _fnProcessingDisplay(a,!1);var c,d,e,f=[],g=0,h=a.asStripeClasses.length,i=a.aoOpenRows.length;if(a.bDrawing=!0,a.iInitDisplayStart!==undefined&&-1!=a.iInitDisplayStart&&(a.oFeatures.bServerSide?a._iDisplayStart=a.iInitDisplayStart:a._iDisplayStart=a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,_fnCalculateEnd(a)),a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(a.oFeatures.bServerSide){if(!a.bDestroying&&!_fnAjaxUpdate(a))return}else a.iDraw++;if(0!==a.aiDisplay.length){var j=a._iDisplayStart,k=a._iDisplayEnd;a.oFeatures.bServerSide&&(j=0,k=a.aoData.length);for(var l=j;k>l;l++){var m=a.aoData[a.aiDisplay[l]];null===m.nTr&&_fnCreateTr(a,a.aiDisplay[l]);var n=m.nTr;if(0!==h){var o=a.asStripeClasses[g%h];m._sRowStripe!=o&&($(n).removeClass(m._sRowStripe).addClass(o),m._sRowStripe=o)}if(_fnCallbackFire(a,"aoRowCallback",null,[n,a.aoData[a.aiDisplay[l]]._aData,g,l]),f.push(n),g++,0!==i)for(var p=0;i>p;p++)if(n==a.aoOpenRows[p].nParent){f.push(a.aoOpenRows[p].nTr);break}}}else{f[0]=document.createElement("tr"),a.asStripeClasses[0]&&(f[0].className=a.asStripeClasses[0]);var q=a.oLanguage,r=q.sZeroRecords;1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?q.sEmptyTable&&0===a.fnRecordsTotal()&&(r=q.sEmptyTable):r=q.sLoadingRecords;var s=document.createElement("td");s.setAttribute("valign","top"),s.colSpan=_fnVisbleColumns(a),s.className=a.oClasses.sRowEmpty,s.innerHTML=_fnInfoMacros(a,r),f[g].appendChild(s)}_fnCallbackFire(a,"aoHeaderCallback","header",[$(a.nTHead).children("tr")[0],_fnGetDataMaster(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]),_fnCallbackFire(a,"aoFooterCallback","footer",[$(a.nTFoot).children("tr")[0],_fnGetDataMaster(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);var t,u=document.createDocumentFragment(),v=document.createDocumentFragment();if(a.nTBody){if(t=a.nTBody.parentNode,v.appendChild(a.nTBody),!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;e=a.nTBody.firstChild;)a.nTBody.removeChild(e);for(c=0,d=f.length;d>c;c++)u.appendChild(f[c]);a.nTBody.appendChild(u),null!==t&&t.appendChild(a.nTBody)}_fnCallbackFire(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1,a.oFeatures.bServerSide&&(_fnProcessingDisplay(a,!1),a._bInitComplete||_fnInitComplete(a))}function _fnReDraw(a){a.oFeatures.bSort?_fnSort(a,a.oPreviousSearch):a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch):(_fnCalculateEnd(a),_fnDraw(a))}function _fnAddOptionsHtml(a){var b=$("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable),a.nTableWrapper=$('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var c,d,e,f,g,h,i,j=a.nTableWrapper,k=a.sDom.split(""),l=0;l<k.length;l++){if(d=0,e=k[l],"<"==e){if(f=$("<div></div>")[0],g=k[l+1],"'"==g||'"'==g){for(h="",i=2;k[l+i]!=g;)h+=k[l+i],i++;if("H"==h?h=a.oClasses.sJUIHeader:"F"==h&&(h=a.oClasses.sJUIFooter),-1!=h.indexOf(".")){var m=h.split(".");f.id=m[0].substr(1,m[0].length-1),f.className=m[1]}else"#"==h.charAt(0)?f.id=h.substr(1,h.length-1):f.className=h;l+=i}j.appendChild(f),j=f}else if(">"==e)j=j.parentNode;else if("l"==e&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)c=_fnFeatureHtmlLength(a),d=1;else if("f"==e&&a.oFeatures.bFilter)c=_fnFeatureHtmlFilter(a),d=1;else if("r"==e&&a.oFeatures.bProcessing)c=_fnFeatureHtmlProcessing(a),d=1;else if("t"==e)c=_fnFeatureHtmlTable(a),d=1;else if("i"==e&&a.oFeatures.bInfo)c=_fnFeatureHtmlInfo(a),d=1;else if("p"==e&&a.oFeatures.bPaginate)c=_fnFeatureHtmlPaginate(a),d=1;else if(0!==DataTable.ext.aoFeatures.length)for(var n=DataTable.ext.aoFeatures,o=0,p=n.length;p>o;o++)if(e==n[o].cFeature){c=n[o].fnInit(a),c&&(d=1);break}1==d&&null!==c&&("object"!=typeof a.aanFeatures[e]&&(a.aanFeatures[e]=[]),a.aanFeatures[e].push(c),j.appendChild(c))}b.parentNode.replaceChild(a.nTableWrapper,b)}function _fnDetectHeader(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=$(b).children("tr"),o=function(a,b,c){for(var d=a[b];d[c];)c++;return c};for(a.splice(0,a.length),e=0,h=n.length;h>e;e++)a.push([]);for(e=0,h=n.length;h>e;e++)for(c=n[e],j=0,d=c.firstChild;d;){if("TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase())for(k=1*d.getAttribute("colspan"),l=1*d.getAttribute("rowspan"),k=k&&0!==k&&1!==k?k:1,l=l&&0!==l&&1!==l?l:1,i=o(a,e,j),m=1===k?!0:!1,g=0;k>g;g++)for(f=0;l>f;f++)a[e+f][i+g]={cell:d,unique:m},a[e+f].nTr=c;d=d.nextSibling}}function _fnGetUniqueThs(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],_fnDetectHeader(c,b)));for(var e=0,f=c.length;f>e;e++)for(var g=0,h=c[e].length;h>g;g++)!c[e][g].unique||d[g]&&a.bSortCellsTop||(d[g]=c[e][g].cell);return d}function _fnAjaxUpdate(a){if(a.bAjaxDataGet){a.iDraw++,_fnProcessingDisplay(a,!0);var b=(a.aoColumns.length,_fnAjaxParameters(a));return _fnServerParams(a,b),a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){_fnAjaxUpdateDraw(a,b)},a),!1}return!0}function _fnAjaxParameters(a){var b,c,d,e,f,g=a.aoColumns.length,h=[];for(h.push({name:"sEcho",value:a.iDraw}),h.push({name:"iColumns",value:g}),h.push({name:"sColumns",value:_fnColumnOrdering(a)}),h.push({name:"iDisplayStart",value:a._iDisplayStart}),h.push({name:"iDisplayLength",value:a.oFeatures.bPaginate!==!1?a._iDisplayLength:-1}),e=0;g>e;e++)b=a.aoColumns[e].mData,h.push({name:"mDataProp_"+e,value:"function"==typeof b?"function":b});if(a.oFeatures.bFilter!==!1)for(h.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),h.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),e=0;g>e;e++)h.push({name:"sSearch_"+e,value:a.aoPreSearchCols[e].sSearch}),h.push({name:"bRegex_"+e,value:a.aoPreSearchCols[e].bRegex}),h.push({name:"bSearchable_"+e,value:a.aoColumns[e].bSearchable});if(a.oFeatures.bSort!==!1){var i=0;for(c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),e=0;e<c.length;e++)for(d=a.aoColumns[c[e][0]].aDataSort,f=0;f<d.length;f++)h.push({name:"iSortCol_"+i,value:d[f]}),h.push({name:"sSortDir_"+i,value:c[e][1]}),i++;for(h.push({name:"iSortingCols",value:i}),e=0;g>e;e++)h.push({name:"bSortable_"+e,value:a.aoColumns[e].bSortable})}return h}function _fnServerParams(a,b){_fnCallbackFire(a,"aoServerParams","serverParams",[b])}function _fnAjaxUpdateDraw(a,b){if(b.sEcho!==undefined){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&_fnClearTable(a),a._iRecordsTotal=parseInt(b.iTotalRecords,10),a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c,d=_fnColumnOrdering(a),e=b.sColumns!==undefined&&""!==d&&b.sColumns!=d;e&&(c=_fnReOrderIndex(a,b.sColumns));for(var f=_fnGetObjectDataFn(a.sAjaxDataProp)(b),g=0,h=f.length;h>g;g++)if(e){for(var i=[],j=0,k=a.aoColumns.length;k>j;j++)i.push(f[g][c[j]]);_fnAddData(a,i)}else _fnAddData(a,f[g]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,_fnDraw(a),a.bAjaxDataGet=!0,_fnProcessingDisplay(a,!1)}function _fnFeatureHtmlFilter(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch;c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />';var d=document.createElement("div");d.className=a.oClasses.sFilter,d.innerHTML="<label>"+c+"</label>",a.aanFeatures.f||(d.id=a.sTableId+"_filter");var e=$('input[type="text"]',d);return d._DT_Input=e[0],e.val(b.sSearch.replace('"',"&quot;")),e.bind("keyup.DT",function(c){for(var d=a.aanFeatures.f,e=""===this.value?"":this.value,f=0,g=d.length;g>f;f++)d[f]!=$(this).parents("div.dataTables_filter")[0]&&$(d[f]._DT_Input).val(e);e!=b.sSearch&&_fnFilterComplete(a,{sSearch:e,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})}),e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){return 13==a.keyCode?!1:void 0}),d}function _fnFilterComplete(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)f(b);else{_fnFilter(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive),f(b);for(var g=0;g<a.aoPreSearchCols.length;g++)_fnFilterColumn(a,e[g].sSearch,g,e[g].bRegex,e[g].bSmart,e[g].bCaseInsensitive);_fnFilterCustom(a)}a.bFiltered=!0,$(a.oInstance).trigger("filter",a),a._iDisplayStart=0,_fnCalculateEnd(a),_fnDraw(a),_fnBuildSearchArray(a,0)}function _fnFilterCustom(a){for(var b=DataTable.ext.afnFiltering,c=_fnGetColumns(a,"bSearchable"),d=0,e=b.length;e>d;d++)for(var f=0,g=0,h=a.aiDisplay.length;h>g;g++){var i=a.aiDisplay[g-f],j=b[d](a,_fnGetRowData(a,i,"filter",c),i);j||(a.aiDisplay.splice(g-f,1),f++)}}function _fnFilterColumn(a,b,c,d,e,f){if(""!==b)for(var g=0,h=_fnFilterCreateSearch(b,d,e,f),i=a.aiDisplay.length-1;i>=0;i--){var j=_fnDataToSearch(_fnGetCellData(a,a.aiDisplay[i],c,"filter"),a.aoColumns[c].sType);h.test(j)||(a.aiDisplay.splice(i,1),g++)}}function _fnFilter(a,b,c,d,e,f){var g,h=_fnFilterCreateSearch(b,d,e,f),i=a.oPreviousSearch;if(c||(c=0),0!==DataTable.ext.afnFiltering.length&&(c=1),b.length<=0)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||i.sSearch.length>b.length||1==c||0!==b.indexOf(i.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),_fnBuildSearchArray(a,1),g=0;g<a.aiDisplayMaster.length;g++)h.test(a.asDataSearch[g])&&a.aiDisplay.push(a.aiDisplayMaster[g]);else{var j=0;for(g=0;g<a.asDataSearch.length;g++)h.test(a.asDataSearch[g])||(a.aiDisplay.splice(g-j,1),j++)}}function _fnBuildSearchArray(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=_fnGetColumns(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;f>e;e++)a.asDataSearch[e]=_fnBuildSearchRow(a,_fnGetRowData(a,d[e],"filter",c))}}function _fnBuildSearchRow(a,b){var c=b.join("  ");return-1!==c.indexOf("&")&&(c=$("<div>").html(c).text()),c.replace(/[\n\r]/g," ")}function _fnFilterCreateSearch(a,b,c,d){var e,f;return c?(e=b?a.split(" "):_fnEscapeRegex(a).split(" "),f="^(?=.*?"+e.join(")(?=.*?")+").*$",new RegExp(f,d?"i":"")):(a=b?a:_fnEscapeRegex(a),new RegExp(a,d?"i":""))}function _fnDataToSearch(a,b){return"function"==typeof DataTable.ext.ofnSearch[b]?DataTable.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"==typeof a?a.replace(/[\r\n]/g," "):a}function _fnEscapeRegex(a){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"],c=new RegExp("(\\"+b.join("|\\")+")","g");return a.replace(c,"\\$1")}function _fnFeatureHtmlInfo(a){var b=document.createElement("div");return b.className=a.oClasses.sInfo,a.aanFeatures.i||(a.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),b.id=a.sTableId+"_info"),a.nTable.setAttribute("aria-describedby",a.sTableId+"_info"),b}function _fnUpdateInfo(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b,c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay();b=0===g?c.sInfoEmpty:c.sInfo,g!=f&&(b+=" "+c.sInfoFiltered),b+=c.sInfoPostFix,b=_fnInfoMacros(a,b),null!==c.fnInfoCallback&&(b=c.fnInfoCallback.call(a.oInstance,a,d,e,f,g,b));for(var h=a.aanFeatures.i,i=0,j=h.length;j>i;i++)$(h[i]).html(b)}}function _fnInfoMacros(a,b){var c=a._iDisplayStart+1,d=a.fnFormatNumber(c),e=a.fnDisplayEnd(),f=a.fnFormatNumber(e),g=a.fnRecordsDisplay(),h=a.fnFormatNumber(g),i=a.fnRecordsTotal(),j=a.fnFormatNumber(i);return a.oScroll.bInfinite&&(d=a.fnFormatNumber(1)),b.replace(/_START_/g,d).replace(/_END_/g,f).replace(/_TOTAL_/g,h).replace(/_MAX_/g,j)}function _fnInitialise(a){var b,c,d=a.iInitDisplayStart;if(a.bInitialised===!1)return void setTimeout(function(){_fnInitialise(a)},200);for(_fnAddOptionsHtml(a),_fnBuildHead(a),_fnDrawHead(a,a.aoHeader),a.nTFoot&&_fnDrawHead(a,a.aoFooter),_fnProcessingDisplay(a,!0),a.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(a),b=0,c=a.aoColumns.length;c>b;b++)null!==a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=_fnStringToCss(a.aoColumns[b].sWidth));if(a.oFeatures.bSort?_fnSort(a):a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),_fnCalculateEnd(a),_fnDraw(a)),null!==a.sAjaxSource&&!a.oFeatures.bServerSide){var e=[];return _fnServerParams(a,e),void a.fnServerData.call(a.oInstance,a.sAjaxSource,e,function(c){var e=""!==a.sAjaxDataProp?_fnGetObjectDataFn(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)_fnAddData(a,e[b]);a.iInitDisplayStart=d,a.oFeatures.bSort?_fnSort(a):(a.aiDisplay=a.aiDisplayMaster.slice(),_fnCalculateEnd(a),_fnDraw(a)),_fnProcessingDisplay(a,!1),_fnInitComplete(a,c)},a)}a.oFeatures.bServerSide||(_fnProcessingDisplay(a,!1),_fnInitComplete(a))}function _fnInitComplete(a,b){a._bInitComplete=!0,_fnCallbackFire(a,"aoInitComplete","init",[a,b])}function _fnLanguageCompat(a){var b=DataTable.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&_fnMap(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&_fnMap(a,a,"sZeroRecords","sLoadingRecords")}function _fnFeatureHtmlLength(a){if(a.oScroll.bInfinite)return null;var b,c,d='name="'+a.sTableId+'_length"',e='<select size="1" '+d+">",f=a.aLengthMenu;if(2==f.length&&"object"==typeof f[0]&&"object"==typeof f[1])for(b=0,c=f[0].length;c>b;b++)e+='<option value="'+f[0][b]+'">'+f[1][b]+"</option>";else for(b=0,c=f.length;c>b;b++)e+='<option value="'+f[b]+'">'+f[b]+"</option>";e+="</select>";var g=document.createElement("div");return a.aanFeatures.l||(g.id=a.sTableId+"_length"),g.className=a.oClasses.sLength,g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",e)+"</label>",$('select option[value="'+a._iDisplayLength+'"]',g).attr("selected",!0),$("select",g).bind("change.DT",function(d){var e=$(this).val(),f=a.aanFeatures.l;for(b=0,c=f.length;c>b;b++)f[b]!=this.parentNode&&$("select",f[b]).val(e);a._iDisplayLength=parseInt(e,10),_fnCalculateEnd(a),a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,a._iDisplayStart<0&&(a._iDisplayStart=0)),-1==a._iDisplayLength&&(a._iDisplayStart=0),_fnDraw(a)}),$("select",g).attr("aria-controls",a.sTableId),g}function _fnCalculateEnd(a){a.oFeatures.bPaginate===!1?a._iDisplayEnd=a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a._iDisplayEnd=a.aiDisplay.length:a._iDisplayEnd=a._iDisplayStart+a._iDisplayLength}function _fnFeatureHtmlPaginate(a){if(a.oScroll.bInfinite)return null;var b=document.createElement("div");return b.className=a.oClasses.sPaging+a.sPaginationType,DataTable.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){_fnCalculateEnd(a),_fnDraw(a)}),a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){DataTable.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){_fnCalculateEnd(a),_fnDraw(a)})},sName:"pagination"}),b}function _fnPageChange(a,b){var c=a._iDisplayStart;if("number"==typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=a._iDisplayLength>=0?a._iDisplayStart-a._iDisplayLength:0,a._iDisplayStart<0&&(a._iDisplayStart=0);else if("next"==b)a._iDisplayLength>=0?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(a._iDisplayLength>=0){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else a._iDisplayStart=0;else _fnLog(a,0,"Unknown paging action: "+b);return $(a.oInstance).trigger("page",a),c!=a._iDisplayStart}function _fnFeatureHtmlProcessing(a){var b=document.createElement("div");return a.aanFeatures.r||(b.id=a.sTableId+"_processing"),b.innerHTML=a.oLanguage.sProcessing,b.className=a.oClasses.sProcessing,a.nTable.parentNode.insertBefore(b,a.nTable),b}function _fnProcessingDisplay(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,d=0,e=c.length;e>d;d++)c[d].style.visibility=b?"visible":"hidden";$(a.oInstance).trigger("processing",[a,b])}function _fnFeatureHtmlTable(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var b=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=a.nTable.cloneNode(!1),i=a.nTable.cloneNode(!1),j=a.nTable.getElementsByTagName("thead")[0],k=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],l=a.oClasses;c.appendChild(d),f.appendChild(g),e.appendChild(a.nTable),b.appendChild(c),b.appendChild(e),d.appendChild(h),h.appendChild(j),null!==k&&(b.appendChild(f),g.appendChild(i),i.appendChild(k)),b.className=l.sScrollWrapper,c.className=l.sScrollHead,d.className=l.sScrollHeadInner,e.className=l.sScrollBody,f.className=l.sScrollFoot,g.className=l.sScrollFootInner,a.oScroll.bAutoCss&&(c.style.overflow="hidden",c.style.position="relative",f.style.overflow="hidden",e.style.overflow="auto"),c.style.border="0",c.style.width="100%",f.style.border="0",d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%",h.removeAttribute("id"),h.style.marginLeft="0",a.nTable.style.marginLeft="0",null!==k&&(i.removeAttribute("id"),i.style.marginLeft="0");var m=$(a.nTable).children("caption");return m.length>0&&(m=m[0],"top"===m._captionSide?h.appendChild(m):"bottom"===m._captionSide&&k&&i.appendChild(m)),""!==a.oScroll.sX&&(c.style.width=_fnStringToCss(a.oScroll.sX),e.style.width=_fnStringToCss(a.oScroll.sX),null!==k&&(f.style.width=_fnStringToCss(a.oScroll.sX)),$(e).scroll(function(a){c.scrollLeft=this.scrollLeft,null!==k&&(f.scrollLeft=this.scrollLeft)})),""!==a.oScroll.sY&&(e.style.height=_fnStringToCss(a.oScroll.sY)),a.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),a.oScroll.bInfinite&&$(e).scroll(function(){a.bDrawing||0===$(this).scrollTop()||$(this).scrollTop()+$(this).height()>$(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(_fnPageChange(a,"next"),_fnCalculateEnd(a),_fnDraw(a))}),a.nScrollHead=c,a.nScrollFoot=f,b}function _fnScrollDraw(a){var b,c,d,e,f,g,h,i,j,k,l,m=a.nScrollHead.getElementsByTagName("div")[0],n=m.getElementsByTagName("table")[0],o=a.nTable.parentNode,p=[],q=[],r=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,s=null!==a.nTFoot?r.getElementsByTagName("table")[0]:null,t=a.oBrowser.bScrollOversize,u=function(a){h=a.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0};$(a.nTable).children("thead, tfoot").remove(),j=$(a.nTHead).clone()[0],a.nTable.insertBefore(j,a.nTable.childNodes[0]),d=a.nTHead.getElementsByTagName("tr"),e=j.getElementsByTagName("tr"),null!==a.nTFoot&&(k=$(a.nTFoot).clone()[0],a.nTable.insertBefore(k,a.nTable.childNodes[1]),g=a.nTFoot.getElementsByTagName("tr"),f=k.getElementsByTagName("tr")),""===a.oScroll.sX&&(o.style.width="100%",m.parentNode.style.width="100%");var v=_fnGetUniqueThs(a,j);for(b=0,c=v.length;c>b;b++)i=_fnVisibleToColumnIndex(a,b),v[b].style.width=a.aoColumns[i].sWidth;if(null!==a.nTFoot&&_fnApplyToChildren(function(a){a.style.width=""},f),a.oScroll.bCollapse&&""!==a.oScroll.sY&&(o.style.height=o.offsetHeight+a.nTHead.offsetHeight+"px"),l=$(a.nTable).outerWidth(),""===a.oScroll.sX?(a.nTable.style.width="100%",t&&($("tbody",o).height()>o.offsetHeight||"scroll"==$(o).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss($(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=_fnStringToCss(a.oScroll.sXInner):l==$(o).width()&&$(o).height()<$(a.nTable).height()?(a.nTable.style.width=_fnStringToCss(l-a.oScroll.iBarWidth),$(a.nTable).outerWidth()>l-a.oScroll.iBarWidth&&(a.nTable.style.width=_fnStringToCss(l))):a.nTable.style.width=_fnStringToCss(l),l=$(a.nTable).outerWidth(),_fnApplyToChildren(u,e),_fnApplyToChildren(function(a){p.push(_fnStringToCss($(a).width()))},e),_fnApplyToChildren(function(a,b){a.style.width=p[b]},d),$(e).height(0),null!==a.nTFoot&&(_fnApplyToChildren(u,f),_fnApplyToChildren(function(a){q.push(_fnStringToCss($(a).width()))},f),_fnApplyToChildren(function(a,b){a.style.width=q[b]},g),$(f).height(0)),
_fnApplyToChildren(function(a,b){a.innerHTML="",a.style.width=p[b]},e),null!==a.nTFoot&&_fnApplyToChildren(function(a,b){a.innerHTML="",a.style.width=q[b]},f),$(a.nTable).outerWidth()<l){var w=o.scrollHeight>o.offsetHeight||"scroll"==$(o).css("overflow-y")?l+a.oScroll.iBarWidth:l;t&&(o.scrollHeight>o.offsetHeight||"scroll"==$(o).css("overflow-y"))&&(a.nTable.style.width=_fnStringToCss(w-a.oScroll.iBarWidth)),o.style.width=_fnStringToCss(w),a.nScrollHead.style.width=_fnStringToCss(w),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss(w)),""===a.oScroll.sX?_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&_fnLog(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else o.style.width=_fnStringToCss("100%"),a.nScrollHead.style.width=_fnStringToCss("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=_fnStringToCss("100%"));if(""===a.oScroll.sY&&t&&(o.style.height=_fnStringToCss(a.nTable.offsetHeight+a.oScroll.iBarWidth)),""!==a.oScroll.sY&&a.oScroll.bCollapse){o.style.height=_fnStringToCss(a.oScroll.sY);var x=""!==a.oScroll.sX&&a.nTable.offsetWidth>o.offsetWidth?a.oScroll.iBarWidth:0;a.nTable.offsetHeight<o.offsetHeight&&(o.style.height=_fnStringToCss(a.nTable.offsetHeight+x))}var y=$(a.nTable).outerWidth();n.style.width=_fnStringToCss(y),m.style.width=_fnStringToCss(y);var z=$(a.nTable).height()>o.clientHeight||"scroll"==$(o).css("overflow-y");m.style.paddingRight=z?a.oScroll.iBarWidth+"px":"0px",null!==a.nTFoot&&(s.style.width=_fnStringToCss(y),r.style.width=_fnStringToCss(y),r.style.paddingRight=z?a.oScroll.iBarWidth+"px":"0px"),$(o).scroll(),(a.bSorted||a.bFiltered)&&(o.scrollTop=0)}function _fnApplyToChildren(a,b,c){for(var d,e,f=0,g=0,h=b.length;h>g;){for(d=b[g].firstChild,e=c?c[g].firstChild:null;d;)1===d.nodeType&&(c?a(d,e,f):a(d,f),f++),d=d.nextSibling,e=c?e.nextSibling:null;g++}}function _fnConvertToWidth(a,b){if(!a||null===a||""===a)return 0;b||(b=document.body);var c,d=document.createElement("div");return d.style.width=_fnStringToCss(a),b.appendChild(d),c=d.offsetWidth,b.removeChild(d),c}function _fnCalculateColumnWidths(a){var b,c,d,e,f=(a.nTable.offsetWidth,0),g=0,h=a.aoColumns.length,i=$("th",a.nTHead),j=a.nTable.getAttribute("width"),k=a.nTable.parentNode;for(c=0;h>c;c++)a.aoColumns[c].bVisible&&(g++,null!==a.aoColumns[c].sWidth&&(b=_fnConvertToWidth(a.aoColumns[c].sWidthOrig,k),null!==b&&(a.aoColumns[c].sWidth=_fnStringToCss(b)),f++));if(h==i.length&&0===f&&g==h&&""===a.oScroll.sX&&""===a.oScroll.sY)for(c=0;c<a.aoColumns.length;c++)b=$(i[c]).width(),null!==b&&(a.aoColumns[c].sWidth=_fnStringToCss(b));else{var l=a.nTable.cloneNode(!1),m=a.nTHead.cloneNode(!0),n=document.createElement("tbody"),o=document.createElement("tr");l.removeAttribute("id"),l.appendChild(m),null!==a.nTFoot&&(l.appendChild(a.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(a){a.style.width=""},l.getElementsByTagName("tr"))),l.appendChild(n),n.appendChild(o);var p=$("thead th",l);0===p.length&&(p=$("tbody tr:eq(0)>td",l));var q=_fnGetUniqueThs(a,m);for(d=0,c=0;h>c;c++){var r=a.aoColumns[c];r.bVisible&&null!==r.sWidthOrig&&""!==r.sWidthOrig?q[c-d].style.width=_fnStringToCss(r.sWidthOrig):r.bVisible?q[c-d].style.width="":d++}for(c=0;h>c;c++)if(a.aoColumns[c].bVisible){var s=_fnGetWidestNode(a,c);null!==s&&(s=s.cloneNode(!0),""!==a.aoColumns[c].sContentPadding&&(s.innerHTML+=a.aoColumns[c].sContentPadding),o.appendChild(s))}k.appendChild(l),""!==a.oScroll.sX&&""!==a.oScroll.sXInner?l.style.width=_fnStringToCss(a.oScroll.sXInner):""!==a.oScroll.sX?(l.style.width="",$(l).width()<k.offsetWidth&&(l.style.width=_fnStringToCss(k.offsetWidth))):""!==a.oScroll.sY?l.style.width=_fnStringToCss(k.offsetWidth):j&&(l.style.width=_fnStringToCss(j)),l.style.visibility="hidden",_fnScrollingWidthAdjust(a,l);var t=$("tbody tr:eq(0)",l).children();if(0===t.length&&(t=_fnGetUniqueThs(a,$("thead",l)[0])),""!==a.oScroll.sX){var u=0;for(d=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(u+=null===a.aoColumns[c].sWidthOrig?$(t[d]).outerWidth():parseInt(a.aoColumns[c].sWidth.replace("px",""),10)+($(t[d]).outerWidth()-$(t[d]).width()),d++);l.style.width=_fnStringToCss(u),a.nTable.style.width=_fnStringToCss(u)}for(d=0,c=0;c<a.aoColumns.length;c++)a.aoColumns[c].bVisible&&(e=$(t[d]).width(),null!==e&&e>0&&(a.aoColumns[c].sWidth=_fnStringToCss(e)),d++);var v=$(l).css("width");a.nTable.style.width=-1!==v.indexOf("%")?v:_fnStringToCss($(l).outerWidth()),l.parentNode.removeChild(l)}j&&(a.nTable.style.width=_fnStringToCss(j))}function _fnScrollingWidthAdjust(a,b){if(""===a.oScroll.sX&&""!==a.oScroll.sY){$(b).width();b.style.width=_fnStringToCss($(b).outerWidth()-a.oScroll.iBarWidth)}else""!==a.oScroll.sX&&(b.style.width=_fnStringToCss($(b).outerWidth()))}function _fnGetWidestNode(a,b){var c=_fnGetMaxLenString(a,b);if(0>c)return null;if(null===a.aoData[c].nTr){var d=document.createElement("td");return d.innerHTML=_fnGetCellData(a,c,b,""),d}return _fnGetTdNodes(a,c)[b]}function _fnGetMaxLenString(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=_fnGetCellData(a,e,b,"display")+"";f=f.replace(/<.*?>/g,""),f.length>c&&(c=f.length,d=e)}return d}function _fnStringToCss(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||b>57?a:a+"px"}function _fnScrollBarWidth(){var a=document.createElement("p"),b=a.style;b.width="100%",b.height="200px",b.padding="0px";var c=document.createElement("div");b=c.style,b.position="absolute",b.top="0px",b.left="0px",b.visibility="hidden",b.width="200px",b.height="150px",b.padding="0px",b.overflow="hidden",c.appendChild(a),document.body.appendChild(c);var d=a.offsetWidth;c.style.overflow="scroll";var e=a.offsetWidth;return d==e&&(e=c.clientWidth),document.body.removeChild(c),d-e}function _fnSort(a,b){var c,d,e,f,g,h,i,j,k=[],l=[],m=DataTable.ext.oSort,n=a.aoData,o=a.aoColumns,p=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){for(k=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),c=0;c<k.length;c++){var q=k[c][0],r=_fnColumnIndexToVisible(a,q);if(i=a.aoColumns[q].sSortDataType,DataTable.ext.afnSortData[i]){var s=DataTable.ext.afnSortData[i].call(a.oInstance,a,q,r);if(s.length===n.length)for(e=0,f=n.length;f>e;e++)_fnSetCellData(a,e,q,s[e]);else _fnLog(a,0,"Returned data sort array (col "+q+") is the wrong length")}}for(c=0,d=a.aiDisplayMaster.length;d>c;c++)l[a.aiDisplayMaster[c]]=c;var t,u,v=k.length;for(c=0,d=n.length;d>c;c++)for(e=0;v>e;e++)for(u=o[k[e][0]].aDataSort,g=0,h=u.length;h>g;g++)i=o[u[g]].sType,t=m[(i?i:"string")+"-pre"],n[c]._aSortData[u[g]]=t?t(_fnGetCellData(a,c,u[g],"sort")):_fnGetCellData(a,c,u[g],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g,h;for(c=0;v>c;c++)for(g=o[k[c][0]].aDataSort,d=0,e=g.length;e>d;d++)if(h=o[g[d]].sType,f=m[(h?h:"string")+"-"+k[c][1]](n[a]._aSortData[g[d]],n[b]._aSortData[g[d]]),0!==f)return f;return m["numeric-asc"](l[a],l[b])})}for(b!==undefined&&!b||a.oFeatures.bDeferRender||_fnSortingClasses(a),c=0,d=a.aoColumns.length;d>c;c++){var w=o[c].sTitle.replace(/<.*?>/g,"");if(j=o[c].nTh,j.removeAttribute("aria-sort"),j.removeAttribute("aria-label"),o[c].bSortable)if(k.length>0&&k[0][0]==c){j.setAttribute("aria-sort","asc"==k[0][1]?"ascending":"descending");var x=o[c].asSorting[k[0][2]+1]?o[c].asSorting[k[0][2]+1]:o[c].asSorting[0];j.setAttribute("aria-label",w+("asc"==x?p.sSortAscending:p.sSortDescending))}else j.setAttribute("aria-label",w+("asc"==o[c].asSorting[0]?p.sSortAscending:p.sSortDescending));else j.setAttribute("aria-label",w)}a.bSorted=!0,$(a.oInstance).trigger("sort",a),a.oFeatures.bFilter?_fnFilterComplete(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,_fnCalculateEnd(a),_fnDraw(a))}function _fnSortAttachListener(a,b,c,d){_fnBindAction(b,{},function(b){if(a.aoColumns[c].bSortable!==!1){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0,d=a.aaSorting[g][0],e=a.aaSorting[g][2]+1,a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}f===!1&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));_fnSort(a)};a.oFeatures.bProcessing?(_fnProcessingDisplay(a,!0),setTimeout(function(){e(),a.oFeatures.bServerSide||_fnProcessingDisplay(a,!1)},0)):e(),"function"==typeof d&&d(a)}})}function _fnSortingClasses(a){var b,c,d,e,f,g,h=a.aoColumns.length,i=a.oClasses;for(b=0;h>b;b++)a.aoColumns[b].bSortable&&$(a.aoColumns[b].nTh).removeClass(i.sSortAsc+" "+i.sSortDesc+" "+a.aoColumns[b].sSortingClass);for(f=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice(),b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){for(g=a.aoColumns[b].sSortingClass,e=-1,d=0;d<f.length;d++)if(f[d][0]==b){g="asc"==f[d][1]?i.sSortAsc:i.sSortDesc,e=d;break}if($(a.aoColumns[b].nTh).addClass(g),a.bJUI){var j=$("span."+i.sSortIcon,a.aoColumns[b].nTh);j.removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed);var k;k=-1==e?a.aoColumns[b].sSortingClassJUI:"asc"==f[e][1]?i.sSortJUIAsc:i.sSortJUIDesc,j.addClass(k)}}else $(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);if(g=i.sSortColumn,a.oFeatures.bSort&&a.oFeatures.bSortClasses){var l,m,n=_fnGetTdNodes(a),o=[];for(b=0;h>b;b++)o.push("");for(b=0,l=1;b<f.length;b++)m=parseInt(f[b][0],10),o[m]=g+l,3>l&&l++;var p,q,r,s=new RegExp(g+"[123]");for(b=0,c=n.length;c>b;b++)m=b%h,q=n[b].className,r=o[m],p=q.replace(s,r),p!=q?n[b].className=$.trim(p):r.length>0&&-1==q.indexOf(r)&&(n[b].className=q+" "+r)}}function _fnSaveState(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c,d=a.oScroll.bInfinite,e={iCreate:(new Date).getTime(),iStart:d?0:a._iDisplayStart,iEnd:d?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:$.extend(!0,[],a.aaSorting),oSearch:$.extend(!0,{},a.oPreviousSearch),aoSearchCols:$.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};for(b=0,c=a.aoColumns.length;c>b;b++)e.abVisCols.push(a.aoColumns[b].bVisible);_fnCallbackFire(a,"aoStateSaveParams","stateSaveParams",[a,e]),a.fnStateSave.call(a.oInstance,a,e)}}function _fnLoadState(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=_fnCallbackFire(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===$.inArray(!1,d)){a.oLoadedState=$.extend(!0,{},c),a._iDisplayStart=c.iStart,a.iInitDisplayStart=c.iStart,a._iDisplayEnd=c.iEnd,a._iDisplayLength=c.iLength,a.aaSorting=c.aaSorting.slice(),a.saved_aaSorting=c.aaSorting.slice(),$.extend(a.oPreviousSearch,c.oSearch),$.extend(!0,a.aoPreSearchCols,c.aoSearchCols),b.saved_aoColumns=[];for(var e=0;e<c.abVisCols.length;e++)b.saved_aoColumns[e]={},b.saved_aoColumns[e].bVisible=c.abVisCols[e];_fnCallbackFire(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+1e3*iSecs);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;null!==fnCallback?(oData="function"==typeof $.parseJSON?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var aCookies=document.cookie.split(";"),iNewCookieLen=sFullCookie.split(";")[0].length,aOldCookies=[];if(iNewCookieLen+document.cookie.length+10>4096){for(var i=0,iLen=aCookies.length;iLen>i;i++)if(-1!=aCookies[i].indexOf(sBaseName)){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")"),oData&&oData.iCreate&&aOldCookies.push({name:aSplitCookie[0],time:oData.iCreate})}catch(e){}}for(aOldCookies.sort(function(a,b){return b.time-a.time});iNewCookieLen+document.cookie.length+10>4096;){if(0===aOldCookies.length)return;var old=aOldCookies.pop();document.cookie=old.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/"}}document.cookie=sFullCookie}function _fnReadCookie(a){for(var b=window.location.pathname.split("/"),c=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(c))return decodeURIComponent(f.substring(c.length,f.length))}return null}function _fnSettingsFromNode(a){for(var b=0;b<DataTable.settings.length;b++)if(DataTable.settings[b].nTable===a)return DataTable.settings[b];return null}function _fnGetTrNodes(a){for(var b=[],c=a.aoData,d=0,e=c.length;e>d;d++)null!==c[d].nTr&&b.push(c[d].nTr);return b}function _fnGetTdNodes(a,b){var c,d,e,f,g,h,i,j,k=[],l=a.aoData.length,m=0,n=l;for(b!==undefined&&(m=b,n=b+1),f=m;n>f;f++)if(i=a.aoData[f],null!==i.nTr){for(d=[],e=i.nTr.firstChild;e;)j=e.nodeName.toLowerCase(),("td"==j||"th"==j)&&d.push(e),e=e.nextSibling;for(c=0,g=0,h=a.aoColumns.length;h>g;g++)a.aoColumns[g].bVisible?k.push(d[g-c]):(k.push(i._anHidden[g]),c++)}return k}function _fnLog(a,b,c){var d=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(0===b){if("alert"!=DataTable.ext.sErrMode)throw new Error(d);return void alert(d)}window.console&&console.log&&console.log(d)}function _fnMap(a,b,c,d){d===undefined&&(d=c),b[c]!==undefined&&(a[d]=b[c])}function _fnExtend(a,b){var c;for(var d in b)b.hasOwnProperty(d)&&(c=b[d],"object"==typeof oInit[d]&&null!==c&&$.isArray(c)===!1?$.extend(!0,a[d],c):a[d]=c);return a}function _fnBindAction(a,b,c){$(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function _fnCallbackReg(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function _fnCallbackFire(a,b,c,d){for(var e=a[b],f=[],g=e.length-1;g>=0;g--)f.push(e[g].fn.apply(a.oInstance,d));return null!==c&&$(a.oInstance).trigger(c,d),f}function _fnBrowserDetect(a){var b=$('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];document.body.appendChild(b),a.oBrowser.bScrollOversize=100===$("#DT_BrowserTest",b)[0].offsetWidth?!0:!1,document.body.removeChild(b)}function _fnExternApiFunc(a){return function(){var b=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.oApi[a].apply(this,b)}}var __reArray=/\[.*?\]$/,_fnJsonString=window.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,d,e=[],f=$.isArray(a);for(c in a)d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=_fnJsonString(d)),e.push((f?"":'"'+c+'":')+d);return(f?"[":"{")+e+(f?"]":"}")};this.$=function(a,b){var c,d,e,f=[],g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),h=g.aoData,i=g.aiDisplay,j=g.aiDisplayMaster;if(b||(b={}),b=$.extend({},{filter:"none",order:"current",page:"all"},b),"current"==b.page)for(c=g._iDisplayStart,d=g.fnDisplayEnd();d>c;c++)e=h[i[c]].nTr,e&&f.push(e);else if("current"==b.order&&"none"==b.filter)for(c=0,d=j.length;d>c;c++)e=h[j[c]].nTr,e&&f.push(e);else if("current"==b.order&&"applied"==b.filter)for(c=0,d=i.length;d>c;c++)e=h[i[c]].nTr,e&&f.push(e);else if("original"==b.order&&"none"==b.filter)for(c=0,d=h.length;d>c;c++)e=h[c].nTr,e&&f.push(e);else if("original"==b.order&&"applied"==b.filter)for(c=0,d=h.length;d>c;c++)e=h[c].nTr,-1!==$.inArray(c,i)&&e&&f.push(e);else _fnLog(g,1,"Unknown selection options");var k=$(f),l=k.filter(a),m=k.find(a);return $([].concat($.makeArray(l),$.makeArray(m)))},this._=function(a,b){var c,d,e=[],f=this.$(a,b);for(c=0,d=f.length;d>c;c++)e.push(this.fnGetData(f[c]));return e},this.fnAddData=function(a,b){if(0===a.length)return[];var c,d=[],e=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if("object"==typeof a[0]&&null!==a[0])for(var f=0;f<a.length;f++){if(c=_fnAddData(e,a[f]),-1==c)return d;d.push(c)}else{if(c=_fnAddData(e,a),-1==c)return d;d.push(c)}return e.aiDisplay=e.aiDisplayMaster.slice(),(b===undefined||b)&&_fnReDraw(e),d},this.fnAdjustColumnSizing=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnAdjustColumnSizing(b),a===undefined||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)},this.fnClearTable=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnClearTable(b),(a===undefined||a)&&_fnDraw(b)},this.fnClose=function(a){for(var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a){var d=b.aoOpenRows[c].nTr.parentNode;return d&&d.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0}return 1},this.fnDeleteRow=function(a,b,c){var d,e,f,g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);f="object"==typeof a?_fnNodeToDataIndex(g,a):a;var h=g.aoData.splice(f,1);for(d=0,e=g.aoData.length;e>d;d++)null!==g.aoData[d].nTr&&(g.aoData[d].nTr._DT_RowIndex=d);var i=$.inArray(f,g.aiDisplay);return g.asDataSearch.splice(i,1),_fnDeleteIndex(g.aiDisplayMaster,f),_fnDeleteIndex(g.aiDisplay,f),"function"==typeof b&&b.call(this,g,h),g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,g._iDisplayStart<0&&(g._iDisplayStart=0)),(c===undefined||c)&&(_fnCalculateEnd(g),_fnDraw(g)),h},this.fnDestroy=function(a){var b,c,d=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e=d.nTableWrapper.parentNode,f=d.nTBody;if(a=a===undefined?!1:a,d.bDestroying=!0,_fnCallbackFire(d,"aoDestroyCallback","destroy",[d]),!a)for(b=0,c=d.aoColumns.length;c>b;b++)d.aoColumns[b].bVisible===!1&&this.fnSetColumnVis(b,!0);for($(d.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+d.oClasses.sRowEmpty,d.nTable).parent().remove(),d.nTable!=d.nTHead.parentNode&&($(d.nTable).children("thead").remove(),d.nTable.appendChild(d.nTHead)),d.nTFoot&&d.nTable!=d.nTFoot.parentNode&&($(d.nTable).children("tfoot").remove(),d.nTable.appendChild(d.nTFoot)),d.nTable.parentNode.removeChild(d.nTable),$(d.nTableWrapper).remove(),d.aaSorting=[],d.aaSortingFixed=[],_fnSortingClasses(d),$(_fnGetTrNodes(d)).removeClass(d.asStripeClasses.join(" ")),$("th, td",d.nTHead).removeClass([d.oClasses.sSortable,d.oClasses.sSortableAsc,d.oClasses.sSortableDesc,d.oClasses.sSortableNone].join(" ")),d.bJUI&&($("th span."+d.oClasses.sSortIcon+", td span."+d.oClasses.sSortIcon,d.nTHead).remove(),$("th, td",d.nTHead).each(function(){var a=$("div."+d.oClasses.sSortJUIWrapper,this),b=a.contents();$(this).append(b),a.remove()})),!a&&d.nTableReinsertBefore?e.insertBefore(d.nTable,d.nTableReinsertBefore):a||e.appendChild(d.nTable),b=0,c=d.aoData.length;c>b;b++)null!==d.aoData[b].nTr&&f.appendChild(d.aoData[b].nTr);if(d.oFeatures.bAutoWidth===!0&&(d.nTable.style.width=_fnStringToCss(d.sDestroyWidth)),c=d.asDestroyStripes.length){var g=$(f).children("tr");for(b=0;c>b;b++)g.filter(":nth-child("+c+"n + "+b+")").addClass(d.asDestroyStripes[b])}for(b=0,c=DataTable.settings.length;c>b;b++)DataTable.settings[b]==d&&DataTable.settings.splice(b,1);d=null,oInit=null},this.fnDraw=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);a===!1?(_fnCalculateEnd(b),_fnDraw(b)):_fnReDraw(b)},this.fnFilter=function(a,b,c,d,e,f){var g=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(g.oFeatures.bFilter)if((c===undefined||null===c)&&(c=!1),(d===undefined||null===d)&&(d=!0),(e===undefined||null===e)&&(e=!0),(f===undefined||null===f)&&(f=!0),b===undefined||null===b){if(_fnFilterComplete(g,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f},1),e&&g.aanFeatures.f)for(var h=g.aanFeatures.f,i=0,j=h.length;j>i;i++)try{h[i]._DT_Input!=document.activeElement&&$(h[i]._DT_Input).val(a)}catch(k){$(h[i]._DT_Input).val(a)}}else $.extend(g.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:f}),_fnFilterComplete(g,g.oPreviousSearch,1)},this.fnGetData=function(a,b){var c=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);if(a!==undefined){var d=a;if("object"==typeof a){var e=a.nodeName.toLowerCase();"tr"===e?d=_fnNodeToDataIndex(c,a):"td"===e&&(d=_fnNodeToDataIndex(c,a.parentNode),b=_fnNodeToColumnIndex(c,d,a))}return b!==undefined?_fnGetCellData(c,d,b,""):c.aoData[d]!==undefined?c.aoData[d]._aData:null}return _fnGetDataMaster(c)},this.fnGetNodes=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);return a!==undefined?b.aoData[a]!==undefined?b.aoData[a].nTr:null:_fnGetTrNodes(b)},this.fnGetPosition=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=a.nodeName.toUpperCase();if("TR"==c)return _fnNodeToDataIndex(b,a);if("TD"==c||"TH"==c){var d=_fnNodeToDataIndex(b,a.parentNode),e=_fnNodeToColumnIndex(b,d,a);return[d,_fnColumnIndexToVisible(b,e),e]}return null},this.fnIsOpen=function(a){for(var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),c=(b.aoOpenRows,0);c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1},this.fnOpen=function(a,b,c){var d=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),e=_fnGetTrNodes(d);if(-1!==$.inArray(a,e)){this.fnClose(a);var f=document.createElement("tr"),g=document.createElement("td");f.appendChild(g),g.className=c,g.colSpan=_fnVisbleColumns(d),"string"==typeof b?g.innerHTML=b:$(g).html(b);var h=$("tr",d.nTBody);return-1!=$.inArray(a,h)&&$(f).insertAfter(a),d.aoOpenRows.push({nTr:f,nParent:a}),f}},this.fnPageChange=function(a,b){var c=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);_fnPageChange(c,a),_fnCalculateEnd(c),(b===undefined||b)&&_fnDraw(c)},this.fnSetColumnVis=function(a,b,c){var d,e,f,g,h,i=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),j=i.aoColumns,k=i.aoData;if(j[a].bVisible!=b){if(b){var l=0;for(d=0;a>d;d++)j[d].bVisible&&l++;if(g=l>=_fnVisbleColumns(i),!g)for(d=a;d<j.length;d++)if(j[d].bVisible){h=d;break}for(d=0,e=k.length;e>d;d++)null!==k[d].nTr&&(g?k[d].nTr.appendChild(k[d]._anHidden[a]):k[d].nTr.insertBefore(k[d]._anHidden[a],_fnGetTdNodes(i,d)[h]))}else for(d=0,e=k.length;e>d;d++)null!==k[d].nTr&&(f=_fnGetTdNodes(i,d)[a],k[d]._anHidden[a]=f,f.parentNode.removeChild(f));for(j[a].bVisible=b,_fnDrawHead(i,i.aoHeader),i.nTFoot&&_fnDrawHead(i,i.aoFooter),d=0,e=i.aoOpenRows.length;e>d;d++)i.aoOpenRows[d].nTr.colSpan=_fnVisbleColumns(i);(c===undefined||c)&&(_fnAdjustColumnSizing(i),_fnDraw(i)),_fnSaveState(i)}},this.fnSettings=function(){return _fnSettingsFromNode(this[DataTable.ext.iApiIndex])},this.fnSort=function(a){var b=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]);b.aaSorting=a,_fnSort(b)},this.fnSortListener=function(a,b,c){_fnSortAttachListener(_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),a,b,c)},this.fnUpdate=function(a,b,c,d,e){var f,g,h=_fnSettingsFromNode(this[DataTable.ext.iApiIndex]),i="object"==typeof b?_fnNodeToDataIndex(h,b):b;if($.isArray(a)&&c===undefined)for(h.aoData[i]._aData=a.slice(),f=0;f<h.aoColumns.length;f++)this.fnUpdate(_fnGetCellData(h,i,f),i,f,!1,!1);else if($.isPlainObject(a)&&c===undefined)for(h.aoData[i]._aData=$.extend(!0,{},a),f=0;f<h.aoColumns.length;f++)this.fnUpdate(_fnGetCellData(h,i,f),i,f,!1,!1);else{_fnSetCellData(h,i,c,a),g=_fnGetCellData(h,i,c,"display");var j=h.aoColumns[c];null!==j.fnRender&&(g=_fnRender(h,i,c),j.bUseRendered&&_fnSetCellData(h,i,c,g)),null!==h.aoData[i].nTr&&(_fnGetTdNodes(h,i)[c].innerHTML=g)}var k=$.inArray(i,h.aiDisplay);return h.asDataSearch[k]=_fnBuildSearchRow(h,_fnGetRowData(h,i,"filter",_fnGetColumns(h,"bSearchable"))),(e===undefined||e)&&_fnAdjustColumnSizing(h),(d===undefined||d)&&_fnReDraw(h),0},this.fnVersionCheck=DataTable.ext.fnVersionCheck,this.oApi={_fnExternApiFunc:_fnExternApiFunc,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLanguageCompat:_fnLanguageCompat,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAddData:_fnAddData,_fnCreateTr:_fnCreateTr,_fnGatherData:_fnGatherData,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAjaxUpdate:_fnAjaxUpdate,_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnServerParams:_fnServerParams,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnBuildSearchArray:_fnBuildSearchArray,_fnBuildSearchRow:_fnBuildSearchRow,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnDataToSearch:_fnDataToSearch,_fnSort:_fnSort,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnNodeToDataIndex:_fnNodeToDataIndex,_fnVisbleColumns:_fnVisbleColumns,_fnCalculateEnd:_fnCalculateEnd,_fnConvertToWidth:_fnConvertToWidth,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnScrollingWidthAdjust:_fnScrollingWidthAdjust,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnDetectType:_fnDetectType,_fnSettingsFromNode:_fnSettingsFromNode,_fnGetDataMaster:_fnGetDataMaster,_fnGetTrNodes:_fnGetTrNodes,_fnGetTdNodes:_fnGetTdNodes,_fnEscapeRegex:_fnEscapeRegex,_fnDeleteIndex:_fnDeleteIndex,_fnReOrderIndex:_fnReOrderIndex,_fnColumnOrdering:_fnColumnOrdering,_fnLog:_fnLog,_fnClearTable:_fnClearTable,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnCreateCookie:_fnCreateCookie,_fnReadCookie:_fnReadCookie,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnScrollBarWidth:_fnScrollBarWidth,_fnApplyToChildren:_fnApplyToChildren,_fnMap:_fnMap,_fnGetRowData:_fnGetRowData,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnBindAction:_fnBindAction,_fnExtend:_fnExtend,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,_fnJsonString:_fnJsonString,_fnRender:_fnRender,_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnInfoMacros:_fnInfoMacros,_fnBrowserDetect:_fnBrowserDetect,_fnGetColumns:_fnGetColumns},$.extend(DataTable.ext.oApi,this.oApi);for(var sFunc in DataTable.ext.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));var _that=this;return this.each(function(){var a,b,c,d=0,e=this.getAttribute("id"),f=!1,g=!1;if("table"!=this.nodeName.toLowerCase())return void _fnLog(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);for(d=0,a=DataTable.settings.length;a>d;d++){if(DataTable.settings[d].nTable==this){if(oInit===undefined||oInit.bRetrieve)return DataTable.settings[d].oInstance;if(oInit.bDestroy){DataTable.settings[d].oInstance.fnDestroy();break}return void _fnLog(DataTable.settings[d],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy")}if(DataTable.settings[d].sTableId==this.id){DataTable.settings.splice(d,1);break}}(null===e||""===e)&&(e="DataTables_Table_"+DataTable.ext._oExternConfig.iNextUnique++,this.id=e);var h=$.extend(!0,{},DataTable.models.oSettings,{nTable:this,oApi:_that.oApi,oInit:oInit,sDestroyWidth:$(this).width(),sInstance:e,sTableId:e});if(DataTable.settings.push(h),h.oInstance=1===_that.length?_that:$(this).dataTable(),oInit||(oInit={}),oInit.oLanguage&&_fnLanguageCompat(oInit.oLanguage),oInit=_fnExtend($.extend(!0,{},DataTable.defaults),oInit),_fnMap(h.oFeatures,oInit,"bPaginate"),_fnMap(h.oFeatures,oInit,"bLengthChange"),_fnMap(h.oFeatures,oInit,"bFilter"),_fnMap(h.oFeatures,oInit,"bSort"),_fnMap(h.oFeatures,oInit,"bInfo"),_fnMap(h.oFeatures,oInit,"bProcessing"),_fnMap(h.oFeatures,oInit,"bAutoWidth"),_fnMap(h.oFeatures,oInit,"bSortClasses"),_fnMap(h.oFeatures,oInit,"bServerSide"),_fnMap(h.oFeatures,oInit,"bDeferRender"),_fnMap(h.oScroll,oInit,"sScrollX","sX"),_fnMap(h.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(h.oScroll,oInit,"sScrollY","sY"),_fnMap(h.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(h.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(h.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(h.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(h,oInit,"asStripeClasses"),_fnMap(h,oInit,"asStripClasses","asStripeClasses"),_fnMap(h,oInit,"fnServerData"),_fnMap(h,oInit,"fnFormatNumber"),_fnMap(h,oInit,"sServerMethod"),_fnMap(h,oInit,"aaSorting"),_fnMap(h,oInit,"aaSortingFixed"),_fnMap(h,oInit,"aLengthMenu"),_fnMap(h,oInit,"sPaginationType"),_fnMap(h,oInit,"sAjaxSource"),_fnMap(h,oInit,"sAjaxDataProp"),_fnMap(h,oInit,"iCookieDuration"),_fnMap(h,oInit,"sCookiePrefix"),_fnMap(h,oInit,"sDom"),_fnMap(h,oInit,"bSortCellsTop"),_fnMap(h,oInit,"iTabIndex"),_fnMap(h,oInit,"oSearch","oPreviousSearch"),_fnMap(h,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(h,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(h,oInit,"bJQueryUI","bJUI"),_fnMap(h,oInit,"fnCookieCallback"),_fnMap(h,oInit,"fnStateLoad"),_fnMap(h,oInit,"fnStateSave"),_fnMap(h.oLanguage,oInit,"fnInfoCallback"),_fnCallbackReg(h,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(h,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(h,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(h,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(h,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(h,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(h,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(h,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(h,"aoFooterCallback",oInit.fnFooterCallback,"user"),_fnCallbackReg(h,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(h,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),h.oFeatures.bServerSide&&h.oFeatures.bSort&&h.oFeatures.bSortClasses?_fnCallbackReg(h,"aoDrawCallback",_fnSortingClasses,"server_side_sort_classes"):h.oFeatures.bDeferRender&&_fnCallbackReg(h,"aoDrawCallback",_fnSortingClasses,"defer_sort_classes"),oInit.bJQueryUI?($.extend(h.oClasses,DataTable.ext.oJUIClasses),oInit.sDom===DataTable.defaults.sDom&&"lfrtip"===DataTable.defaults.sDom&&(h.sDom='<"H"lfr>t<"F"ip>')):$.extend(h.oClasses,DataTable.ext.oStdClasses),$(this).addClass(h.oClasses.sTable),(""!==h.oScroll.sX||""!==h.oScroll.sY)&&(h.oScroll.iBarWidth=_fnScrollBarWidth()),h.iInitDisplayStart===undefined&&(h.iInitDisplayStart=oInit.iDisplayStart,h._iDisplayStart=oInit.iDisplayStart),oInit.bStateSave&&(h.oFeatures.bStateSave=!0,_fnLoadState(h,oInit),_fnCallbackReg(h,"aoDrawCallback",_fnSaveState,"state_save")),null!==oInit.iDeferLoading){h.bDeferLoading=!0;var i=$.isArray(oInit.iDeferLoading);h._iRecordsDisplay=i?oInit.iDeferLoading[0]:oInit.iDeferLoading,h._iRecordsTotal=i?oInit.iDeferLoading[1]:oInit.iDeferLoading}if(null!==oInit.aaData&&(g=!0),""!==oInit.oLanguage.sUrl?(h.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(h.oLanguage.sUrl,null,function(a){_fnLanguageCompat(a),$.extend(!0,h.oLanguage,oInit.oLanguage,a),_fnInitialise(h)}),f=!0):$.extend(!0,h.oLanguage,oInit.oLanguage),
null===oInit.asStripeClasses&&(h.asStripeClasses=[h.oClasses.sStripeOdd,h.oClasses.sStripeEven]),a=h.asStripeClasses.length,h.asDestroyStripes=[],a){var j=!1,k=$(this).children("tbody").children("tr:lt("+a+")");for(d=0;a>d;d++)k.hasClass(h.asStripeClasses[d])&&(j=!0,h.asDestroyStripes.push(h.asStripeClasses[d]));j&&k.removeClass(h.asStripeClasses.join(" "))}var l,m=[],n=this.getElementsByTagName("thead");if(0!==n.length&&(_fnDetectHeader(h.aoHeader,n[0]),m=_fnGetUniqueThs(h)),null===oInit.aoColumns)for(l=[],d=0,a=m.length;a>d;d++)l.push(null);else l=oInit.aoColumns;for(d=0,a=l.length;a>d;d++)oInit.saved_aoColumns!==undefined&&oInit.saved_aoColumns.length==a&&(null===l[d]&&(l[d]={}),l[d].bVisible=oInit.saved_aoColumns[d].bVisible),_fnAddColumn(h,m?m[d]:null);for(_fnApplyColumnDefs(h,oInit.aoColumnDefs,l,function(a,b){_fnColumnOptions(h,a,b)}),d=0,a=h.aaSorting.length;a>d;d++){h.aaSorting[d][0]>=h.aoColumns.length&&(h.aaSorting[d][0]=0);var o=h.aoColumns[h.aaSorting[d][0]];for(h.aaSorting[d][2]===undefined&&(h.aaSorting[d][2]=0),oInit.aaSorting===undefined&&h.saved_aaSorting===undefined&&(h.aaSorting[d][1]=o.asSorting[0]),b=0,c=o.asSorting.length;c>b;b++)if(h.aaSorting[d][1]==o.asSorting[b]){h.aaSorting[d][2]=b;break}}_fnSortingClasses(h),_fnBrowserDetect(h);var p=$(this).children("caption").each(function(){this._captionSide=$(this).css("caption-side")}),q=$(this).children("thead");0===q.length&&(q=[document.createElement("thead")],this.appendChild(q[0])),h.nTHead=q[0];var r=$(this).children("tbody");0===r.length&&(r=[document.createElement("tbody")],this.appendChild(r[0])),h.nTBody=r[0],h.nTBody.setAttribute("role","alert"),h.nTBody.setAttribute("aria-live","polite"),h.nTBody.setAttribute("aria-relevant","all");var s=$(this).children("tfoot");if(0===s.length&&p.length>0&&(""!==h.oScroll.sX||""!==h.oScroll.sY)&&(s=[document.createElement("tfoot")],this.appendChild(s[0])),s.length>0&&(h.nTFoot=s[0],_fnDetectHeader(h.aoFooter,h.nTFoot)),g)for(d=0;d<oInit.aaData.length;d++)_fnAddData(h,oInit.aaData[d]);else _fnGatherData(h);h.aiDisplay=h.aiDisplayMaster.slice(),h.bInitialised=!0,f===!1&&_fnInitialise(h)}),_that=null,this};DataTable.fnVersionCheck=function(a){for(var b=function(a,b){for(;a.length<b;)a+="0";return a},c=DataTable.ext.sVersion.split("."),d=a.split("."),e="",f="",g=0,h=d.length;h>g;g++)e+=b(c[g],3),f+=b(d[g],3);return parseInt(e,10)>=parseInt(f,10)},DataTable.fnIsDataTable=function(a){for(var b=DataTable.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1},DataTable.fnTables=function(a){var b=[];return jQuery.each(DataTable.settings,function(c,d){(!a||a===!0&&$(d.nTable).is(":visible"))&&b.push(d.nTable)}),b},DataTable.version="1.9.4",DataTable.settings=[],DataTable.models={},DataTable.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:DataTable.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""},DataTable.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1e3>a)return a;for(var b=a+"",c=b.split(""),d="",e=b.length,f=0;e>f;f++)f%3===0&&0!==f&&(d=this.oLanguage.sInfoThousands+d),d=c[e-f-1]+d;return d},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,d){d.jqXHR=$.ajax({url:a,data:b,success:function(a){a.sError&&d.oApi._fnLog(d,0,a.sError),$(d.oInstance).trigger("xhr",[d,a]),c(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(a,b,c){"parsererror"==b&&d.oApi._fnLog(d,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(oSettings){var sData=this.oApi._fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance),oData;try{oData="function"==typeof $.parseJSON?$.parseJSON(sData):eval("("+sData+")")}catch(e){oData=null}return oData},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"},DataTable.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null},DataTable.ext=$.extend(!0,{},DataTable.models.ext),$.extend(DataTable.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""}),$.extend(DataTable.ext.oJUIClasses,DataTable.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"}),$.extend(DataTable.ext.oPagination,{two_button:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=(a.oClasses,function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)}),f=a.bJUI?'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sNext+"</a>";$(b).append(f);var g=$("a",b),h=g[0],i=g[1];a.oApi._fnBindAction(h,{action:"previous"},e),a.oApi._fnBindAction(i,{action:"next"},e),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",h.id=a.sTableId+"_previous",i.id=a.sTableId+"_next",h.setAttribute("aria-controls",a.sTableId),i.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var c,d=a.oClasses,e=a.aanFeatures.p,f=0,g=e.length;g>f;f++)c=e[f].firstChild,c&&(c.className=0===a._iDisplayStart?d.sPagePrevDisabled:d.sPagePrevEnabled,c=c.nextSibling,c.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?d.sPageNextDisabled:d.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,e=a.oClasses,f=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};$(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageFirst+'">'+d.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPagePrevious+'">'+d.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageNext+'">'+d.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+e.sPageButton+" "+e.sPageLast+'">'+d.sLast+"</a>");var g=$("a",b),h=g[0],i=g[1],j=g[2],k=g[3];a.oApi._fnBindAction(h,{action:"first"},f),a.oApi._fnBindAction(i,{action:"previous"},f),a.oApi._fnBindAction(j,{action:"next"},f),a.oApi._fnBindAction(k,{action:"last"},f),a.aanFeatures.p||(b.id=a.sTableId+"_paginate",h.id=a.sTableId+"_first",i.id=a.sTableId+"_previous",j.id=a.sTableId+"_next",k.id=a.sTableId+"_last")},fnUpdate:function(a,b){if(a.aanFeatures.p){var c,d,e,f,g,h,i,j=DataTable.ext.oPagination.iFullNumbersShowPages,k=Math.floor(j/2),l=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),m=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,n="",o=a.oClasses,p=a.aanFeatures.p,q=function(d){a.oApi._fnBindAction(this,{page:d+c-1},function(c){a.oApi._fnPageChange(a,c.data.page),b(a),c.preventDefault()})};for(-1===a._iDisplayLength?(c=1,d=1,m=1):j>l?(c=1,d=l):k>=m?(c=1,d=j):m>=l-k?(c=l-j+1,d=l):(c=m-Math.ceil(j/2)+1,d=c+j-1),e=c;d>=e;e++)n+=m!==e?'<a tabindex="'+a.iTabIndex+'" class="'+o.sPageButton+'">'+a.fnFormatNumber(e)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+o.sPageButtonActive+'">'+a.fnFormatNumber(e)+"</a>";for(e=0,f=p.length;f>e;e++)i=p[e],i.hasChildNodes()&&($("span:eq(0)",i).html(n).children("a").each(q),g=i.getElementsByTagName("a"),h=[g[0],g[1],g[g.length-2],g[g.length-1]],$(h).removeClass(o.sPageButton+" "+o.sPageButtonActive+" "+o.sPageButtonStaticDisabled),$([h[0],h[1]]).addClass(1==m?o.sPageButtonStaticDisabled:o.sPageButton),$([h[2],h[3]]).addClass(0===l||m===l||-1===a._iDisplayLength?o.sPageButtonStaticDisabled:o.sPageButton))}}}}),$.extend(DataTable.ext.oSort,{"string-pre":function(a){return"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():""),a.toLowerCase()},"string-asc":function(a,b){return b>a?-1:a>b?1:0},"string-desc":function(a,b){return b>a?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return b>a?-1:a>b?1:0},"html-desc":function(a,b){return b>a?1:a>b?-1:0},"date-pre":function(a){var b=Date.parse(a);return(isNaN(b)||""===b)&&(b=Date.parse("01/01/1970 00:00:00")),b},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}}),$.extend(DataTable.ext.aTypes,[function(a){if("number"==typeof a)return"numeric";if("string"!=typeof a)return null;var b,c="0123456789-",d="0123456789.",e=!1;if(b=a.charAt(0),-1==c.indexOf(b))return null;for(var f=1;f<a.length;f++){if(b=a.charAt(f),-1==d.indexOf(b))return null;if("."==b){if(e)return null;e=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"==typeof a&&0===a.length?"date":null},function(a){return"string"==typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]),$.fn.DataTable=DataTable,$.fn.dataTable=DataTable,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext})}(window,document)}.call(global,module,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],103:[function(a,b,c){(function(c){$=c.$=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery.tablesorter.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a){"use strict";function b(a,b){b=b||{},this.$elem=a,this.$parent=this.$elem.parent(),b.scrollParent?this.$scrollParent=this.$elem.closest(b.scrollParent):this.$scrollParent=this.$parent,this.$thead=this.$elem.find("thead"),this.$theadClone=this.$elem.find("thead").clone(),this.$thead.after(this.$theadClone),this.$theadCloneCells=this.$theadClone.find("tr > th"),this.$theadCloneCells.length&&(this.applyStyles(),this.initCellsWidth(),this.initEvents())}a.fn.fixTableHeader=function(c){return this.each(function(d,e){a(e).find(".thead-clone").remove();var f=new b(a(e),c);f.updateHeaderPosition()}),this},b.prototype.initCellsWidth=function(){var b=this;parseInt(this.$theadCloneCells.eq(0).css("padding-left"),10)||0;this.$thead.width(this.$theadClone.width()),this.$thead.height(this.$theadClone.height()),this.$thead.find("tr > th").each(function(c,d){a(d).width(b.$theadCloneCells.eq(c).width())})},b.prototype.applyStyles=function(){this.borderTopWidth=parseInt(this.$elem.css("border-top-width"),10)||0,this.minTop=this.borderTopWidth,this.$elem.css({position:"relative"}),this.$thead.css({position:"absolute","z-index":"1001",top:this.minTop+"px"}),this.$thead.addClass("thead-clone")},b.prototype.initEvents=function(){var b=this;this.$scrollParent.on("scroll.fixTableHeader",function(){b.updateHeaderPosition()}),a(window).on("resize.fixTableHeader",function(){b.initCellsWidth(),b.updateHeaderPosition()}),this.$elem.on("resize.fixTableHeader",function(){b.initCellsWidth()})},b.prototype.updateHeaderPosition=function(){var a,b="none"!==this.$parent.css("transform");this.maxTop=this.$elem.innerHeight()-this.$theadClone.outerHeight(),this.tablePositionTop=this.$scrollParent.scrollTop()+this.$elem.offset().top-this.$scrollParent.offset().top,a=this.$scrollParent.scrollTop()-this.tablePositionTop-this.borderTopWidth||this.minTop,a>this.maxTop||a<this.minTop?this.$thead.css({position:"absolute",top:this.borderTopWidth+"px"}):b?this.$thead.css({position:"fixed"}):this.$thead.css({position:"fixed",top:this.$scrollParent.offset().top+"px"})}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104,"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery.tablesorter.min.js":107}],104:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(b,c){"object"==typeof a&&"object"==typeof a.exports?a.exports=b.document?c(b,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return c(a)}:c(b)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=ba.type(a);return"function"===c||ba.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function e(a,b,c){if(ba.isFunction(b))return ba.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ba.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ia.test(b))return ba.filter(b,a,c);b=ba.filter(b,a)}return ba.grep(a,function(a){return V.call(b,a)>=0!==c})}function f(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function g(a){var b=pa[a]={};return ba.each(a.match(oa)||[],function(a,c){b[c]=!0}),b}function h(){_.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1),ba.ready()}function i(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=ba.expando+Math.random()}function j(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(va,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ua.test(c)?ba.parseJSON(c):c}catch(e){}ta.set(a,b,c)}else c=void 0;return c}function k(){return!0}function l(){return!1}function m(){try{return _.activeElement}catch(a){}}function n(a,b){return ba.nodeName(a,"table")&&ba.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function o(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function p(a){var b=La.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c=0,d=a.length;d>c;c++)sa.set(a[c],"globalEval",!b||sa.get(b[c],"globalEval"))}function r(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(sa.hasData(a)&&(f=sa.access(a),g=sa.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)ba.event.add(b,e,j[e][c])}ta.hasData(a)&&(h=ta.access(a),i=ba.extend({},h),ta.set(b,i))}}function s(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&ba.nodeName(a,b)?ba.merge([a],c):c}function t(a,b){var c=b.nodeName.toLowerCase();"input"===c&&za.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function u(b,c){var d=ba(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:ba.css(d[0],"display");return d.detach(),e}function v(a){var b=_,c=Pa[a];return c||(c=u(a,b),"none"!==c&&c||(Oa=(Oa||ba("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Oa[0].contentDocument,b.write(),b.close(),c=u(a,b),Oa.detach()),Pa[a]=c),c}function w(a,b,c){var d,e,f,g,h=a.style;return c=c||Sa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||ba.contains(a.ownerDocument,a)||(g=ba.style(a,b)),Ra.test(g)&&Qa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function x(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function y(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ya.length;e--;)if(b=Ya[e]+c,b in a)return b;return d}function z(a,b,c){var d=Ua.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ba.css(a,c+xa[f],!0,e)),d?("content"===c&&(g-=ba.css(a,"padding"+xa[f],!0,e)),"margin"!==c&&(g-=ba.css(a,"border"+xa[f]+"Width",!0,e))):(g+=ba.css(a,"padding"+xa[f],!0,e),"padding"!==c&&(g+=ba.css(a,"border"+xa[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Sa(a),g="border-box"===ba.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=w(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ra.test(e))return e;d=g&&($.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=sa.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&ya(d)&&(f[g]=sa.access(d,"olddisplay",v(d.nodeName)))):f[g]||(e=ya(d),(c&&"none"!==c||!e)&&sa.set(d,"olddisplay",e?c:ba.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c,d,e){return new D.prototype.init(a,b,c,d,e)}function E(){return setTimeout(function(){Za=void 0}),Za=ba.now()}function F(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=xa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function G(a,b,c){for(var d,e=(db[b]||[]).concat(db["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function H(a,b,c){var d,e,f,g,h,i,j,k=this,l={},m=a.style,n=a.nodeType&&ya(a),o=sa.get(a,"fxshow");c.queue||(h=ba._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,k.always(function(){k.always(function(){h.unqueued--,ba.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],j=ba.css(a,"display"),"none"===j&&(j=v(a.nodeName)),"inline"===j&&"none"===ba.css(a,"float")&&(m.display="inline-block")),c.overflow&&(m.overflow="hidden",k.always(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],_a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(n?"hide":"show")){if("show"!==e||!o||void 0===o[d])continue;n=!0}l[d]=o&&o[d]||ba.style(a,d)}if(!ba.isEmptyObject(l)){o?"hidden"in o&&(n=o.hidden):o=sa.access(a,"fxshow",{}),f&&(o.hidden=!n),n?ba(a).show():k.done(function(){ba(a).hide()}),k.done(function(){var b;sa.remove(a,"fxshow");for(b in l)ba.style(a,b,l[b])});for(d in l)g=G(n?o[d]:0,d,k),d in o||(o[d]=g.start,n&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function I(a,b){var c,d,e,f,g;for(c in a)if(d=ba.camelCase(c),e=b[d],f=a[c],ba.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ba.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function J(a,b,c){var d,e,f=0,g=cb.length,h=ba.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||E(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ba.extend({},b),opts:ba.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Za||E(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ba.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(I(k,j.opts.specialEasing);g>f;f++)if(d=cb[f].call(j,a,k,j.opts))return d;return ba.map(k,G,j),ba.isFunction(j.opts.start)&&j.opts.start.call(a,j),ba.fx.timer(ba.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(oa)||[];if(ba.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function L(a,b,c,d){function e(h){var i;return f[h]=!0,ba.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===wb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function M(a,b){var c,d,e=ba.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&ba.extend(!0,a,d),a}function N(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function O(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function P(a,b,c,d){var e;if(ba.isArray(b))ba.each(b,function(b,e){c||Ab.test(a)?d(a,e):P(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ba.type(b))d(a,b);else for(e in b)P(a+"["+e+"]",b[e],c,d)}function Q(a){return ba.isWindow(a)?a:9===a.nodeType&&a.defaultView}var R=[],S=R.slice,T=R.concat,U=R.push,V=R.indexOf,W={},X=W.toString,Y=W.hasOwnProperty,Z="".trim,$={},_=a.document,aa="2.1.0",ba=function(a,b){return new ba.fn.init(a,b)},ca=/^-ms-/,da=/-([\da-z])/gi,ea=function(a,b){return b.toUpperCase()};ba.fn=ba.prototype={jquery:aa,constructor:ba,selector:"",length:0,toArray:function(){return S.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:S.call(this)},pushStack:function(a){var b=ba.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ba.each(this,a,b)},map:function(a){return this.pushStack(ba.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(S.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:R.sort,splice:R.splice},ba.extend=ba.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ba.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(ba.isPlainObject(d)||(e=ba.isArray(d)))?(e?(e=!1,f=c&&ba.isArray(c)?c:[]):f=c&&ba.isPlainObject(c)?c:{},g[b]=ba.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},ba.extend({expando:"jQuery"+(aa+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ba.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isPlainObject:function(a){if("object"!==ba.type(a)||a.nodeType||ba.isWindow(a))return!1;try{if(a.constructor&&!Y.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?W[X.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=ba.trim(a),a&&(1===a.indexOf("use strict")?(b=_.createElement("script"),b.text=a,_.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ca,"ms-").replace(da,ea)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":Z.call(a)},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ba.merge(d,"string"==typeof a?[a]:a):U.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:V.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),
d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return T.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),ba.isFunction(a)?(d=S.call(arguments,2),e=function(){return a.apply(b||this,d.concat(S.call(arguments)))},e.guid=a.guid=a.guid||ba.guid++,e):void 0},now:Date.now,support:$}),ba.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()});var fa=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,o,p,q;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=sa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return _.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(o=l=N,p=b,q=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(l=b.getAttribute("id"))?o=l.replace(ua,"\\$&"):b.setAttribute("id",o),o="[id='"+o+"'] ",i=j.length;i--;)j[i]=o+n(j[i]);p=ta.test(a)&&k(b.parentNode)||b,q=j.join(",")}if(q)try{return _.apply(c,p.querySelectorAll(q)),c}catch(r){}finally{l||b.removeAttribute("id")}}}return v(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>y.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)y.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&typeof a.getElementsByTagName!==V&&a}function l(){}function m(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in y.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=d||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!d&&b?p:q(p,m,a,h,i),s=c?f||(d?a:o||e)?[]:g:r;if(c&&c(r,s,h,i),e)for(j=q(s,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ba.call(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):_.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ba.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[o(p(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&y.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Z.call(i));r=q(r)}_.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}function u(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&y.relative[f[1].type]){if(b=(y.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return _.apply(c,d),c;break}}return B(a,j)(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V="undefined",W=1<<31,X={}.hasOwnProperty,Y=[],Z=Y.pop,$=Y.push,_=Y.push,aa=Y.slice,ba=Y.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},ca="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",da="[\\x20\\t\\r\\n\\f]",ea="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",fa=ea.replace("w","w#"),ga="\\["+da+"*("+ea+")"+da+"*(?:([*^$|!~]?=)"+da+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+fa+")|)|)"+da+"*\\]",ha=":("+ea+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ga.replace(3,8)+")*)|.*)\\)|)",ia=new RegExp("^"+da+"+|((?:^|[^\\\\])(?:\\\\.)*)"+da+"+$","g"),ja=new RegExp("^"+da+"*,"+da+"*"),ka=new RegExp("^"+da+"*([>+~]|"+da+")"+da+"*"),la=new RegExp("="+da+"*([^\\]'\"]*?)"+da+"*\\]","g"),ma=new RegExp(ha),na=new RegExp("^"+fa+"$"),oa={ID:new RegExp("^#("+ea+")"),CLASS:new RegExp("^\\.("+ea+")"),TAG:new RegExp("^("+ea.replace("w","w*")+")"),ATTR:new RegExp("^"+ga),PSEUDO:new RegExp("^"+ha),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+da+"*(even|odd|(([+-]|)(\\d*)n|)"+da+"*(?:([+-]|)"+da+"*(\\d+)|))"+da+"*\\)|)","i"),bool:new RegExp("^(?:"+ca+")$","i"),needsContext:new RegExp("^"+da+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+da+"*((?:-\\d)?\\d*)"+da+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+da+"?|("+da+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{_.apply(Y=aa.call(O.childNodes),O.childNodes),Y[O.childNodes.length].nodeType}catch(xa){_={apply:Y.length?function(a,b){$.apply(a,aa.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}x=b.support={},A=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c=a?a.ownerDocument||a:O,d=c.defaultView;return c!==G&&9===c.nodeType&&c.documentElement?(G=c,H=c.documentElement,I=!A(c),d&&d!==d.top&&(d.addEventListener?d.addEventListener("unload",function(){F()},!1):d.attachEvent&&d.attachEvent("onunload",function(){F()})),x.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=e(function(a){return a.appendChild(c.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=ra.test(c.getElementsByClassName)&&e(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=e(function(a){return H.appendChild(a).id=N,!c.getElementsByName||!c.getElementsByName(N).length}),x.getById?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete y.find.ID,y.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==V&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=ra.test(c.querySelectorAll))&&(e(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+da+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+da+"*(?:value|"+ca+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),e(function(a){var b=c.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+da+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=ra.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ha)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!x.sortDetached&&b.compareDocumentPosition(a)===d?a===c||a.ownerDocument===O&&M(O,a)?-1:b===c||b.ownerDocument===O&&M(O,b)?1:D?ba.call(D,a)-ba.call(D,b):0:4&d?-1:1)}:function(a,b){if(a===b)return E=!0,0;var d,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===c?-1:b===c?1:f?-1:h?1:D?ba.call(D,a)-ba.call(D,b):0;if(f===h)return g(a,b);for(d=a;d=d.parentNode;)i.unshift(d);for(d=b;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},c):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=y.attrHandle[b.toLowerCase()],d=c&&X.call(y.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:x.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!x.detectDuplicates,D=!x.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},z=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=z(b);return c},y=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&ma.test(c)&&(b=m(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+da+")"+a+"("+da+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=y.pseudos[a]||y.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],y.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=ba.call(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=B(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!y.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},y.pseudos.nth=y.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=h(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=i(w);return l.prototype=y.filters=y.pseudos,y.setFilters=new l,B=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(U).join("")===N,x.detectDuplicates=!!E,F(),x.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ca,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ba.find=fa,ba.expr=fa.selectors,ba.expr[":"]=ba.expr.pseudos,ba.unique=fa.uniqueSort,ba.text=fa.getText,ba.isXMLDoc=fa.isXML,ba.contains=fa.contains;var ga=ba.expr.match.needsContext,ha=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ia=/^.[^:#\[\.,]*$/;ba.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ba.find.matchesSelector(d,a)?[d]:[]:ba.find.matches(a,ba.grep(b,function(a){return 1===a.nodeType}))},ba.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(ba(a).filter(function(){for(b=0;c>b;b++)if(ba.contains(e[b],this))return!0}));for(b=0;c>b;b++)ba.find(a,e[b],d);return d=this.pushStack(c>1?ba.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(e(this,a||[],!1))},not:function(a){return this.pushStack(e(this,a||[],!0))},is:function(a){return!!e(this,"string"==typeof a&&ga.test(a)?ba(a):a||[],!1).length}});var ja,ka=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,la=ba.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ka.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ja).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ba?b[0]:b,ba.merge(this,ba.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:_,!0)),ha.test(c[1])&&ba.isPlainObject(b))for(c in b)ba.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=_.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=_,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ba.isFunction(a)?"undefined"!=typeof ja.ready?ja.ready(a):a(ba):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ba.makeArray(a,this))};la.prototype=ba.fn,ja=ba(_);var ma=/^(?:parents|prev(?:Until|All))/,na={children:!0,contents:!0,next:!0,prev:!0};ba.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&ba(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ba.fn.extend({has:function(a){var b=ba(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(ba.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ga.test(a)||"string"!=typeof a?ba(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ba.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ba.unique(f):f)},index:function(a){return a?"string"==typeof a?V.call(ba(a),this[0]):V.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ba.unique(ba.merge(this.get(),ba(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ba.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ba.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ba.dir(a,"parentNode",c)},next:function(a){return f(a,"nextSibling")},prev:function(a){return f(a,"previousSibling")},nextAll:function(a){return ba.dir(a,"nextSibling")},prevAll:function(a){return ba.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ba.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ba.dir(a,"previousSibling",c)},siblings:function(a){return ba.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ba.sibling(a.firstChild)},contents:function(a){return a.contentDocument||ba.merge([],a.childNodes)}},function(a,b){ba.fn[a]=function(c,d){var e=ba.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ba.filter(d,e)),this.length>1&&(na[a]||ba.unique(e),ma.test(a)&&e.reverse()),this.pushStack(e)}});var oa=/\S+/g,pa={};ba.Callbacks=function(a){a="string"==typeof a?pa[a]||g(a):ba.extend({},a);var b,c,d,e,f,h,i=[],j=!a.once&&[],k=function(g){for(b=a.memory&&g,c=!0,h=e||0,e=0,f=i.length,d=!0;i&&f>h;h++)if(i[h].apply(g[0],g[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function g(b){ba.each(b,function(b,c){var d=ba.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&ba.each(arguments,function(a,b){for(var c;(c=ba.inArray(b,i,c))>-1;)i.splice(c,1),d&&(f>=c&&f--,h>=c&&h--)}),this},has:function(a){return a?ba.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],f=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},ba.extend({Deferred:function(a){var b=[["resolve","done",ba.Callbacks("once memory"),"resolved"],["reject","fail",ba.Callbacks("once memory"),"rejected"],["notify","progress",ba.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ba.Deferred(function(c){ba.each(b,function(b,f){var g=ba.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ba.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ba.extend(a,d):d}},e={};return d.pipe=d.then,ba.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=S.call(arguments),g=f.length,h=1!==g||a&&ba.isFunction(a.promise)?g:0,i=1===h?a:ba.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?S.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ba.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var qa;ba.fn.ready=function(a){return ba.ready.promise().done(a),this},ba.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ba.readyWait++:ba.ready(!0)},ready:function(a){(a===!0?--ba.readyWait:ba.isReady)||(ba.isReady=!0,a!==!0&&--ba.readyWait>0||(qa.resolveWith(_,[ba]),ba.fn.trigger&&ba(_).trigger("ready").off("ready")))}}),ba.ready.promise=function(b){return qa||(qa=ba.Deferred(),"complete"===_.readyState?setTimeout(ba.ready):(_.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1))),qa.promise(b)},ba.ready.promise();var ra=ba.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ba.type(c)){e=!0;for(h in c)ba.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ba.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ba(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};ba.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},i.uid=1,i.accepts=ba.acceptData,i.prototype={key:function(a){if(!i.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=i.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,ba.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(ba.isEmptyObject(f))ba.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,ba.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{ba.isArray(b)?d=b.concat(b.map(ba.camelCase)):(e=ba.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(oa)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!ba.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var sa=new i,ta=new i,ua=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,va=/([A-Z])/g;ba.extend({hasData:function(a){return ta.hasData(a)||sa.hasData(a)},data:function(a,b,c){return ta.access(a,b,c)},removeData:function(a,b){ta.remove(a,b)},_data:function(a,b,c){return sa.access(a,b,c)},_removeData:function(a,b){sa.remove(a,b)}}),ba.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ta.get(f),1===f.nodeType&&!sa.get(f,"hasDataAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=ba.camelCase(d.slice(5)),j(f,d,e[d]));sa.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ta.set(this,a)}):ra(this,function(b){var c,d=ba.camelCase(a);if(f&&void 0===b){if(c=ta.get(f,a),void 0!==c)return c;if(c=ta.get(f,d),void 0!==c)return c;if(c=j(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=ta.get(this,d);ta.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&ta.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ta.remove(this,a)})}}),ba.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=sa.get(a,b),c&&(!d||ba.isArray(c)?d=sa.access(a,b,ba.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ba.queue(a,b),d=c.length,e=c.shift(),f=ba._queueHooks(a,b),g=function(){ba.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return sa.get(a,c)||sa.access(a,c,{empty:ba.Callbacks("once memory").add(function(){sa.remove(a,[b+"queue",c])})})}}),ba.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ba.queue(this[0],a):void 0===b?this:this.each(function(){var c=ba.queue(this,a,b);ba._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ba.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ba.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ba.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=sa.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var wa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xa=["Top","Right","Bottom","Left"],ya=function(a,b){return a=b||a,"none"===ba.css(a,"display")||!ba.contains(a.ownerDocument,a)},za=/^(?:checkbox|radio)$/i;!function(){var a=_.createDocumentFragment(),b=a.appendChild(_.createElement("div"));b.innerHTML="<input type='radio' checked='checked' name='t'/>",$.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",$.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var Aa="undefined";$.focusinBubbles="onfocusin"in a;var Ba=/^key/,Ca=/^(?:mouse|contextmenu)|click/,Da=/^(?:focusinfocus|focusoutblur)$/,Ea=/^([^.]*)(?:\.(.+)|)$/;ba.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sa.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=ba.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof ba!==Aa&&ba.event.triggered!==b.type?ba.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(oa)||[""],j=b.length;j--;)h=Ea.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=ba.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=ba.event.special[n]||{},k=ba.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ba.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),ba.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=sa.hasData(a)&&sa.get(a);if(q&&(i=q.events)){for(b=(b||"").match(oa)||[""],j=b.length;j--;)if(h=Ea.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ba.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ba.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)ba.event.remove(a,n+b[j],c,d,!0);ba.isEmptyObject(i)&&(delete q.handle,sa.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||_],n=Y.call(b,"type")?b.type:b,o=Y.call(b,"namespace")?b.namespace.split("."):[];
if(g=h=d=d||_,3!==d.nodeType&&8!==d.nodeType&&!Da.test(n+ba.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[ba.expando]?b:new ba.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ba.makeArray(c,[b]),l=ba.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!ba.isWindow(d)){for(i=l.delegateType||n,Da.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||_)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(sa.get(g,"events")||{})[b.type]&&sa.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&ba.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!ba.acceptData(d)||j&&ba.isFunction(d[n])&&!ba.isWindow(d)&&(h=d[j],h&&(d[j]=null),ba.event.triggered=n,d[n](),ba.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=ba.event.fix(a);var b,c,d,e,f,g=[],h=S.call(arguments),i=(sa.get(this,"events")||{})[a.type]||[],j=ba.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ba.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((ba.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?ba(e,this).index(i)>=0:ba.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||_,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[ba.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ca.test(e)?this.mouseHooks:Ba.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ba.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=_),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ba.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return ba.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ba.extend(new ba.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ba.event.trigger(e,null,b):ba.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ba.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},ba.Event=function(a,b){return this instanceof ba.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.getPreventDefault&&a.getPreventDefault()?k:l):this.type=a,b&&ba.extend(this,b),this.timeStamp=a&&a.timeStamp||ba.now(),void(this[ba.expando]=!0)):new ba.Event(a,b)},ba.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=k,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=k,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()}},ba.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ba.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ba.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),$.focusinBubbles||ba.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ba.event.simulate(b,a.target,ba.event.fix(a),!0)};ba.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=sa.access(d,b);e||d.addEventListener(a,c,!0),sa.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=sa.access(d,b)-1;e?sa.access(d,b,e):(d.removeEventListener(a,c,!0),sa.remove(d,b))}}}),ba.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=l;else if(!d)return this;return 1===e&&(f=d,d=function(a){return ba().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=ba.guid++)),this.each(function(){ba.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ba(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=l),this.each(function(){ba.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ba.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ba.event.trigger(a,b,c,!0):void 0}});var Fa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ga=/<([\w:]+)/,Ha=/<|&#?\w+;/,Ia=/<(?:script|style|link)/i,Ja=/checked\s*(?:[^=]|=\s*.checked.)/i,Ka=/^$|\/(?:java|ecma)script/i,La=/^true\/(.*)/,Ma=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Na={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Na.optgroup=Na.option,Na.tbody=Na.tfoot=Na.colgroup=Na.caption=Na.thead,Na.th=Na.td,ba.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=ba.contains(a.ownerDocument,a);if(!($.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ba.isXMLDoc(a)))for(g=s(h),f=s(a),d=0,e=f.length;e>d;d++)t(f[d],g[d]);if(b)if(c)for(f=f||s(a),g=g||s(h),d=0,e=f.length;e>d;d++)r(f[d],g[d]);else r(a,h);return g=s(h,"script"),g.length>0&&q(g,!i&&s(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===ba.type(e))ba.merge(l,e.nodeType?[e]:e);else if(Ha.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Ga.exec(e)||["",""])[1].toLowerCase(),h=Na[g]||Na._default,f.innerHTML=h[1]+e.replace(Fa,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;ba.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===ba.inArray(e,d))&&(i=ba.contains(e.ownerDocument,e),f=s(k.appendChild(e),"script"),i&&q(f),c))for(j=0;e=f[j++];)Ka.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f,g,h=ba.event.special,i=0;void 0!==(c=a[i]);i++){if(ba.acceptData(c)&&(f=c[sa.expando],f&&(b=sa.cache[f]))){if(d=Object.keys(b.events||{}),d.length)for(g=0;void 0!==(e=d[g]);g++)h[e]?ba.event.remove(c,e):ba.removeEvent(c,e,b.handle);sa.cache[f]&&delete sa.cache[f]}delete ta.cache[c[ta.expando]]}}}),ba.fn.extend({text:function(a){return ra(this,function(a){return void 0===a?ba.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=n(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ba.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ba.cleanData(s(c)),c.parentNode&&(b&&ba.contains(c.ownerDocument,c)&&q(s(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(ba.cleanData(s(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ba.clone(this,a,b)})},html:function(a){return ra(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ia.test(a)&&!Na[(Ga.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Fa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ba.cleanData(s(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ba.cleanData(s(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=T.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ba.isFunction(m);if(n||j>1&&"string"==typeof m&&!$.checkClone&&Ja.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=ba.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=ba.map(s(c,"script"),o),f=e.length;j>i;i++)g=c,i!==l&&(g=ba.clone(g,!0,!0),f&&ba.merge(e,s(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,ba.map(e,p),i=0;f>i;i++)g=e[i],Ka.test(g.type||"")&&!sa.access(g,"globalEval")&&ba.contains(h,g)&&(g.src?ba._evalUrl&&ba._evalUrl(g.src):ba.globalEval(g.textContent.replace(Ma,"")))}return this}}),ba.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ba.fn[a]=function(a){for(var c,d=[],e=ba(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),ba(e[g])[b](c),U.apply(d,c.get());return this.pushStack(d)}});var Oa,Pa={},Qa=/^margin/,Ra=new RegExp("^("+wa+")(?!px)[a-z%]+$","i"),Sa=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};!function(){function b(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",f.appendChild(g);var b=a.getComputedStyle(h,null);c="1%"!==b.top,d="4px"===b.width,f.removeChild(g)}var c,d,e="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",f=_.documentElement,g=_.createElement("div"),h=_.createElement("div");h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",$.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(h),a.getComputedStyle&&ba.extend($,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=h.appendChild(_.createElement("div"));return c.style.cssText=h.style.cssText=e,c.style.marginRight=c.style.width="0",h.style.width="1px",f.appendChild(g),b=!parseFloat(a.getComputedStyle(c,null).marginRight),f.removeChild(g),h.innerHTML="",b}})}(),ba.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Ta=/^(none|table(?!-c[ea]).+)/,Ua=new RegExp("^("+wa+")(.*)$","i"),Va=new RegExp("^([+-])=("+wa+")","i"),Wa={position:"absolute",visibility:"hidden",display:"block"},Xa={letterSpacing:0,fontWeight:400},Ya=["Webkit","O","Moz","ms"];ba.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=w(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ba.camelCase(b),i=a.style;return b=ba.cssProps[h]||(ba.cssProps[h]=y(i,h)),g=ba.cssHooks[b]||ba.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Va.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ba.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||ba.cssNumber[h]||(c+="px"),$.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]="",i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=ba.camelCase(b);return b=ba.cssProps[h]||(ba.cssProps[h]=y(a.style,h)),g=ba.cssHooks[b]||ba.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=w(a,b,d)),"normal"===e&&b in Xa&&(e=Xa[b]),""===c||c?(f=parseFloat(e),c===!0||ba.isNumeric(f)?f||0:e):e}}),ba.each(["height","width"],function(a,b){ba.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Ta.test(ba.css(a,"display"))?ba.swap(a,Wa,function(){return B(a,b,d)}):B(a,b,d):void 0},set:function(a,c,d){var e=d&&Sa(a);return z(a,c,d?A(a,b,d,"border-box"===ba.css(a,"boxSizing",!1,e),e):0)}}}),ba.cssHooks.marginRight=x($.reliableMarginRight,function(a,b){return b?ba.swap(a,{display:"inline-block"},w,[a,"marginRight"]):void 0}),ba.each({margin:"",padding:"",border:"Width"},function(a,b){ba.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xa[d]+b]=f[d]||f[d-2]||f[0];return e}},Qa.test(a)||(ba.cssHooks[a+b].set=z)}),ba.fn.extend({css:function(a,b){return ra(this,function(a,b,c){var d,e,f={},g=0;if(ba.isArray(b)){for(d=Sa(a),e=b.length;e>g;g++)f[b[g]]=ba.css(a,b[g],!1,d);return f}return void 0!==c?ba.style(a,b,c):ba.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ya(this)?ba(this).show():ba(this).hide()})}}),ba.Tween=D,D.prototype={constructor:D,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ba.cssNumber[c]?"":"px")},cur:function(){var a=D.propHooks[this.prop];return a&&a.get?a.get(this):D.propHooks._default.get(this)},run:function(a){var b,c=D.propHooks[this.prop];return this.pos=b=this.options.duration?ba.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ba.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ba.fx.step[a.prop]?ba.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ba.cssProps[a.prop]]||ba.cssHooks[a.prop])?ba.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ba.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ba.fx=D.prototype.init,ba.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=new RegExp("^(?:([+-])=|)("+wa+")([a-z%]*)$","i"),bb=/queueHooks$/,cb=[H],db={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=ab.exec(b),f=e&&e[3]||(ba.cssNumber[a]?"":"px"),g=(ba.cssNumber[a]||"px"!==f&&+d)&&ab.exec(ba.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ba.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ba.Animation=ba.extend(J,{tweener:function(a,b){ba.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],db[c]=db[c]||[],db[c].unshift(b)},prefilter:function(a,b){b?cb.unshift(a):cb.push(a)}}),ba.speed=function(a,b,c){var d=a&&"object"==typeof a?ba.extend({},a):{complete:c||!c&&b||ba.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ba.isFunction(b)&&b};return d.duration=ba.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ba.fx.speeds?ba.fx.speeds[d.duration]:ba.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ba.isFunction(d.old)&&d.old.call(this),d.queue&&ba.dequeue(this,d.queue)},d},ba.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ya).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ba.isEmptyObject(a),f=ba.speed(b,c,d),g=function(){var b=J(this,ba.extend({},a),f);(e||sa.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ba.timers,g=sa.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&bb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ba.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=sa.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ba.timers,g=d?d.length:0;for(c.finish=!0,ba.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ba.each(["toggle","show","hide"],function(a,b){var c=ba.fn[b];ba.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(F(b,!0),a,d,e)}}),ba.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ba.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ba.timers=[],ba.fx.tick=function(){var a,b=0,c=ba.timers;for(Za=ba.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||ba.fx.stop(),Za=void 0},ba.fx.timer=function(a){ba.timers.push(a),a()?ba.fx.start():ba.timers.pop()},ba.fx.interval=13,ba.fx.start=function(){$a||($a=setInterval(ba.fx.tick,ba.fx.interval))},ba.fx.stop=function(){clearInterval($a),$a=null},ba.fx.speeds={slow:600,fast:200,_default:400},ba.fn.delay=function(a,b){return a=ba.fx?ba.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=_.createElement("input"),b=_.createElement("select"),c=b.appendChild(_.createElement("option"));a.type="checkbox",$.checkOn=""!==a.value,$.optSelected=c.selected,b.disabled=!0,$.optDisabled=!c.disabled,a=_.createElement("input"),a.value="t",a.type="radio",$.radioValue="t"===a.value}();var eb,fb,gb=ba.expr.attrHandle;ba.fn.extend({attr:function(a,b){return ra(this,ba.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ba.removeAttr(this,a)})}}),ba.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===Aa?ba.prop(a,b,c):(1===f&&ba.isXMLDoc(a)||(b=b.toLowerCase(),d=ba.attrHooks[b]||(ba.expr.match.bool.test(b)?fb:eb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ba.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ba.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(oa);if(f&&1===a.nodeType)for(;c=f[e++];)d=ba.propFix[c]||c,ba.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!$.radioValue&&"radio"===b&&ba.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),fb={set:function(a,b,c){return b===!1?ba.removeAttr(a,c):a.setAttribute(c,c),c}},ba.each(ba.expr.match.bool.source.match(/\w+/g),function(a,b){var c=gb[b]||ba.find.attr;gb[b]=function(a,b,d){var e,f;return d||(f=gb[b],gb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,gb[b]=f),e}});var hb=/^(?:input|select|textarea|button)$/i;ba.fn.extend({prop:function(a,b){return ra(this,ba.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[ba.propFix[a]||a]})}}),ba.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!ba.isXMLDoc(a),f&&(b=ba.propFix[b]||b,e=ba.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||hb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),$.optSelected||(ba.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),ba.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ba.propFix[this.toLowerCase()]=this});var ib=/[\t\r\n\f]/g;ba.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(ba.isFunction(a))return this.each(function(b){ba(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(oa)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ib," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ba.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(ba.isFunction(a))return this.each(function(b){ba(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(oa)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ib," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ba.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(ba.isFunction(a)?function(c){ba(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=ba(this),f=a.match(oa)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===Aa||"boolean"===c)&&(this.className&&sa.set(this,"__className__",this.className),this.className=this.className||a===!1?"":sa.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ib," ").indexOf(b)>=0)return!0;return!1}});var jb=/\r/g;ba.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=ba.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ba(this).val()):a,null==e?e="":"number"==typeof e?e+="":ba.isArray(e)&&(e=ba.map(e,function(a){return null==a?"":a+""})),b=ba.valHooks[this.type]||ba.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=ba.valHooks[e.type]||ba.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(jb,""):null==c?"":c)):void 0}}),ba.extend({valHooks:{select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||($.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ba.nodeName(c.parentNode,"optgroup"))){if(b=ba(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ba.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ba.inArray(ba(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),ba.each(["radio","checkbox"],function(){ba.valHooks[this]={set:function(a,b){return ba.isArray(b)?a.checked=ba.inArray(ba(a).val(),b)>=0:void 0}},$.checkOn||(ba.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),ba.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ba.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ba.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var kb=ba.now(),lb=/\?/;ba.parseJSON=function(a){return JSON.parse(a+"")},ba.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&ba.error("Invalid XML: "+a),b};var mb,nb,ob=/#.*$/,pb=/([?&])_=[^&]*/,qb=/^(.*?):[ \t]*([^\r\n]*)$/gm,rb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,sb=/^(?:GET|HEAD)$/,tb=/^\/\//,ub=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vb={},wb={},xb="*/".concat("*");try{nb=location.href}catch(yb){nb=_.createElement("a"),nb.href="",nb=nb.href}mb=ub.exec(nb.toLowerCase())||[],ba.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nb,type:"GET",isLocal:rb.test(mb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ba.parseJSON,"text xml":ba.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?M(M(a,ba.ajaxSettings),b):M(ba.ajaxSettings,a)},ajaxPrefilter:K(vb),ajaxTransport:K(wb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=N(l,v,c)),s=O(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ba.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(ba.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--ba.active||ba.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ba.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ba(m):ba.event,o=ba.Deferred(),p=ba.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=qb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||nb)+"").replace(ob,"").replace(tb,mb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ba.trim(l.dataType||"*").toLowerCase().match(oa)||[""],null==l.crossDomain&&(i=ub.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===mb[1]&&i[2]===mb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(mb[3]||("http:"===mb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ba.param(l.data,l.traditional)),L(vb,l,b,v),2===t)return v;j=l.global,j&&0===ba.active++&&ba.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!sb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(lb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=pb.test(e)?e.replace(pb,"$1_="+kb++):e+(lb.test(e)?"&":"?")+"_="+kb++)),l.ifModified&&(ba.lastModified[e]&&v.setRequestHeader("If-Modified-Since",ba.lastModified[e]),ba.etag[e]&&v.setRequestHeader("If-None-Match",ba.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+xb+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=L(wb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ba.get(a,b,c,"json")},getScript:function(a,b){return ba.get(a,void 0,b,"script")}}),ba.each(["get","post"],function(a,b){ba[b]=function(a,c,d,e){return ba.isFunction(c)&&(e=e||d,d=c,c=void 0),ba.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ba.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ba.fn[b]=function(a){return this.on(b,a)}}),ba._evalUrl=function(a){return ba.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ba.fn.extend({wrapAll:function(a){var b;return ba.isFunction(a)?this.each(function(b){ba(this).wrapAll(a.call(this,b))}):(this[0]&&(b=ba(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(ba.isFunction(a)?function(b){ba(this).wrapInner(a.call(this,b))}:function(){var b=ba(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){
var b=ba.isFunction(a);return this.each(function(c){ba(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ba.nodeName(this,"body")||ba(this).replaceWith(this.childNodes)}).end()}}),ba.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},ba.expr.filters.visible=function(a){return!ba.expr.filters.hidden(a)};var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ba.param=function(a,b){var c,d=[],e=function(a,b){b=ba.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ba.ajaxSettings&&ba.ajaxSettings.traditional),ba.isArray(a)||a.jquery&&!ba.isPlainObject(a))ba.each(a,function(){e(this.name,this.value)});else for(c in a)P(c,a[c],b,e);return d.join("&").replace(zb,"+")},ba.fn.extend({serialize:function(){return ba.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ba.prop(this,"elements");return a?ba.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ba(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!za.test(a))}).map(function(a,b){var c=ba(this).val();return null==c?null:ba.isArray(c)?ba.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ba.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Eb=0,Fb={},Gb={0:200,1223:204},Hb=ba.ajaxSettings.xhr();a.ActiveXObject&&ba(a).on("unload",function(){for(var a in Fb)Fb[a]()}),$.cors=!!Hb&&"withCredentials"in Hb,$.ajax=Hb=!!Hb,ba.ajaxTransport(function(a){var b;return $.cors||Hb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Eb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Fb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Gb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Fb[g]=b("abort"),f.send(a.hasContent&&a.data||null)},abort:function(){b&&b()}}:void 0}),ba.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ba.globalEval(a),a}}}),ba.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),ba.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=ba("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),_.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Ib=[],Jb=/(=)\?(?=&|$)|\?\?/;ba.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ib.pop()||ba.expando+"_"+kb++;return this[a]=!0,a}}),ba.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Jb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ba.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Jb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ba.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Ib.push(e)),g&&ba.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ba.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||_;var d=ha.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ba.buildFragment([a],b,e),e&&e.length&&ba(e).remove(),ba.merge([],d.childNodes))};var Kb=ba.fn.load;ba.fn.load=function(a,b,c){if("string"!=typeof a&&Kb)return Kb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h),a=a.slice(0,h)),ba.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&ba.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?ba("<div>").append(ba.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},ba.expr.filters.animated=function(a){return ba.grep(ba.timers,function(b){return a===b.elem}).length};var Lb=a.document.documentElement;ba.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ba.css(a,"position"),l=ba(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ba.css(a,"top"),i=ba.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ba.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ba.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ba.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,ba.contains(b,d)?(typeof d.getBoundingClientRect!==Aa&&(e=d.getBoundingClientRect()),c=Q(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===ba.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ba.nodeName(a[0],"html")||(d=a.offset()),d.top+=ba.css(a[0],"borderTopWidth",!0),d.left+=ba.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-ba.css(c,"marginTop",!0),left:b.left-d.left-ba.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Lb;a&&!ba.nodeName(a,"html")&&"static"===ba.css(a,"position");)a=a.offsetParent;return a||Lb})}}),ba.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;ba.fn[b]=function(e){return ra(this,function(b,e,f){var g=Q(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),ba.each(["top","left"],function(a,b){ba.cssHooks[b]=x($.pixelPosition,function(a,c){return c?(c=w(a,b),Ra.test(c)?ba(a).position()[b]+"px":c):void 0})}),ba.each({Height:"height",Width:"width"},function(a,b){ba.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ba.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return ra(this,function(b,c,d){var e;return ba.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ba.css(b,c,g):ba.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ba.fn.size=function(){return this.length},ba.fn.andSelf=ba.fn.addBack,"function"==typeof d&&d.amd&&d("jquery",[],function(){return ba});var Mb=a.jQuery,Nb=a.$;return ba.noConflict=function(b){return a.$===ba&&(a.$=Nb),b&&a.jQuery===ba&&(a.jQuery=Mb),ba},typeof b===Aa&&(a.jQuery=a.$=ba),ba}),e("undefined"!=typeof $?$:window.$)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(a,b,c){(function(c){jQuery=c.jQuery=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;e.length>d;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a){var b=!1;a(document).mouseup(function(){b=!1}),a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!b){this._mouseStarted&&this._mouseUp(c),this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"==typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(c)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted)?(c.preventDefault(),!0):(!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),c.preventDefault(),b=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){function c(a,b,c){return[parseFloat(a[0])*(n.test(a[0])?b/100:1),parseFloat(a[1])*(n.test(a[1])?c/100:1)]}function d(b,c){return parseInt(a.css(b,c),10)||0}function e(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}a.ui=a.ui||{};var f,g=Math.max,h=Math.abs,i=Math.round,j=/left|center|right/,k=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,n=/%$/,o=a.fn.position;a.position={scrollbarWidth:function(){if(f!==b)return f;var c,d,e=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),g=e.children()[0];return a("body").append(e),c=g.offsetWidth,e.css("overflow","scroll"),d=g.offsetWidth,c===d&&(d=e[0].clientWidth),e.remove(),f=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]);return{element:c,isWindow:d,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:d?c.width():c.outerWidth(),height:d?c.height():c.outerHeight()}}},a.fn.position=function(b){if(!b||!b.of)return o.apply(this,arguments);b=a.extend({},b);var f,n,p,q,r,s,t=a(b.of),u=a.position.getWithinInfo(b.within),v=a.position.getScrollInfo(u),w=(b.collision||"flip").split(" "),x={};return s=e(t),t[0].preventDefault&&(b.at="left top"),n=s.width,p=s.height,q=s.offset,r=a.extend({},q),a.each(["my","at"],function(){var a,c,d=(b[this]||"").split(" ");1===d.length&&(d=j.test(d[0])?d.concat(["center"]):k.test(d[0])?["center"].concat(d):["center","center"]),d[0]=j.test(d[0])?d[0]:"center",d[1]=k.test(d[1])?d[1]:"center",a=l.exec(d[0]),c=l.exec(d[1]),x[this]=[a?a[0]:0,c?c[0]:0],b[this]=[m.exec(d[0])[0],m.exec(d[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===b.at[0]?r.left+=n:"center"===b.at[0]&&(r.left+=n/2),"bottom"===b.at[1]?r.top+=p:"center"===b.at[1]&&(r.top+=p/2),f=c(x.at,n,p),r.left+=f[0],r.top+=f[1],this.each(function(){var e,j,k=a(this),l=k.outerWidth(),m=k.outerHeight(),o=d(this,"marginLeft"),s=d(this,"marginTop"),y=l+o+d(this,"marginRight")+v.width,z=m+s+d(this,"marginBottom")+v.height,A=a.extend({},r),B=c(x.my,k.outerWidth(),k.outerHeight());"right"===b.my[0]?A.left-=l:"center"===b.my[0]&&(A.left-=l/2),"bottom"===b.my[1]?A.top-=m:"center"===b.my[1]&&(A.top-=m/2),A.left+=B[0],A.top+=B[1],a.support.offsetFractions||(A.left=i(A.left),A.top=i(A.top)),e={marginLeft:o,marginTop:s},a.each(["left","top"],function(c,d){a.ui.position[w[c]]&&a.ui.position[w[c]][d](A,{targetWidth:n,targetHeight:p,elemWidth:l,elemHeight:m,collisionPosition:e,collisionWidth:y,collisionHeight:z,offset:[f[0]+B[0],f[1]+B[1]],my:b.my,at:b.at,within:u,elem:k})}),b.using&&(j=function(a){var c=q.left-A.left,d=c+n-l,e=q.top-A.top,f=e+p-m,i={target:{element:t,left:q.left,top:q.top,width:n,height:p},element:{element:k,left:A.left,top:A.top,width:l,height:m},horizontal:0>d?"left":c>0?"right":"center",vertical:0>f?"top":e>0?"bottom":"middle"};l>n&&n>h(c+d)&&(i.horizontal="center"),m>p&&p>h(e+f)&&(i.vertical="middle"),i.important=g(h(c),h(d))>g(h(e),h(f))?"horizontal":"vertical",b.using.call(this,a,i)}),k.offset(a.extend(A,{using:j}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-f-e;b.collisionWidth>f?i>0&&0>=j?(c=a.left+i+b.collisionWidth-f-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+f-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=g(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-f-e;b.collisionHeight>f?i>0&&0>=j?(c=a.top+i+b.collisionHeight-f-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+f-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=g(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-g-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||h(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>h(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-g-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||h(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,a.top+n+o+p>l&&(c>0||l>h(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}},function(){var b,c,d,e,f,g=document.getElementsByTagName("body")[0],h=document.createElement("div");b=document.createElement(g?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},g&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(f in d)b.style[f]=d[f];b.appendChild(h),c=g||document.documentElement,c.insertBefore(b,c.firstChild),h.style.cssText="position: absolute; left: 10.7432222px;",e=a(h).offset().left,a.support.offsetFractions=e>10&&11>e,b.innerHTML="",c.removeChild(b)}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(b),this.handle?(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"original"!==this.options.helper||a.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1):!1},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return this.options.handle?!!a(b.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),
"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,h-p>r||q>i+p||j-p>t||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=p>=Math.abs(j-t),e=p>=Math.abs(k-s),f=p>=Math.abs(h-r),g=p>=Math.abs(i-q),d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=p>=Math.abs(j-s),e=p>=Math.abs(k-t),f=p>=Math.abs(h-q),g=p>=Math.abs(i-r),d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}a.widget("ui.droppable",{version:"1.10.3",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b=this.options,c=b.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=0,c=a.ui.ddmanager.droppables[this.options.scope];c.length>b;b++)c[b]===this&&c.splice(b,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"===b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,e=!1;return d&&(d.currentItem||d.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"ui-droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope===d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.ui.intersect=function(a,c,d){if(!c.offset)return!1;var e,f,g=(a.positionAbs||a.position.absolute).left,h=g+a.helperProportions.width,i=(a.positionAbs||a.position.absolute).top,j=i+a.helperProportions.height,k=c.offset.left,l=k+c.proportions.width,m=c.offset.top,n=m+c.proportions.height;switch(d){case"fit":return g>=k&&l>=h&&i>=m&&n>=j;case"intersect":return g+a.helperProportions.width/2>k&&l>h-a.helperProportions.width/2&&i+a.helperProportions.height/2>m&&n>j-a.helperProportions.height/2;case"pointer":return e=(a.positionAbs||a.position.absolute).left+(a.clickOffset||a.offset.click).left,f=(a.positionAbs||a.position.absolute).top+(a.clickOffset||a.offset.click).top,b(f,m,c.proportions.height)&&b(e,k,c.proportions.width);case"touch":return(i>=m&&n>=i||j>=m&&n>=j||m>i&&j>n)&&(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions.height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions={width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,e,f,g=a.ui.intersect(b,this,this.options.tolerance),h=!g&&this.isover?"isout":g&&!this.isover?"isover":null;h&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return a.data(this,"ui-droppable").options.scope===e}),f.length&&(d=a.data(f[0],"ui-droppable"),d.greedyChild="isover"===h)),d&&"isover"===h&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[h]=!0,this["isout"===h?"isover":"isout"]=!1,this["isover"===h?"_over":"_out"].call(this,c),d&&"isout"===h&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){function b(a){return parseInt(a,10)||0}function c(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;b.length>c;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(c){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=b(this.helper.css("left")),e=b(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:c.pageX,top:c.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",c),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,d,e,f,g,h=this.options;g={minWidth:c(h.minWidth)?h.minWidth:0,maxWidth:c(h.maxWidth)?h.maxWidth:1/0,minHeight:c(h.minHeight)?h.minHeight:0,maxHeight:c(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,d=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),g.maxWidth>d&&(g.maxWidth=d),g.maxHeight>f&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),c(a.left)&&(this.position.left=a.left),c(a.top)&&(this.position.top=a.top),c(a.height)&&(this.size.height=a.height),c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;return c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=c(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=c(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=c(a.width)&&b.minWidth&&b.minWidth>a.width,h=c(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(d),l=/nw|ne|n/.test(d);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;this._proportionallyResizeElements.length>a;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;c.length>b;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var c,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(c=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=b(c.css("padding"+e))}),j.containerOffset=c.offset(),j.containerPosition=c.position(),j.containerSize={height:c.innerHeight()-d[3],width:c.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,
g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=g.parentData.left),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&m>c.maxWidth,p=c.maxHeight&&n>c.maxHeight,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(b.size.width=m,b.size.height=n,b.position.top=f.top-l,b.position.left=f.left-k)}})}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var b,c=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){b=a(c.options.filter,c.element[0]),b.addClass("ui-selectee"),b.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=b.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(b){var c=this,d=this.options;this.opos=[b.pageX,b.pageY],this.options.disabled||(this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.pageX,top:b.pageY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0,b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().addBack().each(function(){var d,e=a.data(this,"selectable-item");return e?(d=!b.metaKey&&!b.ctrlKey||!e.$element.hasClass("ui-selected"),e.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),e.unselecting=!d,e.selecting=d,e.selected=d,d?c._trigger("selecting",b,{selecting:e.element}):c._trigger("unselecting",b,{unselecting:e.element}),!1):void 0}))},_mouseDrag:function(b){if(this.dragged=!0,!this.options.disabled){var c,d=this,e=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;return f>h&&(c=h,h=f,f=c),g>i&&(c=i,i=g,g=c),this.helper.css({left:f,top:g,width:h-f,height:i-g}),this.selectees.each(function(){var c=a.data(this,"selectable-item"),j=!1;c&&c.element!==d.element[0]&&("touch"===e.tolerance?j=!(c.left>h||f>c.right||c.top>i||g>c.bottom):"fit"===e.tolerance&&(j=c.left>f&&h>c.right&&c.top>g&&i>c.bottom),j?(c.selected&&(c.$element.removeClass("ui-selected"),c.selected=!1),c.unselecting&&(c.$element.removeClass("ui-unselecting"),c.unselecting=!1),c.selecting||(c.$element.addClass("ui-selecting"),c.selecting=!0,d._trigger("selecting",b,{selecting:c.element}))):(c.selecting&&((b.metaKey||b.ctrlKey)&&c.startselected?(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.$element.addClass("ui-selected"),c.selected=!0):(c.$element.removeClass("ui-selecting"),c.selecting=!1,c.startselected&&(c.$element.addClass("ui-unselecting"),c.unselecting=!0),d._trigger("unselecting",b,{unselecting:c.element}))),c.selected&&(b.metaKey||b.ctrlKey||c.startselected||(c.$element.removeClass("ui-selected"),c.selected=!1,c.$element.addClass("ui-unselecting"),c.unselecting=!0,d._trigger("unselecting",b,{unselecting:c.element})))))}),!1}},_mouseStop:function(b){var c=this;return this.dragged=!1,a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}})}(jQuery),function(a){function b(a,b,c){return a>b&&b+c>a}function c(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||c(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),d&&(!this.options.handle||c||(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),e))?(this.currentItem=d,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-a(document).scrollTop()<g.scrollSensitivity?h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<g.scrollSensitivity&&(h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)),b.pageX-a(document).scrollLeft()<g.scrollSensitivity?h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<g.scrollSensitivity&&(h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"===this.options.type?!a.contains(this.element[0],e):!0)){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var c="x"===this.options.axis||b(this.positionAbs.top+this.offset.click.top,a.top,a.height),d="y"===this.options.axis||b(this.positionAbs.left+this.offset.click.left,a.left,a.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();return e?this.floating?g&&"right"===g||"down"===f?2:1:f&&("down"===f?2:1):!1},_intersectsWithSides:function(a){var c=b(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),d=b(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"===f&&d||"left"===f&&!d:e&&("down"===e&&c||"up"===e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c,d,e,f,g=[],h=[],i=this._connectWith();if(i&&b)for(c=i.length-1;c>=0;c--)for(e=a(i[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&h.push([a.isFunction(f.options.items)?f.options.items.call(f.element):a(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f]);for(h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]).addClass(c||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===d?b.currentItem.children().each(function(){a("<td>&#160;</td>",b.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(e)}):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_contactContainers:function(d){var e,f,g,h,i,j,k,l,m,n,o=null,p=null;for(e=this.containers.length-1;e>=0;e--)if(!a.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(o&&a.contains(this.containers[e].element[0],o.element[0]))continue;o=this.containers[e],p=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",d,this._uiHash(this)),this.containers[e].containerCache.over=0);if(o)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(g=1e4,h=null,n=o.floating||c(this.currentItem),i=n?"left":"top",j=n?"width":"height",k=this.positionAbs[i]+this.offset.click[i],f=this.items.length-1;f>=0;f--)a.contains(this.containers[p].element[0],this.items[f].item[0])&&this.items[f].item[0]!==this.currentItem[0]&&(!n||b(this.positionAbs.top+this.offset.click.top,this.items[f].top,this.items[f].height))&&(l=this.items[f].item.offset()[i],m=!1,Math.abs(l-k)>Math.abs(l+this.items[f][j]-k)&&(m=!0,l+=this.items[f][j]),g>Math.abs(l-k)&&(g=Math.abs(l-k),h=this.items[f],this.direction=m?"up":"down"));if(!h&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return;h?this._rearrange(d,h,null,!0):this._rearrange(d,null,this.containers[p].element,!0),this._trigger("change",d,this._uiHash()),this.containers[p]._trigger("change",d,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",d,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"===e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"===e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var c,d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(c in this._storedCSS)("auto"===this._storedCSS[c]||"static"===this._storedCSS[c])&&(this._storedCSS[c]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||d.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),c=this.containers.length-1;c>=0;c--)b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[c])),this.containers[c].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!b){for(this._trigger("beforeStop",a,this._uiHash()),c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!1}if(b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,
!b){for(c=0;d.length>c;c++)d[c].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})}(jQuery),function(a){var b=0,c={},d={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide",d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show",a.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.options;this.prevShow=this.prevHide=a(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),b.collapsible||b.active!==!1&&null!=b.active||(b.active=0),this._processPanels(),0>b.active&&(b.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():a(),content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),a=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){return"active"===a?void this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||this.options.active!==!1||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),void("disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b)))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b=this.options;this._processPanels(),b.active===!1&&b.collapsible===!0||!this.headers.length?(b.active=!1,this.active=a()):b.active===!1?this._activate(0):this.active.length&&!a.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(b.active=!1,this.active=a()):this._activate(Math.max(0,b.active-1)):b.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var c,d=this.options,e=d.heightStyle,f=this.element.parent(),g=this.accordionId="ui-accordion-"+(this.element.attr("id")||++b);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(b){var c=a(this),d=c.attr("id"),e=c.next(),f=e.attr("id");d||(d=g+"-header-"+b,c.attr("id",d)),f||(f=g+"-panel-"+b,e.attr("id",f)),c.attr("aria-controls",f),e.attr("aria-labelledby",d)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(d.event),"fill"===e?(c=f.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===e&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).css("height","").height())}).height(c))},_activate:function(b){var c=this._findActive(b)[0];c!==this.active[0]&&(c=c||this.active[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return"number"==typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={keydown:"_keydown"};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,c),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e[0]===d[0],g=f&&c.collapsible,h=g?a():e.next(),i=d.next(),j={oldHeader:d,oldPanel:i,newHeader:g?a():e,newPanel:h};b.preventDefault(),f&&!c.collapsible||this._trigger("beforeActivate",b,j)===!1||(c.active=g?!1:this.headers.index(e),this.active=f?a():e,this._toggle(j),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),f||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=c,this.prevHide=d,this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b)),d.attr({"aria-expanded":"false","aria-hidden":"true"}),d.prev().attr("aria-selected","false"),c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),c.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,e){var f,g,h,i=this,j=0,k=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{},m=k&&l.down||l,n=function(){i._toggleComplete(e)};return"number"==typeof m&&(h=m),"string"==typeof m&&(g=m),g=g||m.easing||l.easing,h=h||m.duration||l.duration,b.length?a.length?(f=a.show().outerHeight(),b.animate(c,{duration:h,easing:g,step:function(a,b){b.now=Math.round(a)}}),void a.hide().animate(d,{duration:h,easing:g,complete:n,step:function(a,c){c.now=Math.round(a),"height"!==c.prop?j+=c.now:"content"!==i.options.heightStyle&&(c.now=Math.round(f-b.outerHeight()-j),j=0)}})):b.animate(c,h,g,n):a.animate(d,h,g,n)},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),b.length&&(b.parent()[0].className=b.parent()[0].className),this._trigger("activate",null,a)}})}(jQuery),function(a){var b=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e,g="input"===e;this.isMultiLine=f?!0:g?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[f||g?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))return b=!0,d=!0,void(c=!0);b=!1,d=!1,c=!1;var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:b=!0,this._move("previousPage",e);break;case f.PAGE_DOWN:b=!0,this._move("nextPage",e);break;case f.UP:b=!0,this._keyEvent("previous",e);break;case f.DOWN:b=!0,this._keyEvent("next",e);break;case f.ENTER:case f.NUMPAD_ENTER:this.menu.active&&(b=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}},keypress:function(d){if(b)return b=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&d.preventDefault());if(!c){var e=a.ui.keyCode;switch(d.keyCode){case e.PAGE_UP:this._move("previousPage",d);break;case e.PAGE_DOWN:this._move("nextPage",d);break;case e.UP:this._keyEvent("previous",d);break;case e.DOWN:this._keyEvent("next",d)}}},input:function(a){return d?(d=!1,void a.preventDefault()):void this._searchTimeout(a)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),void this._change(a))}}),this._initSource(),this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(b){b.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});var d=c.item.data("ui-autocomplete-item");!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d,this.selectedItem=c})),!1!==this._trigger("select",a,{item:c})&&this._value(c.value),this.term=this._value(),this.close(a),this.selectedItem=c}}),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b),"source"===a&&this._initSource(),"appendTo"===a&&this.menu.element.appendTo(this._appendTo()),"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b||(b=this.element.closest(".ui-front")),b.length||(b=this.document[0].body),b},_initSource:function(){var b,c,d=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"==typeof this.options.source?(c=this.options.source,this.source=function(b,e){d.xhr&&d.xhr.abort(),d.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){return a=null!=a?a:this._value(),this.term=this._value(),a.length<this.options.minLength?this.close(b):this._trigger("search",b)!==!1?this._search(a):void 0},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:a},this._response())},_response:function(){var a=this,c=++b;return function(d){c===b&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a)),this._trigger("response",null,{content:a}),!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0,this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty();this._renderMenu(c,b),this.isNewMenu=!0,this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a)?(this._value(this.term),void this.menu.blur()):void this.menu[a](b):void this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}}),a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(a>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){var b;this._superApply(arguments),this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})}(jQuery),function(a){var b,c,d,e,f="ui-button ui-widget ui-state-default ui-corner-all",g="ui-state-hover ui-state-active ",h="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",i=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},j=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,i),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,k="checkbox"===this.type||"radio"===this.type,l=k?"":"ui-state-active",m="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(f).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||a(this).removeClass(l)}).bind("click"+this.eventNamespace,function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){g.buttonElement.addClass(m)}).bind("blur"+this.eventNamespace,function(){g.buttonElement.removeClass(m)}),k&&(this.element.bind("change"+this.eventNamespace,function(){e||g.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){h.disabled||(e=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){h.disabled||(c!==a.pageX||d!==a.pageY)&&(e=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return h.disabled||e?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||e)return!1;a(this).addClass("ui-state-active"),g.buttonElement.attr("aria-pressed","true");var b=g.element[0];j(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),b=this,void g.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return h.disabled?!1:void((b.keyCode===a.ui.keyCode.SPACE||b.keyCode===a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(f+" "+g+" "+h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?void(b?this.element.prop("disabled",!0):this.element.prop("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?j(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(h),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only"),b.addClass(f.join(" "))}}),a.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(a,b){function c(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},a.extend(this._defaults,this.regional[""]),this.dpDiv=d(a("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(b){var c="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return b.delegate(c,"mouseout",function(){a(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate(c,"mouseover",function(){a.datepicker._isDisabledDatepicker(f.inline?b.parent()[0]:f.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),a(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function e(b,c){a.extend(b,c);for(var d in c)null==c[d]&&(b[d]=c[d]);return b}a.extend(a.ui,{datepicker:{version:"1.10.3"}});var f,g="datepicker";a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return e(this._defaults,a||{}),this},_attachDatepicker:function(b,c){var d,e,f;d=b.nodeName.toLowerCase(),e="div"===d||"span"===d,b.id||(this.uuid+=1,b.id="dp"+this.uuid),f=this._newInst(a(b),e),f.settings=a.extend({},c||{}),"input"===d?this._connectDatepicker(b,f):e&&this._inlineDatepicker(b,f)},_newInst:function(b,c){var e=b[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:e,input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(a("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]),c.trigger=a([]),d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(c),a.data(b,g,c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d,e,f,g=this._get(c,"appendText"),h=this._get(c,"isRTL");c.append&&c.append.remove(),g&&(c.append=a("<span class='"+this._appendClass+"'>"+g+"</span>"),b[h?"before":"after"](c.append)),b.unbind("focus",this._showDatepicker),c.trigger&&c.trigger.remove(),d=this._get(c,"showOn"),("focus"===d||"both"===d)&&b.focus(this._showDatepicker),("button"===d||"both"===d)&&(e=this._get(c,"buttonText"),f=this._get(c,"buttonImage"),c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:e,title:e}):a("<button type='button'></button>").addClass(this._triggerClass).html(f?a("<img/>").attr({src:f,alt:e,title:e}):e)),b[h?"before":"after"](c.trigger),c.trigger.click(function(){return a.datepicker._datepickerShowing&&a.datepicker._lastInput===b[0]?a.datepicker._hideDatepicker():a.datepicker._datepickerShowing&&a.datepicker._lastInput!==b[0]?(a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0])):a.datepicker._showDatepicker(b[0]),!1}))},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b,c,d,e,f=new Date(2009,11,20),g=this._get(a,"dateFormat");g.match(/[DM]/)&&(b=function(a){for(c=0,d=0,e=0;a.length>e;e++)a[e].length>c&&(c=a[e].length,d=e);return d},f.setMonth(b(this._get(a,g.match(/MM/)?"monthNames":"monthNamesShort"))),f.setDate(b(this._get(a,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-f.getDay())),a.input.attr("size",this._formatDate(a,f).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv),a.data(b,g,c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,d,f,h){var i,j,k,l,m,n=this._dialogInst;return n||(this.uuid+=1,i="dp"+this.uuid,this._dialogInput=a("<input type='text' id='"+i+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},a.data(this._dialogInput[0],g,n)),e(n.settings,f||{}),c=c&&c.constructor===Date?this._formatDate(n,c):c,this._dialogInput.val(c),this._pos=h?h.length?h:[h.pageX,h.pageY]:null,this._pos||(j=document.documentElement.clientWidth,k=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,m=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[j/2-100+l,k/2-150+m]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=d,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),a.blockUI&&a.blockUI(this.dpDiv),a.data(this._dialogInput[0],g,n),this},_destroyDatepicker:function(b){var c,d=a(b),e=a.data(b,g);d.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),a.removeData(b,g),"input"===c?(e.append.remove(),e.trigger.remove(),d.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===c||"span"===c)&&d.removeClass(this.markerClassName).empty())},_enableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}))},_disableDatepicker:function(b){var c,d,e=a(b),f=a.data(b,g);e.hasClass(this.markerClassName)&&(c=b.nodeName.toLowerCase(),"input"===c?(b.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===c||"span"===c)&&(d=e.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=a.map(this._disabledInputs,function(a){return a===b?null:a}),this._disabledInputs[this._disabledInputs.length]=b)},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;this._disabledInputs.length>b;b++)if(this._disabledInputs[b]===a)return!0;return!1},_getInst:function(b){try{return a.data(b,g)}catch(c){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(c,d,f){var g,h,i,j,k=this._getInst(c);return 2===arguments.length&&"string"==typeof d?"defaults"===d?a.extend({},a.datepicker._defaults):k?"all"===d?a.extend({},k.settings):this._get(k,d):null:(g=d||{},
"string"==typeof d&&(g={},g[d]=f),k&&(this._curInst===k&&this._hideDatepicker(),h=this._getDateDatepicker(c,!0),i=this._getMinMaxDate(k,"min"),j=this._getMinMaxDate(k,"max"),e(k.settings,g),null!==i&&g.dateFormat!==b&&g.minDate===b&&(k.settings.minDate=this._formatDate(k,i)),null!==j&&g.dateFormat!==b&&g.maxDate===b&&(k.settings.maxDate=this._formatDate(k,j)),"disabled"in g&&(g.disabled?this._disableDatepicker(c):this._enableDatepicker(c)),this._attachments(a(c),k),this._autoSize(k),this._setDate(k,h),this._updateAlternate(k),this._updateDatepicker(k)),b)},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(b){var c,d,e,f=a.datepicker._getInst(b.target),g=!0,h=f.dpDiv.is(".ui-datepicker-rtl");if(f._keyEvent=!0,a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker(),g=!1;break;case 13:return e=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",f.dpDiv),e[0]&&a.datepicker._selectDay(b.target,f.selectedMonth,f.selectedYear,e[0]),c=a.datepicker._get(f,"onSelect"),c?(d=a.datepicker._formatDate(f),c.apply(f.input?f.input[0]:null,[d,f])):a.datepicker._hideDatepicker(),!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target),g=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target),g=b.ctrlKey||b.metaKey;break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?1:-1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(f,"stepBigMonths"):-a.datepicker._get(f,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D"),g=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,h?-1:1,"D"),g=b.ctrlKey||b.metaKey,b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(f,"stepBigMonths"):+a.datepicker._get(f,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D"),g=b.ctrlKey||b.metaKey;break;default:g=!1}else 36===b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):g=!1;g&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d,e,f=a.datepicker._getInst(c.target);return a.datepicker._get(f,"constrainInput")?(d=a.datepicker._possibleChars(a.datepicker._get(f,"dateFormat")),e=String.fromCharCode(null==c.charCode?c.keyCode:c.charCode),c.ctrlKey||c.metaKey||" ">e||!d||d.indexOf(e)>-1):b},_doKeyUp:function(b){var c,d=a.datepicker._getInst(b.target);if(d.input.val()!==d.lastVal)try{c=a.datepicker.parseDate(a.datepicker._get(d,"dateFormat"),d.input?d.input.val():null,a.datepicker._getFormatConfig(d)),c&&(a.datepicker._setDateFromField(d),a.datepicker._updateAlternate(d),a.datepicker._updateDatepicker(d))}catch(e){}return!0},_showDatepicker:function(b){if(b=b.target||b,"input"!==b.nodeName.toLowerCase()&&(b=a("input",b.parentNode)[0]),!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!==b){var c,d,f,g,h,i,j;c=a.datepicker._getInst(b),a.datepicker._curInst&&a.datepicker._curInst!==c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0])),d=a.datepicker._get(c,"beforeShow"),f=d?d.apply(b,[b,c]):{},f!==!1&&(e(c.settings,f),c.lastVal=null,a.datepicker._lastInput=b,a.datepicker._setDateFromField(c),a.datepicker._inDialog&&(b.value=""),a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight),g=!1,a(b).parents().each(function(){return g|="fixed"===a(this).css("position"),!g}),h={left:a.datepicker._pos[0],top:a.datepicker._pos[1]},a.datepicker._pos=null,c.dpDiv.empty(),c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),a.datepicker._updateDatepicker(c),h=a.datepicker._checkOffset(c,h,g),c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":g?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),c.inline||(i=a.datepicker._get(c,"showAnim"),j=a.datepicker._get(c,"duration"),c.dpDiv.zIndex(a(b).zIndex()+1),a.datepicker._datepickerShowing=!0,a.effects&&a.effects.effect[i]?c.dpDiv.show(i,a.datepicker._get(c,"showOptions"),j):c.dpDiv[i||"show"](i?j:null),a.datepicker._shouldFocusInput(c)&&c.input.focus(),a.datepicker._curInst=c))}},_updateDatepicker:function(b){this.maxRows=4,f=b,b.dpDiv.empty().append(this._generateHTML(b)),this._attachHandlers(b),b.dpDiv.find("."+this._dayOverClass+" a").mouseover();var c,d=this._getNumberOfMonths(b),e=d[1],g=17;b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),e>1&&b.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",g*e+"em"),b.dpDiv[(1!==d[0]||1!==d[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),b===a.datepicker._curInst&&a.datepicker._datepickerShowing&&a.datepicker._shouldFocusInput(b)&&b.input.focus(),b.yearshtml&&(c=b.yearshtml,setTimeout(function(){c===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml),c=b.yearshtml=null},0))},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),g=b.input?b.input.outerWidth():0,h=b.input?b.input.outerHeight():0,i=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),j=document.documentElement.clientHeight+(d?0:a(document).scrollTop());return c.left-=this._get(b,"isRTL")?e-g:0,c.left-=d&&c.left===b.input.offset().left?a(document).scrollLeft():0,c.top-=d&&c.top===b.input.offset().top+h?a(document).scrollTop():0,c.left-=Math.min(c.left,c.left+e>i&&i>e?Math.abs(c.left+e-i):0),c.top-=Math.min(c.top,c.top+f>j&&j>f?Math.abs(f+h):0),c},_findPos:function(b){for(var c,d=this._getInst(b),e=this._get(d,"isRTL");b&&("hidden"===b.type||1!==b.nodeType||a.expr.filters.hidden(b));)b=b[e?"previousSibling":"nextSibling"];return c=a(b).offset(),[c.left,c.top]},_hideDatepicker:function(b){var c,d,e,f,h=this._curInst;!h||b&&h!==a.data(b,g)||this._datepickerShowing&&(c=this._get(h,"showAnim"),d=this._get(h,"duration"),e=function(){a.datepicker._tidyDialog(h)},a.effects&&(a.effects.effect[c]||a.effects[c])?h.dpDiv.hide(c,a.datepicker._get(h,"showOptions"),d,e):h.dpDiv["slideDown"===c?"slideUp":"fadeIn"===c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1,f=this._get(h,"onClose"),f&&f.apply(h.input?h.input[0]:null,[h.input?h.input.val():"",h]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){var c=a(b.target),d=a.datepicker._getInst(c[0]);(c[0].id!==a.datepicker._mainDivId&&0===c.parents("#"+a.datepicker._mainDivId).length&&!c.hasClass(a.datepicker.markerClassName)&&!c.closest("."+a.datepicker._triggerClass).length&&a.datepicker._datepickerShowing&&(!a.datepicker._inDialog||!a.blockUI)||c.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!==d)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){var e=a(b),f=this._getInst(e[0]);this._isDisabledDatepicker(e[0])||(this._adjustInstDate(f,c+("M"===d?this._get(f,"showCurrentAtPos"):0),d),this._updateDatepicker(f))},_gotoToday:function(b){var c,d=a(b),e=this._getInst(d[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(c=new Date,e.selectedDay=c.getDate(),e.drawMonth=e.selectedMonth=c.getMonth(),e.drawYear=e.selectedYear=c.getFullYear()),this._notifyChange(e),this._adjustDate(d)},_selectMonthYear:function(b,c,d){var e=a(b),f=this._getInst(e[0]);f["selected"+("M"===d?"Month":"Year")]=f["draw"+("M"===d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10),this._notifyChange(f),this._adjustDate(e)},_selectDay:function(b,c,d,e){var f,g=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(g[0])||(f=this._getInst(g[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(b){var c=a(b);this._selectDate(c,"")},_selectDate:function(b,c){var d,e=a(b),f=this._getInst(e[0]);c=null!=c?c:this._formatDate(f),f.input&&f.input.val(c),this._updateAlternate(f),d=this._get(f,"onSelect"),d?d.apply(f.input?f.input[0]:null,[c,f]):f.input&&f.input.trigger("change"),f.inline?this._updateDatepicker(f):(this._hideDatepicker(),this._lastInput=f.input[0],"object"!=typeof f.input[0]&&f.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c,d,e,f=this._get(b,"altField");f&&(c=this._get(b,"altFormat")||this._get(b,"dateFormat"),d=this._getDate(b),e=this.formatDate(c,d,this._getFormatConfig(b)),a(f).each(function(){a(this).val(e)}))},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b,c=new Date(a.getTime());return c.setDate(c.getDate()+4-(c.getDay()||7)),b=c.getTime(),c.setMonth(0),c.setDate(1),Math.floor(Math.round((b-c)/864e5)/7)+1},parseDate:function(c,d,e){if(null==c||null==d)throw"Invalid arguments";if(d="object"==typeof d?""+d:d+"",""===d)return null;var f,g,h,i,j=0,k=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,l="string"!=typeof k?k:(new Date).getFullYear()%100+parseInt(k,10),m=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,n=(e?e.dayNames:null)||this._defaults.dayNames,o=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,q=-1,r=-1,s=-1,t=-1,u=!1,v=function(a){var b=c.length>f+1&&c.charAt(f+1)===a;return b&&f++,b},w=function(a){var b=v(a),c="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=RegExp("^\\d{1,"+c+"}"),f=d.substring(j).match(e);if(!f)throw"Missing number at position "+j;return j+=f[0].length,parseInt(f[0],10)},x=function(c,e,f){var g=-1,h=a.map(v(c)?f:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(h,function(a,c){var e=c[1];return d.substr(j,e.length).toLowerCase()===e.toLowerCase()?(g=c[0],j+=e.length,!1):b}),-1!==g)return g+1;throw"Unknown name at position "+j},y=function(){if(d.charAt(j)!==c.charAt(f))throw"Unexpected literal at position "+j;j++};for(f=0;c.length>f;f++)if(u)"'"!==c.charAt(f)||v("'")?y():u=!1;else switch(c.charAt(f)){case"d":s=w("d");break;case"D":x("D",m,n);break;case"o":t=w("o");break;case"m":r=w("m");break;case"M":r=x("M",o,p);break;case"y":q=w("y");break;case"@":i=new Date(w("@")),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"!":i=new Date((w("!")-this._ticksTo1970)/1e4),q=i.getFullYear(),r=i.getMonth()+1,s=i.getDate();break;case"'":v("'")?y():u=!0;break;default:y()}if(d.length>j&&(h=d.substr(j),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;if(-1===q?q=(new Date).getFullYear():100>q&&(q+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l>=q?0:-100)),t>-1)for(r=1,s=t;g=this._getDaysInMonth(q,r-1),!(g>=s);)r++,s-=g;if(i=this._daylightSavingAdjust(new Date(q,r-1,s)),i.getFullYear()!==q||i.getMonth()+1!==r||i.getDate()!==s)throw"Invalid date";return i},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d,e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=function(b){var c=a.length>d+1&&a.charAt(d+1)===b;return c&&d++,c},j=function(a,b,c){var d=""+b;if(i(a))for(;c>d.length;)d="0"+d;return d},k=function(a,b,c,d){return i(a)?d[b]:c[b]},l="",m=!1;if(b)for(d=0;a.length>d;d++)if(m)"'"!==a.charAt(d)||i("'")?l+=a.charAt(d):m=!1;else switch(a.charAt(d)){case"d":l+=j("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=j("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=j("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),g,h);break;case"y":l+=i("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=1e4*b.getTime()+this._ticksTo1970;break;case"'":i("'")?l+="'":m=!0;break;default:l+=a.charAt(d)}return l},_possibleChars:function(a){var b,c="",d=!1,e=function(c){var d=a.length>b+1&&a.charAt(b+1)===c;return d&&b++,d};for(b=0;a.length>b;b++)if(d)"'"!==a.charAt(b)||e("'")?c+=a.charAt(b):d=!1;else switch(a.charAt(b)){case"d":case"m":case"y":case"@":c+="0123456789";break;case"D":case"M":return null;case"'":e("'")?c+="'":d=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e=this._getDefaultDate(a),f=e,g=this._getFormatConfig(a);try{f=this.parseDate(c,d,g)||e}catch(h){d=b?"":d}a.selectedDay=f.getDate(),a.drawMonth=a.selectedMonth=f.getMonth(),a.drawYear=a.selectedYear=f.getFullYear(),a.currentDay=d?f.getDate():0,a.currentMonth=d?f.getMonth():0,a.currentYear=d?f.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),h=e.getDate(),i=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=i.exec(c);j;){switch(j[2]||"d"){case"d":case"D":h+=parseInt(j[1],10);break;case"w":case"W":h+=7*parseInt(j[1],10);break;case"m":case"M":g+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g));break;case"y":case"Y":f+=parseInt(j[1],10),h=Math.min(h,a.datepicker._getDaysInMonth(f,g))}j=i.exec(c)}return new Date(f,g,h)},g=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime());return g=g&&"Invalid Date"==""+g?d:g,g&&(g.setHours(0),g.setMinutes(0),g.setSeconds(0),g.setMilliseconds(0)),this._daylightSavingAdjust(g)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),e===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){var b=!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(b){var c=this._get(b,"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){var b={prev:function(){a.datepicker._adjustDate(d,-c,"M")},next:function(){a.datepicker._adjustDate(d,+c,"M")},hide:function(){a.datepicker._hideDatepicker()},today:function(){a.datepicker._gotoToday(d)},selectDay:function(){return a.datepicker._selectDay(d,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return a.datepicker._selectMonthYear(d,this,"M"),!1},selectYear:function(){return a.datepicker._selectMonthYear(d,this,"Y"),!1}};a(this).bind(this.getAttribute("data-event"),b[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O=new Date,P=this._daylightSavingAdjust(new Date(O.getFullYear(),O.getMonth(),O.getDate())),Q=this._get(a,"isRTL"),R=this._get(a,"showButtonPanel"),S=this._get(a,"hideIfNoPrevNext"),T=this._get(a,"navigationAsDateFormat"),U=this._getNumberOfMonths(a),V=this._get(a,"showCurrentAtPos"),W=this._get(a,"stepMonths"),X=1!==U[0]||1!==U[1],Y=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(a,"min"),$=this._getMinMaxDate(a,"max"),_=a.drawMonth-V,aa=a.drawYear;if(0>_&&(_+=12,aa--),$)for(b=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),b=Z&&Z>b?Z:b;this._daylightSavingAdjust(new Date(aa,_,1))>b;)_--,0>_&&(_=11,aa--);for(a.drawMonth=_,a.drawYear=aa,c=this._get(a,"prevText"),c=T?this.formatDate(c,this._daylightSavingAdjust(new Date(aa,_-W,1)),this._getFormatConfig(a)):c,d=this._canAdjustMonth(a,-1,aa,_)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>":S?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+c+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"e":"w")+"'>"+c+"</span></a>",e=this._get(a,"nextText"),e=T?this.formatDate(e,this._daylightSavingAdjust(new Date(aa,_+W,1)),this._getFormatConfig(a)):e,f=this._canAdjustMonth(a,1,aa,_)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>":S?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+e+"'><span class='ui-icon ui-icon-circle-triangle-"+(Q?"w":"e")+"'>"+e+"</span></a>",g=this._get(a,"currentText"),h=this._get(a,"gotoCurrent")&&a.currentDay?Y:P,g=T?this.formatDate(g,h,this._getFormatConfig(a)):g,i=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>",j=R?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Q?i:"")+(this._isInRange(a,h)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+g+"</button>":"")+(Q?"":i)+"</div>":"",k=parseInt(this._get(a,"firstDay"),10),k=isNaN(k)?0:k,l=this._get(a,"showWeek"),m=this._get(a,"dayNames"),n=this._get(a,"dayNamesMin"),o=this._get(a,"monthNames"),p=this._get(a,"monthNamesShort"),q=this._get(a,"beforeShowDay"),r=this._get(a,"showOtherMonths"),s=this._get(a,"selectOtherMonths"),t=this._getDefaultDate(a),u="",w=0;U[0]>w;w++){for(x="",this.maxRows=4,y=0;U[1]>y;y++){if(z=this._daylightSavingAdjust(new Date(aa,_,a.selectedDay)),A=" ui-corner-all",B="",X){if(B+="<div class='ui-datepicker-group",U[1]>1)switch(y){case 0:B+=" ui-datepicker-group-first",A=" ui-corner-"+(Q?"right":"left");break;case U[1]-1:B+=" ui-datepicker-group-last",A=" ui-corner-"+(Q?"left":"right");break;default:B+=" ui-datepicker-group-middle",A=""}B+="'>"}for(B+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+A+"'>"+(/all|left/.test(A)&&0===w?Q?f:d:"")+(/all|right/.test(A)&&0===w?Q?d:f:"")+this._generateMonthYearHeader(a,_,aa,Z,$,w>0||y>0,o,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",C=l?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"",v=0;7>v;v++)D=(v+k)%7,C+="<th"+((v+k+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+m[D]+"'>"+n[D]+"</span></th>";for(B+=C+"</tr></thead><tbody>",E=this._getDaysInMonth(aa,_),aa===a.selectedYear&&_===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,E)),F=(this._getFirstDayOfMonth(aa,_)-k+7)%7,G=Math.ceil((F+E)/7),H=X&&this.maxRows>G?this.maxRows:G,this.maxRows=H,I=this._daylightSavingAdjust(new Date(aa,_,1-F)),J=0;H>J;J++){for(B+="<tr>",K=l?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(I)+"</td>":"",v=0;7>v;v++)L=q?q.apply(a.input?a.input[0]:null,[I]):[!0,""],M=I.getMonth()!==_,N=M&&!s||!L[0]||Z&&Z>I||$&&I>$,K+="<td class='"+((v+k+6)%7>=5?" ui-datepicker-week-end":"")+(M?" ui-datepicker-other-month":"")+(I.getTime()===z.getTime()&&_===a.selectedMonth&&a._keyEvent||t.getTime()===I.getTime()&&t.getTime()===z.getTime()?" "+this._dayOverClass:"")+(N?" "+this._unselectableClass+" ui-state-disabled":"")+(M&&!r?"":" "+L[1]+(I.getTime()===Y.getTime()?" "+this._currentClass:"")+(I.getTime()===P.getTime()?" ui-datepicker-today":""))+"'"+(M&&!r||!L[2]?"":" title='"+L[2].replace(/'/g,"&#39;")+"'")+(N?"":" data-handler='selectDay' data-event='click' data-month='"+I.getMonth()+"' data-year='"+I.getFullYear()+"'")+">"+(M&&!r?"&#xa0;":N?"<span class='ui-state-default'>"+I.getDate()+"</span>":"<a class='ui-state-default"+(I.getTime()===P.getTime()?" ui-state-highlight":"")+(I.getTime()===Y.getTime()?" ui-state-active":"")+(M?" ui-priority-secondary":"")+"' href='#'>"+I.getDate()+"</a>")+"</td>",I.setDate(I.getDate()+1),I=this._daylightSavingAdjust(I);B+=K+"</tr>"}_++,_>11&&(_=0,aa++),B+="</tbody></table>"+(X?"</div>"+(U[0]>0&&y===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=B}u+=x}return u+=j,a._keyEvent=!1,u},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q=this._get(a,"changeMonth"),r=this._get(a,"changeYear"),s=this._get(a,"showMonthAfterYear"),t="<div class='ui-datepicker-title'>",u="";if(f||!q)u+="<span class='ui-datepicker-month'>"+g[b]+"</span>";else{for(i=d&&d.getFullYear()===c,j=e&&e.getFullYear()===c,u+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",k=0;12>k;k++)(!i||k>=d.getMonth())&&(!j||e.getMonth()>=k)&&(u+="<option value='"+k+"'"+(k===b?" selected='selected'":"")+">"+h[k]+"</option>");u+="</select>"}if(s||(t+=u+(!f&&q&&r?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!r)t+="<span class='ui-datepicker-year'>"+c+"</span>";else{for(l=this._get(a,"yearRange").split(":"),m=(new Date).getFullYear(),n=function(a){var b=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?m+parseInt(a,10):parseInt(a,10);return isNaN(b)?m:b},o=n(l[0]),p=Math.max(o,n(l[1]||"")),o=d?Math.max(o,d.getFullYear()):o,p=e?Math.min(p,e.getFullYear()):p,a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";p>=o;o++)a.yearshtml+="<option value='"+o+"'"+(o===c?" selected='selected'":"")+">"+o+"</option>";a.yearshtml+="</select>",t+=a.yearshtml,a.yearshtml=null}return t+=this._get(a,"yearSuffix"),s&&(t+=(!f&&q&&r?"":"&#xa0;")+u),t+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"===c?b:0),e=a.drawMonth+("M"===c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"===c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"===c||"Y"===c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c,d,e=this._getMinMaxDate(a,"min"),f=this._getMinMaxDate(a,"max"),g=null,h=null,i=this._get(a,"yearRange");return i&&(c=i.split(":"),d=(new Date).getFullYear(),g=parseInt(c[0],10),h=parseInt(c[1],10),c[0].match(/[+\-].*/)&&(g+=d),c[1].match(/[+\-].*/)&&(h+=d)),(!e||b.getTime()>=e.getTime())&&(!f||b.getTime()<=f.getTime())&&(!g||b.getFullYear()>=g)&&(!h||h>=b.getFullYear())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))}}),a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick),a.datepicker.initialized=!0),0===a("#"+a.datepicker._mainDivId).length&&a("body").append(a.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"!=typeof b||"isDisabled"!==b&&"getDate"!==b&&"widget"!==b?"option"===b&&2===arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)}):a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c))},a.datepicker=new c,a.datepicker.initialized=!1,a.datepicker.uuid=(new Date).getTime(),a.datepicker.version="1.10.3"}(jQuery),function(a){var b={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c=this;this._isOpen&&this._trigger("beforeClose",b)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||a(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,b){var c=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return c&&!b&&this._trigger("focus",a),c},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(e.focus(1),b.preventDefault()):(d.focus(1),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){
this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){d.position=[f.position.left-c.document.scrollLeft(),f.position.top-c.document.scrollTop()],a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){d.height=a(this).height(),d.width=a(this).width(),a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(d){var e=this,f=!1,g={};a.each(d,function(a,d){e._setOption(a,d),a in b&&(f=!0),a in c&&(g[a]=d)}),f&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",g)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return a(b.target).closest(".ui-dialog").length?!0:!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=this,c=this.widgetFullName;a.ui.dialog.overlayInstances||this._delay(function(){a.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(d){b._allowInteraction(d)||(d.preventDefault(),a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())})}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),a.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(a.ui.dialog.overlayInstances--,a.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),a.ui.dialog.overlayInstances=0,a.uiBackCompat!==!1&&a.widget("ui.dialog",a.ui.dialog,{_position:function(){var b,c=this.options.position,d=[],e=[0,0];c?(("string"==typeof c||"object"==typeof c&&"0"in c)&&(d=c.split?c.split(" "):[c[0],c[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),c={my:d[0]+(0>e[0]?e[0]:"+"+e[0])+" "+d[1]+(0>e[1]?e[1]:"+"+e[1]),at:d.join(" ")}),c=a.extend({},a.ui.dialog.prototype.options.position,c)):c=a.ui.dialog.prototype.options.position,b=this.uiDialog.is(":visible"),b||this.uiDialog.show(),this.uiDialog.position(c),b||this.uiDialog.hide()}})}(jQuery),function(a){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(a){this.options.disabled&&a.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var c=a(b.target).closest(".ui-menu-item");!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(b),c.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d,e,f,g,h,i=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:i=!1,e=this.previousFilter||"",f=String.fromCharCode(b.keyCode),g=!1,clearTimeout(this.filterTimer),f===e?g=!0:f=e+f,h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())}),d=g&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d,d.length||(f=String.fromCharCode(b.keyCode),h=RegExp("^"+c(f),"i"),d=this.activeMenu.children(".ui-menu-item").filter(function(){return h.test(a(this).children("a").text())})),d.length?(this.focus(b,d),d.length>1?(this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}i&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,d=this.element.find(this.options.menus);d.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),d=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);d.attr("aria-haspopup","true").prepend(e),b.attr("aria-labelledby",d.attr("id"))}),b=d.add(this.element),b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")}),b.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){"icons"===a&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(b.submenu),this._super(a,b)},focus:function(a,b){var c,d;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.height(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.children(".ui-menu-item")[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)}})}(jQuery),function(a,b){a.widget("ui.progressbar",{version:"1.10.3",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(a){return a===b?this.options.value:(this.options.value=this._constrainedValue(a),this._refreshValue(),b)},_constrainedValue:function(a){return a===b&&(a=this.options.value),this.indeterminate=a===!1,"number"!=typeof a&&(a=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,a))},_setOptions:function(a){var b=a.value;delete a.value,this._super(a),this.options.value=this._constrainedValue(b),this._refreshValue()},_setOption:function(a,b){"max"===a&&(b=Math.max(this.min,b)),this._super(a,b)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var b=this.options.value,c=this._percentage();this.valueDiv.toggle(this.indeterminate||b>this.min).toggleClass("ui-corner-right",b===this.options.max).width(c.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=a("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":b}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==b&&(this.oldValue=b,this._trigger("change")),b===this.options.max&&this._trigger("complete")}})}(jQuery),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var b,c,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=[];for(c=d.values&&d.values.length||1,e.length>c&&(e.slice(c).remove(),e=e.slice(0,c)),b=e.length;c>b;b++)g.push(f);this.handles=e.add(a(g.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)})},_createRange:function(){var b=this.options,c="";b.range?(b.range===!0&&(b.values?b.values.length&&2!==b.values.length?b.values=[b.values[0],b.values[0]]:a.isArray(b.values)&&(b.values=b.values.slice(0)):b.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=a("<div></div>").appendTo(this.element),c="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(c+("min"===b.range||"max"===b.range?" ui-slider-range-"+b.range:""))):this.range=a([])},_setupEvents:function(){var a=this.handles.add(this.range).filter("a");this._off(a),this._on(a,this._handleEvents),this._hoverable(a),this._focusable(a)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,this.handles.each(function(b){var c=Math.abs(d-k.values(b));(e>c||e===c&&(b===k._lastChangedValue||k.values(b)===l.min))&&(e=c,f=a(this),g=b)}),h=this._start(b,g),h===!1?!1:(this._mouseSliding=!0,this._handleIndex=g,f.addClass("ui-state-active").focus(),i=f.offset(),j=!a(b.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=j?{left:0,top:0}:{left:b.pageX-i.left-f.width()/2,top:b.pageY-i.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,g,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._lastChangedValue=b,this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),void this._change(null,0)):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),void this._change(null,b);if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;d.length>f;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch("range"===b&&this.options.range===!0&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);if(this.options.values&&this.options.values.length){for(c=this.options.values.slice(),d=0;c.length>d;d+=1)c[d]=this._trimAlignValue(c[d]);return c}return[]},_trimAlignValue:function(a){if(this._valueMin()>=a)return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){c=100*((i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())),k["horizontal"===i.orientation?"left":"bottom"]=c+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:c-b+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:c+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:h.animate}))),b=c}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),c=f!==e?100*((d-e)/(f-e)):0,k["horizontal"===this.orientation?"left":"bottom"]=c+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:c+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:c+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:h.animate}))},_handleEvents:{keydown:function(c){var d,e,f,g,h=a(c.target).data("ui-slider-handle-index");switch(c.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(c.target).addClass("ui-state-active"),d=this._start(c,h),d===!1))return}switch(g=this.options.step,e=f=this.options.values&&this.options.values.length?this.values(h):this.value(),c.keyCode){case a.ui.keyCode.HOME:f=this._valueMin();break;case a.ui.keyCode.END:f=this._valueMax();break;case a.ui.keyCode.PAGE_UP:f=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:f=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(e===this._valueMax())return;f=this._trimAlignValue(e+g);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(e===this._valueMin())return;f=this._trimAlignValue(e-g)}this._slide(c,h,f)},click:function(a){a.preventDefault()},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}}})}(jQuery),function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments),this._refresh(),b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.10.3",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;return a.each(["min","max","step"],function(a,d){var e=c.attr(d);void 0!==e&&e.length&&(b[d]=e)}),b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(a){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",a)))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((b>0?1:-1)*this.options.step,a),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100),a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){var a=this.element[0]===this.document[0].activeElement;a||(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),b.preventDefault(),c.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,c.call(this)}),this._start(b)!==!1&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){return a(b.currentTarget).hasClass("ui-state-active")?this._start(b)===!1?!1:void this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b):void 0},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*a.height())&&a.height()>0&&a.height(a.height()),this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){return this.spinning||this._trigger("start",a)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(a,b,c){a=a||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,b,c)},a),this._spin(b*this.options.step,c)},_spin:function(a,b){var c=this.value()||0;this.counter||(this.counter=1),c=this._adjustValue(c+a*this._increment(this.counter)),this.spinning&&this._trigger("spin",b,{value:c})===!1||(this._value(c),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5e4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);return null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min))),a},_precisionOf:function(a){var b=""+a,c=b.indexOf(".");return-1===c?0:b.length-c-1},_adjustValue:function(a){var b,c,d=this.options;return b=null!==d.min?d.min:0,c=a-b,c=Math.round(c/d.step)*d.step,a=b+c,a=parseFloat(a.toFixed(this._precision())),null!==d.max&&a>d.max?d.max:null!==d.min&&d.min>a?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var c=this._parse(this.element.val());return this.options[a]=b,void this.element.val(this._format(c))}("max"===a||"min"===a||"step"===a)&&"string"==typeof b&&(b=this._parse(b)),"icons"===a&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(b.up),
this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(b.down)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a),this._value(this.element.val())}),_parse:function(a){return"string"==typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):+a),""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var c;""!==a&&(c=this._parse(a),null!==c&&(b||(c=this._adjustValue(c)),a=this._format(c))),this.element.val(a),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._start()&&(this._spin((a||1)*this.options.step),this._stop())},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._start()&&(this._spin((a||1)*-this.options.step),this._stop())},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),value:function(a){return arguments.length?void b(this._value).call(this,a):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(jQuery),function(a,b){function c(){return++e}function d(a){return a.hash.length>1&&decodeURIComponent(a.href.replace(f,""))===decodeURIComponent(location.href.replace(f,""))}var e=0,f=/#.*$/;a.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),c.active=this._initialActive(),a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(c.active):a(),this._refresh(),this.active.length&&this.load(c.active)},_initialActive:function(){var c=this.options.active,d=this.options.collapsible,e=location.hash.substring(1);return null===c&&(e&&this.tabs.each(function(d,f){return a(f).attr("aria-controls")===e?(c=d,!1):b}),null===c&&(c=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===c||-1===c)&&(c=this.tabs.length?0:!1)),c!==!1&&(c=this.tabs.index(this.tabs.eq(c)),-1===c&&(c=d?!1:0)),!d&&c===!1&&this.anchors.length&&(c=0),c},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(c){var d=a(this.document[0].activeElement).closest("li"),e=this.tabs.index(d),f=!0;if(!this._handlePageNav(c)){switch(c.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:e++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:f=!1,e--;break;case a.ui.keyCode.END:e=this.anchors.length-1;break;case a.ui.keyCode.HOME:e=0;break;case a.ui.keyCode.SPACE:return c.preventDefault(),clearTimeout(this.activating),this._activate(e),b;case a.ui.keyCode.ENTER:return c.preventDefault(),clearTimeout(this.activating),this._activate(e===this.options.active?!1:e),b;default:return}c.preventDefault(),clearTimeout(this.activating),e=this._focusNextTab(e,f),c.ctrlKey||(d.attr("aria-selected","false"),this.tabs.eq(e).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",e)},this.delay))}},_panelKeydown:function(b){this._handlePageNav(b)||b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),this.active.focus())},_handlePageNav:function(c){return c.altKey&&c.keyCode===a.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):c.altKey&&c.keyCode===a.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):b},_findNextTab:function(b,c){function d(){return b>e&&(b=0),0>b&&(b=e),b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){return a=this._findNextTab(a,b),this.tabs.eq(a).focus(),a},_setOption:function(a,c){return"active"===a?(this._activate(c),b):"disabled"===a?(this._setupDisabled(c),b):(this._super(a,c),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",c),c||this.options.active!==!1||this._activate(0)),"event"===a&&this._setupEvents(c),"heightStyle"===a&&this._setupHeightStyle(c),b)},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+c()},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)}),this._processTabs(),b.active!==!1&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=a(),this.anchors.each(function(c,e){var f,g,h,i=a(e).uniqueId().attr("id"),j=a(e).closest("li"),k=j.attr("aria-controls");d(e)?(f=e.hash,g=b.element.find(b._sanitizeSelector(f))):(h=b._tabId(j),f="#"+h,g=b.element.find(f),g.length||(g=b._createPanel(h),g.insertAfter(b.panels[c-1]||b.tablist)),g.attr("aria-live","polite")),g.length&&(b.panels=b.panels.add(g)),k&&j.data("ui-tabs-aria-controls",k),j.attr({"aria-controls":f.substring(1),"aria-labelledby":i}),g.attr("aria-labelledby",i)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c,d=0;c=this.tabs[d];d++)b===!0||-1!==a.inArray(d,b)?a(c).addClass("ui-state-disabled").attr("aria-disabled","true"):a(c).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,c),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d=this.element.parent();"fill"===b?(c=d.height(),c-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),f=e.closest("li"),g=f[0]===d[0],h=g&&c.collapsible,i=h?a():this._getPanelForTab(f),j=d.length?this._getPanelForTab(d):a(),k={oldTab:d,oldPanel:j,newTab:h?a():f,newPanel:i};b.preventDefault(),f.hasClass("ui-state-disabled")||f.hasClass("ui-tabs-loading")||this.running||g&&!c.collapsible||this._trigger("beforeActivate",b,k)===!1||(c.active=h?!1:this.tabs.index(f),this.active=g?a():f,this.xhr&&this.xhr.abort(),j.length||i.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),i.length&&this.load(this.tabs.index(f),b),this._toggle(b,k))},_toggle:function(b,c){function d(){f.running=!1,f._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),g.length&&f.options.show?f._show(g,f.options.show,d):(g.show(),d())}var f=this,g=c.newPanel,h=c.oldPanel;this.running=!0,h.length&&this.options.hide?this._hide(h,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),h.hide(),e()),h.attr({"aria-expanded":"false","aria-hidden":"true"}),c.oldTab.attr("aria-selected","false"),g.length&&h.length?c.oldTab.attr("tabIndex",-1):g.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1),g.attr({"aria-expanded":"true","aria-hidden":"false"}),c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){var c,d=this._findActive(b);d[0]!==this.active[0]&&(d.length||(d=this.active),c=d.find(".ui-tabs-anchor")[0],this._eventHandler({target:c,currentTarget:c,preventDefault:a.noop}))},_findActive:function(b){return b===!1?a():this.tabs.eq(b)},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");c?b.attr("aria-controls",c).removeData("ui-tabs-aria-controls"):b.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;d!==!1&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(d!==!0){if(c===b)d=!0;else{if(c=this._getIndex(c),-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var e=this,f=this.tabs.eq(b),g=f.find(".ui-tabs-anchor"),h=this._getPanelForTab(f),i={tab:f,panel:h};d(g[0])||(this.xhr=a.ajax(this._ajaxSettings(g,c,i)),this.xhr&&"canceled"!==this.xhr.statusText&&(f.addClass("ui-tabs-loading"),h.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){h.html(a),e._trigger("load",c,i)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0),f.removeClass("ui-tabs-loading"),h.removeAttr("aria-busy"),a===e.xhr&&delete e.xhr},1)})))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){var c=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+c))}})}(jQuery),function(a){function b(b,c){var d=(b.attr("aria-describedby")||"").split(/\s+/);d.push(c),b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(d.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),d=(b.attr("aria-describedby")||"").split(/\s+/),e=a.inArray(c,d);-1!==e&&d.splice(e,1),b.removeData("ui-tooltip-id"),d=a.trim(d.join(" ")),d?b.attr("aria-describedby",d):b.removeAttr("aria-describedby")}var d=0;a.widget("ui.tooltip",{version:"1.10.3",options:{content:function(){var b=a(this).attr("title")||"";return a("<a>").text(b).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(b,c){var d=this;return"disabled"===b?(this[c?"_disable":"_enable"](),void(this.options[b]=c)):(this._super(b,c),void("content"===b&&a.each(this.tooltips,function(a,b){d._updateContent(b)})))},_disable:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0)}),this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,d=a(b?b.target:this.element).closest(this.options.items);d.length&&!d.data("ui-tooltip-id")&&(d.attr("title")&&d.data("ui-tooltip-title",d.attr("title")),d.data("ui-tooltip-open",!0),b&&"mouseover"===b.type&&d.parents().each(function(){var b,d=a(this);d.data("ui-tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0)),d.attr("title")&&(d.uniqueId(),c.parents[this.id]={element:this,title:d.attr("title")},d.attr("title",""))}),this._updateContent(d,b))},_updateContent:function(a,b){var c,d=this.options.content,e=this,f=b?b.type:null;return"string"==typeof d?this._open(b,a,d):(c=d.call(a[0],function(c){a.data("ui-tooltip-open")&&e._delay(function(){b&&(b.type=f),this._open(b,a,c)})}),void(c&&this._open(b,a,c)))},_open:function(c,d,e){function f(a){j.of=a,g.is(":hidden")||g.position(j)}var g,h,i,j=a.extend({},this.options.position);if(e){if(g=this._find(d),g.length)return void g.find(".ui-tooltip-content").html(e);d.is("[title]")&&(c&&"mouseover"===c.type?d.attr("title",""):d.removeAttr("title")),g=this._tooltip(d),b(d,g.attr("id")),g.find(".ui-tooltip-content").html(e),this.options.track&&c&&/^mouse/.test(c.type)?(this._on(this.document,{mousemove:f}),f(c)):g.position(a.extend({of:d},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(i=this.delayedShow=setInterval(function(){g.is(":visible")&&(f(j.of),clearInterval(i))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),h={keyup:function(b){if(b.keyCode===a.ui.keyCode.ESCAPE){var c=a.Event(b);c.currentTarget=d[0],this.close(c,!0)}},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(h.mouseleave="close"),c&&"focusin"!==c.type||(h.focusout="close"),this._on(!0,d,h)}},close:function(b){var d=this,e=a(b?b.currentTarget:this.element),f=this._find(e);this.closing||(clearInterval(this.delayedShow),e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title")),c(e),f.stop(!0),this._hide(f,this.options.hide,function(){d._removeTooltip(a(this))}),e.removeData("ui-tooltip-open"),this._off(e,"mouseleave focusout keyup"),e[0]!==this.element[0]&&this._off(e,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(b,c){a(c.element).attr("title",c.title),delete d.parents[b]}),this.closing=!0,this._trigger("close",b,{tooltip:f}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+d++,e=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return a("<div>").addClass("ui-tooltip-content").appendTo(e),e.appendTo(this.document[0].body),this.tooltips[c]=b,e},_find:function(b){var c=b.data("ui-tooltip-id");return c?a("#"+c):a()},_removeTooltip:function(a){a.remove(),delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,d){var e=a.Event("blur");e.target=e.currentTarget=d[0],b.close(e,!0),a("#"+c).remove(),d.data("ui-tooltip-title")&&(d.attr("title",d.data("ui-tooltip-title")),d.removeData("ui-tooltip-title"))})}})}(jQuery),function(a,b){var c="ui-effects-";a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function c(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function d(b,c){var d,e,g={};for(d in c)e=c[d],b[d]!==e&&(f[d]||(a.fx.step[d]||!isNaN(parseFloat(e)))&&(g[d]=e));return g}var e=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(jQuery.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(b,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var b=a(this);return{el:b,start:c(this)}}),f=function(){a.each(e,function(a,c){b[c]&&g[c+"Class"](b[c])})},f(),j=j.map(function(){return this.end=c(this.el[0]),this.diff=d(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(c){return function(d,e,f,g,h){return"boolean"==typeof e||e===b?f?a.effects.animateClass.call(this,e?{add:d}:{remove:d},f,g,h):c.apply(this,arguments):a.effects.animateClass.call(this,{toggle:d},e,f,g)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function d(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function e(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects.effect[b]?a.isFunction(b)?!0:"object"!=typeof b||b.effect?!1:!0:!0}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var d=0;b.length>d;d++)null!==b[d]&&a.data(c+b[d],a[0].style[b[d]])},restore:function(a,d){var e,f;for(f=0;d.length>f;f++)null!==d[f]&&(e=a.data(c+d[f]),e===b&&(e=""),a.css(d[f],e))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(g){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).focus(),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus()),b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function b(b){function d(){a.isFunction(f)&&f.call(e[0]),a.isFunction(b)&&b()}var e=a(this),f=c.complete,h=c.mode;(e.is(":hidden")?"hide"===h:"show"===h)?(e[h](),d()):g.call(e[0],c,d)}var c=d.apply(this,arguments),e=c.mode,f=c.queue,g=a.effects.effect[c.effect];return a.fx.off||!g?e?this[e](c.duration,c.complete):this.each(function(){c.complete&&c.complete.call(this)}):f===!1?this.each(b):this.queue(f||"fx",b)},show:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="show",this.effect.call(this,c)}}(a.fn.show),hide:function(a){return function(b){if(e(b))return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="hide",this.effect.call(this,c)}}(a.fn.hide),toggle:function(a){return function(b){if(e(b)||"boolean"==typeof b)return a.apply(this,arguments);var c=d.apply(this,arguments);return c.mode="toggle",this.effect.call(this,c)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}})}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}()}(jQuery),function(a){var b=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(d,e){var f,g,h,i=a(this),j=["position","top","bottom","left","right","height","width"],k=a.effects.setMode(i,d.mode||"hide"),l=d.direction||"up",m=b.test(l),n=m?"height":"width",o=m?"top":"left",p=c.test(l),q={},r="show"===k;i.parent().is(".ui-effects-wrapper")?a.effects.save(i.parent(),j):a.effects.save(i,j),i.show(),f=a.effects.createWrapper(i).css({overflow:"hidden"}),g=f[n](),h=parseFloat(f.css(o))||0,q[n]=r?g:0,p||(i.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),q[o]=r?h:g+h),r&&(f.css(n,0),p||f.css(o,h+g)),f.animate(q,{duration:d.duration,easing:d.easing,queue:!1,complete:function(){"hide"===k&&i.hide(),a.effects.restore(i,j),a.effects.removeWrapper(i),e()}})}}(jQuery),function(a){a.effects.effect.bounce=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"effect"),j="hide"===i,k="show"===i,l=b.direction||"up",m=b.distance,n=b.times||5,o=2*n+(k||j?1:0),p=b.duration/o,q=b.easing,r="up"===l||"down"===l?"top":"left",s="up"===l||"left"===l,t=g.queue(),u=t.length;for((k||j)&&h.push("opacity"),a.effects.save(g,h),g.show(),a.effects.createWrapper(g),m||(m=g["top"===r?"outerHeight":"outerWidth"]()/3),
k&&(f={opacity:1},f[r]=0,g.css("opacity",0).css(r,s?2*-m:2*m).animate(f,p,q)),j&&(m/=Math.pow(2,n-1)),f={},f[r]=0,d=0;n>d;d++)e={},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q).animate(f,p,q),m=j?2*m:m/2;j&&(e={opacity:0},e[r]=(s?"-=":"+=")+m,g.animate(e,p,q)),g.queue(function(){j&&g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}),u>1&&t.splice.apply(t,[1,0].concat(t.splice(u,o+1))),g.dequeue()}}(jQuery),function(a){a.effects.effect.clip=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","height","width"],i=a.effects.setMode(g,b.mode||"hide"),j="show"===i,k=b.direction||"vertical",l="vertical"===k,m=l?"height":"width",n=l?"top":"left",o={};a.effects.save(g,h),g.show(),d=a.effects.createWrapper(g).css({overflow:"hidden"}),e="IMG"===g[0].tagName?d:g,f=e[m](),j&&(e.css(m,0),e.css(n,f/2)),o[m]=j?f:0,o[n]=j?0:f/2,e.animate(o,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){j||g.hide(),a.effects.restore(g,h),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.drop=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","opacity","height","width"],g=a.effects.setMode(e,b.mode||"hide"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i?"pos":"neg",l={opacity:h?1:0};a.effects.save(e,f),e.show(),a.effects.createWrapper(e),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0)/2,h&&e.css("opacity",0).css(j,"pos"===k?-d:d),l[j]=(h?"pos"===k?"+=":"-=":"pos"===k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.explode=function(b,c){function d(){t.push(this),t.length===l*m&&e()}function e(){n.css({visibility:"visible"}),a(t).remove(),p||n.hide(),c()}var f,g,h,i,j,k,l=b.pieces?Math.round(Math.sqrt(b.pieces)):3,m=l,n=a(this),o=a.effects.setMode(n,b.mode||"hide"),p="show"===o,q=n.show().css("visibility","hidden").offset(),r=Math.ceil(n.outerWidth()/m),s=Math.ceil(n.outerHeight()/l),t=[];for(f=0;l>f;f++)for(i=q.top+f*s,k=f-(l-1)/2,g=0;m>g;g++)h=q.left+g*r,j=g-(m-1)/2,n.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-g*r,top:-f*s}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:r,height:s,left:h+(p?j*r:0),top:i+(p?k*s:0),opacity:p?0:1}).animate({left:h+(p?0:j*r),top:i+(p?0:k*s),opacity:p?1:0},b.duration||500,b.easing,d)}}(jQuery),function(a){a.effects.effect.fade=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:e},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}}(jQuery),function(a){a.effects.effect.fold=function(b,c){var d,e,f=a(this),g=["position","top","bottom","left","right","height","width"],h=a.effects.setMode(f,b.mode||"hide"),i="show"===h,j="hide"===h,k=b.size||15,l=/([0-9]+)%/.exec(k),m=!!b.horizFirst,n=i!==m,o=n?["width","height"]:["height","width"],p=b.duration/2,q={},r={};a.effects.save(f,g),f.show(),d=a.effects.createWrapper(f).css({overflow:"hidden"}),e=n?[d.width(),d.height()]:[d.height(),d.width()],l&&(k=parseInt(l[1],10)/100*e[j?0:1]),i&&d.css(m?{height:0,width:k}:{height:k,width:0}),q[o[0]]=i?e[0]:k,r[o[1]]=i?e[1]:0,d.animate(q,p,b.easing).animate(r,p,b.easing,function(){j&&f.hide(),a.effects.restore(f,g),a.effects.removeWrapper(f),c()})}}(jQuery),function(a){a.effects.effect.highlight=function(b,c){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,b.mode||"show"),g={backgroundColor:d.css("backgroundColor")};"hide"===f&&(g.opacity=0),a.effects.save(d,e),d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(g,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===f&&d.hide(),a.effects.restore(d,e),c()}})}}(jQuery),function(a){a.effects.effect.pulsate=function(b,c){var d,e=a(this),f=a.effects.setMode(e,b.mode||"show"),g="show"===f,h="hide"===f,i=g||"hide"===f,j=2*(b.times||5)+(i?1:0),k=b.duration/j,l=0,m=e.queue(),n=m.length;for((g||!e.is(":visible"))&&(e.css("opacity",0).show(),l=1),d=1;j>d;d++)e.animate({opacity:l},k,b.easing),l=1-l;e.animate({opacity:l},k,b.easing),e.queue(function(){h&&e.hide(),c()}),n>1&&m.splice.apply(m,[1,0].concat(m.splice(n,j+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.puff=function(b,c){var d=a(this),e=a.effects.setMode(d,b.mode||"hide"),f="hide"===e,g=parseInt(b.percent,10)||150,h=g/100,i={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:e,complete:c,percent:f?g:100,from:f?i:{height:i.height*h,width:i.width*h,outerHeight:i.outerHeight*h,outerWidth:i.outerWidth*h}}),d.effect(b)},a.effects.effect.scale=function(b,c){var d=a(this),e=a.extend(!0,{},b),f=a.effects.setMode(d,b.mode||"effect"),g=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===f?0:100),h=b.direction||"both",i=b.origin,j={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},k={y:"horizontal"!==h?g/100:1,x:"vertical"!==h?g/100:1};e.effect="size",e.queue=!1,e.complete=c,"effect"!==f&&(e.origin=i||["middle","center"],e.restore=!0),e.from=b.from||("show"===f?{height:0,width:0,outerHeight:0,outerWidth:0}:j),e.to={height:j.height*k.y,width:j.width*k.x,outerHeight:j.outerHeight*k.y,outerWidth:j.outerWidth*k.x},e.fade&&("show"===f&&(e.from.opacity=0,e.to.opacity=1),"hide"===f&&(e.from.opacity=1,e.to.opacity=0)),d.effect(e)},a.effects.effect.size=function(b,c){var d,e,f,g=a(this),h=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],j=["width","height","overflow"],k=["fontSize"],l=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=a.effects.setMode(g,b.mode||"effect"),o=b.restore||"effect"!==n,p=b.scale||"both",q=b.origin||["middle","center"],r=g.css("position"),s=o?h:i,t={height:0,width:0,outerHeight:0,outerWidth:0};"show"===n&&g.show(),d={height:g.height(),width:g.width(),outerHeight:g.outerHeight(),outerWidth:g.outerWidth()},"toggle"===b.mode&&"show"===n?(g.from=b.to||t,g.to=b.from||d):(g.from=b.from||("show"===n?t:d),g.to=b.to||("hide"===n?t:d)),f={from:{y:g.from.height/d.height,x:g.from.width/d.width},to:{y:g.to.height/d.height,x:g.to.width/d.width}},("box"===p||"both"===p)&&(f.from.y!==f.to.y&&(s=s.concat(l),g.from=a.effects.setTransition(g,l,f.from.y,g.from),g.to=a.effects.setTransition(g,l,f.to.y,g.to)),f.from.x!==f.to.x&&(s=s.concat(m),g.from=a.effects.setTransition(g,m,f.from.x,g.from),g.to=a.effects.setTransition(g,m,f.to.x,g.to))),("content"===p||"both"===p)&&f.from.y!==f.to.y&&(s=s.concat(k).concat(j),g.from=a.effects.setTransition(g,k,f.from.y,g.from),g.to=a.effects.setTransition(g,k,f.to.y,g.to)),a.effects.save(g,s),g.show(),a.effects.createWrapper(g),g.css("overflow","hidden").css(g.from),q&&(e=a.effects.getBaseline(q,d),g.from.top=(d.outerHeight-g.outerHeight())*e.y,g.from.left=(d.outerWidth-g.outerWidth())*e.x,g.to.top=(d.outerHeight-g.to.outerHeight)*e.y,g.to.left=(d.outerWidth-g.to.outerWidth)*e.x),g.css(g.from),("content"===p||"both"===p)&&(l=l.concat(["marginTop","marginBottom"]).concat(k),m=m.concat(["marginLeft","marginRight"]),j=h.concat(l).concat(m),g.find("*[width]").each(function(){var c=a(this),d={height:c.height(),width:c.width(),outerHeight:c.outerHeight(),outerWidth:c.outerWidth()};o&&a.effects.save(c,j),c.from={height:d.height*f.from.y,width:d.width*f.from.x,outerHeight:d.outerHeight*f.from.y,outerWidth:d.outerWidth*f.from.x},c.to={height:d.height*f.to.y,width:d.width*f.to.x,outerHeight:d.height*f.to.y,outerWidth:d.width*f.to.x},f.from.y!==f.to.y&&(c.from=a.effects.setTransition(c,l,f.from.y,c.from),c.to=a.effects.setTransition(c,l,f.to.y,c.to)),f.from.x!==f.to.x&&(c.from=a.effects.setTransition(c,m,f.from.x,c.from),c.to=a.effects.setTransition(c,m,f.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.easing,function(){o&&a.effects.restore(c,j)})})),g.animate(g.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===g.to.opacity&&g.css("opacity",g.from.opacity),"hide"===n&&g.hide(),a.effects.restore(g,s),o||("static"===r?g.css({position:"relative",top:g.to.top,left:g.to.left}):a.each(["top","left"],function(a,b){g.css(b,function(b,c){var d=parseInt(c,10),e=a?g.to.left:g.to.top;return"auto"===c?e+"px":d+e+"px"})})),a.effects.removeWrapper(g),c()}})}}(jQuery),function(a){a.effects.effect.shake=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","height","width"],g=a.effects.setMode(e,b.mode||"effect"),h=b.direction||"left",i=b.distance||20,j=b.times||3,k=2*j+1,l=Math.round(b.duration/k),m="up"===h||"down"===h?"top":"left",n="up"===h||"left"===h,o={},p={},q={},r=e.queue(),s=r.length;for(a.effects.save(e,f),e.show(),a.effects.createWrapper(e),o[m]=(n?"-=":"+=")+i,p[m]=(n?"+=":"-=")+2*i,q[m]=(n?"-=":"+=")+2*i,e.animate(o,l,b.easing),d=1;j>d;d++)e.animate(p,l,b.easing).animate(q,l,b.easing);e.animate(p,l,b.easing).animate(o,l/2,b.easing).queue(function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}),s>1&&r.splice.apply(r,[1,0].concat(r.splice(s,k+1))),e.dequeue()}}(jQuery),function(a){a.effects.effect.slide=function(b,c){var d,e=a(this),f=["position","top","bottom","left","right","width","height"],g=a.effects.setMode(e,b.mode||"show"),h="show"===g,i=b.direction||"left",j="up"===i||"down"===i?"top":"left",k="up"===i||"left"===i,l={};a.effects.save(e,f),e.show(),d=b.distance||e["top"===j?"outerHeight":"outerWidth"](!0),a.effects.createWrapper(e).css({overflow:"hidden"}),h&&e.css(j,k?isNaN(d)?"-"+d:-d:d),l[j]=(h?k?"+=":"-=":k?"-=":"+=")+d,e.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===g&&e.hide(),a.effects.restore(e,f),a.effects.removeWrapper(e),c()}})}}(jQuery),function(a){a.effects.effect.transfer=function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),c()})}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],106:[function(a,b,c){(function(c){jQuery=c.jQuery=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a){function b(){this.items=new Array,this.itemsCount=0,this.put=function(a,b){this.containsKey(a)?this.items[a]=b:(this.items[a]=b,this.itemsCount++)},this.get=function(a){return this.containsKey(a)?this.items[a]:null},this.remove=function(a){if(!this.containsKey(a))throw"key '"+a+"' does not exists.";delete this.items[a],this.itemsCount--},this.containsKey=function(a){return"undefined"!=typeof this.items[a]},this.containsValue=function(a){for(var b in this.items)if(this.items[b]==a)return!0;return!1},this.contains=function(a){return this.containsKey(a)||this.containsValue(a)},this.clear=function(){this.items=new Array,itemsCount=0},this.size=function(){return this.itemsCount},this.isEmpty=function(){return 0==this.size()}}function c(a,b,c){this.dec=a,this.group=b,this.neg=c}function d(){for(var a=0;a<l.length;a++){localeGroup=l[a];for(var b=0;b<localeGroup.length;b++)f.put(localeGroup[b],a)}}function e(a,b){0==f.size()&&d();var e=".",g=",",h="-";0==b&&(-1!=a.indexOf("_")?a=a.split("_")[1].toLowerCase():-1!=a.indexOf("-")&&(a=a.split("-")[1].toLowerCase()));var i=f.get(a);if(i){var j=k[i];j&&(e=j[0],g=j[1])}return new c(e,g,h)}var f=new b,g=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],h=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],i=["cz","fi","fr","ru","se","pl"],j=["ch"],k=[[".",","],[",","."],[","," "],[".","'"]],l=[g,h,i,j];a.fn.formatNumber=function(b,c,d){return this.each(function(){null==c&&(c=!0),null==d&&(d=!0);var e;e=a(this).is(":input")?new String(a(this).val()):new String(a(this).text());var f=a.formatNumber(e,b);return c&&(a(this).is(":input")?a(this).val(f):a(this).text(f)),d?f:void 0})},a.formatNumber=function(b,c){for(var c=a.extend({},a.fn.formatNumber.defaults,c),d=e(c.locale.toLowerCase(),c.isFullLocale),f=(d.dec,d.group,d.neg,"0#-,."),g="",h=!1,i=0;i<c.format.length;i++)if(-1==f.indexOf(c.format.charAt(i)))g+=c.format.charAt(i);else{if(0!=i||"-"!=c.format.charAt(i))break;h=!0}for(var j="",i=c.format.length-1;i>=0&&-1==f.indexOf(c.format.charAt(i));i--)j=c.format.charAt(i)+j;c.format=c.format.substring(g.length),c.format=c.format.substring(0,c.format.length-j.length);var k=new Number(b);return a._formatNumber(k,c,j,g,h)},a._formatNumber=function(b,c,d,f,g){var c=a.extend({},a.fn.formatNumber.defaults,c),h=e(c.locale.toLowerCase(),c.isFullLocale),i=h.dec,j=h.group,k=h.neg,l=!1;if(isNaN(b)){if(1!=c.nanForceZero)return null;b=0,l=!0}"%"==d&&(b=100*b);var m="";if(c.format.indexOf(".")>-1){var n=i,o=c.format.substring(c.format.lastIndexOf(".")+1);if(1==c.round)b=new Number(b.toFixed(o.length));else{var p=b.toString();p=p.substring(0,p.lastIndexOf(".")+o.length+1),b=new Number(p)}var q=b%1,r=new String(q.toFixed(o.length));r=r.substring(r.lastIndexOf(".")+1);for(var s=0;s<o.length;s++)if("#"==o.charAt(s)&&"0"!=r.charAt(s))n+=r.charAt(s);else if("#"==o.charAt(s)&&"0"==r.charAt(s)){var t=r.substring(s);if(!t.match("[1-9]"))break;n+=r.charAt(s)}else"0"==o.charAt(s)&&(n+=r.charAt(s));m+=n}else b=Math.round(b);var u=Math.floor(b);0>b&&(u=Math.ceil(b));var v="";v=-1==c.format.indexOf(".")?c.format:c.format.substring(0,c.format.indexOf("."));var w="";if(0!=u||"#"!=v.substr(v.length-1)||l){var x=new String(Math.abs(u)),y=9999;-1!=v.lastIndexOf(",")&&(y=v.length-v.lastIndexOf(",")-1);for(var z=0,s=x.length-1;s>-1;s--)w=x.charAt(s)+w,z++,z==y&&0!=s&&(w=j+w,z=0);if(v.length>w.length){var A=v.indexOf("0");if(-1!=A)for(var B=v.length-A,C=v.length-w.length-1;w.length<B;){var D=v.charAt(C);","==D&&(D=j),w=D+w,C--}}}return w||-1===v.indexOf("0",v.length-1)||(w="0"),m=w+m,0>b&&g&&f.length>0?f=k+f:0>b&&(m=k+m),c.decimalSeparatorAlwaysShown||m.lastIndexOf(i)==m.length-1&&(m=m.substring(0,m.length-1)),m=f+m+d},a.fn.parseNumber=function(b,c,d){null==c&&(c=!0),null==d&&(d=!0);var e;e=a(this).is(":input")?new String(a(this).val()):new String(a(this).text());var f=a.parseNumber(e,b);return f&&(c&&(a(this).is(":input")?a(this).val(f.toString()):a(this).text(f.toString())),d)?f:void 0},a.parseNumber=function(b,c){for(var c=a.extend({},a.fn.parseNumber.defaults,c),d=e(c.locale.toLowerCase(),c.isFullLocale),f=d.dec,g=d.group,h=d.neg,i="1234567890.-";b.indexOf(g)>-1;)b=b.replace(g,"");b=b.replace(f,".").replace(h,"-");var j="",k=!1;("%"==b.charAt(b.length-1)||1==c.isPercentage)&&(k=!0);for(var l=0;l<b.length;l++)i.indexOf(b.charAt(l))>-1&&(j+=b.charAt(l));var m=new Number(j);if(k){m/=100;var n=j.indexOf(".");if(-1!=n){var o=j.length-n-1;m=m.toFixed(o+2)}else m=m.toFixed(j.length-1)}return m},a.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1},a.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1},Number.prototype.toFixed=function(b){return a._roundNumber(this,b)},a._roundNumber=function(a,b){var c=Math.pow(10,b||0),d=String(Math.round(a*c)/c);if(b>0){var e=d.indexOf(".");for(-1==e?(d+=".",e=0):e=d.length-(e+1);b>e;)d+="0",e++}return d}}(jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],107:[function(require,module,exports){(function(global){$=global.$=require("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=require,function browserifyShim(module,define,require){!function($){$.extend({tablesorter:new function(){function benchmark(a,b){log(a+","+((new Date).getTime()-b.getTime())+"ms")}function log(a){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(a):alert(a)}function buildParserCache(a,b){if(a.config.debug)var c="";if(0!=a.tBodies.length){var d=a.tBodies[0].rows;if(d[0])for(var e=[],f=d[0].cells,g=f.length,h=0;g>h;h++){var i=!1;$.metadata&&$(b[h]).metadata()&&$(b[h]).metadata().sorter?i=getParserById($(b[h]).metadata().sorter):a.config.headers[h]&&a.config.headers[h].sorter&&(i=getParserById(a.config.headers[h].sorter)),i||(i=detectParserForColumn(a,d,-1,h)),a.config.debug&&(c+="column:"+h+" parser:"+i.id+"\n"),e.push(i)}return a.config.debug&&log(c),e}}function detectParserForColumn(a,b,c,d){for(var e=parsers.length,f=!1,g=!1,h=!0;""==g&&h;)c++,b[c]?(f=getNodeFromRowAndCellIndex(b,c,d),g=trimAndGetNodeText(a.config,f),a.config.debug&&log("Checking if value was empty on row:"+c)):h=!1;for(var i=1;e>i;i++)if(parsers[i].is(g,a,f))return parsers[i];return parsers[0]}function getNodeFromRowAndCellIndex(a,b,c){return a[b].cells[c]}function trimAndGetNodeText(a,b){return $.trim(getElementText(a,b))}function getParserById(a){for(var b=parsers.length,c=0;b>c;c++)if(parsers[c].id.toLowerCase()==a.toLowerCase())return parsers[c];return!1}function buildCache(a){if(a.config.debug)var b=new Date;for(var c=a.tBodies[0]&&a.tBodies[0].rows.length||0,d=a.tBodies[0].rows[0]&&a.tBodies[0].rows[0].cells.length||0,e=a.config.parsers,f={row:[],normalized:[]},g=0;c>g;++g){var h=$(a.tBodies[0].rows[g]),i=[];if(h.hasClass(a.config.cssChildRow))f.row[f.row.length-1]=f.row[f.row.length-1].add(h);else{f.row.push(h);for(var j=0;d>j;++j)i.push(e[j].format(getElementText(a.config,h[0].cells[j]),a,h[0].cells[j]));i.push(f.normalized.length),f.normalized.push(i),i=null}}return a.config.debug&&benchmark("Building cache for "+c+" rows:",b),f}function getElementText(a,b){var c="";return b?(a.supportsTextContent||(a.supportsTextContent=b.textContent||!1),c="simple"==a.textExtraction?a.supportsTextContent?b.textContent:b.childNodes[0]&&b.childNodes[0].hasChildNodes()?b.childNodes[0].innerHTML:b.innerHTML:"function"==typeof a.textExtraction?a.textExtraction(b):$(b).text()):""}function appendToTable(a,b){if(a.config.debug)var c=new Date;for(var d=b,e=d.row,f=d.normalized,g=f.length,h=f[0].length-1,i=$(a.tBodies[0]),j=[],k=0;g>k;k++){var l=f[k][h];if(j.push(e[l]),!a.config.appender)for(var m=e[l].length,n=0;m>n;n++)i[0].appendChild(e[l][n])}a.config.appender&&a.config.appender(a,j),j=null,a.config.debug&&benchmark("Rebuilt table:",c),applyWidget(a),setTimeout(function(){$(a).trigger("sortEnd")},0)}function buildHeaders(a){if(a.config.debug)var b=new Date;var c=($.metadata?!0:!1,computeTableHeaderCellIndexes(a));return $tableHeaders=$(a.config.selectorHeaders,a).each(function(b){if(this.column=c[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(a.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(a,b))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(a,b)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(a,b)),!this.sortDisabled){var d=$(this).addClass(a.config.cssHeader);a.config.onRenderHeader&&a.config.onRenderHeader.apply(d)}a.config.headerList[b]=this}),a.config.debug&&(benchmark("Built headers:",b),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(a){for(var b=[],c={},d=a.getElementsByTagName("THEAD")[0],e=d.getElementsByTagName("TR"),f=0;f<e.length;f++)for(var g=e[f].cells,h=0;h<g.length;h++){var i,j=g[h],k=j.parentNode.rowIndex,l=k+"-"+j.cellIndex,m=j.rowSpan||1,n=j.colSpan||1;"undefined"==typeof b[k]&&(b[k]=[]);for(var o=0;o<b[k].length+1;o++)if("undefined"==typeof b[k][o]){i=o;break}c[l]=i;for(var o=k;k+m>o;o++){"undefined"==typeof b[o]&&(b[o]=[]);for(var p=b[o],q=i;i+n>q;q++)p[q]="x"}}return c}function checkCellColSpan(a,b,c){for(var d=[],e=a.tHead.rows,f=e[c].cells,g=0;g<f.length;g++){var h=f[g];h.colSpan>1?d=d.concat(checkCellColSpan(a,headerArr,c++)):(1==a.tHead.length||h.rowSpan>1||!e[c+1])&&d.push(h)}return d}function checkHeaderMetadata(a){return $.metadata&&$(a).metadata().sorter===!1?!0:!1}function checkHeaderOptions(a,b){return a.config.headers[b]&&a.config.headers[b].sorter===!1?!0:!1}function checkHeaderOptionsSortingLocked(a,b){return a.config.headers[b]&&a.config.headers[b].lockedOrder?a.config.headers[b].lockedOrder:!1}function applyWidget(a){for(var b=a.config.widgets,c=b.length,d=0;c>d;d++)getWidgetById(b[d]).format(a)}function getWidgetById(a){for(var b=widgets.length,c=0;b>c;c++)if(widgets[c].id.toLowerCase()==a.toLowerCase())return widgets[c]}function formatSortingOrder(a){return"Number"!=typeof a?"desc"==a.toLowerCase()?1:0:1==a?1:0}function isValueInArray(a,b){for(var c=b.length,d=0;c>d;d++)if(b[d][0]==a)return!0;return!1}function setHeadersCss(a,b,c,d){b.removeClass(d[0]).removeClass(d[1]);var e=[];b.each(function(a){this.sortDisabled||(e[this.column]=$(this))});for(var f=c.length,g=0;f>g;g++)e[c[g][0]].addClass(d[c[g][1]])}function fixColumnWidth(a,b){var c=a.config;if(c.widthFixed){var d=$("<colgroup>");$("tr:first td",a.tBodies[0]).each(function(){d.append($("<col>").css("width",$(this).width()))}),$(a).prepend(d)}}function updateHeaderSortCount(a,b){for(var c=a.config,d=b.length,e=0;d>e;e++){var f=b[e],g=c.headerList[f[0]];g.count=f[1],g.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;l>i;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;l>i;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(a,b,c){var d="a["+c+"]",e="b["+c+"]";return"text"==a&&"asc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+d+" < "+e+") ? -1 : 1 )));":"text"==a&&"desc"==b?"("+d+" == "+e+" ? 0 : ("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : ("+e+" < "+d+") ? -1 : 1 )));":"numeric"==a&&"asc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+d+" - "+e+"));":"numeric"==a&&"desc"==b?"("+d+" === null && "+e+" === null) ? 0 :("+d+" === null ? Number.POSITIVE_INFINITY : ("+e+" === null ? Number.NEGATIVE_INFINITY : "+e+" - "+d+"));":void 0}function makeSortText(a){return"((a["+a+"] < b["+a+"]) ? -1 : ((a["+a+"] > b["+a+"]) ? 1 : 0));"}function makeSortTextDesc(a){return"((b["+a+"] < a["+a+"]) ? -1 : ((b["+a+"] > a["+a+"]) ? 1 : 0));"}function makeSortNumeric(a){return"a["+a+"]-b["+a+"];"}function makeSortNumericDesc(a){return"b["+a+"]-a["+a+"];"}function sortText(a,b){return table.config.sortLocaleCompare?a.localeCompare(b):b>a?-1:a>b?1:0}function sortTextDesc(a,b){return table.config.sortLocaleCompare?b.localeCompare(a):a>b?-1:b>a?1:0}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(a,b){return a[b].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(a){return this.each(function(){if(this.tHead&&this.tBodies){var b,c,d,e;this.config={},e=$.extend(this.config,$.tablesorter.defaults,a),b=$(this),$.data(this,"tablesorter",e),c=buildHeaders(this),this.config.parsers=buildParserCache(this,c),d=buildCache(this);var f=[e.cssDesc,e.cssAsc];fixColumnWidth(this),c.click(function(a){var g=b[0].tBodies[0]&&b[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&g>0){b.trigger("sortStart");var h=($(this),this.column);if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),a[e.sortMultiSortKey])if(isValueInArray(h,e.sortList))for(var i=0;i<e.sortList.length;i++){var j=e.sortList[i],k=e.headerList[j[0]];j[0]==h&&(k.count=j[1],k.count++,j[1]=k.count%2)}else e.sortList.push([h,this.order]);else{if(e.sortList=[],null!=e.sortForce)for(var l=e.sortForce,i=0;i<l.length;i++)l[i][0]!=h&&e.sortList.push(l[i]);e.sortList.push([h,this.order])}return setTimeout(function(){setHeadersCss(b[0],c,e.sortList,f),appendToTable(b[0],multisort(b[0],e.sortList,d))},1),!1}}).mousedown(function(){return e.cancelSelection?(this.onselectstart=function(){return!1},!1):void 0}),b.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=buildParserCache(a,c),d=buildCache(a)},1)}).bind("updateCell",function(a,b){var c=this.config,e=[b.parentNode.rowIndex-1,b.cellIndex];d.normalized[e[0]][e[1]]=c.parsers[e[1]].format(getElementText(c,b),b)}).bind("sorton",function(a,b){$(this).trigger("sortStart"),e.sortList=b;var g=e.sortList;updateHeaderSortCount(this,g),setHeadersCss(this,c,g,f),appendToTable(this,multisort(this,g,d))}).bind("appendCache",function(){appendToTable(this,d)}).bind("applyWidgetId",function(a,b){getWidgetById(b).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(e.sortList=$(this).metadata().sortlist),e.sortList.length>0&&b.trigger("sorton",[e.sortList]),applyWidget(this)}})},this.addParser=function(a){for(var b=parsers.length,c=!0,d=0;b>d;d++)parsers[d].id.toLowerCase()==a.id.toLowerCase()&&(c=!1);c&&parsers.push(a)},this.addWidget=function(a){widgets.push(a)},this.formatFloat=function(a){var b=parseFloat(a);return isNaN(b)?0:b},this.formatInt=function(a){var b=parseInt(a);return isNaN(b)?0:b},this.isDigit=function(a,b){return/^[-+]?\d*$/.test($.trim(a.replace(/[,.']/g,"")))},this.clearTableBody=function(a){function b(){for(;this.firstChild;)this.removeChild(this.firstChild)}$.browser.msie?b.apply(a.tBodies[0]):a.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(a){return!0},format:function(a){return $.trim(a.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(a,b){var c=b.config;return $.tablesorter.isDigit(a,c)},format:function(a){return $.tablesorter.formatFloat(a)},type:"numeric"}),ts.addParser({id:"currency",is:function(a){return/^[£$€?.]/.test(a)},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){for(var b=a.split("."),c="",d=b.length,e=0;d>e;e++){var f=b[e];c+=2==f.length?"0"+f:f}return $.tablesorter.formatFloat(c)},type:"numeric"}),ts.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return $.tablesorter.formatFloat(""!=a?new Date(a.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(a){return/\%$/.test($.trim(a))},format:function(a){return $.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return $.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,b){var c=b.config;return a=a.replace(/\-/g,"/"),"us"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"uk"==c.dateFormat?a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==c.dateFormat||"dd-mm-yy"==c.dateFormat)&&(a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(a).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return $.tablesorter.formatFloat(new Date("2000/01/01 "+a).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(a){return!1},format:function(a,b,c){var d=b.config,e=d.parserMetadataName?d.parserMetadataName:"sortValue";return $(c).metadata()[e]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(a){if(a.config.debug)var b=new Date;var c,d,e=-1;$("tr:visible",a.tBodies[0]).each(function(b){c=$(this),c.hasClass(a.config.cssChildRow)||e++,d=e%2==0,c.removeClass(a.config.widgetZebra.css[d?0:1]).addClass(a.config.widgetZebra.css[d?1:0])}),a.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",b)}})}(jQuery)}.call(global,module,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],108:[function(a,b,c){(function(c){$=c.$=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery.tablesorter.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a,b,c){a.tablesorter.addParser({id:"alphaNum",is:function(a){return!1},format:function(a){var b=a.toString().replace(/(\d{1,2})/g,function(a){var b="00000"+a;return b.substr(b.length-5)});return b},type:"text"})}(jQuery,window)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104,"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery.tablesorter.min.js":107}],109:[function(a,b,c){var d=a("jquery");a("jquery-ui"),a("jquery-range-slider"),a("numberFormatter"),a("bootstrap"),a("datepicker"),a("fileupload"),a("zoomHammer"),a("gridster"),a("tablesorter"),a("dataTables"),a("zdStringParser"),a("fixTableHeader"),a("spectrum"),b.exports=d},{bootstrap:93,dataTables:102,datepicker:91,fileupload:92,fixTableHeader:103,gridster:97,jquery:104,"jquery-range-slider":101,"jquery-ui":105,numberFormatter:106,spectrum:112,tablesorter:107,zdStringParser:108,zoomHammer:99}],110:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(){function b(){var a=this;a.build_tree=function(b){var c,d,e=a.dyn_tree,f=a.stat_desc.static_tree,g=a.stat_desc.elems,h=-1;
for(b.heap_len=0,b.heap_max=r,c=0;g>c;c++)0!==e[2*c]?(b.heap[++b.heap_len]=h=c,b.depth[c]=0):e[2*c+1]=0;for(;2>b.heap_len;)d=b.heap[++b.heap_len]=2>h?++h:0,e[2*d]=1,b.depth[d]=0,b.opt_len--,f&&(b.static_len-=f[2*d+1]);for(a.max_code=h,c=Math.floor(b.heap_len/2);c>=1;c--)b.pqdownheap(e,c);d=g;do c=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(e,1),f=b.heap[1],b.heap[--b.heap_max]=c,b.heap[--b.heap_max]=f,e[2*d]=e[2*c]+e[2*f],b.depth[d]=Math.max(b.depth[c],b.depth[f])+1,e[2*c+1]=e[2*f+1]=d,b.heap[1]=d++,b.pqdownheap(e,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1],c=a.dyn_tree;for(var i,j,h=a.stat_desc.static_tree,k=a.stat_desc.extra_bits,m=a.stat_desc.extra_base,n=a.stat_desc.max_length,o=0,g=0;l>=g;g++)b.bl_count[g]=0;for(c[2*b.heap[b.heap_max]+1]=0,d=b.heap_max+1;r>d;d++)f=b.heap[d],g=c[2*c[2*f+1]+1]+1,g>n&&(g=n,o++),c[2*f+1]=g,f>a.max_code||(b.bl_count[g]++,i=0,f>=m&&(i=k[f-m]),j=c[2*f],b.opt_len+=j*(g+i),h&&(b.static_len+=j*(h[2*f+1]+i)));if(0!==o){do{for(g=n-1;0===b.bl_count[g];)g--;b.bl_count[g]--,b.bl_count[g+1]+=2,b.bl_count[n]--,o-=2}while(o>0);for(g=n;0!==g;g--)for(f=b.bl_count[g];0!==f;)h=b.heap[--d],h>a.max_code||(c[2*h+1]!=g&&(b.opt_len+=(g-c[2*h+1])*c[2*h],c[2*h+1]=g),f--)}for(c=a.max_code,d=b.bl_count,b=[],f=0,g=1;l>=g;g++)b[g]=f=f+d[g-1]<<1;for(d=0;c>=d;d++)if(k=e[2*d+1],0!==k){f=e,g=2*d,h=b[k]++,m=0;do m|=1&h,h>>>=1,m<<=1;while(0<--k);f[g]=m>>>1}}}function c(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e}function e(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}function f(a,b,c,d){var e=a[2*b];return a=a[2*c],a>e||e==a&&d[b]<=d[c]}function g(){function a(){var a;for(a=0;q>a;a++)Pa[2*a]=0;for(a=0;m>a;a++)Qa[2*a]=0;for(a=0;n>a;a++)Ra[2*a]=0;Pa[2*s]=1,Ya=$a=Sa.opt_len=Sa.static_len=0}function d(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[2*(b+1)+1]=65535,c=0;b>=c;c++)d=f,f=a[2*(c+1)+1],++g<h&&d==f||(i>g?Ra[2*d]+=g:0!==d?(d!=e&&Ra[2*d]++,Ra[2*u]++):10>=g?Ra[2*v]++:Ra[2*w]++,g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))}function e(a){Sa.pending_buf[Sa.pending++]=a}function g(a){e(255&a),e(a>>>8&255)}function h(a,b){bb>x-b?(ab|=a<<bb&65535,g(ab),ab=a>>>x-bb,bb+=b-x):(ab|=a<<bb&65535,bb+=b)}function i(a,b){var c=2*a;h(65535&b[c],65535&b[c+1])}function j(a,b){var c,d,e=-1,f=a[1],g=0,j=7,k=4;for(0===f&&(j=138,k=3),c=0;b>=c;c++)if(d=f,f=a[2*(c+1)+1],!(++g<j&&d==f)){if(k>g){do i(d,Ra);while(0!==--g)}else 0!==d?(d!=e&&(i(d,Ra),g--),i(u,Ra),h(g-3,2)):10>=g?(i(v,Ra),h(g-3,3)):(i(w,Ra),h(g-11,7));g=0,e=d,0===f?(j=138,k=3):d==f?(j=6,k=3):(j=7,k=4)}}function k(){16==bb?(g(ab),bb=ab=0):bb>=8&&(e(255&ab),ab>>>=8,bb-=8)}function l(a,c){var d,e,f;if(Sa.pending_buf[Za+2*Ya]=a>>>8&255,Sa.pending_buf[Za+2*Ya+1]=255&a,Sa.pending_buf[Wa+Ya]=255&c,Ya++,0===a?Pa[2*c]++:($a++,a--,Pa[2*(b._length_code[c]+p+1)]++,Qa[2*b.d_code(a)]++),0===(8191&Ya)&&La>2){for(d=8*Ya,e=Fa-Ba,f=0;m>f;f++)d+=Qa[2*f]*(5+b.extra_dbits[f]);if($a<Math.floor(Ya/2)&&d>>>3<Math.floor(e/2))return!0}return Ya==Xa-1}function o(a,c){var d,e,f,g,j=0;if(0!==Ya)do d=Sa.pending_buf[Za+2*j]<<8&65280|255&Sa.pending_buf[Za+2*j+1],e=255&Sa.pending_buf[Wa+j],j++,0===d?i(e,a):(f=b._length_code[e],i(f+p+1,a),g=b.extra_lbits[f],0!==g&&(e-=b.base_length[f],h(e,g)),d--,f=b.d_code(d),i(f,c),g=b.extra_dbits[f],0!==g&&(d-=b.base_dist[f],h(d,g)));while(Ya>j);i(s,a),_a=a[2*s+1]}function r(){bb>8?g(ab):bb>0&&e(255&ab),bb=ab=0}function t(a,b,c){h((ca<<1)+(c?1:0),3),r(),_a=8,g(b),g(~b),Sa.pending_buf.set(sa.subarray(a,a+b),Sa.pending),Sa.pending+=b}function M(e){var f,g,i=Ba>=0?Ba:-1,k=Fa-Ba,l=0;if(La>0){for(Ta.build_tree(Sa),Ua.build_tree(Sa),d(Pa,Ta.max_code),d(Qa,Ua.max_code),Va.build_tree(Sa),l=n-1;l>=3&&0===Ra[2*b.bl_order[l]+1];l--);Sa.opt_len+=3*(l+1)+14,f=Sa.opt_len+3+7>>>3,g=Sa.static_len+3+7>>>3,f>=g&&(f=g)}else f=g=k+5;if(f>=k+4&&-1!=i)t(i,k,e);else if(g==f)h((da<<1)+(e?1:0),3),o(c.static_ltree,c.static_dtree);else{for(h((ea<<1)+(e?1:0),3),i=Ta.max_code+1,k=Ua.max_code+1,l+=1,h(i-257,5),h(k-1,5),h(l-4,4),f=0;l>f;f++)h(Ra[2*b.bl_order[f]+1],3);j(Pa,i-1),j(Qa,k-1),o(Pa,Qa)}a(),e&&r(),Ba=Fa,la.flush_pending()}function $(){var a,b,c,d;do{if(d=ta-Ha-Fa,0===d&&0===Fa&&0===Ha)d=pa;else if(-1==d)d--;else if(Fa>=pa+pa-ha){sa.set(sa.subarray(pa,pa+pa),0),Ga-=pa,Fa-=pa,Ba-=pa,c=a=xa;do b=65535&va[--c],va[c]=b>=pa?b-pa:0;while(0!==--a);c=a=pa;do b=65535&ua[--c],ua[c]=b>=pa?b-pa:0;while(0!==--a);d+=pa}if(0===la.avail_in)break;a=la.read_buf(sa,Fa+Ha,d),Ha+=a,Ha>=fa&&(wa=255&sa[Fa],wa=(wa<<Aa^255&sa[Fa+1])&za)}while(ha>Ha&&0!==la.avail_in)}function ia(a){var b,c=65535;for(c>na-5&&(c=na-5);;){if(1>=Ha){if($(),0===Ha&&a==C)return U;if(0===Ha)break}if(Fa+=Ha,Ha=0,b=Ba+c,(0===Fa||Fa>=b)&&(Ha=Fa-b,Fa=b,M(!1),0===la.avail_out))return U;if(Fa-Ba>=pa-ha&&(M(!1),0===la.avail_out))return U}return M(a==F),0===la.avail_out?a==F?W:U:a==F?X:V}function ja(a){var b,c=Ja,d=Fa,e=Ia,f=Fa>pa-ha?Fa-(pa-ha):0,g=Oa,h=ra,i=Fa+ga,j=sa[d+e-1],k=sa[d+e];Ia>=Na&&(c>>=2),g>Ha&&(g=Ha);do if(b=a,!(sa[b+e]!=k||sa[b+e-1]!=j||sa[b]!=sa[d]||sa[++b]!=sa[d+1])){d+=2,b++;do;while(sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&sa[++d]==sa[++b]&&i>d);if(b=ga-(i-d),d=i-ga,b>e){if(Ga=a,e=b,b>=g)break;j=sa[d+e-1],k=sa[d+e]}}while((a=65535&ua[a&h])>f&&0!==--c);return Ha>=e?e:Ha}function ka(a){for(var b,c,d=0;;){if(ha>Ha){if($(),ha>Ha&&a==C)return U;if(0===Ha)break}if(Ha>=fa&&(wa=(wa<<Aa^255&sa[Fa+(fa-1)])&za,d=65535&va[wa],ua[Fa&ra]=va[wa],va[wa]=Fa),Ia=Ca,Da=Ga,Ca=fa-1,0!==d&&Ka>Ia&&pa-ha>=(Fa-d&65535)&&(Ma!=A&&(Ca=ja(d)),5>=Ca&&(Ma==z||Ca==fa&&Fa-Ga>4096))&&(Ca=fa-1),Ia>=fa&&Ia>=Ca){c=Fa+Ha-fa,b=l(Fa-1-Da,Ia-fa),Ha-=Ia-1,Ia-=2;do++Fa<=c&&(wa=(wa<<Aa^255&sa[Fa+(fa-1)])&za,d=65535&va[wa],ua[Fa&ra]=va[wa],va[wa]=Fa);while(0!==--Ia);if(Ea=0,Ca=fa-1,Fa++,b&&(M(!1),0===la.avail_out))return U}else if(0!==Ea){if((b=l(0,255&sa[Fa-1]))&&M(!1),Fa++,Ha--,0===la.avail_out)return U}else Ea=1,Fa++,Ha--}return 0!==Ea&&(l(0,255&sa[Fa-1]),Ea=0),M(a==F),0===la.avail_out?a==F?W:U:a==F?X:V}var la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa=this,Ta=new b,Ua=new b,Va=new b;Sa.depth=[];var Wa,Xa,Ya,Za,$a,_a,ab,bb;Sa.bl_count=[],Sa.heap=[],Pa=[],Qa=[],Ra=[],Sa.pqdownheap=function(a,b){for(var c=Sa.heap,d=c[b],e=b<<1;e<=Sa.heap_len&&(e<Sa.heap_len&&f(a,c[e+1],c[e],Sa.depth)&&e++,!f(a,d,c[e],Sa.depth));)c[b]=c[e],b=e,e<<=1;c[b]=d},Sa.deflateInit=function(b,d,e,f,g,h){if(f||(f=ba),g||(g=O),h||(h=B),b.msg=null,d==y&&(d=6),1>g||g>N||f!=ba||9>e||e>15||0>d||d>9||0>h||h>A)return J;for(b.dstate=Sa,qa=e,pa=1<<qa,ra=pa-1,ya=g+7,xa=1<<ya,za=xa-1,Aa=Math.floor((ya+fa-1)/fa),sa=new Uint8Array(2*pa),ua=[],va=[],Xa=1<<g+6,Sa.pending_buf=new Uint8Array(4*Xa),na=4*Xa,Za=Math.floor(Xa/2),Wa=3*Xa,La=d,Ma=h,b.total_in=b.total_out=0,b.msg=null,Sa.pending=0,Sa.pending_out=0,ma=_,oa=C,Ta.dyn_tree=Pa,Ta.stat_desc=c.static_l_desc,Ua.dyn_tree=Qa,Ua.stat_desc=c.static_d_desc,Va.dyn_tree=Ra,Va.stat_desc=c.static_bl_desc,bb=ab=0,_a=8,a(),ta=2*pa,b=va[xa-1]=0;xa-1>b;b++)va[b]=0;return Ka=S[La].max_lazy,Na=S[La].good_length,Oa=S[La].nice_length,Ja=S[La].max_chain,Ha=Ba=Fa=0,Ca=Ia=fa-1,wa=Ea=0,G},Sa.deflateEnd=function(){return ma!=Z&&ma!=_&&ma!=aa?J:(sa=ua=va=Sa.pending_buf=null,Sa.dstate=null,ma==_?K:G)},Sa.deflateParams=function(a,b,c){var d=G;return b==y&&(b=6),0>b||b>9||0>c||c>A?J:(S[La].func!=S[b].func&&0!==a.total_in&&(d=a.deflate(D)),La!=b&&(La=b,Ka=S[La].max_lazy,Na=S[La].good_length,Oa=S[La].nice_length,Ja=S[La].max_chain),Ma=c,d)},Sa.deflateSetDictionary=function(a,b,c){a=c;var d=0;if(!b||ma!=Z)return J;if(fa>a)return G;for(a>pa-ha&&(a=pa-ha,d=c-a),sa.set(b.subarray(d,d+a),0),Ba=Fa=a,wa=255&sa[0],wa=(wa<<Aa^255&sa[1])&za,b=0;a-fa>=b;b++)wa=(wa<<Aa^255&sa[b+(fa-1)])&za,ua[b&ra]=va[wa],va[wa]=b;return G},Sa.deflate=function(a,b){var d,f,g;if(b>F||0>b)return J;if(!a.next_out||!a.next_in&&0!==a.avail_in||ma==aa&&b!=F)return a.msg=T[I-J],J;if(0===a.avail_out)return a.msg=T[I-L],L;if(la=a,d=oa,oa=b,ma==Z&&(f=ba+(qa-8<<4)<<8,g=(La-1&255)>>1,g>3&&(g=3),f|=g<<6,0!==Fa&&(f|=Y),ma=_,f+=31-f%31,e(f>>8&255),e(255&f)),0!==Sa.pending){if(la.flush_pending(),0===la.avail_out)return oa=-1,G}else if(0===la.avail_in&&d>=b&&b!=F)return la.msg=T[I-L],L;if(ma==aa&&0!==la.avail_in)return a.msg=T[I-L],L;if(0!==la.avail_in||0!==Ha||b!=C&&ma!=aa){switch(d=-1,S[La].func){case P:d=ia(b);break;case Q:a:{for(d=0;;){if(ha>Ha){if($(),ha>Ha&&b==C){d=U;break a}if(0===Ha)break}if(Ha>=fa&&(wa=(wa<<Aa^255&sa[Fa+(fa-1)])&za,d=65535&va[wa],ua[Fa&ra]=va[wa],va[wa]=Fa),0!==d&&pa-ha>=(Fa-d&65535)&&Ma!=A&&(Ca=ja(d)),Ca>=fa)if(f=l(Fa-Ga,Ca-fa),Ha-=Ca,Ka>=Ca&&Ha>=fa){Ca--;do Fa++,wa=(wa<<Aa^255&sa[Fa+(fa-1)])&za,d=65535&va[wa],ua[Fa&ra]=va[wa],va[wa]=Fa;while(0!==--Ca);Fa++}else Fa+=Ca,Ca=0,wa=255&sa[Fa],wa=(wa<<Aa^255&sa[Fa+1])&za;else f=l(0,255&sa[Fa]),Ha--,Fa++;if(f&&(M(!1),0===la.avail_out)){d=U;break a}}M(b==F),d=0===la.avail_out?b==F?W:U:b==F?X:V}break;case R:d=ka(b)}if((d==W||d==X)&&(ma=aa),d==U||d==W)return 0===la.avail_out&&(oa=-1),G;if(d==V){if(b==D)h(da<<1,3),i(s,c.static_ltree),k(),9>1+_a+10-bb&&(h(da<<1,3),i(s,c.static_ltree),k()),_a=7;else if(t(0,0,!1),b==E)for(d=0;xa>d;d++)va[d]=0;if(la.flush_pending(),0===la.avail_out)return oa=-1,G}}return b!=F?G:H}}function h(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}function i(a){var b=new h,c=C,d=new Uint8Array(512);"undefined"==typeof a&&(a=y),b.deflateInit(a),b.next_out=d,this.append=function(a,e){var f,g,h=[],i=0,j=0,k=0;if(a.length){b.next_in_index=0,b.next_in=a,b.avail_in=a.length;do{if(b.next_out_index=0,b.avail_out=512,f=b.deflate(c),f!=G)throw"deflating: "+b.msg;b.next_out_index&&(512==b.next_out_index?h.push(new Uint8Array(d)):h.push(new Uint8Array(d.subarray(0,b.next_out_index)))),k+=b.next_out_index,e&&0<b.next_in_index&&b.next_in_index!=i&&(e(b.next_in_index),i=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);return g=new Uint8Array(k),h.forEach(function(a){g.set(a,j),j+=a.length}),g}},this.flush=function(){var a,c,e=[],f=0,g=0;do{if(b.next_out_index=0,b.avail_out=512,a=b.deflate(F),a!=H&&a!=G)throw"deflating: "+b.msg;0<512-b.avail_out&&e.push(new Uint8Array(d.subarray(0,b.next_out_index))),g+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);return b.deflateEnd(),c=new Uint8Array(g),e.forEach(function(a){c.set(a,f),f+=a.length}),c}}window.jsPDF=function(){function a(d,e,f,g){d="undefined"==typeof d?"p":d.toString().toLowerCase(),"undefined"==typeof e&&(e="mm"),"undefined"==typeof f&&(f="a4"),"undefined"==typeof g&&"undefined"==typeof zpipe&&(g=!1);var h=f.toString().toLowerCase(),j=[],l=0,m=g;g={a3:[841.89,1190.55],a4:[595.28,841.89],a5:[420.94,595.28],letter:[612,792],legal:[612,1008]};var n,o,p,q,r,s,t,u,v="0 g",w=0,x=[],y=2,z=!1,A=[],B={},C={},D=16,E={title:"",subject:"",author:"",keywords:"",creator:""},F=0,G=0,H={},I=new c(H),J=function(a){return a.toFixed(2)},K=function(a){var b=a.toFixed(0);return 10>a?"0"+b:b},L=function(a){z?x[w].push(a):(j.push(a),l+=a.length+1)},M=function(){return y++,A[y]=l,L(y+" 0 obj"),y},N=function(a){L("stream"),L(a),L("endstream")},O=function(a,b){var c;c=a;var d,e,f,g,h,i,j=b;if(void 0===j&&(j={}),d=j.sourceEncoding?d:"Unicode",f=j.outputEncoding,(j.autoencode||f)&&B[n].metadata&&B[n].metadata[d]&&B[n].metadata[d].encoding&&(d=B[n].metadata[d].encoding,!f&&B[n].encoding&&(f=B[n].encoding),!f&&d.codePages&&(f=d.codePages[0]),"string"==typeof f&&(f=d[f]),f)){for(h=!1,g=[],d=0,e=c.length;e>d;d++)(i=f[c.charCodeAt(d)])?g.push(String.fromCharCode(i)):g.push(c[d]),g[d].charCodeAt(0)>>8&&(h=!0);c=g.join("")}for(d=c.length;void 0===h&&0!==d;)c.charCodeAt(d-1)>>8&&(h=!0),d--;if(h){for(g=j.noBOM?[]:[254,255],d=0,e=c.length;e>d;d++){if(i=c.charCodeAt(d),j=i>>8,j>>8)throw Error("Character at position "+d.toString(10)+" of string '"+c+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");g.push(j),g.push(i-(j<<8))}c=String.fromCharCode.apply(void 0,g)}return c.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},P=function(){w++,z=!0,x[w]=[],L(J(.200025*q)+" w"),L("0 G"),0!==F&&L(F.toString(10)+" J"),0!==G&&L(G.toString(10)+" j"),I.publish("addPage",{pageNumber:w})},Q=function(a,b){var c;void 0===a&&(a=B[n].fontName),void 0===b&&(b=B[n].fontStyle);try{c=C[a][b]}catch(d){c=void 0}if(!c)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return c},R=function(){z=!1,j=[],A=[],L("%PDF-1.3"),s=p*q,t=o*q;var a,b,c,d,e;for(a=1;w>=a;a++){if(M(),L("<</Type /Page"),L("/Parent 1 0 R"),L("/Resources 2 0 R"),L("/Contents "+(y+1)+" 0 R>>"),L("endobj"),b=x[a].join("\n"),M(),m){for(c=[],d=0;d<b.length;++d)c[d]=b.charCodeAt(d);e=adler32cs.from(b),b=new i(6),b.append(new Uint8Array(c)),b=b.flush(),c=[new Uint8Array([120,156]),new Uint8Array(b),new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])],b="";for(d in c)c.hasOwnProperty(d)&&(b+=String.fromCharCode.apply(null,c[d]));L("<</Length "+b.length+" /Filter [/FlateDecode]>>")}else L("<</Length "+b.length+">>");N(b),L("endobj")}for(A[1]=l,L("1 0 obj"),L("<</Type /Pages"),u="/Kids [",d=0;w>d;d++)u+=3+2*d+" 0 R ";L(u+"]"),L("/Count "+w),L("/MediaBox [0 0 "+J(s)+" "+J(t)+"]"),L(">>"),L("endobj");for(var f in B)B.hasOwnProperty(f)&&(a=B[f],a.objectNumber=M(),L("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&L("/Encoding/"+a.encoding),L("/Subtype/Type1>>"),L("endobj"));I.publish("putResources"),A[2]=l,L("2 0 obj"),L("<<"),L("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),L("/Font <<");for(var g in B)B.hasOwnProperty(g)&&L("/"+g+" "+B[g].objectNumber+" 0 R");for(L(">>"),L("/XObject <<"),I.publish("putXobjectDict"),L(">>"),L(">>"),L("endobj"),I.publish("postPutResources"),M(),L("<<"),L("/Producer (jsPDF 20120619)"),E.title&&L("/Title ("+O(E.title)+")"),E.subject&&L("/Subject ("+O(E.subject)+")"),E.author&&L("/Author ("+O(E.author)+")"),E.keywords&&L("/Keywords ("+O(E.keywords)+")"),E.creator&&L("/Creator ("+O(E.creator)+")"),f=new Date,L("/CreationDate (D:"+[f.getFullYear(),K(f.getMonth()+1),K(f.getDate()),K(f.getHours()),K(f.getMinutes()),K(f.getSeconds())].join("")+")"),L(">>"),L("endobj"),M(),L("<<"),L("/Type /Catalog"),L("/Pages 1 0 R"),L("/OpenAction [3 0 R /FitH null]"),L("/PageLayout /OneColumn"),I.publish("putCatalog"),L(">>"),L("endobj"),f=l,L("xref"),L("0 "+(y+1)),L("0000000000 65535 f "),g=1;y>=g;g++)a=A[g].toFixed(0),a=10>a.length?Array(11-a.length).join("0")+a:a,L(a+" 00000 n ");return L("trailer"),L("<<"),L("/Size "+(y+1)),L("/Root "+y+" 0 R"),L("/Info "+(y-1)+" 0 R"),L(">>"),L("startxref"),L(f),L("%%EOF"),z=!0,j.join("\n")},S=function(a){var b="S";return"F"===a?b="f":("FD"===a||"DF"===a)&&(b="B"),b},T=function(a,b){var c,d,e,f;switch(a){case void 0:return R();case"save":if(navigator.getUserMedia&&(void 0===window.URL||void 0===window.URL.createObjectURL))return H.output("dataurlnewwindow");for(c=R(),d=c.length,e=new Uint8Array(new ArrayBuffer(d)),f=0;d>f;f++)e[f]=c.charCodeAt(f);c=new Blob([e],{type:"application/pdf"}),k(c,b);break;case"datauristring":case"dataurlstring":return"data:application/pdf;base64,"+btoa(R());case"datauri":case"dataurl":document.location.href="data:application/pdf;base64,"+btoa(R());break;case"dataurlnewwindow":window.open("data:application/pdf;base64,"+btoa(R()));break;default:throw Error('Output type "'+a+'" is not supported.')}};if("pt"===e)q=1;else if("mm"===e)q=72/25.4;else if("cm"===e)q=72/2.54;else{if("in"!==e)throw"Invalid unit: "+e;q=72}if(g.hasOwnProperty(h))o=g[h][1]/q,p=g[h][0]/q;else try{o=f[1],p=f[0]}catch(U){throw"Invalid format: "+f}if("p"===d||"portrait"===d)d="p",p>o&&(d=p,p=o,o=d);else{if("l"!==d&&"landscape"!==d)throw"Invalid orientation: "+d;d="l",o>p&&(d=p,p=o,o=d)}H.internal={pdfEscape:O,getStyle:S,getFont:function(){return B[Q.apply(H,arguments)]},getFontSize:function(){return D},btoa:btoa,write:function(a,b,c,d){L(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return J(a*q)},getVerticalCoordinateString:function(a){return J((o-a)*q)},collections:{},newObject:M,putStream:N,events:I,scaleFactor:q,pageSize:{width:p,height:o},output:function(a,b){return T(a,b)}},H.addPage=function(){return P(),this},H.text=function(a,b,c,d){var e,f;if("number"==typeof a&&(e=a,f=b,a=c,b=e,c=f),"string"==typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g)),"undefined"==typeof d?d={noBOM:!0,autoencode:!0}:(void 0===d.noBOM&&(d.noBOM=!0),void 0===d.autoencode&&(d.autoencode=!0)),"string"==typeof a)d=O(a,d);else{if(!(a instanceof Array))throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');for(a=a.concat(),e=a.length-1;-1!==e;e--)a[e]=O(a[e],d);d=a.join(") Tj\nT* (")}return L("BT\n/"+n+" "+D+" Tf\n"+D+" TL\n"+v+"\n"+J(b*q)+" "+J((o-c)*q)+" Td\n("+d+") Tj\nET"),this},H.line=function(a,b,c,d){return L(J(a*q)+" "+J((o-b)*q)+" m "+J(c*q)+" "+J((o-d)*q)+" l S"),this},H.lines=function(a,b,c,d,e){var f,g,h,i,j,k,l,m;for("number"==typeof a&&(f=a,g=b,a=c,b=f,c=g),e=S(e),d=void 0===d?[1,1]:d,L((b*q).toFixed(3)+" "+((o-c)*q).toFixed(3)+" m "),f=d[0],d=d[1],g=a.length,m=c,c=0;g>c;c++)h=a[c],2===h.length?(b=h[0]*f+b,m=h[1]*d+m,L((b*q).toFixed(3)+" "+((o-m)*q).toFixed(3)+" l")):(i=h[0]*f+b,j=h[1]*d+m,k=h[2]*f+b,l=h[3]*d+m,b=h[4]*f+b,m=h[5]*d+m,L((i*q).toFixed(3)+" "+((o-j)*q).toFixed(3)+" "+(k*q).toFixed(3)+" "+((o-l)*q).toFixed(3)+" "+(b*q).toFixed(3)+" "+((o-m)*q).toFixed(3)+" c"));return L(e),this},H.rect=function(a,b,c,d,e){return e=S(e),L([J(a*q),J((o-b)*q),J(c*q),J(-d*q),"re",e].join(" ")),this},H.triangle=function(a,b,c,d,e,f,g){return this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g),this},H.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);return this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-(e*h),f,-e,f],[-c+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-d+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g),this},H.ellipse=function(a,b,c,d,e){e=S(e);var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;return L([J((a+c)*q),J((o-b)*q),"m",J((a+c)*q),J((o-(b-g))*q),J((a+f)*q),J((o-(b-d))*q),J(a*q),J((o-(b-d))*q),"c"].join(" ")),L([J((a-f)*q),J((o-(b-d))*q),J((a-c)*q),J((o-(b-g))*q),J((a-c)*q),J((o-b)*q),"c"].join(" ")),L([J((a-c)*q),J((o-(b+g))*q),J((a-f)*q),J((o-(b+d))*q),J(a*q),J((o-(b+d))*q),"c"].join(" ")),L([J((a+f)*q),J((o-(b+d))*q),J((a+c)*q),J((o-(b+g))*q),J((a+c)*q),J((o-b)*q),"c",e].join(" ")),this},H.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)},H.setProperties=function(a){for(var b in E)E.hasOwnProperty(b)&&a[b]&&(E[b]=a[b]);return this},H.setFontSize=function(a){return D=a,this},H.setFont=function(a,b){return n=Q(a,b),this},H.setFontStyle=H.setFontType=function(a){return n=Q(void 0,a),this},H.getFontList=function(){var a,b,c,d={};for(a in C)if(C.hasOwnProperty(a))for(b in d[a]=c=[],C[a])C[a].hasOwnProperty(b)&&c.push(b);return d},H.setLineWidth=function(a){return L((a*q).toFixed(2)+" w"),this},H.setDrawColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" G":J(a/255)+" G":void 0===d?"string"==typeof a?[a,b,c,"RG"].join(" "):[J(a/255),J(b/255),J(c/255),"RG"].join(" "):"string"==typeof a?[a,b,c,d,"K"].join(" "):[J(a),J(b),J(c),J(d),"K"].join(" "),L(a),this},H.setFillColor=function(a,b,c,d){return a=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" g":J(a/255)+" g":void 0===d?"string"==typeof a?[a,b,c,"rg"].join(" "):[J(a/255),J(b/255),J(c/255),"rg"].join(" "):"string"==typeof a?[a,b,c,d,"k"].join(" "):[J(a),J(b),J(c),J(d),"k"].join(" "),L(a),this},H.setTextColor=function(a,b,c){return v=0===a&&0===b&&0===c||"undefined"==typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(c/255).toFixed(3),"rg"].join(" "),this},H.CapJoinStyles={0:0,butt:0,but:0,bevel:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,milter:2},H.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return F=b,L(b.toString(10)+" J"),this},H.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return G=b,L(b.toString(10)+" j"),this},H.output=T,H.save=function(a){H.output("save",a)};for(r in a.API)if(a.API.hasOwnProperty(r))if("events"===r&&a.API.events.length)for(d=I,e=a.API.events,g=h=f=void 0,g=e.length-1;-1!==g;g--)f=e[g][0],h=e[g][1],d.subscribe.apply(d,[f].concat("function"==typeof h?[h]:h));else H[r]=a.API[r];for(r=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],d=0,e=r.length;e>d;d++){g=r[d][0];var V=r[d][1],h=r[d][2];f="F"+(b(B)+1).toString(10),g=B[f]={id:f,PostScriptName:g,fontName:V,fontStyle:h,encoding:"StandardEncoding",metadata:{}};var W=f;void 0===C[V]&&(C[V]={}),C[V][h]=W,I.publish("addFont",g),h=f,f=r[d][0].split("-"),g=f[0],f=f[1]||"",void 0===C[g]&&(C[g]={}),C[g][f]=h}return I.publish("addFonts",{fonts:B,dictionary:C}),n="F1",P(),I.publish("initialized"),H}"undefined"==typeof btoa&&(window.btoa=function(a){var b,c,d,e,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),g=0,h=0,i="",i=[];do b=a.charCodeAt(g++),c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=b<<16|c<<8|d,b=e>>18&63,c=e>>12&63,d=e>>6&63,e&=63,i[h++]=f[b]+f[c]+f[d]+f[e];while(g<a.length);return i=i.join(""),a=a.length%3,(a?i.slice(0,a-3):i)+"===".slice(a||3)}),"undefined"==typeof atob&&(window.atob=function(a){var b,c,d,e,f,g=0,h=0;e="";var i=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)),d=b<<18|c<<12|e<<6|f,b=d>>16&255,c=d>>8&255,d&=255,64===e?i[h++]=String.fromCharCode(b):64===f?i[h++]=String.fromCharCode(b,c):i[h++]=String.fromCharCode(b,c,d);while(g<a.length);return e=i.join("")});var b="function"==typeof Object.keys?function(a){return Object.keys(a).length}:function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},c=function(a){this.topics={},this.context=a,this.publish=function(a,b){if(this.topics[a]){var c,d,e,f,g=this.topics[a],h=[],i=function(){};for(b=Array.prototype.slice.call(arguments,1),d=0,e=g.length;e>d;d++)f=g[d],c=f[0],f[1]&&(f[0]=i,h.push(d)),c.apply(this.context,b);for(d=0,e=h.length;e>d;d++)g.splice(h[d],1)}},this.subscribe=function(a,b,c){return this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]],{topic:a,callback:b}},this.unsubscribe=function(a){if(this.topics[a.topic]){var b,c,d=this.topics[a.topic];for(b=0,c=d.length;c>b;b++)d[b][0]===a.callback&&d.splice(b,1)}}};return a.API={events:[]},a}(),function(a){var b=function(){var a,b=this.internal.collections.addImage_images;for(a in b){var c=b[a],d=this.internal.newObject(),e=this.internal.write,f=this.internal.putStream;if(c.n=d,e("<</Type /XObject"),e("/Subtype /Image"),e("/Width "+c.w),e("/Height "+c.h),"Indexed"===c.cs?e("/ColorSpace [/Indexed /DeviceRGB "+(c.pal.length/3-1)+" "+(d+1)+" 0 R]"):(e("/ColorSpace /"+c.cs),"DeviceCMYK"===c.cs&&e("/Decode [1 0 1 0 1 0 1 0]")),e("/BitsPerComponent "+c.bpc),"f"in c&&e("/Filter /"+c.f),"dp"in c&&e("/DecodeParms <<"+c.dp+">>"),"trns"in c&&c.trns.constructor==Array)for(var g="",h=0;h<c.trns.length;h++)g+=c[g][h]+" "+c.trns[h]+" ",e("/Mask ["+g+"]");"smask"in c&&e("/SMask "+(d+1)+" 0 R"),e("/Length "+c.data.length+">>"),f(c.data),e("endobj")}},c=function(){var a,b,c=this.internal.collections.addImage_images,d=this.internal.write;for(b in c)a=c[b],d("/I"+a.i,a.n,"0","R")};a.addImage=function(a,d,e,f,g,h){if("object"==typeof a&&1===a.nodeType){d=document.createElement("canvas"),d.width=a.clientWidth,d.height=a.clientHeight;var i=d.getContext("2d");if(!i)throw"addImage requires canvas to be supported by browser.";i.drawImage(a,0,0,d.width,d.height),a=d.toDataURL("image/jpeg"),d="JPEG"}if("JPEG"!==d.toUpperCase())throw Error("addImage currently only supports format 'JPEG', not '"+d+"'");var j;d=this.internal.collections.addImage_images;var i=this.internal.getCoordinateString,k=this.internal.getVerticalCoordinateString;if("data:image/jpeg;base64,"===a.substring(0,23)&&(a=atob(a.replace("data:image/jpeg;base64,",""))),d)if(Object.keys)j=Object.keys(d).length;else{var l=d,m=0;for(j in l)l.hasOwnProperty(j)&&m++;j=m}else j=0,this.internal.collections.addImage_images=d={},this.internal.events.subscribe("putResources",b),this.internal.events.subscribe("putXobjectDict",c);a:{var n,l=a;if(255===!l.charCodeAt(0)||216===!l.charCodeAt(1)||255===!l.charCodeAt(2)||224===!l.charCodeAt(3)||74===!l.charCodeAt(6)||70===!l.charCodeAt(7)||73===!l.charCodeAt(8)||70===!l.charCodeAt(9)||0===!l.charCodeAt(10))throw Error("getJpegSize requires a binary jpeg file");n=256*l.charCodeAt(4)+l.charCodeAt(5);for(var m=4,o=l.length;o>m;){if(m+=n,255!==l.charCodeAt(m))throw Error("getJpegSize could not find the size of the image");if(192===l.charCodeAt(m+1)){n=256*l.charCodeAt(m+5)+l.charCodeAt(m+6),l=256*l.charCodeAt(m+7)+l.charCodeAt(m+8),l=[l,n];break a}m+=2,n=256*l.charCodeAt(m)+l.charCodeAt(m+1)}l=void 0}return a={w:l[0],h:l[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:j,data:a},d[j]=a,!g&&!h&&(h=g=-96),0>g&&(g=-72*a.w/g/this.internal.scaleFactor),0>h&&(h=-72*a.h/h/this.internal.scaleFactor),0===g&&(g=h*a.w/a.h),0===h&&(h=g*a.h/a.w),this.internal.write("q",i(g),"0 0",i(h),i(e),k(f+h),"cm /I"+a.i,"Do Q"),this}}(jsPDF.API),function(a){function b(a,b,c,d){return this.pdf=a,this.x=b,this.y=c,this.settings=d,this.init(),this}function c(a){var b=h[a];return b?b:(b={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[a],void 0!==b||(b=parseFloat(a))?h[a]=b/16:(b=a.match(/([\d\.]+)(px)/),3===b.length?h[a]=parseFloat(b[1])/16:h[a]=1))}function d(a,b,h){var i,j=a.childNodes;i=$(a),a={};for(var k,l=i.css("font-family").split(","),m=l.shift();!k&&m;)k=e[m.trim().toLowerCase()],m=l.shift();for(a["font-family"]=k||"times",a["font-style"]=g[i.css("font-style")]||"normal",k=f[i.css("font-weight")]||"normal","bold"===k&&(a["font-style"]="normal"===a["font-style"]?k:k+a["font-style"]),a["font-size"]=c(i.css("font-size"))||1,a["line-height"]=c(i.css("line-height"))||1,a.display="inline"===i.css("display")?"inline":"block","block"===a.display&&(a["margin-top"]=c(i.css("margin-top"))||0,a["margin-bottom"]=c(i.css("margin-bottom"))||0,a["padding-top"]=c(i.css("padding-top"))||0,a["padding-bottom"]=c(i.css("padding-bottom"))||0),(k="block"===a.display)&&(b.setBlockBoundary(),b.setBlockStyle(a)),l=0,m=j.length;m>l;l++)if(i=j[l],"object"==typeof i)if(1===i.nodeType&&"SCRIPT"!=i.nodeName){var n=i,o=b,p=h,q=!1,r=void 0,s=void 0,t=p["#"+n.id];if(t)if("function"==typeof t)q=t(n,o);else for(r=0,s=t.length;!q&&r!==s;)q=t[r](n,o),r++;if(t=p[n.nodeName],!q&&t)if("function"==typeof t)q=t(n,o);else for(r=0,s=t.length;!q&&r!==s;)q=t[r](n,o),r++;q||d(i,b,h)}else 3===i.nodeType&&b.addText(i.nodeValue,a);else"string"==typeof i&&b.addText(i,a);k&&b.setBlockBoundary()}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),b.prototype.init=function(){this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},b.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y}},b.prototype.splitFragmentsIntoLines=function(a,b){for(var c,d,e,f,g,h=this.pdf.internal.scaleFactor,i={},j=[],k=[j],l=0,m=this.settings.width;a.length;)if(f=a.shift(),g=b.shift(),f)if(c=g["font-family"],d=g["font-style"],e=i[c+d],e||(e=this.pdf.internal.getFont(c,d).metadata.Unicode,i[c+d]=e),c={widths:e.widths,kerning:e.kerning,fontSize:12*g["font-size"],textIndent:l},d=this.pdf.getStringUnitWidth(f,c)*c.fontSize/h,l+d>m){for(f=this.pdf.splitTextToSize(f,m,c),j.push([f.shift(),g]);f.length;)j=[[f.shift(),g]],k.push(j);l=this.pdf.getStringUnitWidth(j[0][0],c)*c.fontSize/h}else j.push([f,g]),l+=d;return k},b.prototype.RenderTextFragment=function(a,b){var c=this.pdf.internal.getFont(b["font-family"],b["font-style"]);this.pdf.internal.write("/"+c.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj")},b.prototype.renderParagraph=function(){for(var a,b=this.paragraph.text,c=0,d=b.length,e=!1,f=!1;!e&&c!==d;)(a=b[c]=b[c].trimLeft())&&(e=!0),c++;for(c=d-1;d&&!f&&-1!==c;)(a=b[c]=b[c].trimRight())&&(f=!0),c--;for(e=/\s+$/g,f=!0,c=0;c!==d;c++)a=b[c].replace(/\s+/g," "),f&&(a=a.trimLeft()),a&&(f=e.test(a)),b[c]=a;if(c=this.paragraph.style,a=(d=this.paragraph.blockstyle)||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:d},b.join("").trim()){b=this.splitFragmentsIntoLines(b,c),c=12/this.pdf.internal.scaleFactor,e=(Math.max((d["margin-top"]||0)-(a["margin-bottom"]||0),0)+(d["padding-top"]||0))*c,d=((d["margin-bottom"]||0)+(d["padding-bottom"]||0))*c,a=this.pdf.internal.write;var g,h;for(this.y+=e,a("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");b.length;){for(e=b.shift(),g=f=0,h=e.length;g!==h;g++)e[g][0].trim()&&(f=Math.max(f,e[g][1]["line-height"],e[g][1]["font-size"]));for(a(0,(-12*f).toFixed(2),"Td"),g=0,h=e.length;g!==h;g++)e[g][0]&&this.RenderTextFragment(e[g][0],e[g][1]);this.y+=f*c}a("ET","Q"),this.y+=d}},b.prototype.setBlockBoundary=function(){this.renderParagraph()},b.prototype.setBlockStyle=function(a){this.paragraph.blockstyle=a},b.prototype.addText=function(a,b){this.paragraph.text.push(a),this.paragraph.style.push(b)};var e={helvetica:"helvetica","sans-serif":"helvetica",serif:"times",times:"times","times new roman":"times",monospace:"courier",courier:"courier"},f={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},g={normal:"normal",italic:"italic",oblique:"italic"},h={normal:1};a.fromHTML=function(a,c,e,f){if("string"==typeof a){var g="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0);$('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="'+g+'" /></div>').appendTo(document.body),a=$(window.frames[g].document.body).html(a)[0]}return c=new b(this,c,e,f),d(a,c,f.elementHandlers),c.dispose()}}(jsPDF.API),function(a){a.addSVG=function(a,b,c,d,e){if(void 0===b||void 0===b)throw Error("addSVG needs values for 'x' and 'y'");var f=document.createElement("iframe"),g=document.createElement("style");g.type="text/css",g.styleSheet?g.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":g.appendChild(document.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}")),document.getElementsByTagName("head")[0].appendChild(g),f.name="childframe",f.setAttribute("width",0),f.setAttribute("height",0),f.setAttribute("frameborder","0"),f.setAttribute("scrolling","no"),f.setAttribute("seamless","seamless"),f.setAttribute("class","jsPDF_sillysvg_iframe"),document.body.appendChild(f),f=(f.contentWindow||f.contentDocument).document,f.write(a),
f.close(),f=f.getElementsByTagName("svg")[0],a=[1,1];var g=parseFloat(f.getAttribute("width")),h=parseFloat(f.getAttribute("height"));for(g&&h&&(d&&e?a=[d/g,e/h]:d?a=[d/g,d/g]:e&&(a=[e/h,e/h])),f=f.childNodes,d=0,e=f.length;e>d;d++)if(g=f[d],g.tagName&&"PATH"===g.tagName.toUpperCase()){for(var g=g.getAttribute("d").split(" "),h=parseFloat(g[1]),i=parseFloat(g[2]),j=[],k=3,l=g.length;l>k;)"c"===g[k]?(j.push([parseFloat(g[k+1]),parseFloat(g[k+2]),parseFloat(g[k+3]),parseFloat(g[k+4]),parseFloat(g[k+5]),parseFloat(g[k+6])]),k+=7):"l"===g[k]?(j.push([parseFloat(g[k+1]),parseFloat(g[k+2])]),k+=3):k+=1;g=[h,i,j],g[0]=g[0]*a[0]+b,g[1]=g[1]*a[1]+c,this.lines.call(this,g[2],g[0],g[1],a)}return this}}(jsPDF.API),function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var c,d,e,f=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,g=f.fof?f.fof:1,h=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,i=h.fof?h.fof:1,j=0,k=f[0]||g,l=[];for(c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),l.push((f[e]||k)/g+(h[e]&&h[e][j]||0)/i),j=e;return l},c=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c};a.getStringUnitWidth=function(a,d){return c(b.call(this,a,d))};var d=function(a,d,e){e||(e={});var f=b(" ",e)[0],g=a.split(" "),h=[];a=[h];var i,j,k,l,m=e.textIndent||0,n=0,o=0;for(k=0,l=g.length;l>k;k++){if(i=g[k],j=b(i,e),o=c(j),m+n+o>d){if(o>d){for(var o=i,p=j,q=d,r=[],s=0,t=o.length,u=0;s!==t&&u+p[s]<d-(m+n);)u+=p[s],s++;for(r.push(o.slice(0,s)),m=s,u=0;s!==t;)u+p[s]>q&&(r.push(o.slice(m,s)),u=0,m=s),u+=p[s],s++;for(m!==s&&r.push(o.slice(m,s)),m=r,h.push(m.shift()),h=[m.pop()];m.length;)a.push([m.shift()]);o=c(j.slice(i.length-h[0].length))}else h=[i];a.push(h),m=o}else h.push(i),m+=n+o;n=f}for(d=[],k=0,l=a.length;l>k;k++)d.push(a[k].join(" "));return d};a.splitTextToSize=function(a,b,c){c||(c={});var e,f=c.fontSize||this.internal.getFontSize(),g=c;e={0:1};var h={};for(g.widths&&g.kerning?e={widths:g.widths,kerning:g.kerning}:(g=this.internal.getFont(g.fontName,g.fontStyle),e=g.metadata.Unicode?{widths:g.metadata.Unicode.widths||e,kerning:g.metadata.Unicode.kerning||h}:{widths:e,kerning:h}),a=a.match(/[\n\r]/)?a.split(/\r\n|\r|\n/g):[a],b=1*this.internal.scaleFactor*b/f,e.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/f:0,h=[],c=0,f=a.length;f>c;c++)h=h.concat(d(a[c],b,e));return h}}(jsPDF.API),function(a){var b=function(a){for(var b={},c=0;16>c;c++)b["klmnopqrstuvwxyz"[c]]="0123456789abcdef"[c];for(var d,e,f,g={},h=1,i=g,j=[],k="",l="",m=a.length-1,c=1;c!=m;)e=a[c],c+=1,"'"==e?d?(f=d.join(""),d=void 0):d=[]:d?d.push(e):"{"==e?(j.push([i,f]),i={},f=void 0):"}"==e?(e=j.pop(),e[0][e[1]]=i,f=void 0,i=e[0]):"-"==e?h=-1:void 0===f?b.hasOwnProperty(e)?(k+=b[e],f=parseInt(k,16)*h,h=1,k=""):k+=e:b.hasOwnProperty(e)?(l+=b[e],i[f]=parseInt(l,16)*h,h=1,f=void 0,l=""):l+=e;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},e={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFonts",function(a){var b,c,f,g;for(c in a.fonts)a.fonts.hasOwnProperty(c)&&(b=a.fonts[c],(f=e.Unicode[b.PostScriptName])&&(g=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},g.widths=f.widths,g.kerning=f.kerning),(f=d.Unicode[b.PostScriptName])&&(g=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},g.encoding=f,f.codePages&&f.codePages.length&&(b.encoding=f.codePages[0])))}])}(jsPDF.API);var j=j||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=!1,r=function(a){q=!a},s=a.ArrayBuffer,t=a.Uint8Array;for(c.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;try{t&&r.apply(0,new t(1))}catch(u){}return k.createObjectURL||(n=a.URL={}),n.createObjectURL=function(a){var b=a.type;return null===b&&(b="application/octet-stream"),a instanceof d?(b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(t&&a instanceof s)if(q)c.push(String.fromCharCode.apply(String,new t(a)));else{c="",a=new t(a);for(var e=0,f=a.length;f>e;e++)c+=String.fromCharCode(a[e])}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");e=new g,c.push(e.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},c}(self),k=k||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(a){var b=a.document,c=a.URL||a.webkitURL||a,d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=a.webkitRequestFileSystem,g=a.requestFileSystem||f||a.mozRequestFileSystem,h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},i=0,j=[],k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},l=function(c,h){var l,m,n,o=this,p=c.type,q=!1,r=function(){var b=(a.URL||a.webkitURL||a).createObjectURL(c);return j.push(b),b},s=function(){k(o,["writestart","progress","write","writeend"])},t=function(){(q||!l)&&(l=r(c)),m&&(m.location.href=l),o.readyState=o.DONE,s()},u=function(a){return function(){return o.readyState!==o.DONE?a.apply(this,arguments):void 0}},v={create:!0,exclusive:!1};return o.readyState=o.INIT,h||(h="download"),e&&(l=r(c),d.href=l,d.download=h,n=b.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(n))?(o.readyState=o.DONE,void s()):(a.chrome&&p&&"application/octet-stream"!==p&&(n=c.slice||c.webkitSlice,c=n.call(c,0,c.size,"application/octet-stream"),q=!0),f&&"download"!==h&&(h+=".download"),m="application/octet-stream"===p||f?a:a.open(),void(g?(i+=c.size,g(a.TEMPORARY,i,u(function(a){a.root.getDirectory("saved",v,u(function(a){var b=function(){a.getFile(h,v,u(function(a){a.createWriter(u(function(b){b.onwriteend=function(b){m.location.href=a.toURL(),j.push(a),o.readyState=o.DONE,k(o,"writeend",b)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&t()},["writestart","progress","write","abort"].forEach(function(a){b["on"+a]=o["on"+a]}),b.write(c),o.abort=function(){b.abort(),o.readyState=o.DONE},o.readyState=o.WRITING}),t)}),t)};a.getFile(h,{create:!1},u(function(a){a.remove(),b()}),u(function(a){a.code===a.NOT_FOUND_ERR?b():t()}))}),t)}),t)):t()))},m=l.prototype;return m.abort=function(){this.readyState=this.DONE,k(this,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,a.addEventListener("unload",function(){for(var a=j.length;a--;){var b=j[a];"string"==typeof b?c.revokeObjectURL(b):b.remove()}j.length=0},!1),function(a,b){return new l(a,b)}}(self),l=15,m=30,n=19,o=29,p=256,q=p+1+o,r=2*q+1,s=256,t=7,u=16,v=17,w=18,x=16,y=-1,z=1,A=2,B=0,C=0,D=1,E=3,F=4,G=0,H=1,I=2,J=-2,K=-3,L=-5,M=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],b.d_code=function(a){return 256>a?M[a]:M[256+(a>>>7)]},b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],c.static_l_desc=new c(c.static_ltree,b.extra_lbits,p+1,q,l),c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,m,l),c.static_bl_desc=new c(null,b.extra_blbits,0,n,t);var N=9,O=8,P=0,Q=1,R=2,S=[new e(0,0,0,0,P),new e(4,4,8,4,Q),new e(4,5,16,8,Q),new e(4,6,32,32,Q),new e(4,4,16,16,R),new e(8,16,32,32,R),new e(8,16,128,128,R),new e(8,32,128,256,R),new e(32,128,258,1024,R),new e(32,258,258,4096,R)],T="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),U=0,V=1,W=2,X=3,Y=32,Z=42,_=113,aa=666,ba=8,ca=0,da=1,ea=2,fa=3,ga=258,ha=ga+fa+1;h.prototype={deflateInit:function(a,b){return this.dstate=new g,b||(b=l),this.dstate.deflateInit(this,a,b)},deflate:function(a){return this.dstate?this.dstate.deflate(this,a):J},deflateEnd:function(){if(!this.dstate)return J;var a=this.dstate.deflateEnd();return this.dstate=null,a},deflateParams:function(a,b){return this.dstate?this.dstate.deflateParams(this,a,b):J},deflateSetDictionary:function(a,b){return this.dstate?this.dstate.deflateSetDictionary(this,a,b):J},read_buf:function(a,b,c){var d=this.avail_in;return d>c&&(d=c),0===d?0:(this.avail_in-=d,a.set(this.next_in.subarray(this.next_in_index,this.next_in_index+d),b),this.next_in_index+=d,this.total_in+=d,d)},flush_pending:function(){var a=this.dstate.pending;a>this.avail_out&&(a=this.avail_out),0!==a&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+a),this.next_out_index),this.next_out_index+=a,this.dstate.pending_out+=a,this.total_out+=a,this.avail_out-=a,this.dstate.pending-=a,0===this.dstate.pending&&(this.dstate.pending_out=0))}},void function(b,c){"object"==typeof a?a.exports=c():"function"==typeof d?d(c):b.adler32cs=c()}(this,function(){var a,b="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,c=null;if(b){try{var d=__browserify_shim_require__("buffer");"function"==typeof d.Buffer&&(c=d.Buffer)}catch(e){}a=function(a){return a instanceof ArrayBuffer||null!==c&&a instanceof c}}else a=function(){return!1};var f;f=null!==c?function(a){return new c(a,"utf8").toString("binary")}:function(a){return unescape(encodeURIComponent(a))};var g=function(a,b){for(var c=65535&a,d=a>>>16,e=0,f=b.length;f>e;e++)c=(c+(255&b.charCodeAt(e)))%65521,d=(d+c)%65521;return(d<<16|c)>>>0},h=function(a,b){for(var c=65535&a,d=a>>>16,e=0,f=b.length;f>e;e++)c=(c+b[e])%65521,d=(d+c)%65521;return(d<<16|c)>>>0},d={},i=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},j=i.prototype={};j.constructor=i;var k=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");this.checksum=g(1,a.toString())};k.prototype=j,i.from=k,k=function(a){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=f(a.toString()),this.checksum=g(1,a)},k.prototype=j,i.fromUtf8=k,b&&(k=function(b){if(!(this instanceof i))throw new TypeError("Constructor cannot called be as a function.");if(!a(b))throw Error("First argument needs to be ArrayBuffer.");return b=new Uint8Array(b),this.checksum=h(1,b)},k.prototype=j,i.fromBuffer=k),j.update=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=a.toString(),this.checksum=g(this.checksum,a)},j.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=f(a.toString()),this.checksum=g(this.checksum,a)},b&&(j.updateBuffer=function(b){if(!a(b))throw Error("First argument needs to be ArrayBuffer.");return b=new Uint8Array(b),this.checksum=h(this.checksum,b)}),j.clone=function(){return new l(this.checksum)};var l=d.Adler32=i;return d.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return g(1,a.toString())},d.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=f(a.toString()),g(1,a)},b&&(d.fromBuffer=function(b){if(!a(b))throw Error("First argument need to be ArrayBuffer.");return b=new Uint8Array(b),h(1,b)}),d})}(),e("undefined"!=typeof jsPDF?jsPDF:window.jsPDF)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(a,b,c){(function(c){__browserify_shim_require__=a,function(a,b,c,d,e){!function(a){var c=function(){"use strict";var a="s",b=function(a){var b=-a.getTimezoneOffset();return null!==b?b:0},d=function(a,b,c){var d=new Date;return void 0!==a&&d.setFullYear(a),d.setDate(c),
d.setMonth(b),d},e=function(a){return b(d(a,0,2))},f=function(a){return b(d(a,5,2))},g=function(a){var c=a.getMonth()>7?f(a.getFullYear()):e(a.getFullYear()),d=b(a);return c-d!==0},h=function(){var b=e(),c=f(),d=e()-f();return 0>d?b+",1":d>0?c+",1,"+a:b+",0"},i=function(){var a=h();return new c.TimeZone(c.olson.timezones[a])};return{determine:i,date_is_dst:g}}();c.TimeZone=function(a){"use strict";var b=null,d=function(){return b},e=function(){for(var a=c.olson.ambiguity_list[b],d=a.length,e=0,f=a[0];d>e;e+=1)if(f=a[e],c.date_is_dst(c.olson.dst_start_dates[f]))return void(b=f)},f=function(){return"undefined"!=typeof c.olson.ambiguity_list[b]};return b=a,f()&&e(),{name:d}},c.olson={},c.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},c.olson.dst_start_dates=function(){"use strict";var a=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":a,"Asia/Yekaterinburg":a,"Asia/Omsk":a,"Asia/Krasnoyarsk":a,"Asia/Irkutsk":a,"Asia/Yakutsk":a,"Asia/Vladivostok":a,"Asia/Kamchatka":a,"Europe/Minsk":a,"Australia/Perth":new Date(2008,10,1,1,0,0,0)}}(),c.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},"undefined"!=typeof b?b.jstz=c:a.jstz=c}(this),e("undefined"!=typeof jstz?jstz:window.jstz)}.call(c,void 0,void 0,void 0,void 0,function(a){b.exports=a})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],112:[function(a,b,c){(function(c){$=c.$=a("/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js"),__browserify_shim_require__=a,function(a,b,c){!function(a,b,c){function d(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f];if(g){var h=tinycolor(g),i=h.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";i+=tinycolor.equals(b,g)?" sp-thumb-active":"";var j=h.toString(d||"rgb"),k=r?"background-color:"+h.toRgbString():"filter:"+h.toFilter();e.push('<span title="'+j+'" data-color="'+h.toRgbString()+'" class="'+i+'"><span class="sp-thumb-inner" style="'+k+';" /></span>')}else{var l="sp-clear-display";e.push('<span title="No Color Selected" data-color="" style="background-color:transparent;" class="'+l+'"></span>')}}return"<div class='sp-cf "+c+"'>"+e.join("")+"</div>"}function e(){for(var a=0;a<p.length;a++)p[a]&&p[a].hide()}function f(a,c){var d=b.extend({},o,a);return d.callbacks={move:l(d.move,c),change:l(d.change,c),show:l(d.show,c),hide:l(d.hide,c),beforeShow:l(d.beforeShow,c)},d}function g(g,j){function l(){if(T.showPaletteOnly&&(T.showPalette=!0),T.palette){la=T.palette.slice(0),ma=b.isArray(la[0])?la:[la],na={};for(var a=0;a<ma.length;a++)for(var c=0;c<ma[a].length;c++){var d=tinycolor(ma[a][c]).toRgbString();na[d]=!0}}va.toggleClass("sp-flat",U),va.toggleClass("sp-input-disabled",!T.showInput),va.toggleClass("sp-alpha-enabled",T.showAlpha),va.toggleClass("sp-clear-enabled",Va),va.toggleClass("sp-buttons-disabled",!T.showButtons),va.toggleClass("sp-palette-disabled",!T.showPalette),va.toggleClass("sp-palette-only",T.showPaletteOnly),va.toggleClass("sp-initial-disabled",!T.showInitial),va.addClass(T.className).addClass(T.containerClassName),O()}function o(){function a(a){return a.data&&a.data.ignore?(H(b(this).data("color")),K()):(H(b(this).data("color")),K(),N(!0),F()),!1}if(q&&va.find("*:not(input)").attr("unselectable","on"),l(),La&&ta.after(Ma).hide(),Va||Ha.hide(),U)ta.after(va).hide();else{var c="parent"===T.appendTo?ta.parent():b(T.appendTo);1!==c.length&&(c=b("body")),c.append(va)}v(),Na.bind("click.spectrum touchstart.spectrum",function(a){ua||D(),a.stopPropagation(),b(a.target).is("input")||a.preventDefault()}),(ta.is(":disabled")||T.disabled===!0)&&S(),va.click(k),Da.change(C),Da.bind("paste",function(){setTimeout(C,1)}),Da.keydown(function(a){13==a.keyCode&&C()}),Ga.text(T.cancelText),Ga.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),F("cancel")}),Ha.attr("title",T.clearText),Ha.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),Ua=!0,K(),U&&N(!0)}),Ia.text(T.chooseText),Ia.bind("click.spectrum",function(a){a.stopPropagation(),a.preventDefault(),J()&&(N(!0),F())}),m(Ba,function(a,b,c){ka=a/ea,Ua=!1,c.shiftKey&&(ka=Math.round(10*ka)/10),K()},A,B),m(ya,function(a,b){ha=parseFloat(b/ca),Ua=!1,T.showAlpha||(ka=1),K()},A,B),m(wa,function(a,b,c){if(c.shiftKey){if(!ra){var d=ia*_,e=aa-ja*aa,f=Math.abs(a-d)>Math.abs(b-e);ra=f?"x":"y"}}else ra=null;var g=!ra||"x"===ra,h=!ra||"y"===ra;g&&(ia=parseFloat(a/_)),h&&(ja=parseFloat((aa-b)/aa)),Ua=!1,T.showAlpha||(ka=1),K()},A,B),Pa?(H(Pa),L(),Sa=Ra||tinycolor(Pa).format,w(Pa)):L(),U&&E();var d=q?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ea.delegate(".sp-thumb-el",d,a),Fa.delegate(".sp-thumb-el:nth-child(1)",d,{ignore:!0},a)}function v(){if(W&&a.localStorage){try{var c=a.localStorage[W].split(",#");c.length>1&&(delete a.localStorage[W],b.each(c,function(a,b){w(b)}))}catch(d){}try{oa=a.localStorage[W].split(";")}catch(d){}}}function w(c){if(V){var d=tinycolor(c).toRgbString();if(!na[d]&&-1===b.inArray(d,oa))for(oa.push(d);oa.length>pa;)oa.shift();if(W&&a.localStorage)try{a.localStorage[W]=oa.join(";")}catch(e){}}}function x(){var a=[];if(T.showPalette)for(i=0;i<oa.length;i++){var b=tinycolor(oa[i]).toRgbString();na[b]||a.push(oa[i])}return a.reverse().slice(0,T.maxSelectionSize)}function y(){var a=I(),c=b.map(ma,function(b,c){return d(b,a,"sp-palette-row sp-palette-row-"+c,T.preferredFormat)});v(),oa&&c.push(d(x(),a,"sp-palette-row sp-palette-row-selection",T.preferredFormat)),Ea.html(c.join(""))}function z(){if(T.showInitial){var a=Qa,b=I();Fa.html(d([a,b],b,"sp-palette-row-initial",T.preferredFormat))}}function A(){(0>=aa||0>=_||0>=ca)&&O(),va.addClass(qa),ra=null,ta.trigger("dragstart.spectrum",[I()])}function B(){va.removeClass(qa),ta.trigger("dragstop.spectrum",[I()])}function C(){var a=Da.val();if(null!==a&&""!==a||!Va){var b=tinycolor(a);b.isValid()?(H(b),N(!0)):Da.addClass("sp-validation-error")}else H(null),N(!0)}function D(){$?F():E()}function E(){var c=b.Event("beforeShow.spectrum");return $?void O():(ta.trigger(c,[I()]),void(Y.beforeShow(I())===!1||c.isDefaultPrevented()||(e(),$=!0,b(sa).bind("click.spectrum",F),b(a).bind("resize.spectrum",Z),Ma.addClass("sp-active"),va.removeClass("sp-hidden"),O(),L(),Qa=I(),z(),Y.show(Qa),ta.trigger("show.spectrum",[Qa]))))}function F(c){if((!c||"click"!=c.type||2!=c.button)&&$&&!U){$=!1,b(sa).unbind("click.spectrum",F),b(a).unbind("resize.spectrum",Z),Ma.removeClass("sp-active"),va.addClass("sp-hidden");var d=!tinycolor.equals(I(),Qa);d&&(Ta&&"cancel"!==c?N(!0):G()),Y.hide(I()),ta.trigger("hide.spectrum",[I()])}}function G(){H(Qa,!0)}function H(a,b){if(tinycolor.equals(a,I()))return void L();var c,d;!a&&Va?Ua=!0:(Ua=!1,c=tinycolor(a),d=c.toHsv(),ha=d.h%360/360,ia=d.s,ja=d.v,ka=d.a),L(),c&&c.isValid()&&!b&&(Sa=Ra||c.getFormat())}function I(a){return a=a||{},Va&&Ua?null:tinycolor.fromRatio({h:ha,s:ia,v:ja,a:Math.round(100*ka)/100},{format:a.format||Sa})}function J(){return!Da.hasClass("sp-validation-error")}function K(){L(),Y.move(I()),ta.trigger("move.spectrum",[I()])}function L(){Da.removeClass("sp-validation-error"),M();var a=tinycolor.fromRatio({h:ha,s:1,v:1});wa.css("background-color",a.toHexString());var b=Sa;1>ka&&(0!==ka||"name"!==b)&&("hex"===b||"hex3"===b||"hex6"===b||"name"===b)&&(b="rgb");var c=I({format:b}),d="";if(Oa.removeClass("sp-clear-display"),Oa.css("background-color","transparent"),!c&&Va)Oa.addClass("sp-clear-display");else{var e=c.toHexString(),f=c.toRgbString();if(r||1===c.alpha?Oa.css("background-color",f):(Oa.css("background-color","transparent"),Oa.css("filter",c.toFilter())),T.showAlpha){var g=c.toRgb();g.a=0;var h=tinycolor(g).toRgbString(),i="linear-gradient(left, "+h+", "+e+")";q?Aa.css("filter",tinycolor(h).toFilter({gradientType:1},e)):(Aa.css("background","-webkit-"+i),Aa.css("background","-moz-"+i),Aa.css("background","-ms-"+i),Aa.css("background","linear-gradient(to right, "+h+", "+e+")"))}d=c.toString(b)}T.showInput&&Da.val(d),T.showPalette&&y(),z()}function M(){var a=ia,b=ja;if(Va&&Ua)Ca.hide(),za.hide(),xa.hide();else{Ca.show(),za.show(),xa.show();var c=a*_,d=aa-b*aa;c=Math.max(-ba,Math.min(_-ba,c-ba)),d=Math.max(-ba,Math.min(aa-ba,d-ba)),xa.css({top:d+"px",left:c+"px"});var e=ka*ea;Ca.css({left:e-fa/2+"px"});var f=ha*ca;za.css({top:f-ga+"px"})}}function N(a){var b=I(),c="",d=!tinycolor.equals(b,Qa);b&&(c=b.toString(Sa),w(b)),Ja&&ta.val(c),Qa=b,a&&d&&(Y.change(b),ta.trigger("change",[b]))}function O(){_=wa.width(),aa=wa.height(),ba=xa.height(),da=ya.width(),ca=ya.height(),ga=za.height(),ea=Ba.width(),fa=Ca.width(),U||(va.css("position","absolute"),va.offset(h(va,Na))),M(),T.showPalette&&y(),ta.trigger("reflow.spectrum")}function P(){ta.show(),Na.unbind("click.spectrum touchstart.spectrum"),va.remove(),Ma.remove(),p[Wa.id]=null}function Q(a,d){return a===c?b.extend({},T):d===c?T[a]:(T[a]=d,void l())}function R(){ua=!1,ta.attr("disabled",!1),Na.removeClass("sp-disabled")}function S(){F(),ua=!0,ta.attr("disabled",!0),Na.addClass("sp-disabled")}var T=f(j,g),U=T.flat,V=T.showSelectionPalette,W=T.localStorageKey,X=T.theme,Y=T.callbacks,Z=n(O,10),$=!1,_=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=1,la=[],ma=[],na={},oa=T.selectionPalette.slice(0),pa=T.maxSelectionSize,qa="sp-dragging",ra=null,sa=g.ownerDocument,ta=(sa.body,b(g)),ua=!1,va=b(u,sa).addClass(X),wa=va.find(".sp-color"),xa=va.find(".sp-dragger"),ya=va.find(".sp-hue"),za=va.find(".sp-slider"),Aa=va.find(".sp-alpha-inner"),Ba=va.find(".sp-alpha"),Ca=va.find(".sp-alpha-handle"),Da=va.find(".sp-input"),Ea=va.find(".sp-palette"),Fa=va.find(".sp-initial"),Ga=va.find(".sp-cancel"),Ha=va.find(".sp-clear"),Ia=va.find(".sp-choose"),Ja=ta.is("input"),Ka=Ja&&s&&"color"===ta.attr("type"),La=Ja&&!U,Ma=La?b(t).addClass(X).addClass(T.className).addClass(T.replacerClassName):b([]),Na=La?Ma:ta,Oa=Ma.find(".sp-preview-inner"),Pa=T.color||Ja&&ta.val(),Qa=!1,Ra=T.preferredFormat,Sa=Ra,Ta=!T.showButtons||T.clickoutFiresChange,Ua=!Pa,Va=T.allowEmpty&&!Ka;o();var Wa={show:E,hide:F,toggle:D,reflow:O,option:Q,enable:R,disable:S,set:function(a){H(a),N()},get:I,destroy:P,container:va};return Wa.id=p.push(Wa)-1,Wa}function h(a,c){var d=0,e=a.outerWidth(),f=a.outerHeight(),g=c.outerHeight(),h=a[0].ownerDocument,i=h.documentElement,j=i.clientWidth+b(h).scrollLeft(),k=i.clientHeight+b(h).scrollTop(),l=c.offset();return l.top+=g,l.left-=Math.min(l.left,l.left+e>j&&j>e?Math.abs(l.left+e-j):0),l.top-=Math.min(l.top,l.top+f>k&&k>f?Math.abs(f+g-d):d),l}function j(){}function k(a){a.stopPropagation()}function l(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}function m(c,d,e,f){function g(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}function h(a){if(l){if(q&&document.documentMode<9&&!a.button)return j();var b=a.originalEvent.touches,e=b?b[0].pageX:a.pageX,f=b?b[0].pageY:a.pageY,h=Math.max(0,Math.min(e-m.left,o)),i=Math.max(0,Math.min(f-m.top,n));p&&g(a),d.apply(c,[h,i,a])}}function i(a){var d=a.which?3==a.which:2==a.button;a.originalEvent.touches;d||l||e.apply(c,arguments)!==!1&&(l=!0,n=b(c).height(),o=b(c).width(),m=b(c).offset(),b(k).bind(r),b(k.body).addClass("sp-dragging"),p||h(a),g(a))}function j(){l&&(b(k).unbind(r),b(k.body).removeClass("sp-dragging"),f.apply(c,arguments)),l=!1}d=d||function(){},e=e||function(){},f=f||function(){};var k=c.ownerDocument||document,l=!1,m={},n=0,o=0,p="ontouchstart"in a,r={};r.selectstart=g,r.dragstart=g,r["touchmove mousemove"]=h,r["touchend mouseup"]=j,b(c).bind("touchstart mousedown",i)}function n(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}}var o={beforeShow:j,move:j,change:j,show:j,hide:j,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",clearText:"Clear Color Selection",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1},p=[],q=!!/msie/i.exec(a.navigator.userAgent),r=function(){function a(a,b){return!!~(""+a).indexOf(b)}var b=document.createElement("div"),c=b.style;return c.cssText="background-color:rgba(0,0,0,.5)",a(c.backgroundColor,"rgba")||a(c.backgroundColor,"hsla")}(),s=function(){var a=b("<input type='color' value='!' />")[0];return"color"===a.type&&"!"!==a.value}(),t=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var a="";if(q)for(var b=1;6>=b;b++)a+="<div class='sp-"+b+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",a,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),v="spectrum.id";b.fn.spectrum=function(a,c){if("string"==typeof a){var d=this,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=p[b(this).data(v)];if(c){var f=c[a];if(!f)throw new Error("Spectrum: no such method: '"+a+"'");"get"==a?d=c.get():"container"==a?d=c.container:"option"==a?d=c.option.apply(c,e):"destroy"==a?(c.destroy(),b(this).removeData(v)):f.apply(c,e)}}),d}return this.spectrum("destroy").each(function(){var c=b.extend({},a,b(this).data()),d=g(this,c);b(this).data(v,d.id)})},b.fn.spectrum.load=!0,b.fn.spectrum.loadOpts={},b.fn.spectrum.draggable=m,b.fn.spectrum.defaults=o,b.spectrum={},b.spectrum.localization={},b.spectrum.palettes={},b.fn.spectrum.processNativeColorInputs=function(){s||b("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function b(a){var b={r:0,g:0,b:0},d=1,f=!1,h=!1;return"string"==typeof a&&(a=u(a)),"object"==typeof a&&(a.hasOwnProperty("r")&&a.hasOwnProperty("g")&&a.hasOwnProperty("b")?(b=c(a.r,a.g,a.b),f=!0,h="%"===String(a.r).substr(-1)?"prgb":"rgb"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("v")?(a.s=r(a.s),a.v=r(a.v),b=g(a.h,a.s,a.v),f=!0,h="hsv"):a.hasOwnProperty("h")&&a.hasOwnProperty("s")&&a.hasOwnProperty("l")&&(a.s=r(a.s),a.l=r(a.l),b=e(a.h,a.s,a.l),f=!0,h="hsl"),a.hasOwnProperty("a")&&(d=a.a)),d=k(d),{ok:f,format:a.format||h,r:A(255,B(b.r,0)),g:A(255,B(b.g,0)),b:A(255,B(b.b,0)),a:d}}function c(a,b,c){return{r:255*l(a,255),g:255*l(b,255),b:255*l(c,255)}}function d(a,b,c){a=l(a,255),b=l(b,255),c=l(c,255);var d,e,f=B(a,b,c),g=A(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,l:h}}function e(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(a=l(a,360),b=l(b,100),c=l(c,100),0===b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return{r:255*e,g:255*f,b:255*g}}function f(a,b,c){a=l(a,255),b=l(b,255),c=l(c,255);var d,e,f=B(a,b,c),g=A(a,b,c),h=f,i=f-g;if(e=0===f?0:i/f,f==g)d=0;else{switch(f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return{h:d,s:e,v:h}}function g(a,b,c){a=6*l(a,360),b=l(b,100),c=l(c,100);var d=y.floor(a),e=a-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=d%6,j=[c,g,f,f,h,c][i],k=[h,c,c,g,f,f][i],m=[f,f,h,c,c,g][i];return{r:255*j,g:255*k,b:255*m}}function h(a,b,c,d){var e=[q(z(a).toString(16)),q(z(b).toString(16)),q(z(c).toString(16))];return d&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function i(a,b,c,d){var e=[q(s(d)),q(z(a).toString(16)),q(z(b).toString(16)),q(z(c).toString(16))];return e.join("")}function j(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c);return b}function k(a){return a=parseFloat(a),(isNaN(a)||0>a||a>1)&&(a=1),a}function l(a,b){o(a)&&(a="100%");var c=p(a);return a=A(b,B(0,parseFloat(a))),c&&(a=parseInt(a*b,10)/100),y.abs(a-b)<1e-6?1:a%b/parseFloat(b)}function m(a){return A(1,B(0,a))}function n(a){return parseInt(a,16)}function o(a){return"string"==typeof a&&-1!=a.indexOf(".")&&1===parseFloat(a)}function p(a){return"string"==typeof a&&-1!=a.indexOf("%")}function q(a){return 1==a.length?"0"+a:""+a}function r(a){return 1>=a&&(a=100*a+"%"),a}function s(a){return Math.round(255*parseFloat(a)).toString(16)}function t(a){return n(a)/255}function u(a){a=a.replace(v,"").replace(w,"").toLowerCase();var b=!1;if(E[a])a=E[a],b=!0;else if("transparent"==a)return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=G.rgb.exec(a))?{r:c[1],g:c[2],b:c[3]}:(c=G.rgba.exec(a))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=G.hsl.exec(a))?{h:c[1],s:c[2],l:c[3]}:(c=G.hsla.exec(a))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=G.hsv.exec(a))?{h:c[1],s:c[2],v:c[3]}:(c=G.hex8.exec(a))?{a:t(c[1]),r:n(c[2]),g:n(c[3]),b:n(c[4]),format:b?"name":"hex8"}:(c=G.hex6.exec(a))?{r:n(c[1]),g:n(c[2]),b:n(c[3]),format:b?"name":"hex"}:(c=G.hex3.exec(a))?{r:n(c[1]+""+c[1]),g:n(c[2]+""+c[2]),b:n(c[3]+""+c[3]),format:b?"name":"hex"}:!1}var v=/^[\s,#]+/,w=/\s+$/,x=0,y=Math,z=y.round,A=y.min,B=y.max,C=y.random,D=function H(a,c){if(a=a?a:"",c=c||{},a instanceof H)return a;if(!(this instanceof H))return new H(a,c);var d=b(a);this._r=d.r,this._g=d.g,this._b=d.b,this._a=d.a,this._roundA=z(100*this._a)/100,this._format=c.format||d.format,this._gradientType=c.gradientType,this._r<1&&(this._r=z(this._r)),this._g<1&&(this._g=z(this._g)),this._b<1&&(this._b=z(this._b)),this._ok=d.ok,this._tc_id=x++};D.prototype={isValid:function(){return this._ok},getFormat:function(){return this._format},getAlpha:function(){return this._a},setAlpha:function(a){this._a=k(a),this._roundA=z(100*this._a)/100},toHsv:function(){var a=f(this._r,this._g,this._b);return{h:360*a.h,s:a.s,v:a.v,a:this._a}},toHsvString:function(){var a=f(this._r,this._g,this._b),b=z(360*a.h),c=z(100*a.s),d=z(100*a.v);return 1==this._a?"hsv("+b+", "+c+"%, "+d+"%)":"hsva("+b+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var a=d(this._r,this._g,this._b);return{h:360*a.h,s:a.s,l:a.l,a:this._a}},toHslString:function(){var a=d(this._r,this._g,this._b),b=z(360*a.h),c=z(100*a.s),e=z(100*a.l);return 1==this._a?"hsl("+b+", "+c+"%, "+e+"%)":"hsla("+b+", "+c+"%, "+e+"%, "+this._roundA+")"},toHex:function(a){return h(this._r,this._g,this._b,a)},toHexString:function(a){return"#"+this.toHex(a)},toHex8:function(){return i(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:z(this._r),g:z(this._g),b:z(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+z(this._r)+", "+z(this._g)+", "+z(this._b)+")":"rgba("+z(this._r)+", "+z(this._g)+", "+z(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:z(100*l(this._r,255))+"%",g:z(100*l(this._g,255))+"%",b:z(100*l(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+z(100*l(this._r,255))+"%, "+z(100*l(this._g,255))+"%, "+z(100*l(this._b,255))+"%)":"rgba("+z(100*l(this._r,255))+"%, "+z(100*l(this._g,255))+"%, "+z(100*l(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:F[h(this._r,this._g,this._b,!0)]||!1},toFilter:function(a){var b="#"+i(this._r,this._g,this._b,this._a),c=b,d=this._gradientType?"GradientType = 1, ":"";if(a){var e=D(a);c=e.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+b+",endColorstr="+c+")"},toString:function(a){var b=!!a;a=a||this._format;var c=!1,d=this._a<1&&this._a>=0,e=!b&&d&&("hex"===a||"hex6"===a||"hex3"===a||"name"===a);return e?"name"===a&&0===this._a?this.toName():this.toRgbString():("rgb"===a&&(c=this.toRgbString()),"prgb"===a&&(c=this.toPercentageRgbString()),("hex"===a||"hex6"===a)&&(c=this.toHexString()),"hex3"===a&&(c=this.toHexString(!0)),"hex8"===a&&(c=this.toHex8String()),"name"===a&&(c=this.toName()),"hsl"===a&&(c=this.toHslString()),"hsv"===a&&(c=this.toHsvString()),c||this.toHexString())}},D.fromRatio=function(a,b){if("object"==typeof a){var c={};for(var d in a)a.hasOwnProperty(d)&&("a"===d?c[d]=a[d]:c[d]=r(a[d]));a=c}return D(a,b)},D.equals=function(a,b){return a&&b?D(a).toRgbString()==D(b).toRgbString():!1},D.random=function(){return D.fromRatio({r:C(),g:C(),b:C()})},D.desaturate=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.s-=b/100,c.s=m(c.s),D(c)},D.saturate=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.s+=b/100,c.s=m(c.s),D(c)},D.greyscale=function(a){return D.desaturate(a,100)},D.lighten=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.l+=b/100,c.l=m(c.l),D(c)},D.brighten=function(a,b){b=0===b?0:b||10;var c=D(a).toRgb();return c.r=B(0,A(255,c.r-z(255*-(b/100)))),c.g=B(0,A(255,c.g-z(255*-(b/100)))),c.b=B(0,A(255,c.b-z(255*-(b/100)))),D(c)},D.darken=function(a,b){b=0===b?0:b||10;var c=D(a).toHsl();return c.l-=b/100,c.l=m(c.l),D(c)},D.complement=function(a){var b=D(a).toHsl();return b.h=(b.h+180)%360,D(b)},D.triad=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+120)%360,s:b.s,l:b.l}),D({h:(c+240)%360,s:b.s,l:b.l})]},D.tetrad=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+90)%360,s:b.s,l:b.l}),D({h:(c+180)%360,s:b.s,l:b.l}),D({h:(c+270)%360,s:b.s,l:b.l})]},D.splitcomplement=function(a){var b=D(a).toHsl(),c=b.h;return[D(a),D({h:(c+72)%360,s:b.s,l:b.l}),D({h:(c+216)%360,s:b.s,l:b.l})]},D.analogous=function(a,b,c){b=b||6,c=c||30;var d=D(a).toHsl(),e=360/c,f=[D(a)];for(d.h=(d.h-(e*b>>1)+720)%360;--b;)d.h=(d.h+e)%360,f.push(D(d));return f},D.monochromatic=function(a,b){b=b||6;for(var c=D(a).toHsv(),d=c.h,e=c.s,f=c.v,g=[],h=1/b;b--;)g.push(D({h:d,s:e,v:f})),f=(f+h)%1;return g},D.readability=function(a,b){var c=D(a).toRgb(),d=D(b).toRgb(),e=(299*c.r+587*c.g+114*c.b)/1e3,f=(299*d.r+587*d.g+114*d.b)/1e3,g=Math.max(c.r,d.r)-Math.min(c.r,d.r)+Math.max(c.g,d.g)-Math.min(c.g,d.g)+Math.max(c.b,d.b)-Math.min(c.b,d.b);return{brightness:Math.abs(e-f),color:g}},D.readable=function(a,b){var c=D.readability(a,b);return c.brightness>125&&c.color>500},D.mostReadable=function(a,b){for(var c=null,d=0,e=!1,f=0;f<b.length;f++){var g=D.readability(a,b[f]),h=g.brightness>125&&g.color>500,i=3*(g.brightness/125)+g.color/500;(h&&!e||h&&e&&i>d||!h&&!e&&i>d)&&(e=h,d=i,c=D(b[f]))}return c};var E=D.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=D.hexNames=j(E),G=function(){var a="[-\\+]?\\d+%?",b="[-\\+]?\\d*\\.\\d+%?",c="(?:"+b+")|(?:"+a+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",e="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+e),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+e),hsv:new RegExp("hsv"+d),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();a.tinycolor=D}(),b(function(){b.fn.spectrum.load&&b.fn.spectrum.processNativeColorInputs()})}(window,jQuery)}.call(c,b,void 0,void 0)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/oliviermeyer/Projects/zoomdata/zoomdata/client/app/js/libs/jquery/jquery-2.1.0.min.js":104}],113:[function(a,b,c){"use strict";function d(a){return a.substring(0,a.lastIndexOf("."))}var e=a("jquery"),f=(a("./../../utilities"),a("../../Core/MVC/Model"));b.exports=f.extend({defaults:{},initialize:function(){f.prototype.initialize.apply(this,arguments),this.execute=null},getComponentName:function(){return d(this.get("name"))},url:function(){var a="string"==typeof this.remote?this.remote+"/":"",b="string"==typeof this.remote&&"boolean"==typeof this.secure?this.secure?"https://":"http://":"",c=f.prototype.url.apply(this,arguments);return c+="/"+this.get("uploadDate"),b+a+c},load:function(a){function b(a,b,e){console.error("Failed to load: "+c.get("name")+" with exception: "+e),d.reject(a,b,e)}var c=this,d=e.Deferred(),f=this.get("type"),g=this.getComponentName(),h=this.apiKey,i=this.url(),j=a+"_"+g;switch(f){case"text/template":e("#template_"+j).length?d.resolve():e.ajax({cache:!0,dataType:"text",url:i,data:{key:h,unwrapped:!0}}).then(function(a){e("<script>"+a+"</script>").attr({type:"text/template",id:"template_"+j}).appendTo("head"),
d.resolve()},b);break;case"text/css":e.ajax({cache:!0,dataType:"text",url:i,data:{key:h}}).then(function(a){var b=c.get("visualizationId")||c.collection.visId,f=c.get("id");e(".widgetContent[data-visid="+b+"]").each(function(c,d){var g=e(d).parent();if(g.children('[data-componentid="'+f+'"]').length>0);else{var h=e('<style data-visid="'+b+'" data-componentid="'+f+'" scoped>'+a+"</style>").appendTo(g);h.scopedPolyFill&&h.scopedPolyFill()}}),d.resolve()},b);break;default:e("#script_"+j).length?(c.execute=window[j](),d.resolve()):e.ajax({cache:!0,dataType:"text",url:i,data:{key:h,"function":j}}).then(function(a){e("<script></script> ").attr({type:"text/javascript",id:"script_"+j}).text(a).appendTo("head"),c.execute=window[j](),d.resolve()},b)}return d.promise()}})},{"../../Core/MVC/Model":4,"./../../utilities":151,jquery:109}],114:[function(a,b,c){"use strict";var d=a("jquery"),e="service/connections",f=a("../../Core/MVC/Model"),g=f.extend({defaults:{name:"",type:"",parameters:{}},urlRoot:e,initialize:function(a,b){f.prototype.initialize.apply(this,arguments),this.options=d.extend({},this.options,b),this.objects=[],this.schemas=[],this.listenTo(this,"change",this.setSubStorageType)},detectCountSources:function(a){a=a||{};var b=this,c=a.sources;if(c){var d=c.filter(function(a){var c=a.get("storageConfiguration")||{};return b.get("id")===c.connectionId});this.connected=d.length}},getObjects:function(a){a=a||{};var b=this.checkForDefaultSchema()||a.schema;if(b)return this.getSchemaObjects(b,a);var c=this,e=this.get("id"),f=this.urlRoot+"/"+e+"/objects";return d.ajax({type:"GET",url:f,success:function(a){c.objects=a,c.trigger("sync:objects",a)}})},getSchemas:function(a){a=a||{};var b=this,c=this.get("id"),e=this.urlRoot+"/"+c+"/schema";return d.ajax({type:"GET",url:e,success:function(a){b.schemas=a,b.trigger("sync:schemas",a)}})},getSchemaObjects:function(a){var b=this,c=this.get("id"),e=this.urlRoot+"/"+c+"/objects?schema="+a;return d.ajax({type:"GET",url:e,success:function(a){b.trigger("sync:schema-objects",a)}})},setSubStorageType:function(a){a=a||{};var b=this.get("parameters"),c=this.get("subStorageType");if(b&&b.JDBC_URL&&"SQL"===this.get("type")){var d=b.JDBC_URL;if(-1!==d.indexOf("redshift.amazonaws.com"))c="REDSHIFT";else if(-1!==d.indexOf("jdbc:oracle"))c="ORACLE";else if(-1!==d.indexOf("jdbc:mysql")){var e=this.options.memsql,f=this.options.aurora;c=e||"MEMSQL"===c?"MEMSQL":f||"AURORA"===c?"AURORA":"MYSQL"}else if(-1!==d.indexOf("jdbc:sqlserver"))c="SQLSERVER";else if(-1!==d.indexOf("jdbc:postgresql"))c="POSTGRESQL";else if(d&&-1!==d.indexOf("jdbc:presto"))c="PRESTO";else if(d&&-1!==d.indexOf("jdbc:hive2")){var g=this.options.hiveontez,h=this.options.hiveonemr;c=g||"HIVE_ON_TEZ"===c?"HIVE_ON_TEZ":h||"HIVE_ON_EMR"===c?"HIVE_ON_EMR":"SPARKSQL"}else d&&-1!==d.indexOf("jdbc:phoenix")&&(c="PHOENIX")}c&&this.set("subStorageType",c,{silent:!!a.silent})},validateServer:function(){var a=this.urlRoot+"/validate",b=d.Deferred();return this.setSubStorageType(),d.ajax({type:"POST",url:a,contentType:"application/json",dataType:"json",data:JSON.stringify(this.toJSON()),success:function(a){b.resolve(a)},error:function(a){b.reject(a.responseJSON||a.statusText)}}),b.promise()},checkForDefaultSchema:function(){var a=this.hasDefaultSchema();return a&&1===this.schemas.length?this.schemas[0]:!1},hasDefaultSchema:function(){return this.hasFeature("SUPPORTS_SCHEMA")&&this.schemas.length<2},hasFeature:function(a){var b=this.get("features")||[];return-1!==b.indexOf(a)}});b.exports=g},{"../../Core/MVC/Model":4,jquery:109}],115:[function(a,b,c){"use strict";var d=a("./../../collections/VisualizationConfigs"),e=a("../../Core/MVC/Model"),f=a("jquery"),g=e.extend({defaults:{name:"Dashboard",description:"",layout:"unset",showDescription:!1,visualizations:[],shared:!1,rememberTime:!0},urlRoot:"service/bookmarks/",initialize:function(a){var b=this;this.visualizations=new d(this.attributes.visualizations),this.listenTo(this.visualizations,"all",function(){b.set("visualizations",this.visualizations.toJSON(),{silent:!0})}),this.listenTo(this,"change:visualizations sync",function(){b.visualizations.reset(this.get("visualizations"),{silent:!0})})},saveViewCount:function(){f.post(this.urlRoot+this.id+"/viewscount")}});b.exports=g},{"../../Core/MVC/Model":4,"./../../collections/VisualizationConfigs":40,jquery:109}],116:[function(a,b,c){"use strict";var d=a("underscore"),e=a("../../Core/MVC/Model"),f=e.extend({defaults:{path:null,form:null,operation:"IN",value:[],editable:!1},idAttribute:"path",initialize:function(a){d.bindAll(this,"hasAttribute","addAttribute","removeAttribute","hasValue","isEqualToFilter"),a.form||this.unset("form",{silent:!0})},hasAttribute:function(a){return"number"==typeof this.attributes.value?this.attributes.value===a:this.attributes.value&&this.attributes.value.indexOf(a.toString())>=0},hasValue:function(){var a=this.attributes.value;return null!==a&&("number"==typeof a||a.length>0)},addAttribute:function(a,b){var c=[];return this.get("value")instanceof Array&&(c=this.get("value").slice()),-1===c.indexOf(a)&&(c.push(a.toString()),this.set("value",c,b)),this},removeAttribute:function(a,b){var c=d.clone(this.get("value")),e=c&&c.indexOf(a.toString());return c&&-1!==e?(c.splice(e,1),this.set("value",c,b),c.length?this:(this.collection&&this.collection.remove(this,b),null)):this},isEqualToFilter:function(a){return a&&a.get("operation")===this.get("operation")&&a.get("path")===this.get("path")&&this.get("value").toString()===a.get("value").toString()},toRequest:function(){var a={path:this.get("path"),value:this.get("value"),operation:this.get("operation")};return this.get("form")&&(a.form=this.get("form")),a}});b.exports=f},{"../../Core/MVC/Model":4,underscore:244}],117:[function(a,b,c){b.exports=a("./FilterModel")},{"./FilterModel":116}],118:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=d.extend({defaults:{size:"normal",typeface:"sans",align:"left",style:""}});b.exports=e},{"../../Core/MVC/Model":4}],119:[function(a,b,c){"use strict";b.exports=a("./FontStyle")},{"./FontStyle":118}],120:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=a("../FontStyle"),f={size:"normal",typeface:"sans",align:"left",style:""},g=["title","subtitle","axisLabels","timestamp","barLabels"],h=d.extend({initialize:function(a){var b=this;d.prototype.initialize.apply(this,arguments),a=a||{},g.forEach(function(c){b[c]=new e(a[c])}),this.applyEvents()},applyEvents:function(){var a=this;g.forEach(function(b){a.listenTo(a[b],"change",a._onChangeStyle)})},_onChangeStyle:function(){var a=this.toJSON();this.trigger("change",a)},toJSON:function(){var a=this,b={};return g.forEach(function(c){var d=a[c];d&&(b[c]=d.toJSON())}),b},set:function(a,b){var c=this;a=a||{},g.forEach(function(d){var e=a[d],f=c[d];e&&f&&f.set(e,b)})},reset:function(a){var b=this;g.forEach(function(c){b[c].set(f,a)})}});b.exports=h},{"../../Core/MVC/Model":4,"../FontStyle":119}],121:[function(a,b,c){"use strict";b.exports=a("./FontStyles")},{"./FontStyles":120}],122:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC/Model"),g=a("colorbrewer"),h=f.extend({defaults:{name:"",form:"",limit:20,sort:{name:"count",dir:"desc"}},idAttribute:"name",setAttribute:function(a,b){var c,d;"string"==typeof a?c=a:a.get?(c=a.get("name"),a.get("forms")&&(d=a.get("form"))):(c=a.name,d=a.form);var e=this.get("sort");e.name===this.get("name")?e.name=c:e.name===c&&"distinct_count"===e.func&&delete e.func;var f={name:c,sort:e};return d?f.form=d:this.unset("form",{silent:!0}),b?this.set(f,b):(this.set(f,{silent:!0}),this.trigger("change",this)),this},getAttribute:function(){return this.get("name")},getLabel:function(){return this.label},setLimit:function(a,b){return this.set({limit:+a},b),this},getLimit:function(){return+this.get("limit")},setSort:function(a,b){var c=e.clone(this.get("sort"));return c.name=a.name,c.dir=a.dir,c.func=a.func,this.set({sort:c},b),this},setSortMetric:function(a,b){var c=e.clone(this.get("sort"));return c.name=a,this.set({sort:c},b),this},setSortDirection:function(a,b){var c=e.clone(this.get("sort"));return c.dir=a,this.set({sort:c},b),this},_updateDomain:function(a){function b(a){return d("<div>").text(a).html()}var c=this,e=this.collection.indexOf(this);this.noData=0===a.length,this.domainValue=[],a.forEach(function(a){-1!==["string","number"].indexOf(typeof a.group)&&0===e?c.domainValue.push(b(a.group.toString())):-1===c.domainValue.indexOf(a.group[e])&&c.domainValue.push(b(a.group[e]))}),c.domainValue.sort()},colorRange:function(){var a,b=this,c=this.get("groupColors")||{},d=this.domain()||[],e=d.length;if(this.savedColors=this.savedColors||{},0===e)return[];3>e&&(e=3),this.get("autoColor")&&(c={});do a=g[this.get("groupColorSet")][e],e-=1;while(!a&&g[this.get("groupColorSet")]);return e=a.length,d.map(function(d){var f=Object.keys(b.savedColors).length;return b.savedColors[d]||(b.savedColors[d]=a[f%e]),c[d]||b.savedColors[d]})},domain:function(){return e.clone(this.domainValue)},_setField:function(a){this.field=a},getColorKeyLabel:function(){return this.field.get("label")},isMetric:function(){return!1},isNoData:function(){return this.noData},toJSON:function(a){var b=this,c=f.prototype.toJSON.call(this,arguments),g=c.sort.dir,h=g;return("Ascending Value"===g||"Alphabetical"===g)&&(h="asc"),("Descending Value"===g||"Reverse Alphabetical"===g)&&(h="desc"),c.sort.dir=h,c.sort=e.clone(c.sort),c.limit=+c.limit,a||d.each(c,function(a){"undefined"==typeof b.defaults[a]&&delete c[a]}),c.form||delete c.form,c}});b.exports=h},{"../../Core/MVC/Model":4,colorbrewer:95,jquery:109,underscore:244}],123:[function(a,b,c){"use strict";var d=a("jquery"),e=a("./../../utilities"),f=a("./../ComponentSource");b.exports=f.extend({defaults:{},initialize:function(a){f.prototype.initialize.apply(this,arguments),"string"==typeof a&&this.set("name",a)},idAttribute:"id",url:function(){var a="string"==typeof this.remote?this.remote+"/":"",b="string"==typeof this.remote&&"boolean"==typeof this.secure?this.secure?"https://":"http://":"";return b+a+"service/visualizations/libs/"+this.id+"/"+(this.get("uploadDate")||"")},load:function(){var a=this,b=this.get("type"),c=d.Deferred(),f=this.url(),g=(d("head"),this.apiKey||e.getURLParameter("key"));switch(b){case"text/template":f+=g?"?unwrapped=true&key="+g:"?unwrapped=true",d.ajax({cache:!0,dataType:"text",url:f,data:d.extend({},{key:g})}).done(function(a){d('<script type="text/template">'+a+"</script>").appendTo(d("head")),c.resolve()}).fail(function(b,d,e){console.error("Failed to load: "+a.get("name")+" with exception: "+e),c.reject(b)});break;case"text/css":g&&(f+="?key="+g),d.ajax({cache:!0,dataType:"text",url:f,data:d.extend({},{key:g})}).done(function(a){d("<style>"+a+"</style>").appendTo(d("head")),c.resolve()}).fail(function(b,d,e){console.error("Failed to load: "+a.get("name")+" with exception: "+e),c.reject(b)});break;default:d.ajax({cache:!0,dataType:"script",url:f+"/",data:d.extend({},{key:g})}).done(function(a){c.resolve()}).fail(function(b,d,e){console.error("Failed to load: "+a.get("name")+" with exception: "+e),c.reject(d)})}return c.promise()}})},{"./../../utilities":151,"./../ComponentSource":113,jquery:109}],124:[function(a,b,c){"use strict";var d=a("jquery"),e=a("../../Core/MVC/Model");b.exports=e.extend({defaults:{label:"",name:"",func:""},initialize:function(a,b){return e.prototype.initialize.apply(this,arguments),b=b||{},this.options=d.extend({},this.defaults,b),this._setModelId(),this},_setModelId:function(){function a(){return(268435456*(1+Math.random())|0).toString(16).substring(1)}var b,c=this.get("label");this.get("id")||(b=c+"-"+a(),this.set("id",b,{silent:!0}))},isCount:function(){return"count"===this.get("name")&&!this.get("func")},isNone:function(){return"none"===this.get("name")&&!this.get("func")},isBoxPlot:function(){return this.get("boxPlot")===!0},getColorKeyLabel:function(){return this.get("label")},isMetric:function(){return!0}})},{"../../Core/MVC/Model":4,jquery:109}],125:[function(a,b,c){b.exports=a("./Metric")},{"./Metric":124}],126:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=f.Model,h=f.Events;a("../../collections/Dashboards");b.exports=g.extend({TYPES:{},FUNCS:{DEFAULT:["AVG","MIN","MAX","SUM"],DISTINCT_COUNT:"DISTINCT_COUNT",LAST_VALUE:"LV_METRIC"},initialize:function(){g.prototype.initialize.apply(this,arguments),this.on("change:name change:type",this._setComposedId),this._setComposedId()},_setComposedId:function(){this.id=this.id||this._composedId()},_composedId:function(){var a=this.get("storageConfig")||{},b=a.type||this.get("type");return this.get("name")+b},getAvailableFuncs:function(){var a=this.get("storageConfig")||{},b=a.type||this.get("type"),c="TIME"===b,d="ATTRIBUTE"===b,e=a.distinctCount,f=this.collection?this.collection.hasLastValue():null,g=this.FUNCS.DEFAULT;return c?null:d?e?["distinct_count"]:null:(e&&g.push(this.FUNCS.DISTINCT_COUNT),f&&g.push(this.FUNCS.LAST_VALUE),g)},updateFacetValues:function(a,b,c,e){var f=this,g=this.get("name"),h=["service/stream/",this.collection.sourceId,"/facet/",g,"?from=",c,"&to=",e,a?"&query="+a:""].concat(""),i=d.ajax({type:"POST",url:h,data:JSON.stringify(b),contentType:"application/json"}).done(function(a){}).fail(function(){console.warn("Couldn't get values for ObjectField ",f.get("name"))});return i.promise()},updateValues:function(a){var b=this,c=this.get("name"),e=this.collection.url()+c+"/values"+(a?"?query="+a:"/"),f=d.ajax({type:"GET",url:e,contentType:"application/json"}).done(function(a){b.values=a}).fail(function(){console.warn("Couldn't get values for ObjectField ",b.get("name"))});return f.promise()},isValidMetric:function(){var a=this.get("storageConfig")||{},b=a.type||this.get("type"),c="TIME"===b,d="ATTRIBUTE"===b,e="TEXT"===b,f=d||e?!!this.get("storageConfig").distinctCount:!1;return!c&&(d?f:!0)},toMetric:function(){var a=this.isValidMetric(),b=this.get("storageConfig")||{},c=b.type||this.get("type"),d="ATTRIBUTE"===c,e="count"===this.get("name"),f="TEXT"===c,g=d||f?!!this.get("storageConfig").distinctCount:!1,h=this.get("name"),i=this.get("label"),j=g?this.FUNCS.DISTINCT_COUNT:e?null:this.get("func")||"avg";return a?{name:h,label:i,type:c,func:j}:null},get:function(a){return"form"===a&&this.get("forms")?this.getPrimaryForm():g.prototype.get.apply(this,arguments)},getPrimaryForm:function(){return this.get("forms").filter(function(a){return a.primary}).map(function(a){return a.form}).toString()},isSupportTimeGroup:function(a){a=a||this.toJSON();var b=this,c=a.storageConfig||{},d=c.type||a.type,f=c.rawFormatSupportTimeGroup;if("TIME"===d&&a.forms){var g,h=e.findWhere(a.forms,{primary:!0}),i=0;h.mapping.forEach(function(a){g=b.collection.findWhere({name:a}),g=g.toJSON(),g.storageConfig.rawFormatSupportTimeGroup&&i++}),f=i===h.mapping.length}return f},lookingForUsedField:function(a){function b(a,b){return a.hasOwnProperty(b)&&a[b].length>0}function c(a){a=a||{};var b=a.vis,c=a.visNames,d=a.relatedVis;b.bookmarkName?-1===a.bookNames.indexOf(b.bookmarkName)&&a.bookNames.push(b.bookmarkName):d&&-1===c.indexOf(d.name)&&c.push(d.name)}function d(a,b,c){return a.forEach(function(a){a.filters.forEach(function(d){d.path===r&&(c=!0,b.push(a.name))})}),c}function e(a,b,c){return a.forEach(function(a){a.restrictions.forEach(function(d){if(d.path===r){c=!0;var e=k.findWhere({id:a.groupId});e&&b.push(e.get("label"))}})}),c}a=a||{};var f=a.source||{},g=a.hasOwnProperty("visible")?a.visible:this.get("visible"),h=f.visualizations||[],i=a.bookmarks,j=a.filterSets,k=a.groups,l=a.forcedFilters,m=a.visualizationsInfo,n=a.newType,o=f.id||this.collection&&this.collection.sourceId,p=this.get("storageConfig")||{},q=p.type||this.get("type"),r=a.name||this.get("name");this.get("visible");i&&i.forEach(function(a){a.visualizations.forEach(function(b){b.source.sourceId===o&&(b.bookmarkName=a.name,h.push(b))})});var s=f.storageConfiguration,t=["ATTRIBUTE","TEXT"],u=["NUMBER","MONEY","INTEGER","FORMULA"],v=["TIME"],w=[],x=[],y=!1,z=!1,A=!1,B=[],C=[],D=[],E=[];return h&&g&&-1!==t.indexOf(q)||-1!==t.indexOf(q)&&-1===t.indexOf(n)?(h.forEach(function(a){var d=a.source.variables,e={};if(a.bookmarkName)e=a;else{var f=m.findWhere({id:a.visId});if(!f)return void console.error(a.visId+" visId is undefined between all visualizations");e=f.toJSON()}e.variables.forEach(function(f){var g=f.name;if("group"===f.type){if(b(d,g)){var h=JSON.parse(d[g]);h.name===r&&(y=!0,E.push(h),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))}}else if("multi-group"===f.type){if(b(d,g)){var i=JSON.parse(d[g]);i.forEach(function(b){b.name===r&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))})}}else if("multilist"===f.type&&b(d,g)){var j=d[g];j.forEach(function(b){b=b||"";var d="string"==typeof b?b:b.name;d===r&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))})}})}),j&&(y=d(j,C,y)),l&&(y=e(l,D,y))):h&&g&&-1!==u.indexOf(q)||-1!==u.indexOf(q)&&-1===u.indexOf(n)?(h.forEach(function(a){var d=a.source.variables,e={};if(a.bookmarkName)e=a;else{var f=m.findWhere({id:a.visId});if(!f)return void console.error(a.visId+" visId is undefined between all visualizations");e=f.toJSON()}e.variables.forEach(function(f){var g=f.name;if("metric"===f.type){if(b(d,g)){var h=d[g].split(":");h[0]===r&&(y=!0,c({vis:a,visNames:w,bookNames:x,relatedVis:e}))}}else if("multi-group"===f.type){if(b(d,g)){var i=JSON.parse(d[g]);i.forEach(function(b){b.sort&&b.sort.name===r&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))})}}else if("multilist"===f.type){if(b(d,g)){var j=d[g];j.forEach(function(b){b=b||"";var d="string"==typeof b?b:b.name;d===r&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))})}}else if("multi-metric"===f.type&&b(d,g)){var k=d[g].split(" "),l=!0,m="color"===f.metricType;"count"===r&&m&&(l=!1),k.forEach(function(b){var d=b.split(":")[0];d===r&&l&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:e}))})}})}),j&&(y=d(j,C,y)),l&&(y=e(l,D,y))):(h&&g&&-1!==v.indexOf(q)||-1!==v.indexOf(q)&&-1===v.indexOf(n))&&(h.forEach(function(a){var b=a.source.variables,d={};if(a.bookmarkName)d=a;else{var e=m.findWhere({id:a.visId});if(!e)return void console.error(a.visId+" visId is undefined between all visualizations");d=e.toJSON()}a.source.date&&a.source.date===r&&(y=!0,c({vis:a,visNames:w,bookNames:x,relatedVis:d})),d.variables.forEach(function(e){var f=[],g=e.config?JSON.parse(e.config):null;g&&(f=g.groupTypes||[]);var h=-1!==f.indexOf("TIME");if("time"===e.groupType||h){var i=e.name;if(b.hasOwnProperty(i)&&b[i].length>0){var j=JSON.parse(b[i]),k=[];Array.isArray(j)?k=j:k.push(j),k.forEach(function(b){b.name===r&&(y=!0,E.push(b),c({vis:a,visNames:w,bookNames:x,relatedVis:d}))})}}})}),s&&s.partitions&&s.partitions[r]&&(y=!0,z=s.partitions[r].field),f.timeFieldName===r&&(y=!0,A=!0),j&&(y=d(j,C,y)),l&&(y=e(l,D,y))),{used:y,usedGroups:E,visNames:w,bookmarkNames:x,forFormulas:B,asPartition:z,asTimeStamp:A,filterNames:C,forcedFilterGroupsNames:D}},lookingForFusionUsed:function(a){function b(a,b){-1===b.indexOf(a)&&b.push(a)}var c=this,d=this.get("name"),e=a.relatedFusion||[],f=a.visualizationsInfo,g=[],h=[],i=!1;return e.forEach(function(a){var e=a.sourceAlias,j=a.source,k=j.fusedAttributes,l=[e,d].join("."),m=c.lookingForUsedField({name:l,source:j,visualizationsInfo:f});m.used&&(i=m.used,b(j.name,g)),h=m.visNames||[],k.forEach(function(a){a.forms.forEach(function(a){a.mapping.forEach(function(a){var c=a.split(".");c[0]===e&&c[1]===d&&(i=!0,b(j.name,g))})})})}),{used:i,fusionNames:g,visNames:h}},lookingForCalculationUsed:function(){var a=this,b=this.get("name"),c={},f=!1,g=d.Deferred(),i={controllers:[],name:""};h.trigger("getDashboardControllers",i);var j=e.filter(i.controllers,function(b){return b.source.id===a.collection.sourceId});return c.local=e.some(j,function(a){return a.state.calculationIsUsing(b)}),this.collection.getLatestBookmarks().done(function(b){if(c.global=a.lookingForUsedField({bookmarks:b.toJSON()}),c.local||c.global.used){var d=!1,e=!1,h=[].concat(c.global.bookmarkNames);c.local?((!c.global.used||1===h.length&&h[0]===i.name)&&(e=!0),-1===h.indexOf(i.name)&&h.push(i.name+" (current)")):1===h.length&&h[0]===i.name&&(d=!0),f={used:!0,bookmarkNames:h,savedDashboardOnly:d,thisDashboardOnly:e}}else f=!1;g.resolve(f)}),g}})},{"../../Core/MVC":6,"../../collections/Dashboards":18,jquery:109,underscore:244}],127:[function(a,b,c){b.exports=a("./ObjectField")},{"./ObjectField":126}],128:[function(a,b,c){"use strict";var d=(a("jquery"),a("../../Core/MVC"),a("../../Core/MVC/Model")),e=a("../../collections/SchedulerTaskExecutions"),f=d.extend({urlRoot:"service/jobs",initialize:function(a){d.prototype.initialize.apply(this,arguments),this.executions=new e([],{jobName:this.get("job").name})},url:function(){return this.urlRoot+"/"+this.get("job").name},getState:function(a){var b=this.get("lastExecution")||{},c=b.state||"";return a?c.replace(/_/g," ").toLocaleLowerCase():c},getCategoryName:function(a){var b=this.get("job").category;return a?b.replace(/-/g," "):b},getTags:function(){var a={},b=this.get("job").options;return b.tags.forEach(function(b){var c=b.split(":");a[c[0]]=c[1]}),a},getFrequency:function(){var a=this.get("job").options;return a.frequency||{}},getNextRunTimestamp:function(){var a=this.get("timeUntilNextExecution"),b=a;return a&&a>0&&(b=(new Date).getTime()+a),b}});b.exports=f},{"../../Core/MVC":6,"../../Core/MVC/Model":4,"../../collections/SchedulerTaskExecutions":32,jquery:109}],129:[function(a,b,c){b.exports=a("./SchedulerTask")},{"./SchedulerTask":128}],130:[function(a,b,c){"use strict";var d=a("jquery"),e=a("../../Core/MVC"),f=e.Model.extend({fetch:function(a){return a=a||{},a.data=d.extend({},a.data,{start:0,limit:1}),e.Model.prototype.fetch.call(this,a).done(function(a){}).fail(function(a,b,c){})}});b.exports=f},{"../../Core/MVC":6,jquery:109}],131:[function(a,b,c){b.exports=a("./Execution")},{"./Execution":130}],132:[function(a,b,c){"use strict";var d=a("jquery"),e=a("lodash"),f=a("../../Core/MVC"),g=f.Model,h=f.Events,i=a("./../../collections/SourceVisualizations"),j=a("./../../collections/ObjectFields"),k=a("./../../collections/Formulas"),l=a("./../../collections/FusedAttributes"),m=a("./../Connection"),n=a("./SourceJobs"),o="service/sources/fields";b.exports=g.extend({urlRoot:"service/sources",initialize:function(a){var b=this;g.prototype.initialize.apply(this,arguments),this.visualizations=new i(this.attributes.visualizations,{secure:this.secure,remote:this.remote,apiKey:this.apiKey}),this.resetObjectFields(),this.resetStorageConfiguration(),this.initVolumeMetric(),this.jobs=new n([],{source:this}),this.connection=new m({id:this.getConnectionId()}),this.listenTo(this.connection,"sync",function(){b.trigger("change:connection")}),this.on("change:volumeMetric",this.updateObjectFields),this.on("change:objectFields",this.updateObjectFields),this.on("change:connection",function(){b.connection.set({id:b.getConnectionId()})}),this.on("sync",this._onSync),this._onSync()},resetObjectFields:function(){this.objectFields=new j(this.attributes.objectFields,{secure:this.secure,remote:this.remote,apiKey:this.apiKey}),this.formulaList=this.objectFields.formulas,this.fusedAttrList=this.objectFields.fusedAttributes},resetStorageConfiguration:function(){var a=this;this.storageConfiguration=new g(e.cloneDeep(this.get("storageConfiguration"))),this.storageConfiguration.on("change",this._onStorageConfigurationChange.bind(this)),this.on("change",function(){a.storageConfiguration.clear({silent:!0}).set(e.cloneDeep(a.get("storageConfiguration")),{silent:!0})})},_onStorageConfigurationChange:function(){this.set({storageConfiguration:e.cloneDeep(this.storageConfiguration.toJSON())}),e.assign(this.changed,{storageConfiguration:this.storageConfiguration.toJSON()}),this.trigger("change:storageConfiguration",this.storageConfiguration),this.trigger("change",this)},initVolumeMetric:function(){var a=this.get("volumeMetric");"undefined"==typeof a&&(a={label:"Volume",name:"count",storageConfig:{type:"NUMBER"},visible:!0},this.set("volumeMetric",a))},_onSync:function(){this.updateVisualizations(),this.updateObjectFields()},_detectTypeViaJdbc:function(a,b){var c=null;return-1!==a.indexOf("redshift.amazonaws.com")?c="REDSHIFT":-1!==a.indexOf("jdbc:oracle")?c="ORACLE":-1!==a.indexOf("jdbc:mysql")?c="MEMSQL"===b?"MEMSQL":"AURORA"===b?"AURORA":"MYSQL":-1!==a.indexOf("jdbc:sqlserver")?c="SQLSERVER":-1!==a.indexOf("jdbc:postgresql")?c="POSTGRESQL":a&&-1!==a.indexOf("jdbc:presto")?c="PRESTO":a&&-1!==a.indexOf("jdbc:hive2")&&(c="HIVE_ON_EMR"===b?"HIVE_ON_EMR":"HIVE_ON_TEZ"===b?"HIVE_ON_TEZ":"SPARKSQL"),c=c||b},detectTypeViaPathFile:function(a,b){var c=this.get("storageConfiguration")||{},d=c.parameters||{};return a=a||d.PATH_TO_FILE,b=a&&-1!==a.indexOf("s3")?"S3":"HDFS"},hasFeature:function(a){var b=this.get("features");return b&&-1!==b.indexOf(a)},addFeature:function(a){var b=this.get("features")||[];this.hasFeature(a)||(b.push(a),this.set("features",b),this.trigger("change:features",b),this.trigger("change",this))},removeFeature:function(a){var b=this.get("features")||[];e.each(b,function(c,d){c===a&&b.splice(d,1)}),this.set("features",b),this.trigger("change:features",b),this.trigger("change",this)},hasLastValue:function(){return this.hasFeature("LV_METRIC")},updateVisualizations:function(){var a=this.get("id");this.visualizations.setSource(a),this.visualizations.set(this.attributes.visualizations),this.visualizations.isBootstrapped(!1)},updateObjectFields:function(){var a=new j(this.get("objectFields")),b=new k(this.get("formulas")),c=new l(this.get("fusedAttributes"));this.objectFields.setSource(this),this.objectFields.reset(a.toArray()),this.formulaList.reset(b.toArray()),this.fusedAttrList.reset(c.toArray())},getConnectionId:function(){var a=this.get("storageConfiguration")||{};return a.connectionId},getConnection:function(){var a=this,b=this.getConnectionId();return this.connection.get("id")||this.connection.set({id:b}),b?this.connection.bootstrap().done(function(){a.trigger("change:connection")}):d.Deferred().resolve()},validate:function(){this.attributes.visualizations=this.visualizations.toJSON()},isCalculationUsed:function(a){var b=this.collection&&this.collection.bookmarks||[],c=this.id,d=a.get("name"),f={},g=!1,i={controllers:[],name:""};h.trigger("getDashboardControllers",i);var j=e.filter(i.controllers,function(a){return a.source.id===c});if(f.local=e.some(j,function(a){return a.state.calculationIsUsing(d)}),f.global=a.lookingForUsedField({bookmarks:b.toJSON()}),f.local||f.global.used){var k=!1,l=!1,m=[].concat(f.global.bookmarkNames);return f.local?((!f.global.used||1===m.length&&m[0]===i.name)&&(l=!0),-1===m.indexOf(i.name)&&m.push(i.name+" (current)")):1===m.length&&m[0]===i.name&&(k=!0),g={used:!0,bookmarkNames:m,savedDashboardOnly:k,thisDashboardOnly:l}}g=!1},constructFields:function(){var a=this,b=this.toJSON(),c=d.Deferred();return d.ajax({type:"POST",url:o,contentType:"application/json",dataType:"json",data:JSON.stringify(b),success:function(d){b.id||d.forEach(function(a){a.visible=!!a.checkedByDefault}),a.set("objectFields",d),a.trigger("refresh:fields"),c.resolve(d)},error:function(a){c.reject(a.responseJSON)}}),c.promise()},clearCache:function(){var a=this.get("id"),b=this.urlRoot+"/"+a+"/cache";return d.ajax({url:b,type:"DELETE",success:function(){console.log("Cache successfully cleared.")},error:function(a,b){console.error(b)}})},saveViewCount:d.noop()})},{"../../Core/MVC":6,"./../../collections/Formulas":22,"./../../collections/FusedAttributes":24,"./../../collections/ObjectFields":30,"./../../collections/SourceVisualizations":35,"./../Connection":114,"./SourceJobs":134,jquery:109,lodash:242}],133:[function(a,b,c){"use strict";var d=a("jquery"),e=a("lodash"),f=a("./../../../collections/SchedulerTasks"),g=f.extend({initialize:function(a,b){this.options=e.assign({},this.options,b),f.prototype.initialize.apply(this,arguments),this.source=this.options.source,this.listenTo(this.source,"sync",this.setSourceId)},url:function(){return this.urlRoot+"?sourceId="+this.sourceId},setSourceId:function(){this.sourceId=this.source.get("id")},fetch:function(){if(!this.sourceId){var a=d.Deferred();return a.resolve(),a.promise()}return f.prototype.fetch.apply(this,arguments)}});b.exports=g},{"./../../../collections/SchedulerTasks":34,jquery:109,lodash:242}],134:[function(a,b,c){b.exports=a("./SourceJobs")},{"./SourceJobs":133}],135:[function(a,b,c){b.exports=a("./Source")},{"./Source":132}],136:[function(a,b,c){"use strict";var d=a("jquery"),e=a("lodash"),f=a("./../Visualization"),g=a("../../admin/Settings"),h=a("../../Core/Settings"),i=(a("../../utilities"),a("colorbrewer")),j=["MINUTE","HOUR","DAY","WEEK","MONTH","YEAR"],k=g.numericFieldTypes,l=h.UNIQUE_TIME_SUPPORT;b.exports=f.extend({idAttribute:"visId",initialize:function(a,b){return f.prototype.initialize.apply(this,arguments),b=b||{},b.sourceId?(this.setSource(b.sourceId),delete b.sourceId):this.attributes.source&&this.attributes.source.sourceId&&this.setSource(this.attributes.source.sourceId),this.get("visId")||this.set("visId",this.get("id"),{silent:!0}),this},setSource:function(a){return this.sourceId=a,this},getSourceId:function(){return this.sourceId||this.collection.sourceId},url:function(){if(this.getSourceId())return"service/sources/"+this.getSourceId()+"/visualizations/"+this.get("visId");throw new Error("sourceId must be defined")},_retrieveAttribute:function(){var a=(this.get("variables"),!1);return a},_retrieveGroup:function(a){var b=this.get("variables"),c=a?"time":"attribute",d=e.findWhere(b,{type:"group",groupType:c}),f=e.findWhere(b,{type:"histogram-group"});return f&&(d=f),d||(d=!1),d},_retrieveGroups:function(){var a=this.get("variables"),b=e.findWhere(a,{type:"multi-group"});return b||(b=!1),b},_retrieveMultiListGroups:function(){var a=this.get("variables"),b=e.findWhere(a,{type:"multilist"}),c=b&&b.attributeType||[];return b&&-1!==c.indexOf("ATTRIBUTE")||(b=!1),b},_retrieveUngrouped:function(){var a=this.get("variables"),b=e.findWhere(a,{type:"ungrouped"});return b||(b=!1),b},_retrieveMetric:function(){var a=this.get("variables"),b=e.filter(a,{type:"metric"}),c=e.filter(a,{type:"box-plot-metric"});if(c.length>0&&(b=c),0===b.length)b=!1;else{var d=b.filter(function(a){return"color"!==a.metricType}),f=e.where(b,{metricType:"color"});b={metrics:d,colors:f}}return b},_retrieveMetrics:function(){var a=this.get("variables"),b=e.where(a,{type:"multi-metric"});if(0===b.length)b=!1;else{var c=b.filter(function(a){return"color"!==a.metricType}),d=b.filter(function(a){return"color"===a.metricType&&"multi-metric"!==a.type});b={metrics:c,colors:d}}return b},setDefaultGroupBy:function(a){a=a||{};var b=this.attributes,c=a.newFields,d=a.source,f=a.isNewSource,g=this,h=b.source.variables||[],i=e.findWhere(b.variables,{groupType:"time"}),j=d.attributes.fusedAttributes&&d.attributes.fusedAttributes.length>0,k=this._retrieveGroup(i),l=this._retrieveGroups(),m=this._retrieveMultiListGroups(),n=this._retrieveUngrouped(),o=this._retrieveAttribute(),p=this._retrieveMetric(),q=this._retrieveMetrics(),r="",s="",t="";if(k){var u=k.name,v=h[u]?JSON.parse(h[u]).name:"none";"WORLD_MAP"===b.type&&f&&(h[u]="");var w=e.findWhere(c,{name:v});if(!h[u]||"none"===v||c&&!w&&!i)r=k.defaultValue,s=r?JSON.parse(k.defaultValue):"histogram-group"===k.type?this._getDefaultHistoGroup({singleGroupDefData:k,newFields:c,sourceModel:d,noCount:!0}):this._getDefaultGroup({newFields:c,sourceModel:d}),h[u]=JSON.stringify(s),s.name||(b.enabled=!1);else if(i){r=k.defaultValue?JSON.parse(k.defaultValue):null;var x=h[u]?JSON.parse(h[u]):null;w=e.findWhere(c,{name:x.name}),(!x||!x.name||c&&!w)&&(x=g._getDefaultTimeGroup({newFields:c,defaultValue:r,sourceModel:d}),h[u]=JSON.stringify(x),x.name||(b.enabled=!1)),b.source.date=x.name}else"attribute"===k.type&&(s=this._getDefaultAttr({newFields:c,sourceModel:d}),h[u]=s)}else if(l){var y=l.name,z=h[y]?JSON.parse(h[y]):[],A=!0;
c&&z.forEach(function(a){A=A&&!!e.findWhere(c,{name:a.name})}),z=z.filter(function(a){return!!a.name}),(!h[y]||z.length<2||c&&!A)&&(r=l.defaultValue,r?t=[JSON.parse(l.defaultValue)]:(t=g._getDefaultGroups({configVar:JSON.parse(l.config),newFields:c,sourceModel:d}),t.length<2&&(b.enabled=!1)),h[y]=JSON.stringify(t))}else if(m){var B=m.name,C=h[B]||[],D=!0;c&&C.forEach(function(a){D=D&&!!e.findWhere(c,{name:a.name})}),(0===C.length||c&&!D)&&(r=m.defaultValue,r||(C=g._getDefaultMultiListGroups({newFields:c,sourceModel:d,isFusion:j}),0===C.length&&(b.enabled=!1))),h[B]=C}else if(n){var E=n.name,F=JSON.parse(n.config),G=h[E]||"[]";G=JSON.parse(G),0===G.length&&(G=this._getDefaultGroups({ungrouped:!0,configVar:F,sourceModel:d}),h[E]=JSON.stringify(G))}else if(o){var H=o.name,I=h[H];I||(I=this._getDefaultAttr({newFields:c,sourceModel:d}),h[H]=I)}var J=s?[s]:t;return this.setDefaultMetrics({vis:b,variables:h,newFields:c,groupBys:J,isNewSource:f,defaultMultiGroupBy:t,singleMetricDefData:p,multiMetricsDefData:q,sourceModel:d}),b.visId||(b.visId=b.id),b},setDefaultMetrics:function(a){function b(a,b,c){var d=a.split(":"),j=d[0],m=(d[1],d[2]),n="color"===c.metricType,p="",s="",t=j.split(" ").some(function(a){return e.findWhere(k,{name:a})});(!t||"count"===j&&!q.visible||r&&(o||!g.enabled))&&(j="");var u="UBER_BARS"===f.get("type"),v='count::{"autoShowColorLegend"|false}',w=h[b]===v;return n&&u&&w?(m=f._getDefaultMetricColorConfig(),f._getDefaultMetric({isColor:n,metricOpt:m,groupBys:l,isNewSource:o,sourceModel:i})):h[b]&&j?!1:(p=c.defaultValue.split(":"),(!p||"count"===p[0]&&!q.visible||r&&(o||!g.enabled))&&(s=f._getDefaultMetric({isColor:n,metricOpt:m,groupBys:l,isNewSource:o,sourceModel:i})),s||c.defaultValue)}function c(a,c){var d,e="";"multi-metric"===c.type?(d=h[a]?h[a].split(" "):[],d.forEach(function(d,f){var g=b(d,a,c),h=f>0?" ":"";e+=g?h+g:h+d})):(d=h[a]?h[a]:"",e=b(d,a,c)),e&&(h[a]=e)}function d(a,b){var c,d=h[a],e="color"===b.metricType;d||(c=f._getDefaultMetricField({sourceModel:i,isColor:e,metricOpt:"",groupBys:l,isNewSource:o,noCount:!0}),h[a]=c?c.name:"")}a=a||{};var f=this,g=a.vis,h=a.variables||[],i=a.sourceModel,j=i.attributes,k=i.objectFields.toJSON(),l=a.groupBys,m=a.singleMetricDefData,n=a.multiMetricsDefData,o=a.isNewSource,p=m||n,q=j.volumeMetric,r=j.fusedAttributes&&j.fusedAttributes.length>0;return p&&(p.metrics.forEach(function(a){var b=a.name;"box-plot-metric"===a.type?d(b,a):b&&c(b,a)}),p.colors.forEach(function(a){var b=a.name;b&&c(b,a)})),g},_getDefaultMetricColorConfig:function(){var a=3,b="ZoomSequential",c=this._getColorBrewer(b,a),d=c.map(function(a,b){return{name:"Color "+(b+1),color:a}}),e={colorNumb:a,legendType:"palette",colors:d,colorSet:b,autoShowColorLegend:!1};return JSON.stringify({colorNumb:e.colorNumb,legendType:e.legendType,colors:JSON.stringify(e.colors),colorSet:e.colorSet,autoShowColorLegend:!!e.autoShowColorLegend}).replace(/:/g,"|")},_getColorBrewer:function(a,b){var c=b,d=e.clone(i[a][c]);return d},_getDefaultMetricField:function(a){function b(a,b){return e.chain(a).filter(function(a){var c=a.name,e=a.storageConfig||{},g=e.type||a.type,h=f.isVisibleField(a),i=!0;return d&&n.length>0&&!b?i=-1!==n.indexOf(c.split(".")[0]):(l||o)&&"count"===c&&(i=!1),"count"!==c||m||(i=!1),h&&i&&-1!==k.indexOf(g)}).sortBy(function(a){var b=a.storageConfig||{};return b.cardinality}).value()}a=a||{};var c,d,f=this,g=a.sourceModel,h=a.newFields,i=g.attributes,j=a.groupBys||[],l=a.isNewSource,m=!a.noCount,n=[],o=i.fusedAttributes&&i.fusedAttributes.length>0,p=h||g.objectFields.toJSON();if(m&&p.push(i.volumeMetric),o&&j.forEach(function(a,b){a.form&&0===b&&(c=e.findWhere(i.fusedAttributes,{name:a.name}),c?d=e.findWhere(c.forms,{form:a.form}):console.error("Fused Attr undefined for: ",a))}),d){var q=d.unique||[];n=d.mapping.filter(function(a){return-1===q.indexOf(a)}).map(function(a,b){return a.split(".")[0]})}var r=b(p),s=r[0]||b(p,!0)[0];return s?s:null},_getDefaultMetric:function(a){a=a||{};var b=a.metricOpt,c=this._getDefaultMetricField(a);if(!c)return null;var d="count"===c.name?"":c.func||"avg",e=[];return e[0]=c.name,e[1]=d.toLowerCase(),b&&(e[2]=b),e.join(":")},_getDefaultAttr:function(a){a=a||{};var b=this._getDefaultGroup(a);return b=b?b.name:""},_getDefaultGroup:function(a){a=a||{};var b=this,c=a.newFields,d=a.sourceModel,f=d.attributes;if(!f)throw Error("Source should be defined");var g=f.volumeMetric,h=this.get("type"),i=this.get("templateType"),j=10,k=f.type,l=f.streamType,m=f.fusedAttributes&&f.fusedAttributes.length>0;switch(h){case"VERTICAL_BARS":case"HORIZONTAL_BARS":case"UBER_BARS":case"SCATTERPLOT":case"HORIZONTAL_CLUSTERED":case"VERTICAL_CLUSTERED":case"VERTICAL_100_STACKED_BARS":case"VERTICAL_STACKED_BARS":case"HORIZONTAL_100_STACKED_BARS":case"HORIZONTAL_STACKED_BARS":j=50;break;case"PIE":case"BUBBLES":case"WORD_CLOUD":case"MULTI_METRIC_BARS":j=20;break;case"TREE_MAP":case"HEAT_MAP":j=100;break;case"WORLD_MAP":j=1e3;break;case"US_MAP":j=1e4}var n="ATTRIBUTE",o=d.objectFields.toJSON(),p=c||o;o=e.chain(p).filter(function(a){if("MONGO"===k&&"_id"===a.name)return!1;var c=a.storageConfig||{},d=c.type||a.type,e=b.isVisibleField(a),g=!f.live&&"TIME"===d;return e&&(d===n||g||!!a.forms)}).sortBy(function(a){if(m)return!a.forms;var b=a.storageConfig||{};return b.cardinality}).sortBy(function(a){if(m)return!a.forms;var b=a.storageConfig||{};return b.type}).value();var q=o.filter(function(a){var b=a.storageConfig&&a.storageConfig.type||a.type,c=!f.live&&"TIME"===b;return b===n||c})[0],r=e.findWhere(o,{name:"hashtags"})?"hashtags":"none",s={name:"count",dir:"Descending Value"};!q||g.visible&&!m||(s.name=q.name,s.dir="Ascending Value");var t={name:q?q.name:"none",limit:j,sort:s};if(q&&q.forms&&(t.form=e.findWhere(q.forms,{primary:!0}).form),"TWEET"===l&&(t.name=r),"WORLD_MAP"===h||"WORLD_MAP"===i){var u=e.findWhere(o,{label:"Country"});u&&(t.name=u.name)}return t},_getDefaultGroups:function(a){function b(a){return a.filter(function(a){return a.name!==z})}function c(a){var b=a.storageConfig||{},c=b.type||a.type,d=e.findWhere(x,{name:a.name});u=m?m[x.length]:u;var f=u.split(" "),g=f.indexOf(c)>=0;if(s&&!y)return g&&a.forms;var h=!d&&g&&!a.forms;return h}a=a||{};var f=this,g=a.newFields,h=a.configVar,i=a.sourceModel,j=i.attributes,k=!!a.ungrouped;if(!j)throw Error("Source should be defined");var l=h.groupLevel||2,m=h.groupTypes,n=h.autoShowColorLegend,o=h.groupColorSet,p=j.volumeMetric,q=j.type,r=j.streamType,s=j.fusedAttributes&&j.fusedAttributes.length>0,t=this.get("type"),u="ATTRIBUTE",v=i.objectFields.toJSON(),w=g||v;v=e.chain(w).filter(function(a){if("MONGO"===q&&"_id"===a.name)return!1;var b=a.storageConfig||{},c=(b.type||a.type,f.isVisibleField(a));return c||c&&!!a.forms}).sortBy(function(a){if(s)return!a.forms;var b=a.storageConfig||{};return b.cardinality}).sortBy(function(a){if(s)return!a.forms;var b=a.storageConfig||{};return b.type}).value();var x=[],y=!1,z=e.findWhere(v,{name:"hashtags"})?"hashtags":"none",A=50,B=20,C=h.limit||1e5;switch(t){case"LINE_CHART_CONTINUOUS":A=20,B=1e3}for(var D=0;l>=x.length&&v.length*l>D;){D++;var E,F=v.filter(c);0===F.length&&console.warn(t+": Cant find appropriate default attribute!");var G=e.contains(u.split(" "),"NONE"),H=v.filter(function(a){return"NONE"===a.storageConfig.type})[0],I=F[0];E=G&&H?H:I;var J={name:"count",dir:"Descending Value"};!E||p.visible&&!s||(J.name=E.name,J.dir="Ascending Value");var K={name:"",limit:0===x.length?A:B,sort:J};if(E&&(p.visible&&"TIME"!==E.storageConfig.type||(J.name=E.name,J.dir="Ascending Value"),K.name=E.name,E.forms&&(y=!0,K.form=e.findWhere(E.forms,{primary:!0}).form)),"TWEET"===r&&0===x.length&&(K.name=z,v=b(v)),x.push(K),s&&!y&&x.pop(),x.length>=l){d.extend(x[l-1],{groupColorSet:o,autoShowColorLegend:n});break}}return k&&(x=x.map(function(a){return{name:a.name,limit:C}})),x},_getDefaultMultiListGroups:function(a){a=a||{};var b=this._getDefaultGroup(a),c=[];if(b){var d={name:b.name};a.isFusion&&(d.form=b.form),c.push(d)}return c},_getDefaultHistoGroup:function(a){var b=a.singleGroupDefData,c=this._getDefaultMetricField({newFields:a.newFields,sourceModel:a.sourceModel,noCount:a.noCount}),d=JSON.parse(b.config);return d.name=c?c.name:"",d},_getDefaultTimeGroup:function(a){a=a||{};var b=this,c=a.newFields,d=a.sourceModel,f=d.attributes,g=a.defaultValue,h=c||d.objectFields.toJSON(),i="TIME",k=f.timeFieldName,m=k&&"none"!==k?e.findWhere(h,{name:k}):h.filter(function(a){var c=a.storageConfig||{},d=c.type||a.type,e=b.isVisibleField(a),g=b.isRawGroupTime(a,h),j=-1!==l.indexOf(f.type);return d===i&&(g||j)&&e})[0],n=m?m.timestampGranularity:null;if(m&&m.forms){var o=e.findWhere(m.forms,{primary:!0}),p="";o.mapping.forEach(function(a){var b=e.findWhere(h,{name:a});if(p){var c=b.timestampGranularity;p=j.indexOf(c)>j.indexOf(p)?c:p}else p=b.timestampGranularity}),n=p||n}var q=(n&&j.indexOf(n)>j.indexOf("DAY")?n:"DAY",{name:m?m.name:"",limit:10,sort:{dir:"Ascending Value"}});return g=g||q,g.name||(g.name=q.name),m&&m.forms&&(g.form=e.findWhere(m.forms,{primary:!0}).form),g},isVisibleField:function(a){var b=a.forms?e.findWhere(a.forms,{visible:!0}):a.visible;return b},isRawGroupTime:function(a,b){var c=a.storageConfig||{},d=c.type||a.type,f=c.rawFormatSupportTimeGroup;if("TIME"===d&&a.forms){var g,h=e.findWhere(a.forms,{primary:!0}),i=0;h.mapping.forEach(function(a){g=e.findWhere(b,{name:a}),g.storageConfig.rawFormatSupportTimeGroup&&i++}),f=i===h.mapping.length}return f}})},{"../../Core/Settings":7,"../../admin/Settings":13,"../../utilities":151,"./../Visualization":143,colorbrewer:95,jquery:109,lodash:242}],137:[function(a,b,c){b.exports=a("./SourceVisualization")},{"./SourceVisualization":136}],138:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=a("jquery"),f=a("./../../collections/UserPreferences");b.exports=d.extend({defaults:{name:"visitor"},urlRoot:"service/users",initialize:function(a){return d.prototype.initialize.apply(this,arguments),a=a||{},this.options=e.extend({},this.defaults,a),this.set({tags:[]}),this.preferences=new f,this},isSupervisor:function(){return-1!==this.get("roles").indexOf("supervisor")},isOnlySupervisor:function(){return this.isSupervisor()&&1===this.get("roles").length},isAdmin:function(){return-1!==this.get("roles").indexOf("admin")},getPreference:function(a){var b=this.preferences.findWhere({key:a});return b?b.get("value"):null}})},{"../../Core/MVC/Model":4,"./../../collections/UserPreferences":39,jquery:109}],139:[function(a,b,c){b.exports=a("./User")},{"./User":138}],140:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=d.extend({defaults:{},idAttribute:"key",initialize:function(){this.accountId=null,this.userId=null,d.prototype.initialize.apply(this,arguments),this.collection&&"string"==typeof this.collection.userId&&this.setUserId(this.collection.userId),this.collection&&"string"==typeof this.collection.accountId&&this.setAccountId(this.collection.accountId)},setUserId:function(a){this.userId=a},setAccountId:function(a){this.accountId=a},url:function(){var a=d.prototype.url.apply(this);return(null!==this.accountId||null!==this.userId)&&(a+="?",this.accountId&&(a+="accountId="+this.accountId+"&"),this.userId&&(a+="userId="+this.userId+"&")),a}});b.exports=e},{"../../Core/MVC/Model":4}],141:[function(a,b,c){b.exports=a("./UserPreference")},{"./UserPreference":140}],142:[function(a,b,c){"use strict";var d=a("../../Core/MVC/Model"),e=d.extend({urlRoot:"service/visualizations",initialize:function(a){d.prototype.initialize.apply(this,arguments),this.on("change sync",this.setIconUrl),this.setIconUrl()},setIconUrl:function(){var a=this.get("thumbnailId"),b=this.get("type"),c="";if(a)c=this.urlRoot+"/"+this.get("visId")+"/thumbnail/"+a+".svg";else switch(b){case"VERTICAL_BARS":c="images/Template_Bars_Button_sm.png";break;case"BUBBLES":c="images/Template_Bubbles_Button_sm.png";break;case"SCATTERPLOT":c="images/Template_Scatterplot_Button_sm.png";break;case"PIE":c="images/Template_Pie_Button_sm.png";break;case"WORD_CLOUD":c="images/Template_WordCloud_Button_sm.png";break;case"LINE_CHART":c="images/Template_MultiLine_Button_sm.png";break;case"LINE_CHART_CONTINUOUS":c="images/Template_MultiLine_Button_sm.png";break;case"US_MAP":c="images/Map_US_Button_sm.png";break;case"WORLD_MAP":c="images/Map_World_Button_sm.png";break;case"MAP_LAT_LONG":c="images/Map_Lat_Long_sm.png";break;case"PIVOT_TABLE":c="images/Template_GridView_Button_sm.png";break;case"FLOATING_BUBBLES":c="images/Template_Floating_Bubbles_Button_sm.png";break;case"HISTOGRAM":c="images/Template_Histogram_Button_sm.png";break;case"BOX_PLOT":c="images/Template_Box_Plot_Button_sm.png";break;case"TREE_MAP":c="images/Template_HeatMap_Button_sm.png";break;case"HEAT_MAP":c="images/Template_HeatMap2_Button_sm.png";break;case"HORIZONTAL_BARS":c="images/Template_HorizBar_Button_sm.png";break;case"UBER_BARS":c="images/Template_UberBar_Button_sm.png";break;case"VERTICAL_CLUSTERED":c="images/Template_MultiBar_Button_sm.png";break;case"MULTI_METRIC_BARS":c="images/Template_MultiBar_Button_sm.png";break;case"VERTICAL_STACKED_BARS":c="images/Template_MultiGroup_Bar_Button_sm.png";break;case"VERTICAL_100_STACKED_BARS":c="images/Template_Vertical_100pct_Stacked_sm.png";break;case"HORIZONTAL_STACKED_BARS":c="images/Template_Horizontal_Stacked_Bar_Button_sm.png";break;case"HORIZONTAL_100_STACKED_BARS":c="images/Template_Horizontal_100pct_Stacked_sm.png";break;case"HORIZONTAL_CLUSTERED":c="images/Template_SideBySide_Horiz_Button_sm.png";break;case"LINE_AND_BARS":c="images/Template_LineAndBar_Button_sm.png";break;case"FINGERPAINT":c="images/Template_Fingerpaint_Button_sm.png";break;case"DONUT":c="images/Template_Donut_Button_sm.png";break;case"KPI":c="images/Template_KPI_Button_sm.png";break;default:c="images/Template_Custom_Button_sm.png"}c+="?v=${timestamp}",this.set("thumbnailUrl",c,{silent:!0})},saveEnabled:function(a){this.save({enabled:a})}});b.exports=e},{"../../Core/MVC/Model":4}],143:[function(a,b,c){b.exports=a("./Visualization")},{"./Visualization":142}],144:[function(a,b,c){"use strict";var d=a("underscore"),e=a("jquery"),f=a("./../SourceVisualization"),g=f.extend({idAttribute:"id",fetch:function(){var a=this,b=d.clone(this.attributes),c=e.Deferred();return f.prototype.fetch.apply(this,arguments).done(function(){e.extend(!0,a.attributes,b),b.source&&b.source.variables&&(a.attributes.source.variables=b.source.variables),c.resolve(arguments)}).fail(function(){c.reject(arguments)}),c.promise()}});b.exports=g},{"./../SourceVisualization":137,jquery:109,underscore:244}],145:[function(a,b,c){"use strict";var d={},e=a("jquery"),f=a("underscore"),g=a("moment"),h=a("./../utilities"),i=(h.time.millisecondsIn,a("../Core/MVC/Model")),j=a("./../collections/Metrics"),k=a("./../collections/GroupBys"),l=a("./FontStyles"),m=a("../collections/CustomVariables"),n=a("../Core/Settings"),o=n.UNIQUE_TIME_SUPPORT;d.Time=i.extend({defaults:{paused:!1,playbackMode:!0,speed:1,speedScale:"second",groupTime:null,tz:h.determineTimeZone(),min:0,max:(new Date).valueOf(),live:!1,fromTime:0,toTime:(new Date).valueOf(),pinned:!1},startTimeFunctions:{},initialize:function(a,b){f.bindAll(this,"getEndTime"),"string"==typeof a.toTime&&"LIVE"!==a.toTime&&(a.toTime=h.time.convertFromServerDate(a.toTime)),"undefined"==typeof a.fromTime&&(a.fromTime=a.min),"undefined"==typeof a.toTime&&(a.toTime=a.max),"undefined"==typeof a.live&&(a.live="LIVE"===a.toTime),("LIVE"===a.toTime||a.live)&&(a.toTime=(new Date).valueOf()),(a.fromTime<a.min||a.fromTime>a.max)&&(a.fromTime=a.min),(a.toTime<a.min||a.toTime>a.max)&&(a.toTime=a.max),this.set(a)},getEndTime:function(){return h.formattedDate(this.get("toTime"))},isFullRange:function(){var a=this.toJSON();return a.fromTime<=a.min&&a.toTime>=a.max},isEndOfRange:function(){return!this.get("live")&&this.get("toTime")>=this.get("max")}}),d.Datum=i.extend({idAttribute:"group"});var p={"Descending Value":"valueDescending","Ascending Value":"valueAscending",Alphabetical:"alphabetical","Reverse Alphabetical":"reverseAlphabetical"},q={valueDescending:"Descending Value",valueAscending:"Ascending Value",alphabetical:"Alphabetical",reverseAlphabetical:"Reverse Alphabetical"},r="_histogramConfig",s="_fontConfig",t=a("./Filter"),u=a("./../collections/Filters");d.State=i.extend({defaults:{groupBy:null,comparison:!1,comparisonPeriod:"YESTERDAY",sort:{dir:"desc",name:"count"},clientSort:"valueDescending"},initialize:function(a,b){b=b||{};var c,f,i,n,o,p,q,t=h.getDateObjFromString,v=this,w=this.defaults,x=a||{},y=(b.config,b.config&&b.config.get("source")),z=b.hasOwnProperty("interactiveMode")?b.interactiveMode:!0,A=y.variables,B=y.filters||[];this.options=this.options||{},b.config&&(this.config=b.config,delete b.config),b.objectFields&&(this.options.fields=b.objectFields.toJSON(),this.options.objectFields=b.objectFields),this.isTimeTrends()&&(f=this.getGroupTimeConfig()),f&&!this.isValidTimestampTrend(x.timestampField)?x.timestampField=f.name:x.timestampField=x.timestampField||y.date,c=this.options.fields.filter(function(a){return a.name===x.timestampField})[0],i={speed:1,groupTime:f,playbackMode:this.config.get("source").playbackMode,paused:!this.isLive()},this.isLive()&&(i.live=!0,i.pinned=!0),c&&(i.min=g.utc(c.storageConfig.min).startOf("second").valueOf(),i.max=g.utc(c.storageConfig.max).startOf("second").valueOf(),i.toTime=i.max),"undefined"!=typeof y.to&&(i.playbackMode=y.playbackMode,i.pinned=y.pinned,i.live="LIVE"===y.to,i.live&&!y.pinned?i.fromTime=i.toTime- -y.from:(i.fromTime=t(y.from).valueOf(),i.toTime=t(y.to).valueOf())),b.divergingColorRange&&(this.divergingColorRange=b.divergingColorRange),b.time?(e.extend(i,b.time),delete b.time):n&&e.extend(i,n),this.time=new d.Time(i),this.metrics=new j(this._retrieveMetrics(x)),this.queryBuilderSource=A.queryBuilderSource,this.interactiveMode=z,o=A._custom_variables||"[]",b.customState?this.custom=b.customState:this.custom=new m(JSON.parse(o));var C=this.custom.toJSON(),D=C[s];if(this.font=new l(D),this.listenTo(this.font,"change",function(){var a=v.font.toJSON();v.custom.set(s,a,{silent:!0})}),this.filters=new u(B,{fields:this.options.fields}),this.groupBy=new k(this._retrieveGroupBy(),this._retrieveGroupByDefinition()),this.updateFieldsState(),this.isHistogram()){var E=this.custom.get(r);E&&this.listenTo(E,"change",function(){v.trigger("change")})}if(p=this.getGroupByTime(),q=p&&p.name===x.timestampField,!f||x.timeTrendStep||y.timeTrendStep)x.timeTrendStep||!p||q?p||delete x.timeTrendStep:x.timeTrendStep=y.timeTrendStep||"YEAR";else{var F=h.time.compareSteps,G=c.storageConfig.min,H=c.storageConfig.max,I=c.timestampGranularity,J=this.groupBy.at(0).get("limit"),K=h.time.getStepForMinimalGranulation(G,H,this.isTimeUTC(),J);-1===F(K.name,I)?x.timeTrendStep=I:x.timeTrendStep=K.name}x.sort=x.sort||w.sort,x.clientSort=this._getClientSort(),x.delayMode=y.delay>0,x.delay=y.delay,x.delayUnit=y.delayUnit,this.set(x),this.validateFromTo(!0)},isValidTimestampTrend:function(a){var b=!0,c=this.options.objectFields.where({name:a})[0];return b=c?this.isSupportTimeGroup(c):!1},isSupportTimeGroup:function(a){var b=!1,c=a.attributes.storageConfig.type||a.attributes.type;if("TIME"===c){var d=a.isSupportTimeGroup(),e=this.config.get("streamType"),f=o.indexOf(e)>=0;b=d||f}return b},isLive:function(){return this.config.get("source").live},updateFieldsState:function(){var a,b=this;this.groupBy.each(function(c){c.get("form")&&(a=f.findWhere(b.options.fields,{name:c.get("name")}),a&&a.forms.forEach(function(a){a.primary=a.form===c.get("form")}))})},isTimeUTC:function(){var a=f.findWhere(this.options.fields,{name:this.groupBy.getAttribute()}),b=!1;if(a){var c=a.timestampGranularity;b=-1!==h.time.TIME_STEPS_UTC.indexOf(c)}return b},_getClientSort:function(){var a=this.config.get("source").variables,b=p[a.Sort],c=this.groupBy.at(0);return!b&&c&&(b=p[c.get("sort").dir]),b||this.defaults.clientSort},_retrieveGroupByDefinition:function(){var a=this._retrieveGroup(),b=this._retrieveGroups(),c=this._retrieveHistogram();return{definition:b||a||c}},getGroupTimeConfig:function(){var a,b,c,d=this,e=this.config.get("variables").filter(function(a){return"group"===a.type||"multi-group"===a.type})[0],f=this.config.get("source"),g=f.variables;return e&&(b=g[e.name],b&&(b=JSON.parse(b),"group"===e.type?(c=d.getObjectField(b.name),"TIME"===c.storageConfig.type&&(a={name:b.name,sort:b.sort,limit:b.limit})):b.forEach(function(b){c=d.getObjectField(b.name),"TIME"===c.storageConfig.type&&(a={name:b.name,sort:b.sort,limit:b.limit})}))),a},_retrieveGroupBy:function(){var a,b=this,c=this.config,d=[],e=c&&c.get("source"),f=e.variables,g=this.time.get("groupTime"),h=b._retrieveGroup(),j=b._retrieveGroups(),k=b._retrieveHistogram();if(j)d=JSON.parse(f[j.name]);else if(h)d=[JSON.parse(f[h.name])];else if(k){var l=f[k.name];a=l?JSON.parse(l):{name:"count"},d=[{name:a.name,limit:a.binsCount,sort:{name:a.name,dir:"asc"}}],this.custom.set(r,new i({binsCount:+a.binsCount,binsWidth:+a.binsWidth,values:a.values,binsType:a.binsType,cumulative:a.cumulative}))}if(g){var m,n,o=g.sort&&g.sort.dir||"Ascending Value";m=this.isValidTimestampTrend(e.date)?e.date:g.name,n={name:m,limit:g.limit||10,sort:{name:m,dir:o}};var p=this.options.objectFields.findWhere({name:m});p&&p.get("form")&&(n.form=p.get("form")),d=d.map(function(a){return a.name===n.name?n:a})}return d},_retrieveHistogram:function(){var a=this.config.get("variables"),b=f.findWhere(a,{type:"histogram-group"});return b||(b=!1),b},_retrieveGroup:function(){var a=this.config.get("variables"),b=f.findWhere(a,{type:"group"});return b||(b=!1),b},_retrieveGroups:function(){var a=this.config.get("variables"),b=f.findWhere(a,{type:"multi-group"});return b||(b=!1),b},_retrieveMetrics:function(a){function b(a){var b=a.name,c=j[b]||"none",f=d(c),h=f[0].split(":"),k=h[0],l=i.filter(function(a){return a.name===k})[0],m=l.storageConfig.type,n=h[1]||l.func||("count"!==k&&"none"!==k?"sum":null),o={};h[2]&&(o=JSON.parse(h[2].replace(/\|/g,":")),e.extend(a,o)),a.config&&e.extend(a,JSON.parse(a.config)),g(e.extend({},a,{id:b,label:b,name:k,func:n,type:m}))}function c(a){var b=a.name,c=j[b]||"none";c.indexOf(":")>=0&&(c=c.split(":")[0]);var d=i.filter(function(b){var d=!1;if(""!==c)d=b.name===c;else{var e=b.storageConfig.type||b.type;d=a.attributeType.indexOf(e)>=0}return d})[0],f=d.storageConfig.type;a.config&&e.extend(a,JSON.parse(a.config)),g(e.extend({},a,{id:b,label:b,name:c,func:"sum",boxPlot:!0,type:f}))}function d(a){var b=a,c=a.match(/\{([^\{]*)\}/g),d=0,e=[];for(var f in c)c.hasOwnProperty(f)&&(b=b.replace(c[f],"@"+d),e.push(c[f]),d++);var g=b.split(" ");for(var h in g)if(g.hasOwnProperty(h))for(var i in e)e.hasOwnProperty(i)&&(g[h]=g[h].replace("@"+i,e[i]));return g}function f(a){var c=a.name,d=j[c].split(" ");j[c].length<=0||("color"===a.metricType?b(a):d.forEach(function(a){var b=a.split(":")[0],d=i.filter(function(a){return a.name===b})[0],e=d.storageConfig.type,f=a.split(":")[1]||d.func;g({label:c,name:b,func:f,type:e})}))}function g(a){"last_value"!==a.func||k&&"none"!==k||(a.func="sum"),l.push(a)}var h=this.config.get("variables"),i=this.options.fields||[],j=this.config.get("source").variables,k=a.timestampField,l=[];return h.forEach(function(a){var d=a.type;switch(d){case"multi-metric":f(a);break;case"metric":b(a);break;case"box-plot-metric":c(a)}}),l},addFilter:function(a,b){var c,d,e,g,h=this.filters;if(b=b||{},Array.isArray(a))return this.filters.add(a,f.extend({merge:!0},b)),this;if(a instanceof t||(a=new t(a)),d=a.get("path"),g=a.get("operation"),e=a.get("value"),c=h.findWhere({path:d})){var i=!1,j=f.findWhere(this.options.fields,{name:d}),k="TIME"===j.storageConfig.type;b.silent=!0,"number"==typeof e||"number"==typeof c.get("value")||"number"==typeof e[0]||k?(c.set("value",e,b),i=!0):f.each(e,function(a){c.hasAttribute(a,b)||(i=!0,c.addAttribute(a,b))}),c.get("operation")!==g&&(i=!0,c.set("operation",g,b)),i&&b.trigger!==!1&&c.trigger("change",c)}else this.filters.add(a,b);return this},addFilters:function(a){var b=this;a=f.sortBy(a,function(a){return b.filters.findWhere({path:a.path})}),a.forEach(function(c,d){b.addFilter(c,{silent:d!==a.length-1})})},removeFilter:function(a,b){function c(a,b){var c,e,f,g=d.filters;return a instanceof t||(a=new t(a)),e=a.get("path"),f=a.get("value"),c=g.findWhere({path:e}),c&&1===f.length&&c.hasAttribute(f[0],b)?(c.removeAttribute(f[0],b),d):"undefined"==typeof f[0]||f.length>1?(d.filters.remove(c,b),d):void 0}var d=this;if(e.isArray(a))for(var f=0;f<a.length;f++)c(a[f],b);else c(a,b);return this},setFilter:function(a,b){var c,d,e=this.filters;a instanceof t||(a=new t(a)),d=a.get("path"),c=e.findWhere({path:d}),c?c.set(a.attributes,b):this.addFilter(a,b)},checkForGroupBy:function(){var a=this.config.get("type"),b=["PIVOT_TABLE","CUSTOM","LINE_CHART","LINE_AND_BARS","FINGERPAINT","KPI"];-1!==b.indexOf(a)||this.isUngrouped()||("none"===this.groupBy.getAttribute()||0===this.groupBy.models.length)&&this.groupBy.trigger("groupBy:invalid")},getUngroupedRequest:function(){var a,b=this.config.get("source"),c=this.isUngrouped(),d=[];if(c){var e=c.name,f=JSON.parse(c.config);a=parseInt(f.limit),d=b.variables[e]||"[]",d=JSON.parse(d),a=d[0]&&d[0].limit||a,d=d.map(function(a){return a.name})}return{fields:d,limit:a}},toRequest:function(a){var b,c,d=this,g=this.time.get("live"),i=this.config.get("source"),j=this.queryBuilderSource||i.variables.queryBuilderSource,k=i.variables._limitPeriod,l=h.time.compareSteps,m=!1,n=this.isUngrouped(),o=this.get("timeTrendStep"),p=e.extend({},this.attributes),q=this.get("timestampField"),s={},t=h.time.getStartVisTime,u=this.getTimestampFieldFilter();k&&(i.variables._TempLimitPeriod=k,delete i.variables._limitPeriod),this.checkForGroupBy(),delete p.limit,delete p.timestampField,delete p.comparison,delete p.comparisonPeriod,delete p.clientSort,delete p.startFrom,delete p.timeWindowScale,delete p.delayMode,delete p.axis,delete p.reflines,delete p.timeTrendStep,this.get("sort")&&(delete p.sort,delete s.sort);var v=!1;p.time={from:"",to:"",timeField:""};var w=null,x=null,y=f.findWhere(this.options.fields,{name:q});if(y?(b=y.timestampGranularity,m=1===l(b,"day"),v=-1!==h.time.TIME_STEPS_UTC.indexOf(b),o||q&&"none"!==q?(x=this.time.get("toTime"),p.time.to=t(x,!0)):p.time.to=null,g&&(p.time.to="+LIVE"),w=this.time.get("fromTime"),p.time.from=t(w,!0),p.time.timeField=q):delete p.time,v?p.tz="GMT":p.tz=this.time.get("tz"),c=this.time.get("playbackMode")&&y&&!m,c&&(s.player={pauseAfterRead:this.time.get("paused"),speed:this.time.get("speed")},this.time.get("pinned")?s.player.timeWindowScale="PINNED":s.player.timeWindowScale="ROLLING"),this.groupBy){delete p.groupBy;var z=this.groupBy.toJSON();s=s||{},s.group={},s.group.fields=z.filter(function(a){var b=!0;return"none"===a.name&&(b=!1),b});var A="histogram-group"===this.groupBy.definition.type,B=this.custom.get(r),C=this.options.objectFields.filter(function(a){return d.isSupportTimeGroup(a)}).map(function(a){return a.toJSON()}),D=C.map(function(a){return a.name});if(s.group.fields.forEach(function(a){if(A&&B){var b=B.get("binsType"),c=null,e="",g=a.name;switch(b){case"width":c=B.get("binsWidth"),e="$histogram_by_size("+g+","+c+")";break;case"count":c=B.get("binsCount"),e="$histogram_by_count("+g+","+c+")";break;default:e="$histogram("+g+")"}return a.name=e,a.limit=100,a.sort.name=g,void delete a.sort.func}var h=f.clone(a.sort),i=a.name;if("count"!==h.name&&h.func&&(h.metricFunc=h.func.toUpperCase()),a.sort=h,delete a.sort.func,D.indexOf(i)>=0){var j=f.findWhere(C,{name:i});a.name=d.formatRequestTimeName(j,o),o&&delete p.timeTrendStep}}),s.group.metrics=s.group.metrics||[],this.metrics.forEach(function(a){var b;a.isCount()||a.isNone()||(b=a.isBoxPlot()?{name:a.get("name"),func:"PERCENTILES",percentiles:[0,25,50,75,100]}:{name:a.get("name"),func:a.get("func").toUpperCase()},f.findWhere(s.group.metrics,b)||s.group.metrics.push(b))}),this.prepareRequestSortMetric(s.group),n){delete s.group;var E=this.getUngroupedRequest();s.fields=E.fields,s.limit=E.limit}}return this.filters.length>0&&(delete s.filters,s=s||{},s.filters=this.filters.toRequest()),this.get("sort")&&(delete p.sort,delete s.sort),this.get("calculationPreview")&&(s.group.metrics=[{name:this.get("calculationPreview"),func:"PREVIEW"}],delete p.calculationPreview),j&&(s=s||{},s.queryBuilderSource=j),s&&(p.cfg=s),p.volume&&delete p.volume,p.color&&delete p.color,!c&&this.time.isFullRange()&&!u&&p.time&&(delete p.time.from,g||delete p.time.to),p},getTimestampFieldFilter:function(){var a=this.get("timestampField");return this.filters.findWhere({path:a})},formatRequestTimeName:function(a,b){var c="YEAR";b&&(c=b);var d="$to_"+c.toLowerCase()+"("+a.name+")";return d},prepareRequestSortMetric:function(a){var b=this,c=this.groupBy.toJSON(),d=a.metrics.map(function(a){return a.name+":"+a.func.toLowerCase()}),e=c.filter(function(a){var c,e,g,h,i="none"===a.name;if(a.sort&&"count"!==a.sort.name&&a.name!==a.sort.name&&!i){c=a.sort.name,e=a.sort.func||"SUM",g=b.getObjectField(c),h=g.type||g.storageConfig.type;var j=f.contains(["NUMBER","INTEGER","MONEY","FORMULA"],h),k=f.contains(d,c+":"+e.toLowerCase());return j&&!k}return!1}).map(function(a){var b=a.sort.name,c=a.sort.func||"SUM";return{name:b,func:c.toUpperCase()}});a.metrics=a.metrics.concat(e)},convertToBookmark:function(){var a=this,b=h.time.getStartVisTime,c=this.config.get("source"),d=this.metrics.pluck("label"),g=this.time.toJSON(),i={from:g.fromTime,to:g.toTime,pinned:g.pinned,playbackMode:g.playbackMode},j=e.extend({},c,{filters:this.filters.toJSON(),timeTrendStep:this.get("timeTrendStep"),sourceId:c.sourceId,sourceName:c.sourceName}),k=JSON.stringify(this.custom.toJSON());j.variables=j.variables||{},j.variables.Sort=q[this.attributes.clientSort],j.variables._custom_variables=k,g.live?(i.pinned?i.from=b(i.from):i.from="-"+(i.to-i.from),i.to="LIVE"):(i.from=b(i.from),i.to=b(i.to)),e.extend(j,i),delete j.startFrom,delete j.timeWindowScale;var l,m,n,o=this.groupBy.length<2;return o?(l="",m=null,n=f.findWhere(a.config.get("variables"),{type:"group"}),n&&(l=n.name,m=this.groupBy.at(0),j.variables[l]=JSON.stringify(m.toJSON(!0)))):(l="",m=null,n=f.findWhere(a.config.get("variables"),{type:"multi-group"}),n&&(l=n.name,m=this.groupBy,j.variables[l]=JSON.stringify(m.toJSON(!0)))),d.forEach(function(a){j.variables[a]=""}),this.metrics.map(function(b,c,d){var e,f=b.get("label"),g=b.get("name"),h=b.get("func"),i="[]";j.variables.hasOwnProperty(f)&&(j.variables[f]+=(j.variables[f].length>0?" ":"")+("count"===g?g:g+":"+h)),a.colorDataObj&&a.colorDataObj.id===b.id&&(1===j.variables[f].split(":").length&&(j.variables[f]+=":"),"distinct"===a.divergingColorRange&&(e=a.colorMetricDomain),i=a.colorDataObj.get("colors")||a.colorDataObj.get("savedColors"),"string"!=typeof i&&(i=JSON.stringify(i)),j.variables[f]+=":"+JSON.stringify({colorNumb:a.colorNumb,legendType:a.legendType,divergingColorRange:a.divergingColorRange,autoShowColorLegend:a.colorDataObj.get("autoShowColorLegend"),colorLegendPosition:a.colorDataObj.get("colorLegendPosition"),savedColors:i,colorSet:a.colorDataObj.get("colorSet"),domain:e}).replace(/:/g,"|"))}),0===this.metrics.length&&"Metrics"in j.variables&&(j.variables.Metrics=""),this.custom.forEach(function(a,b){j.variables[b]=a.toJSON?a.toJSON():a}),j},isSingleGroupBy:function(){var a=!0,b=this.options.fields.filter(function(a){return"NONE"===a.storageConfig.type})[0],c=this.groupBy.filter(function(a){var c=!0;return b&&a.getAttribute()===b.name&&(c=!1),c});return 1!==c.length&&(a=!1),a},isUngrouped:function(){var a=this.config.get("variables"),b=f.findWhere(a,{type:"ungrouped"});return b},isTimeTrends:function(){var a=this.config.toJSON();return!!a.variables.filter(function(a){var b=a.config;return"time"===a.groupType?!0:"multi-group"===a.type&&b?(b=JSON.parse(b),b.groupTypes&&-1!==b.groupTypes.indexOf("TIME")):void 0}).length},isHistogram:function(){return"histogram-group"===this.groupBy.definition.type},getGroupByTime:function(){var a=this,b=this.groupBy.getAttributes(),c=null;
if(0===b.length){var d=this.toRequest(),e=d.cfg.group&&d.cfg.group.pivot;e&&(b=e.rows.concat(e.columns).map(h.parsePivotAttribute))}return b.forEach(function(b){var d=a.getObjectField(b);d&&d.storageConfig&&"TIME"===d.storageConfig.type&&(c=d)}),c},getGroupByType:function(a){var b=this.groupBy.getAttributes(),c=b[a||0],d=this.getObjectField(c)||{},e=d.storageConfig||{};return e.type||d.type},getObjectField:function(a){var b=this.options.objectFields.findWhere({name:a});return b?b.toJSON():void 0},getObjectFieldsByType:function(a){var b=this.options.objectFields.toJSON().filter(function(b){var c=b.storageConfig||{},d=c.type||b.type;return b.visible&&d===a});return b},isMultiGroups:function(){var a=this.config.toJSON();return!!f.findWhere(a.variables,{type:"multi-group"})},isMultiMetric:function(){var a=this.config.toJSON();return!!f.findWhere(a.variables,{type:"multi-metric"})},isLastValueFunc:function(){return!!this.metrics.findWhere({func:"last_value"})},_hasPlayerOption:function(){var a=this.config.toJSON(),b=!!f.findWhere(a.variables,{groupType:"time"}),c=this.get("timestampField");return!!c||b},_isTimeAttribute:function(a){var b=this.options.fields.filter(function(b){var c=b.storageConfig;return c&&"TIME"===c.type&&b.name===a});return!(!b||!b[0])},_getDefaultTimeTrendStep:function(a){var b,c=this,d=this.options.objectFields.filter(function(b){return c.isSupportTimeGroup(b)&&b.get("name")===a});if(d[0]){d=d[0].toJSON();var e=d.storageConfig.min,g=d.storageConfig.max,h=g-e,i=[{name:"MINUTE",amount:h/1e3/60},{name:"HOUR",amount:h/1e3/3600},{name:"DAY",amount:h/1e3/3600/24},{name:"WEEK",amount:h/1e3/3600/24/7},{name:"MONTH",amount:h/1e3/3600/24/30},{name:"YEAR",amount:h/1e3/3600/24/365}],j=f.findIndex(i,function(a){return a.name===(d.timestampGranularity||"MINUTE")}),k=f.filter(i,function(a,b){return b>=j}),l=this.groupBy.findWhere({name:d.name});b=l.get("limit");for(var m=0;k[m+1]&&k[m].amount>b;)m++;return k[m].name}},setTimeTrendField:function(a){var b,c,d,e=h.time.compareSteps,f=a.get("storageConfig"),i=a.get("name"),j=a.get("timestampGranularity"),k=this.get("timestampField");k!==i&&("none"===i?(this.unset("timestampField",{silent:!0}),delete this.config.get("source").date):(-1===e(j,"MINUTE")&&(j="MINUTE"),c=g.utc(f.min).startOf("second").valueOf(),d=g.utc(f.max).startOf("second").valueOf(),this.set({timestampField:i,timeTrendStep:j},{silent:!0}),this.time.set({min:c,max:d,fromTime:c,toTime:d,pinned:!1,paused:!0,speed:1},{silent:!0}),this.config.get("source").date=i,this.isTimeTrends()&&(b=this.groupBy.findWhere({name:k}),b&&b.setAttribute(a,{silent:!0})),this.validateFromTo(!0)))},setTimeTrendStep:function(a,b){this.set("timeTrendStep",a||"YEAR",{silent:!0}),this.validateTimeTrendStep(),b&&b.silent||this.trigger("change")},updateTimeTrendStep:function(a){var b=h.time.compareSteps,c=a.get("timestampGranularity")||"YEAR";-1===b(c,"MINUTE")&&(c="MINUTE"),this.set("timeTrendStep",c,{silent:!0}),this.validateFromTo(!0)},validateFromTo:function(a){var b,c,d,e,f=h.time.compareSteps,g=this.getGroupByTimeLimit(),i=this.get("timeTrendStep"),j="undefined"!=typeof this.time.changed.fromTime,k=this.isGroupedByTDAttribute(),l=this.getGroupByTime(),m={};k&&l&&(null!==g&&(d=this.time.get("fromTime"),e=this.time.get("toTime"),i&&(c=h.time.getDataPointsNumb(d,e,i)),(!i||c>g)&&(i=h.time.getMinGranularityByLimit(d,e,g),b=l.timestampGranularity,-1===f(i,b)&&(i=b),this.set("timeTrendStep",i,{silent:!0}),c=h.time.getDataPointsNumb(d,e,i),k&&c>g&&(j&&!a?m.toTime=h.time.getToDateByLimit(this.time.get("fromTime"),g,i):m.fromTime=h.time.getFromDateByLimit(this.time.get("toTime"),g,i),this.time.set(m)))),this.validateTimeWindowScale())},validateTimeTrendStep:function(){var a,b,c=this.getGroupByTimeLimit(),d=this.get("timeTrendStep");this.isGroupedByTDAttribute()&&null!==c&&(a=h.time.getDataPointsNumb(this.time.get("fromTime"),this.time.get("toTime"),d),a>c&&(b=h.time.getFromDateByLimit(this.time.get("toTime"),c,d),this.time.set("fromTime",b))),this.validateTimeWindowScale()},validateTimeWindowScale:function(){var a,b=this.get("timeWindowScale"),c=this.time.toJSON(),d=c.fromTime<=c.min&&c.toTime>=c.max;"ALL"!==b||d?"ALL"!==b&&d&&(a="ALL"):a="CUSTOM",a&&this.set("timeWindowScale",a,{silent:!0})},isGroupedByTDAttribute:function(){var a=this.get("timestampField"),b=this.getGroupByTime();return b&&b.name===a},getGroupByTimeLimit:function(){var a,b,c,d,e,g=this.getGroupByTime(),h=0===this.groupBy.length;return g?(h?(b=this.config.get("source").variables,c=b["Column Attributes"],a=!!f.findWhere(c,{name:g.name}),a?(e=this.config.get("source").variables["Column Limit"],e=Math.floor(e/c.length)):e=Number.POSITIVE_INFINITY):(d=this.groupBy.findWhere({name:g.name}),e=d.get("limit")),e):null},_timeGroupToRequest:function(a){var b=this,c=this.options.objectFields.filter(function(c){return c.get("name")===a&&b.isSupportTimeGroup(c)});if(c[0]){c=c[0].toJSON();var d="YEAR",e=this.get("timeTrendStep");e&&(d=e);var f="$to_"+d.toLowerCase()+"("+a+")";return f}},updateCalcMetric:function(a){var b=a.previous("name"),c=a.get("name"),d=this.metrics.findWhere({name:b,func:"calc"});d.set("name",c,{silent:!0}),this.groupBy.each(function(a){var d=a.get("sort");"calc"===d.func&&d.name===b&&(d.name=c)}),d.trigger("change",d)},calculationIsUsing:function(a){var b=!1,c=!1;return b=!!this.metrics.findWhere({name:a,func:"calc"}),this.groupBy.each(function(b){var d=b.get("sort");"calc"===d.func&&d.name===a&&(c=!0)}),b||c}}),b.exports=d},{"../Core/MVC/Model":4,"../Core/Settings":7,"../collections/CustomVariables":17,"./../collections/Filters":20,"./../collections/GroupBys":26,"./../collections/Metrics":28,"./../utilities":151,"./Filter":117,"./FontStyles":121,jquery:109,moment:243,underscore:244}],146:[function(a,b,c){"use strict";var d=a("underscore"),e=a("moment"),f=a("jquery");b.exports=function(a,b,c){var g=a,h=!1;this.format=function(a){var b=null;switch(h=!1,g){case"MONEY":if(d.isString(a)){var i=/\(\d{1,2}%\)$/,j=i.exec(a);b=j?f.formatNumber(parseFloat(a),{format:"$#,##0.00",locale:"us"})+" "+j[0]:f.formatNumber(parseFloat(a),{format:"$#,##0.00",locale:"us"})}else b=f.formatNumber(a,{format:"$#,##0.00",locale:"us"});break;case"TIME":parseInt(a)===a&&(a=Number(a)),b=e(a);var k,l=["DAY","WEEK","MONTH","YEAR"],m=-1===l.indexOf(c);k=c&&!m?"MMM D YYYY":"MMM D YYYY, hh:mm:ss A",b=b.format(k);break;default:if(d.isString(a))return a;Math.abs(a)>=1e-4&&Math.abs(a)<=1?b=f.formatNumber(a,{format:"0.####",locale:"us"}):Math.abs(a)>1?b=f.formatNumber(a,{format:"#,##0.##",locale:"us"}):(a||(a=0),b="number"==typeof a&&0!==a?a.toExponential(4).toString():a.toString())}return b}}},{jquery:109,moment:243,underscore:244}],147:[function(a,b,c){"use strict";var d=a("./log10");b.exports=function(a,b,c){function e(){h=f(l-k,!1),g=f(h/(m-1),!0),i=Math.floor(k/g)*g,j=Math.ceil(l/g)*g}function f(a,b){var c,e,f;return c=Math.floor(d(a)),e=a/Math.pow(10,c),f=b?1.5>e?1:3>e?2:7>e?5:10:1>=e?1:2>=e?2:5>=e?5:10,f*Math.pow(10,c)}var g,h,i,j,k=a,l=b,m=c;this.setMinMaxPoints=function(a,b){k=a,l=b,e()},this.setMaxTicks=function(a){m=a,e()},this.getTickSpacing=function(){return g||0},this.getNiceMin=function(){return i||0},this.getNiceMax=function(){return j||0},e()}},{"./log10":152}],148:[function(a,b,c){b.exports=function(a,b){function c(a,b){function e(a,b){for(var c,f,g,i=a.cssRules?a:h,j=a.cssRules||[a],l=j.length||0,m=a.cssRules?l:b;l--;)c=j[l],c.selectorText?(f=k+" "+c.selectorText.split(",").join(", "+k),f=f.replace(/[\ ]+:root/gi,""),d.changeSelectorTextAllowed?c.selectorText=f:c.type&&1!==c.type||(g=c.style.cssText,g&&(i.removeRule?i.removeRule(m):i.deleteRule(m),i.addRule?i.addRule(f,g,m):i.insertRule(f+"{"+g+"}",m)))):c.cssRules&&e(c,m)}if(b&&(a=b),!a.nodeName)return a.jquery?a.each(c):void 0;if("STYLE"===a.nodeName){for(var f,h=a[d.sheet],i=h[d.rules],j=a.parentNode,k=(j.id||(j.id="scopedByScopedPolyfill_"+ ++g),""),l=i.length||0;j;)j.id&&(k=parseInt(j.id.slice(0,1))?"#\\3"+j.id.slice(0,1)+" "+j.id.slice(1)+" "+k:"#"+j.id+" "+k),j=j.parentNode;for(;l--;)f=i[l],e(f,l)}}var d=function(){var c,d,e,f=a.createElement("style"),g="undefined"!=typeof f.sheet?"sheet":"undefined"!=typeof f.getSheet?"getSheet":"styleSheet",h=b!==f.scoped;a.body.appendChild(f),c=f[g],c.addRule?c.addRule("c","blink"):c.insertRule("c{}",0),d=c.rules?"rules":"cssRules",e=c[d][0];try{e.selectorText="d"}catch(i){}var j="d"===e.selectorText.toLowerCase();return f.parentNode.removeChild(f),{scopeSupported:h,rules:d,sheet:g,changeSelectorTextAllowed:j}}();if(d.scopeSupported)return function(){return this};var e,f,g=0;if(a.querySelectorAll)e=a.querySelectorAll("style[scoped]");else{var h,i=[];for(e=a.getElementsByTagName("style"),f=e.length;f--;)h=e[f].getAttribute("scoped"),("scoped"===h||""===h)&&i.push(e[f]);e=i}for(f=e.length;f--;)c(e[f]);return"function"==typeof jQuery&&"object"==typeof jQuery.fn&&(jQuery.fn.scopedPolyFill=function(){return this.each(c)}),c}(document)},{}],149:[function(a,b,c){"use strict";function d(a,b){return b>a?"0"+a:a.toString()}function e(a){var b=new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)"),c=(b.exec(location.search)||[,""])[1].replace(/\+/g,"%20"),d=decodeURIComponent(c);return d||null}function f(a){var b=new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)"),c=(b.exec(location.hash)||[,""])[1].replace(/\+/g,"%20"),d=decodeURIComponent(c);return d||null}function g(a){a=a||{};var b=[],c={};-1!==location.search.indexOf("?")&&(b=location.search.split("?")[1].split("#")[0].split("&"));for(var d=0;d<b.length;d++){var e=b[d].split("=");c[e[0]]=e[1]}var f=c.server||window.location.hostname,g=c.port||location.port||!1,i={};c.key&&(i.key=c.key),a.csrfToken&&(i[a.csrfParameter]=a.csrfToken);var j=("https:"===location.protocol?"wss":"ws")+"://"+f+(g?":"+g:"")+h(a)+"/websocket/?"+B.param(i);return{host:j,time:(new Date).getTime(),params:c}}function h(a){var b="",c=window.location.pathname;return b=a&&a.contextPath?a.contextPath:c.substring(0,c.indexOf("/",2))}function i(a,b){for(var c=a.visualizations||[],d=b||e("visId"),f=0;f<c.length;f++)if(c[f].visId===d){var g=c[f];return g}}function j(a){var b=["avg","min","max","sum"];return a&&k(a)&&b.push("last_value"),b}function k(a){if(!a)throw new ReferenceError("Source needed");if(a.toRequest().cfg.group.metrics.length>1)return!1;var b=a.get("timestampField"),c=a.config.attributes.source.sourceFeatures;a.config.attributes.variables;return c.indexOf("LV_METRIC")>=0&&b&&"none"!==b}function l(a){var b=["MONEY","INTEGER","NUMBER","COUNT OF","FORMULA"];return b.indexOf(a.toUpperCase())>=0}function m(a,b){var c,d=-1!==a.indexOf("UTC")||b!==!1;return a.replace(" UTC",""),c=d?H.utc(a,J):H(a,J),c.toDate()}function n(a){for(var b=a.visualizations,c=e("visId"),d=0;d<b.length;d++)if(b[d].visId===c){var f=b[d];return f.source}}function o(a){return a>=12&&(a-=12),0===a&&(a=12),a}function p(a,b,c){var d=+a,e=b?":"+b:"";return d>12?(d-=12,10>d&&c&&(d="0"+d),d+=e+" PM"):12===d?d+=e+" PM":12>d&&(10>d&&c&&(d="0"+d),d+=e+" AM"),d}function q(a,b,c,d){var e="YYYY-MM-DD HH:mm:ss.SSS";if(a)return"undefined"==typeof d&&(d=!0),d||(a=H.utc(a,e).local().format(e)),N.time.format(a,b,e)}function r(a){return H(a).format("hh:mm:ss A")}function s(a){return N.time.format(a,"day",null,!1)}function t(a){return[s(a),r(a),v(a,!0)].join(" ")}function u(a,b){var c=b?K:L;return H(a).format(c)}function v(a,b){0!==a&&(a=a||H().valueOf());var c=H(a).utcOffset()/60,d="GMT"+(c>0?"+":"")+c;if(b){var e=w();d+=" ("+e+")"}return d}function w(){return(new Date).toString().replace(/^.*GMT.*\(/,"").replace(/\)$/,"")}function x(){var a=F.determine();return a.name()}function y(){return window.pageUserData}function z(a,b){var c=0,d=0;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1)c=a.layerX,d=a.layerY;else{var e=a.target||a.srcElement,f=b?b.getBoundingClientRect():e.getBoundingClientRect(),g=a.clientX-f.left,h=a.clientY-f.top;c=g||a.offsetX,d=h||a.offsetY}return{x:c,y:d}}function A(a){this.options=B.extend({},this.defaults,a),this.$el=B('<div class="zd-radial-item-filter"></div>'),this.$donut=B('<div class="zd-radial-item-donut"></div>').appendTo(this.$el),this.$filler=B('<div class="zd-radial-item-filler"></div>').appendTo(this.$el),this.$center=B('<div class="zd-radial-item-center"></div>').appendTo(this.$donut),this.positionElements()}var B=a("jquery"),C=a("underscore"),D=a("cron-parser"),E=a("../Core/MVC/View"),F=a("jstz"),G=a("canvg"),H=a("moment"),I="YYYY-MM-DD HH:mm:ss.SSS",J="YYYYY-MM-DD HH:mm:ss.SSS",K="MM/DD/YYYY hh:mm:ss A",L="YYYY/MM/DD hh:mm:ss A",M=a("browser-filesaver"),N={};N.MetricFormatter=a("./MetricFormatter"),N.NiceScale=a("./NiceScale"),N.scopedPolyFill=a("./ScopedPolyfill");var O=a("./dialogTemplate.html");N.Dialog=E.extend({defaults:{template:O,mode:"dialog",draggable:!1,wide:!1,modal:"static",rejectButtonLabel:"Close",acceptButtonLabel:"Accept",rejectButtonTitle:"Close",acceptButtonTitle:"Accept"},events:{'click button[value="dialog-reject"]':"hide",'click button[value="dialog-accept"]':"accept"},initialize:function(a){var b=this;switch(this.settings=B.extend({},this.defaults,a),this.setElement(this.settings.template({rejectButtonLabel:this.settings.rejectButtonLabel,acceptButtonLabel:this.settings.acceptButtonLabel,rejectButtonTitle:this.settings.rejectButtonTitle,acceptButtonTitle:this.settings.acceptButtonTitle})),this.$el.appendTo("body"),this.$el.modal({show:!1,backdrop:this.settings.modal,keyboard:!1}),this.settings.mode){case"alert":this.$('button[value="dialog-accept"]').hide()}this.$head=this.$(".dialog-head"),this.$body=this.$(".dialog-body"),this.settings.draggable&&this.$el.draggable({start:function(){b.$el.removeClass("fade")},stop:function(){b.$el.addClass("fade")},cursor:"move"}),this.settings.wide&&this.$el.addClass("wide")},render:function(a,b){this.$body.empty(),this.$head.empty(),this.$body.append(a),void 0!==b?(this.$head.append(b),this.$head.show()):this.$head.hide(),this.$el.modal("show"),this.delegateEvents()},onBeforeHide:B.noop,hide:function(){var a=this;this.onBeforeHide()!==!1&&(this.$el.one("hidden",function(){a.trigger("dialog:rejected"),a.remove(),a.onReject()}),this.$el.modal("hide"))},onReject:B.noop,onBeforeAccept:B.noop,accept:function(){var a=this;this.onBeforeAccept()!==!1&&(this.$el.one("hidden",function(){a.trigger("dialog:accepted"),a.remove(),a.onAccept()}),this.$el.modal("hide"))},onAccept:B.noop});var P=C.template('<span><%= message %></span><i title="<%= acceptTitle%>" class="icon-ok icon-white"></i><i title="<%= cancelTitle%>" class="icon-remove icon-white"></i>');N.ConfirmMessage=E.extend({tagName:"span",className:"label label-warning pull-right confirmMessage",defaults:{template:P,message:"Warning",acceptTitle:"Accept",cancelTitle:"Cancel"},events:{"click .icon-ok":"accept","click .icon-remove":"cancel"},initialize:function(a){this.settings=B.extend({},this.defaults,a),this._deferred=B.Deferred(),this.result=this._deferred.promise()},accept:function(){this.remove(),this._deferred.resolve()},cancel:function(){this.remove(),this._deferred.reject()},render:function(){return this.$el.html(this.settings.template({message:this.settings.message,acceptTitle:this.settings.acceptTitle,cancelTitle:this.settings.cancelTitle})),this.delegateEvents(),this}}),N.isNotUndefinedOrNull=function(a){return void 0!==a&&null!==a},N.setCookie=function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);var e;e=null===c?encodeURI(b)+"":encodeURI(b)+"; expires="+d.toUTCString(),document.cookie=a+"="+e},N.getCookie=function(a){var b=window.sessionStorage.sessionId;if(!N.isNotUndefinedOrNull(b)){var c=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));b=c?decodeURIComponent(c[1]):void 0}return b},N.namespace=function(a,b){var c=[],d=b||window;return a&&(c=a.split(".")),B.each(c,function(a,b){d.hasOwnProperty(b)||(d[b]={}),d=d[b]}),d},N.isIE=function(){var a,b=window.navigator.userAgent,c=window.navigator.appVersion,d=-1!==b.indexOf("MSIE"),e=c.indexOf("Trident/")>0;return a=d||e?d||e:!1},N.reduceCssCalc=function(a,b){a=a||{};var c=Object.keys(a)[0];if(!c)return 0;var d=a[c];return b=b||B(window)[c](),-1!==d.indexOf("calc")?(d=d.substring(5,d.length-1),d=d.split("+").map(function(a){return a.trim()}).reduce(function(a,c){var d=[a,c];for(var e in d)-1!==d[e].indexOf("%")?d[e]=b*parseInt(d[e])*.01:d[e]=parseInt(d[e]);return d[0]+d[1]})):d=-1!==d.indexOf("%")?b*parseInt(d)*.01:parseInt(d),d},N.preventUnsavedGestures=function(){if(navigator.userAgent.match(/Macintosh/)&&navigator.userAgent.match(/Chrome/)){B(window);N.turnOnPrompt(!1),N.preventSwipeForBack()}},N.preventSwipeForBack=function(a){if(navigator.userAgent.match(/Macintosh/)&&navigator.userAgent.match(/Chrome/)){var b=a||B(window);if("undefined"==typeof b.mousewheel)return;b.mousewheel(function(a,b,c,d){if(!(Math.abs(d)>10||0===c)){var e,f,g=B(a.target).parents();e=!C(g).detect(function(a){var b=B(a).scrollLeft()>0;return b}),f=!C(g).detect(function(a){var b=B(a).scrollLeft()-(a.scrollWidth-a.clientWidth)<0;return b}),0>=c&&e===!0&&f===!1&&a.preventDefault(),c>=0&&e===!1&&f===!0&&a.preventDefault()}})}},N.turnOnPrompt=function(a){var b=B(window),c="Are you sure you want to leave the page unsaved?",d=null;d=a?a?a:c:"",b.unbind("beforeunload"),b.bind("beforeunload",function(){return d})},N.turnOffPrompt=function(){B(window).unbind("beforeunload")},N.validateDateInput=function(a){var b=/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/;return b.test(a)},N.validateTimeInput=function(a){var b=/(?:[0-1]?[0-9]|[2][1-4]):[0-5]?[0-9]:[0-5]?[0-9]\s?(?:am|pm)?/;return b.test(a)},N.validateUrl=function(a){var b=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,c=/^(https?|ftp):\/\/(.*)/;return b.test(a)||c.test(a)};var Q=Math.sqrt(2);A.prototype={defaults:{start:-30,angle:120,gap:8,radius:200,width:60,color:"rgba(0, 0, 0, 0.7)"},maxAngle:160,positionElements:function(){var a=this,b=this.options.gap,c=this.options.radius,d=Math.max(this.options.angle,1),e=90-this.options.start,f=90-d,g=1*c;0>f&&(g=c*(1+Math.sin(-f/180*Math.PI)));var h,i=this.options.radius,j=this.options.width,k=parseInt(this.$center.width())||20,l=parseInt(this.$center.height())||20,m=i-j,n=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),o=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);h=(n||o)&&1===e?"rotate("+e+"deg)":"rotate("+e+"deg) skew(0deg, "+f+"deg)",a.$el.css({width:g,height:g,borderWidth:b/2+"px",transform:h,transformOrigin:"100% 100%"}),h=(n||o)&&1===e?"rotate("+-(d-90)/2+"deg)":"skew(0deg, "+-f+"deg) rotate("+-(d-90)/2+"deg)",a.$donut.css({left:g-i,top:g-i,width:2*i,height:2*i,borderWidth:j,transform:h}),(n||o)&&(a.$el.css({transition:"0.1s ease-in","-ms-transition":"0.1s ease-in","-moz-transition":"0.1s ease-in","-webkit-transition":"0.1s ease-in"}),a.$donut.css({transition:"0.1s ease-in","-ms-transition":"0.1s ease-in","-moz-transition":"0.1s ease-in","-webkit-transition":"0.1s ease-in"})),a.$filler.css({left:g-m,top:g-m,width:2*m,height:2*m,transform:"skew(0deg, "+-f+"deg)"}),a.$center.css({left:-(m*(Q/2-1)+j*(Q/4)+k/2),top:-(m*(Q/2-1)+j*(Q/4)+l/2),transform:"rotate("+((d-90)/2-e)+"deg)"})},get:function(){var a=[];if(0===arguments.length)a=this.options;else if(1===arguments.length)a=this.options[arguments[0]]||null;else for(var b=0;b<arguments.length;b++)a[arguments[b]]=this.options[arguments[b]]||null;return a},set:function(a){"number"==typeof a.start&&(this.options.start=a.start),"number"==typeof a.angle&&(this.options.angle=Math.min(a.angle,this.maxAngle)),"number"==typeof a.gap&&(this.options.gap=a.gap),"number"==typeof a.radius&&(this.options.radius=a.radius),"number"==typeof a.width&&(this.options.width=a.width),"number"==typeof a.color&&(this.options.color=a.color),this.positionElements()},close:function(){var a=this.options;this.set({start:a.start+a.angle/2,angle:0})},remove:function(){this.$el.remove()}},N.Arc=A,N.getURLParameter=e,N.getHashParameter=f,N.parseUrlParams=g,N.getVisualizationDetails=i,N.getSourceDetails=n,N.pad=d,N.hoursToAMPM=o,N.hoursMinutesToAMPM=p,N.timeStringFormatter=q,N.formattedTimeOnly=r,N.formattedDateOnly=s,N.formattedDateToStringAMPM=t,N.formattedDate=u,N.timeZoneFromTime=v,N.timeZoneName=w,N.determineTimeZone=x,N.getPageUserData=y,N.getFunctionsForMetric=j,N.hasLastValue=k,N.isNumericAttributeType=l,N.getDateObjFromString=m,N.getMouseCoordinates=z,N.time={},N.time.patterns={millisecond:"MMM D YYYY, hh:mm:ss A",second:"MMM D YYYY, hh:mm:ss A",minute:"MMM D YYYY, hh:mm A",hour:"MMM D YYYY, hh A",day:"MMM D YYYY",week:"MMM D YYYY",month:"MMM YYYY",quarter:"[Q]Q YYYY",year:"YYYY",decade:"YYYY[s]"},N.time.datePatterns={second:"MMM D YYYY",minute:"MMM D YYYY",hour:"MMM D YYYY",day:"MMM D YYYY",week:"MMM D YYYY",month:"MMM YYYY",quarter:"[Q]Q YYYY",year:"YYYY"},N.time.timePatterns={second:"hh:mm:ss A",minute:"hh:mm A",hour:"hh A"},N.time.speedNames={second:1,minute:60,hour:3600,day:86400,week:604800,month:2678400,quarter:7862400,year:31536e3},N.time.speedLabels={second:"sec",minute:"min",hour:"hr",day:"day",week:"wk",month:"mnth",quarter:"q",year:"year"},N.time.getSpeedName=function(a){var b,c,d=N.time.speedNames,e="second";for(b in d)if(d.hasOwnProperty(b)&&(c=d[b],c>=a)){e=b;break}return e},N.time.getSpeedLabel=function(a){var b=N.time.getSpeedName(a);return N.time.speedLabels[b]},N.time.getStartVisTime=function(a,b){var c;return c=H.utc(a).format(I),"undefined"!=typeof b&&(c=b?"+"+c:"-"+c),c},N.time.isIncludeTime=function(a){var b=["millisecond","second","minute","hour"];return-1!==b.indexOf(a.toLowerCase())},N.time.format=function(a,b,c,d){var e=N.time.patterns[b.toLowerCase()];return d=d!==!1,d?H.utc(a,c).format(e):H(a,c).format(e)},N.time.convertFromServerDate=function(a,b){var c,d;return"string"!=typeof a?a:a.match(/[$]/)?"Invalid date":(c=N.time.getFilterGranularity(a),c?(d=N.time.getFilterTimeByGranularity(a,c),b&&d.endOf(c)):d=H.utc(a,J),d.toDate())},N.time.formatFromServerDate=function(a,b){var c=N.time.convertFromServerDate(a);return"Invalid date"===c?c:N.time.format(c,b)},N.time.convertToServerDate=function(a,b){return"string"==typeof a?a:b?H.utc(a).format(I):H(a).format(I)},N.time.getFilterGranularity=function(a){var b=null;return"string"!=typeof a?null:(a.match(/^\d{2,4}$/g)?b="year":a.match(/^\w{3}\s\d{4}$/g)?b="month":a.match(/^\w{3}\s\d*\s\d{4}$/g)?b="day":a.match(/^\w{3}\s\d*\s\d{4}\s\d*\sAM|PM$/g)?b="hour":a.match(/^\w{3}\s\d*\s\d{4}\s\d*:\d*\sAM|PM$/g)?b="minute":a.match(/\d{4}-\d{2}-\d{2}$/g)&&(b="day"),b)},N.time.getPreviousHour=function(a){return a-N.time.millisecondsIn.hour},N.time.getLowerStep=function(a){var b=["MINUTE","HOUR","DAY","WEEK","MONTH","YEAR"],c=b.indexOf(a),d=c-1;return 0>d&&(d=0),b[d]},N.time.getHigherStep=function(a,b){var c="",d=["MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","YEAR"],e=d.indexOf(a.toUpperCase()),f=e+1;return c=f>=d.length?"YEAR":d[f]},N.time.getMaxStep=function(a,b,c){var d=null,e=["MILLISECOND","SECOND","MINUTE","HOUR","DAY","WEEK","MONTH","QUARTER","YEAR"],f=e.indexOf(a.toUpperCase()),g=e.indexOf(b.toUpperCase());if(-1===f)throw"Step 1 is wrong";if(-1===g)throw"Step 2 is wrong";return d=f>g?a:b},N.time.getMinStep=function(a,b,c){var d=null,e=N.time.getMaxStep(a,b,c);return d=e===a?b:a},N.time.compareSteps=function(a,b){return a===b?0:N.time.getMaxStep(a,b)===a?1:-1},N.time.getRangeForStep=function(a,b,c,d){var e=d?H.utc(a):H(a),f=d?H.utc(b):H(b);return{min:e.startOf(c).toDate(),max:f.endOf(c).toDate()}},N.time.getRoundedDateRange=function(a,b,c,d){var e,f,g,h=c,i=b-a,j=H.duration(i),k=1;return i>0&&(h||(h=j.asYears()>=1?"YEAR":j.asMonths()>=1?"MONTH":j.asWeeks()>=1?"WEEK":j.asDays()>=1?"DAY":j.asHours()>=1?"HOUR":"MINUTE"),e=d?H.utc(a):H(a),f=d?H.utc(b):H(b),e.startOf(h),f.endOf(h),g=f.diff(e,h,!0),k=Math.ceil(g)),{step:h,amount:k}},N.time.getStepForMinimalGranulation=function(a,b,c,d){for(var e,f,g=["YEAR","MONTH","WEEK","DAY","HOUR","MINUTE"],h=0;h<g.length;h++){var i=g[h],j=N.time.getRoundedDateRange(a,b,i,c);if(j.amount>d){f||(f=j),e={name:f.step,limit:f.amount};break}f=j}return e||(e={name:f.step,limit:f.amount}),e},N.time.forceTimeToUTC=function(a){var b=H(a).utcOffset();return a+60*b*1e3},N.time.forceTimeToLocal=function(a){var b=H(a).utcOffset();return a-60*b*1e3},N.time.TIME_STEPS_UTC=["YEAR","MONTH","WEEK","DAY"],N.time.days=[{acr:"Sun",full:"Sunday"},{acr:"Mon",full:"Monday"},{acr:"Tue",full:"Tuesday"},{acr:"Wed",full:"Wednesday"},{acr:"Thu",full:"Thursday"},{acr:"Fri",full:"Friday"},{acr:"Sat",full:"Saturday"}],N.time.months=[{acr:"Jan",full:"January",days:31},{acr:"Feb",full:"February",days:28},{acr:"Mar",full:"March",days:31},{acr:"Apr",full:"April",days:30},{acr:"May",full:"May",days:31},{acr:"Jun",full:"June",days:30},{acr:"Jul",full:"July",days:31},{acr:"Aug",full:"August",days:31},{acr:"Sep",full:"September",days:30},{acr:"Oct",full:"October",days:31},{acr:"Nov",full:"November",days:30},{acr:"Dec",full:"December",days:31}],N.time.maps={days:function(){return N.time.days.map(function(a){return a.acr})}(),months:function(){return N.time.months.map(function(a){return a.acr})}()},N.time.cron={emptyCron:"* * * * * *",parse:function(a,b){a=a||this.emptyCron;var c=a.split(" ");5===c.length&&c.unshift("*");var d={second:c[0],minute:c[1],hour:c[2],dayOfMonth:c[3],month:c[4],dayOfWeek:c[5]};if(d=this.fixForSeconds(d),b)for(var e in d)d.hasOwnProperty(e)&&(d[e]=d[e].replace("*",""));return d},fixForSeconds:function(a){return"*"===a.second&&(a.second="0"),a},fixForZeroes:function(a){var b=(Object.keys(a),[]);for(var c in a){if(-1===["0","*"].indexOf(a[c]))break;b.push(c)}return b.forEach(function(b,c){a[b]="0"}),a},update:function(a,b){a=a||this.emptyCron,b=b||{};var c=this.parse(a);for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d].toString().replace("every ","*/"));c=this.fixForSeconds(c),c=this.fixForZeroes(c);var e=[];for(var f in c)c.hasOwnProperty(f)&&e.push(c[f]);var g=e.join(" "),h=this.validate(g);return h.error?h:g},readCron:function(a,b){a=a||this.emptyCron;var c={iterator:!1,currentDate:(new Date).toString()};return b&&(c.currentDate=b),D.parseExpression(a,c)},humanToCron:function(a){},cronToHuman:function(a){var b=this.readCron(a);b._fields;return b},nextExecuteDate:function(a,b){a=a||this.emptyCron;var c=this.validate(a);if(c.error)return c.details;var d=this.next(a,b);return d=H(d.getTime())},next:function(a,b){a=a||this.emptyCron;var c=this.readCron(a,b),d=!1;for(var e in c._fields)0===c._fields[e].length&&(d=!0);if(d)throw new Error("Unexpected exception. Impossible to get next run time");return c.next()},validate:function(a){function b(a){c.match(a.message)||(c+=a.message+"\n")}if(!a)return{details:"Invalid Input. Value is empty.",error:!0};var c="";try{var d=a.split(" ").filter(function(a){return!!a});if(d.length<5)throw new Error("Your CRON expression is invalid.");a=d.join(" "),this.readCron(a),this.next(a)}catch(e){b(e)}return c?{details:c,error:!0}:!0}},N.time.millisecondsIn={},N.time.millisecondsIn.sec=1e3,N.time.millisecondsIn.min=60*N.time.millisecondsIn.sec,N.time.millisecondsIn.hour=60*N.time.millisecondsIn.min,N.time.millisecondsIn.day=24*N.time.millisecondsIn.hour,N.time.millisecondsIn.week=7*N.time.millisecondsIn.day,N.time.millisecondsIn.month=31*N.time.millisecondsIn.day,N.time.millisecondsIn.year=365*N.time.millisecondsIn.day,N.time.millisecondsIn.second=N.time.millisecondsIn.sec,N.time.millisecondsIn.minute=N.time.millisecondsIn.min,N.time.getDataPointsNumb=function(a,b,c){var d;return b=H.utc(b),d=H.duration(b.diff(a)),d.as(c)},N.time.getFilterTimeByGranularity=function(a,b){var c=null;switch(b){case"year":c=H.utc(a,"YYYYY");break;case"month":c=H.utc(a,"MMM YYYYY");break;default:c=H.utc(a)}return c},N.time.convertDynamicTime=function(a,b,c,d,e){var f,g,h,i=N.time.convertFromServerDate(a,e),j="Invalid date"!==i.toString(),k="string"==typeof a&&0!==a.indexOf("$"),l=/\+|\-/;if(j)return i;if(k){var m=N.time.getFilterGranularity(a);return N.time.getFilterTimeByGranularity(a,m)}return i=H.utc(),-1!==a.search(l)&&(g=a.split(l)[1],g={dir:a.match(l)[0],amount:g.match(/\d+/g)[0],unit:g.match(/[a-z]+/g)[0]},a=a.split(l)[0]),"$now"!==a&&(f=0===a.indexOf("$start_of_"),h=a.replace("$start_of_","").replace("$end_of_","").replace("_",""),"data"===h&&(i=H.utc(f?b:c)),f?i.startOf(h):i.endOf(h)),g&&("+"===g.dir?i.add(g.amount,g.unit):i.subtract(g.amount,g.unit)),i.startOf(d).toDate()},N.time.getFromDateByLimit=function(a,b,c){return H.utc(a).subtract(b-1,c+"s").startOf(c).valueOf()},N.time.getToDateByLimit=function(a,b,c){return H.utc(a).add(b-1,c+"s").startOf(c).valueOf()},N.time.getMinGranularityByLimit=function(a,b,c){var d,e="SECOND";do e=N.time.getHigherStep(e),d=N.time.getDataPointsNumb(a,b,e);while(d>c&&"YEAR"!==e);return e},N.time.getEndTimeWithinStep=function(a,b){return H(a).endOf(b).valueOf()},N.convertTimeToStringUTC=function(a,b){var c,d;return"undefined"==typeof b&&(b=!0),"string"==typeof a&&(a=N.getDateObjFromString(a)),c=b?H.utc(a):H(a),d=c.format(I),b&&(d+=" UTC"),d},N.convertTimeToShortStringUTC=function(a,b){var c=N.convertTimeToStringUTC(a,b);return c.split(" ")[0]},N.parsePivotAttribute=function(a){var b=a.name;return b.match(/\$to_/g)&&(b=b.match(/\w+/g)[1]),b},N.noUTCString=function(a){return"string"==typeof a&&-1!==a.indexOf("UTC")&&(a=a.replace("UTC","").trim()),a},N.getDynamicTimeString=function(a){var b,c;return b=a.split("$")[1].split("_").join(" "),-1!==a.search(/[-+]/)&&(c=a.split("_"),c=c[c.length-2],c>1&&(b+="s")),b},N.getStringGmtTime=function(a,b){return b=b||K,H.utc(a).format(b)},N.log10=a("./log10"),N.isRetina=function(){return window.devicePixelRatio>1},N.keepLinebreaks=function(a){return a&&a.replace?a.replace(/\n|\r/g,"<br>"):a},N.toTitleCase=function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},N.MODE={NORMAL:0,WIDGET:1,EMBEDDED:2,NATIVE:3};var R=-1;N.mode=function(){if(-1!==R)return R;R=N.MODE.NORMAL;var a=e("__target");if("widget"===a)R=N.MODE.WIDGET;else if("embedded"===a)R=N.MODE.EMBEDDED;else{var b=/(iPhone|iPod|iPad)/i.test(navigator.userAgent),c=/(Safari)/i.test(navigator.userAgent);b&&!c&&(R=N.MODE.NATIVE)}return R},N.getHiddenControls=function(){var a=e("hidecontrol");return a=a?a.split(","):[]},N.visualizationStartedUnique={_counter:0},N.visualizationStarted=function(a,b){var c={WORD_CLOUD:1e3,US_MAP:2e3,VERTICAL_BARS:100,TREE_MAP:1e3,HEAT_MAP:1e3,LINE_AND_BARS:100,VERTICAL_CLUSTERED:900,STACKED_BARS:900,LINE_CHART:100,PIE:600,PIVOT_TABLE:2e3,DEFAULT:100},d=c.DEFAULT;if(a){if(N.visualizationStartedUnique[a.UUID])return!1;N.visualizationStartedUnique[a.UUID]=!0,d=a.customReadyStatusDelay?a.customReadyStatusDelay:c[a.config.type]||c.DEFAULT,
d+=1002}N.preventSwipeForBack();var e="screenshot_status_ready",f=a.UUID+" started with delay "+d+"ms.",g=B("body");return setTimeout(function(){N.visualizationStartedUnique._counter++,b===N.visualizationStartedUnique._counter&&(g.addClass(e),console.log(f))},d),!0},N.isSingleVizualization=function(){return Zoomdata.main.currentSection.widgetGrid.childViews.length<2},N.isSmallWidget=function(a,b){var c=500,d=380;return c>=a||d>=b},N.getWidgetSizeClass=function(a,b){var c=500,d=380,e=1e3,f=700,g=["small","medium","large"],h=g[1];return(a>e||b>f)&&(h=g[2]),(e>=a||f>=b)&&(a>=c||b>=d)&&(h=g[1]),(c>a||d>b)&&(h=g[0]),h},N.generateUUID=function(){return"xxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},"undefined"!=typeof Hammer&&(Hammer.plugins.fakeMultitouch(),B(function(){B("body").hammer()})),N.getVersion=function(){var a,b=B.Deferred();return Zoomdata.pageData&&Zoomdata.pageData.version&&(a=Zoomdata.pageData.version),a?b.resolve(a):B.ajax({url:"service/version/",success:function(a){b.resolve(a)},fail:function(){b.reject()}}),b.promise()},N.getUrlVars=function(a){var b={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,e){a&&(e=decodeURI(e)),b[d]=e}),b},N.detectTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},N.sourceExists=function(a,b,c){var d=!1;return admin.sources.each(function(a){b.toLowerCase()===a.get("name").toLowerCase()&&a.get("id")!==c&&(d=!0)}),d},N.isIOS=function(){return/(iPhone|iPod|iPad)/i.test(navigator.userAgent)},N.rTrim=function(a){return a.replace(/\s+$/,"")},N.lTrim=function(a){return a.replace(/^\s+/,"")},N.appendStylesWithScoping=function(a,b){a&&a.each(function(a,c){var d=document.createElement("STYLE"),e=!1;B(c.attributes).each(function(a,b){var c=b.name||b.nodeName,f=b.value||""===b.value?b.value:b.nodeValue;e=e||"scoped"===c,d.setAttribute(c,f)}),d.innerHTML=c.innerText||c.textContent||B(c).text(),b.appendChild(d),e&&B(d).scopedPolyFill()})},N.getImgFromSvg=function(a){function b(a){var b=o.find("style"),c="",d="@font-face {",e="}";for(var f in a)a.hasOwnProperty(f)&&(c+=[f,a[f]].join(":")+";");var g=[d,c,e].join("");b.get(0).innerHTML+=g}function c(){var a=document.styleSheets,b=B.Deferred(),c=[];for(var e in a)if(a.hasOwnProperty(e)){var f=a[e].rules||a[e].cssRules;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];if(h instanceof window.CSSFontFaceRule&&"source-sans-pro"===h.style.fontFamily){if(h.style.src.match("base64"))continue;c.push(d(h))}}}return B.when.apply(B,c).then(b.resolve),b.promise()}function d(a){for(var b=B.Deferred(),c=[],d=a.style.src.split(","),f=0;f<d.length;f++){var g=d[f];c.push(e(g))}return B.when.apply(B,c).done(function(){b.resolve({"font-family":a.style.fontFamily,"font-weidht":a.style.fontWeight,src:[].join.call(arguments,", ")})}),b.promise()}function e(a){var b=B.Deferred(),c=a.match(/format\(([^\)]*)\)/)[1],d=a.match(/url\(([^\)]*)\)/)[1];return B.ajax({type:"GET",url:d,success:function(a){var d=["url(data:application/x-font-woff;charset=utf-8;base64,",window.btoa(unescape(encodeURIComponent(a))),") format(",c,")"].join("");b.resolve(d)}}),b.promise()}function f(){var b=B(a).get(0).viewBox.baseVal;if(b&&(b.x||b.y||b.width||b.height)){var c=[b.x,b.y,b.width,b.height].join(", ");return'viewBox="'+c+'"'}return""}function g(a,b){function c(a,b){var c=N.getStyles(a),d=a[0];"text"===d.tagName&&"undefined"==typeof c["font-size"]&&(c["font-size"]=k),b.css(c)}a.children().length?a.children().each(function(){var a=B(this),c=a.clone();c.children().remove(),b.append(c),g(a,c)}):c(a,b)}var h=B.Deferred(),i=B(a).width(),j=B(a).height(),k=B("body").css("font-size"),l=a.style.transform,m=a.style.webkitTransform,n={prefix:'<svg version="1.1"xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"width="'+i+'" height="'+j+'" '+f()+"><defs><style></style></defs>",postfix:"</svg>"},o=B([n.prefix,n.postfix].join(""));return c().done(function(){for(var c=0;c<arguments.length;c++){var d=arguments[c];b(d)}B(a).each(function(){var a=B(this);g(a,o)});var e=document.createElement("canvas");e.width=i,e.height=j,document.body.appendChild(e);var f=document.createElement("div");f.appendChild(o.get(0)),G(e,f.innerHTML,{ignoreMouse:!0,ignoreAnimation:!0});var k=new Image;k.width=i,k.height=j,k.style.transform=l,k.style.webkitTransform=m,k.onload=function(){document.body.removeChild(e),h.resolve(k)};var n=e.toDataURL("image/png");k.src=n}),h.promise()},N.downloadParsedData=function(a,b,c){var d=H().format("YYYYMMDDhhmmss"),e=b.toLowerCase().replace(" ","_"),f=c.split("/")[1],g=new Blob([a],{type:c});e=e+"_"+d+"."+f,M(g,e)},N.add$RemoveEvent=function(){B.event.special.removed={remove:function(a){a.handler&&a.handler()}}},N.getStyles=function(a){function b(a){var b=document.styleSheets,d={};for(var e in b)if(b.hasOwnProperty(e)){var f=b[e].rules||b[e].cssRules;for(var g in f)if(f.hasOwnProperty(g))try{a.is(f[g].selectorText)&&(d=B.extend(d,c(f[g].style),c(a.attr("style"))))}catch(h){}}return d}function c(a){var b={};if(!a)return b;if(a instanceof window.CSSStyleDeclaration)for(var c in a)a[c].toLowerCase&&(b[a[c].toLowerCase()]=a[a[c]]);else if("string"==typeof a){a=a.split(/[;][ ]?/);for(var d in a)if(a.hasOwnProperty(d)){var e=a[d].split(": ");b[e[0].toLowerCase()]=e[1]}}return b}return b(a)},N.stopLoadImages=function(){void 0!==window.stop?window.stop():void 0!==document.execCommand&&document.execCommand("Stop",!1)},N.transducers=a("./transducers"),N.htmlEntities=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},N.getHTMLText=function(a){var b="";return B(a).each(function(a,c){var d=c.innerHTML;d&&(b+=d.trim())}),b||a},N.getVendorPrefix=function(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];return"-"+b+"-"},N.hexToRgb=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a.toLowerCase());return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null},N.rgbToHex=function(a){function b(a){var b=a.toString(16);return 1===b.length?"0"+b:b}return"#"+b(a.r)+b(a.g)+b(a.b)},N.getGradientColor=function(a,b,c){function d(a,b){return a+Math.round((b-a)*c)}var e={};return e.r=d(a.r,b.r),e.g=d(a.g,b.g),e.b=d(a.b,b.b),N.rgbToHex(e)},function(a){function b(a){var b=document.querySelectorAll("svg image"),c=b.length;0===c&&a(),b.forEach(function(b){if(b.getAttribute("xlink:href")){var d=b.getAttribute("xlink:href").value;if(/^http/.test(d)&&!new RegExp("^"+window.location.host).test(d)){var e="Cannot render embedded images linking to external hosts.";throw new Error(e)}}var f=document.createElement("canvas"),g=f.getContext("2d"),h=new Image;h.src=b.getAttribute("xlink:href"),h.onload=function(){f.width=h.width,f.height=h.height,g.drawImage(h,0,0),b.setAttribute("xlink:href",f.toDataURL("image/png")),c--,0===c&&a()}})}function c(a){for(var b="",c=document.styleSheets,d=0;d<c.length;d++)for(var e=c[d].cssRules,f=0;f<e.length;f++){var g=e[f];if("undefined"!=typeof g.style){var h=a.querySelectorAll(g.selectorText);h.length>0&&(b+=g.selectorText+" { "+g.style.cssText+" }\n")}}var i=document.createElement("style");i.setAttribute("type","text/css"),i.innerHTML="<![CDATA[\n"+b+"\n]]>";var j=document.createElement("defs");return j.appendChild(i),j}var d="undefined"!=typeof a&&a||this,e='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';d.svgAsDataUri=function(a,d,f){d=d||1,b(function(){var b=document.createElement("div"),g=a.cloneNode(!0),h=a.clientWidth,i=a.clientHeight,j="http://www.w3.org/2000/xmlns/";g.setAttribute("version","1.1"),g.setAttributeNS(j,"xmlns","http://www.w3.org/2000/svg"),g.setAttributeNS(j,"xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("width",h*d),g.setAttribute("height",i*d),g.setAttribute("viewBox","0 0 "+h+" "+i),b.appendChild(g),g.insertBefore(c(g),g.firstChild);var k=e+b.innerHTML,l="data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(k)));f&&f(l)})},d.saveSvgAsPng=function(a,b){var c=B.Deferred();return d.svgAsDataUri(a,b,function(a){var b=new Image;b.src=a,b.onload=function(){var a=document.createElement("canvas"),d=new Image;a.width=b.width,a.height=b.height;var e=a.getContext("2d");e.drawImage(b,0,0),d.src=a.toDataURL("image/png"),d.onload=function(){c.resolve(d)}}}),c.promise()}}(N),b.exports=N},{"../Core/MVC/View":5,"./MetricFormatter":146,"./NiceScale":147,"./ScopedPolyfill":148,"./dialogTemplate.html":150,"./log10":152,"./transducers":156,"browser-filesaver":237,canvg:94,"cron-parser":240,jquery:109,jstz:111,moment:243,underscore:244}],150:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="modal hide fade">\n    <div class="modal-header">\n        <button title="Close" value="dialog-reject" class="close">&times;</button>\n        <h3 class="dialog-head pull-left"></h3>\n        <div class="clearfix"></div>\n    </div>\n    <div class="modal-body dialog-body">\n    </div>\n    <div class="modal-footer dialog-controls">\n        <button title="'+(null==(__t=rejectButtonTitle)?"":__t)+'" value="dialog-reject" class="btn btnNo">'+(null==(__t=rejectButtonLabel)?"":__t)+'</button>\n        <button title="'+(null==(__t=acceptButtonTitle)?"":__t)+'" value="dialog-accept" class="btn btn-primary btnYes">'+(null==(__t=acceptButtonLabel)?"":__t)+"</button>\n    </div>\n</div>";return __p}},{lodash:242}],151:[function(a,b,c){b.exports=a("./Utilities")},{"./Utilities":149}],152:[function(a,b,c){"use strict";b.exports=function(a){return Math.log(a)/Math.log(10)}},{}],153:[function(a,b,c){"use strict";function d(a){this._wrapped=a}d.prototype.unwrap=function(){return this._wrapped},d.isReduced=function(a){return a instanceof d},b.exports=d},{}],154:[function(a,b,c){"use strict";b.exports=function(a,b){switch(arguments.length){case 0:return[];case 1:return a;default:return a.concat([b])}}},{}],155:[function(a,b,c){"use strict";b.exports=function(a){return function(b){return function(c,d){switch(arguments.length){case 0:return b();case 1:return b(c);default:return a(d)?b(c,d):c}}}}},{}],156:[function(a,b,c){"use strict";var d=a("./append"),e=a("./filter"),f=a("./map"),g=a("./reduce"),h=a("./Reduced"),i=a("./transduce");b.exports={append:d,filter:e,map:f,reduce:g,Reduced:h,transduce:i}},{"./Reduced":153,"./append":154,"./filter":155,"./map":157,"./reduce":158,"./transduce":159}],157:[function(a,b,c){"use strict";b.exports=function(a){return function(b){return function(c,d){switch(arguments.length){case 0:return b();case 1:return b(c);default:return b(c,a(d))}}}}},{}],158:[function(a,b,c){"use strict";var d=a("./Reduced");b.exports=function(a,b,c){for(var e=c,f=0;f<a.length;f++)if(e=b(e,a[f]),d.isReduced(e))return e.unwrap();return e}},{"./Reduced":153}],159:[function(a,b,c){"use strict";var d=a("./reduce");b.exports=function(a,b,c){var e=a(b),f=e(),g=d(c,e,f);return e(g)}},{"./reduce":158}],160:[function(a,b,c){"use strict";function d(){var a=window.getComputedStyle(document.documentElement,""),b=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];return"-"+b+"-"}var e=a("jquery"),f=a("underscore"),g=a("../../utilities"),h=a("../../Core/MVC"),i=a("../../utilities/MetricFormatter"),j=a("./colorKeyTemplate.html"),k=a("./colorItemTemplate.html"),l=a("./colorListTemplate.html"),m=h.View.extend({events:{"click .close-color-key":"hideLegend"},defaults:{isDraggable:!0},initialize:function(a){if(f.bindAll(this,"render","remove"),!a.controller)throw new Error("controller must be defined");this.controller=a.controller,delete a.controller,this.controller.state.colorDataObj&&(this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel()),this.autoShow=a.autoShow,a.colorLegendPosition&&this.$el.css(a.colorLegendPosition),a.type?(this.type=a.type,delete a.type):this.type="gradient",h.View.prototype.initialize.apply(this,arguments),this.listenTo(this.controller,"visualization:change",this.updateColorState),this.listenTo(this.controller,"visualization:dataUpdate",this._colorsUpdate),this.listenTo(this.controller,"resize",this._colorKeyPosition),this.options.isDraggable&&"undefined"!=typeof e.fn.draggable&&this.setupDrag(a)},render:function(){var a,b=this,c="",d=this.$el.find(".color-key-list-view"),e=d.scrollTop()||0,f=this.options.showCloseBtn||!1;return!this.colorMetricLabel&&!this.controller.state.colorDataObj||this.controller.state.colorDataObj.isMetric()&&"none"===this.controller.state.colorDataObj.get("name")?(this.hide(),this):(this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel(),d.data("mouseScrolling")?(d.off("mouseScrollingEnd").on("mouseScrollingEnd",function(){b.render()}),this):(this.colorDataObj=this.controller._controller.metrics[this.colorMetricLabel],this.colorDataObj&&this.colorDataObj[0]?(this.originalColorDataObj=this.colorDataObj,this.colorDataObj=this.colorDataObj[0],this.multiMetric=!0):this.controller.state.colorDataObj&&!this.controller.state.colorDataObj.isMetric()&&(this.colorDataObj=this.controller.state.colorDataObj),!this.colorDataObj||this.colorDataObj.isNoData()?(this.hide(),this):(this.multiMetric&&this.colorDataObj.isMetric()?a=this.colorDataObj.metric.label:(a=this.colorDataObj.getColorKeyLabel(),this.colorDataObj.isMetric()&&(c=this.colorDataObj.metric.func,c&&"none"!==this.colorDataObj.metric.name&&(a+=" ("+c+")"))),this.$el.empty().append(j({metricLabel:a,showCloseBtn:f})),this.initColorsMap(),this.initScale(),this.initLabels(),this.autoShow?this.show():this.$el.is(":visible")&&this.fixPosition(),d=this.$el.find(".color-key-list-view"),d.scrollTop(e),d[0].scrollHeight>d.height()?d.addClass("scrolling-list"):d.removeClass("scrolling-list"),this.initScrollingDetection(d),this.delegateEvents(),this)))},setupDrag:function(a){var b=this,c=!1;this.$el.draggable({start:function(){e(this).css({bottom:"auto",right:"auto"})},stop:function(){b.fixPosition(!0)},cursor:"move",cancel:".scrolling-list",containment:this.$el.parent()}),this.$el.on("drag mousedown",function(a){a.stopPropagation()}),this.$el.on("drag",function(a){return c?!1:void 0}),this.el.addEventListener("scroll",function(a){c=!0},!0),this.$el.on("mouseup",function(a){c=!1})},_colorsUpdate:function(){this.render()},_colorKeyPosition:function(){this.fixPosition()},updateColorState:function(){this.controller.state.colorDataObj?this.colorMetricLabel=this.controller.state.colorDataObj.getColorKeyLabel():(this.colorMetricLabel=null,this.colorDataObj=null)},initScrollingDetection:function(a){var b=!1;a.on("mousedown",function(){b=!0}).on("scroll",function(){b&&a.data("mouseScrolling",!0)}).on("mouseup",function(){b=!1,a.data("mouseScrolling",!1),a.trigger("mouseScrollingEnd")})},fixPosition:function(a){var b,c,d=this.$el.parent().width(),e=this.$el.parent().height(),f=this.$el.width(),g=this.$el.height(),h=d-f+5,i=e-g+5,j=this.$el.attr("savedPosition");this.$el.hasClass("ui-draggable-dragging")&&!a||!this.$el.is(":visible")||(!a&&j&&this.$el.css(JSON.parse(j)),b=this.$el.position(),b.top>i?b.top=i:b.top<0&&(b.top=0),b.left>h?b.left=h:b.left<0&&(b.left=0),b.top>(e-g)/2?(b.bottom=i-b.top-5,b.bottom<0&&(b.bottom=0),b.top="auto"):b.bottom="auto",b.left>(d-f)/2?(b.right=h-b.left-5,b.right<0&&(b.right=0),b.left="auto"):b.right="auto",a&&(c=JSON.stringify(b),this.$el.attr("savedPosition",c),this.controller.state.colorDataObj.set("colorLegendPosition",c,{silent:!0})),this.$el.css(b))},cloneTo:function(a){var b=this.$el.find(".color-key").clone().show();a.append(b),this.initScrollingDetection(b.find(".color-key-list-view"))},initColorsMap:function(){var a=this;if(this.colorDataObj){this.colorsMap=[];var b=this.colorDataObj.domainName||[],c=this.colorDataObj.colorRange()||[];b.forEach(function(b,d){a.colorsMap.push({name:b,color:c[d]})})}},initScale:function(){var a=d(),b=this.$el.find(".color-key-scale").empty(),c=this.$el.find(".color-key-list-view").empty(),g=this.colorDataObj.colorRange()||[],h=this._isOneColorRange(),i=g[g.length-1];if(this.unique_metrics_names=f.uniq(f.map(f.filter(this.controller.state.metrics.models,function(a){return"color"!==a.get("metricType")}),f.compose(f.property("name"),f.property("attributes")))),!g.length)return void b.hide();if(this.colorDataObj.isMetric()&&"none"===this.colorDataObj.metric.name&&(g=[g[0],g[0]]),this.multiMetric||!this.colorDataObj.isMetric()||"gradient"!==this.controller.state.divergingColorRange&&"none"!==this.colorDataObj.metric.name)if(!this.multiMetric&&this.colorDataObj.isMetric()&&g.length<=3)this.$el.find(".color-key").css("width",""),c.hide(),b.show().css("width","85%").css("background","transparent"),h&&(g=[i]),e.each(g,function(a,c){b.append(k({color:c}))}),b.find(".color-item").css("width",100/g.length+"%");else{this.$el.find(".color-key").css("width","auto"),b.hide(),c.show();var j=this.colorsMap,m=this.unique_metrics_names;j.length>0?j.filter(function(a){return-1!==m.indexOf(a.name)}).forEach(function(a){c.append(l({color:a.color,display:!0}))}):g.forEach(function(a){c.append(l({color:a,display:!0}))})}else this.$el.find(".color-key").css("width",""),c.hide(),h&&(g=[g[0],g[0]]),b.show().css("width",null).css("background",a+"linear-gradient(left, "+g.join(",")+")").css("background","linear-gradient(to right, "+g.join(",")+")")},_isOneColorRange:function(){var a=this.colorDataObj.domain()||[];return a.length&&a[0]===a[a.length-1]},initLabels:function(){var a,b,c,d=this,h=this.colorDataObj.domain()||[],j=this.$el.find(".color-key-list-view li"),k=this.colorDataObj.colorRange()||[],l=this.$el.find(".color-key-labels").empty(),m=this.controller.state,n=m.get("timeTrendStep"),o=this.colorDataObj.isMetric();if(o){a=this.controller.fields.findWhere({name:this.colorDataObj.metric.name});var p=a.get("storageConfig")||{},q=p.type||a.get("type");b=new i(q),"gradient"===this.controller.state.divergingColorRange&&(h=[h[0],h[h.length-1]]),"none"===this.colorDataObj.metric.name&&(h=[])}if(!this.multiMetric&&o&&h&&"undefined"!=typeof h[0])e.each(h,function(a,c){var e=c%1!==0;c>10?h[a]=c=c.toFixed(0):e&&(h[a]=c=c.toFixed(2)),(h.length<=4&&k.length<4||"gradient"===d.controller.state.divergingColorRange)&&l.append('<span class="color-key-label">'+b.format(c)+"</span>")}),(h.length>4||h.length===k.length)&&j.each(function(a,c){var d=b.format(h[a]),e=h[a+1];d+=e?" - "+b.format(e):" +",c.innerHTML+=d});else if(this.multiMetric||!o){c=!o&&m.isSupportTimeGroup(this.colorDataObj.field);var r=d.controller.state.metrics.filter(function(a){return"color"!==a.get("metricType")}).map(function(a){return a.get("name")}),s=d.controller.fields.filter(function(a){return f.contains(r,a.get("name"))}).map(function(a){return a.get("label")});j.each(function(a,b){var d=s[a];d=o?s[a]:c?g.time.formatFromServerDate(h[a],n):h[a],b.innerHTML+=g.htmlEntities(d)})}var t=this.controller.state.divergingColorRange;("gradient"!==t&&h.length<=4||!this.colorDataObj.isMetric())&&l.find(".color-key-label").css("width",100/h.length+"%")},show:function(a){this.$el.is(":visible")||(this.$el.show(),this.fixPosition(!0),a&&(this.autoShow=!0))},hideLegend:function(){this.hide(!0)},hide:function(a){this.$el.hide(),a&&(this.autoShow=!1)},isVisible:function(){return this.$el.is(":visible")}});b.exports=m},{"../../Core/MVC":6,"../../utilities":151,"../../utilities/MetricFormatter":146,"./colorItemTemplate.html":161,"./colorKeyTemplate.html":162,"./colorListTemplate.html":163,jquery:109,underscore:244}],161:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="color-item" style="background: '+(null==(__t=color)?"":__t)+';"></div>';return __p}},{lodash:242}],162:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="color-key">\n    ',showCloseBtn&&(__p+='\n        <div class="close-color-key zd icon close"></div>\n    '),__p+='\n    <div class="color-key-content">\n        <div class="color-key-metric-label"><b>'+__e(metricLabel)+'</b></div>\n        <div class="color-key-linear-view">\n            <div class="color-key-scale"></div>\n            <div class="color-key-labels"></div>\n        </div>\n        <ul class="color-key-list-view unstyled" style="display: none;"></ul>\n    </div>\n</div>';return __p}},{lodash:242}],163:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<li class="color-list-item" ',display||(__p+=' style="display: none;" '),__p+=' >\n	<div class="color-item" style="background: '+(null==(__t=color)?"":__t)+';" color="'+(null==(__t=color)?"":__t)+'"></div>\n</li>';return __p}},{lodash:242}],164:[function(a,b,c){b.exports=a("./ColorKey")},{"./ColorKey":160}],165:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../utilities"),g=a("../../Core/MVC"),h=g.View,i=g.Model,j=a("../../controls"),k=a("./../../components/Screenshotter"),l=j.PalettePopup,m=j.Notification,n=a("./dashboardDownloadTemplate.html"),o=a("./exportToExcelDoneMessage.html"),p=a("./exportToExcelFailMessage.html"),q=a("./spinnerIcon.html"),r=a("./downloadIcon.html"),s=a("../../views/PdfExport"),t=(a("moment"),a("browser-filesaver")),u=(a("../../Core/MVC").Events,a("./../RawDataExport")),v=i.extend({defaults:{sortDir:"asc",limit:-1,rangeType:"ALL"}}),w=h.extend({template:n,className:"zdView-DashboardDownload dashboard-download",defaults:{extraHeight:0,extraWidth:0},events:{"click button.download":"_downloadClick",'click button[value="pdf"]':"showPdfOpts",'click button[value="raw"]':"showRawDataOpts"},initialize:function(a){if(a=a||{},!(a.$target instanceof d))throw new Error("$target expected to be a jQuery object");this.$target=a.$target,delete a.$target,h.prototype.initialize.apply(this,arguments),this.disableDashboardExport=!!a.disableDashboardExport,this.disableXlsExport=!!a.disableXlsExport,this.disableRawExport=!!a.disableRawExport,this.screenshotter=new k,this.$root=d("html"),this.exportConfig=new v,this.popup=this.options.palette||this.popup},render:function(){h.prototype.render.apply(this,arguments);var a=this.options.dashboard||!1;return this.$el.html(this.template({disableXlsExport:this.disableXlsExport,disableRawExport:this.disableRawExport,disableDashboardExport:this.disableDashboardExport,isDashboard:a})),this.goActive(),this.delegateEvents(),this},showPopup:function(){var a=this;this.popup=new l({customClass:"palette-dark dashboard-download",showFooter:!1}),this.popup.render(this.render().$el,"Download"),this.popup.position({of:this.options.$of,my:"left+20px top-40px",at:"right bottom",collision:"fit fit"}),this.popup.onHide=function(){a.goNormal()},this.childViews.push(this.popup)},isSpinning:function(a){return!!a.find(".spinner").length},showSpinner:function(a){var b=a.attr("spinnerTittle");this.$detachedIco=a.find(".zd.icon").detach(),a.attr("defaulttitle",a.text()).html(q({title:b}))},hideSpinner:function(a){var b=a.attr("defaulttitle");a.html(r({title:b})),this.$detachedIco&&a.find(".zd.icon").replaceWith(this.$detachedIco)},_downloadClick:function(a){var b=d(a.currentTarget);this.isSpinning(b)||(this.showSpinner(b),this.download(b))},showPdfOpts:function(){this.pdfExportView=new s({downloadView:this,popup:this.popup}),this.popup.render(this.pdfExportView.render().$el,"Export as PDF"),this.popup.$el.find(".palette-bottom-panel").remove(),this.popup.options.showFooter&&this.popup.$el.append('<div class="palette-bottom-panel"></div>'),this.listenTo(this.pdfExportView,"download:pdf",this.download)},showRawDataOpts:function(){this.rawDataExportView&&this.rawDataExportView.remove(),this.rawDataExportView=new u({dataItems:this.options.visualizationController.data,currentSource:this.options.visualizationController.source,state:this.options.controller.state,popup:this.popup,config:this.exportConfig,spinner:{hide:this.hideSpinner,show:this.showSpinner}}),this.listenTo(this.rawDataExportView,"export:back",function(){this.popup.render(this.render().$el,"Download")}),this.popup.render(this.rawDataExportView.render().$el,"Export as CSV"),this.popup.$el.find(".palette-bottom-panel").remove(),this.popup.options.showFooter&&this.popup.$el.append('<div class="palette-bottom-panel"></div>')},download:function(a,b){var c=this,e=this.options.name||a.attr("filename")||"screenshot",f=a.attr("value"),g=d.Deferred(),h=b||null,i={dfd:g,name:e,$button:a};return"png"===f?setTimeout(function(){c.downloadPNG(i)},100):"xls"===f?this.downloadXML(i):"pdf"===f?(i.pdfConfig=h,setTimeout(function(){c.downloadPDF(i)},100)):"json"===f&&this.exportDashboardConfig().done(function(){c.hideSpinner(a)}).fail(function(){c.hideSpinner(a)}),g.promise()},exportDashboardConfig:function(){var a=this,b="service/bookmarks/export",c=encodeURIComponent(this.options.dashboardId),e=this.options.name||"dashboard";return d.get(b+"?bookmarkIds="+c).done(function(b){if(b.bookmarks.length>0)f.downloadParsedData(JSON.stringify(b),e,"application/json"),a.showNotification({type:"success",message:"Successfully exported"});else{var c="Failed to export dashboard";a.showNotification({type:"error",message:c})}}).fail(function(b){var c=b.responseJSON.details;a.showNotification({type:"error",message:c})})},downloadPNG:function(a){function b(a,b){d("<br>").appendTo(e.$el),d("<a></a>").attr({href:a.src,target:"_blank",download:b,title:b,"class":"thumbnail"}).on("click",function(d){var e=!!navigator.msSaveOrOpenBlob;e&&(d.preventDefault(),c(a.src,b))}).append(a).appendTo(e.$el),d("<p />").text("Click the link or save the image").appendTo(e.$el)}function c(a,b){var c,d,e=a.replace("data:image/png;base64,",""),f=atob(e),g=new ArrayBuffer(f.length),h=new Uint8Array(g);for(d=0;d<f.length;d++)h[d]=f.charCodeAt(d);c=new Blob([g],{type:"image/png"}),window.navigator.msSaveOrOpenBlob(c,b)}a=a||{};var e=this,f=this.$target,g=a.dfd,h=a.name,i=a.$button;this.prepareScreen().done(function(){e.screenshotter.shoot(f).always(function(){e.restoreScreen(),e.hideSpinner(i)}).done(function(a){b(a,h+".png"),g.resolve()}).fail(function(){g.reject.apply(g,arguments)})}).fail(function(){g.reject.apply(g,arguments)})},downloadXML:function(a){a=a||{};var b=this,c=a.dfd,e=a.$button,g=this.options.visualizationController.thread,h=f.generateUUID();if(!this.isReady())return g.once("thread:notDirtyData",function(){b.download(e)}),c.promise();var i=this.getVisualizationData(),j="service/export/xls/generate/"+h,k="grid-chart.xlsx",l="service/export/xls/download/"+h+"/"+k+"/";d.ajax({type:"POST",url:j,contentType:"application/json",dataType:"json",data:JSON.stringify(i),complete:function(){b.hideSpinner(e)},success:function(a){setTimeout(function(){var d=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);if(d){var e=new m({type:"success"});window.location.assign(l),e.render(o())}else b.downloadGeneratedFile(l,function(a){t(a,k)});c.resolve(a)},0)},error:function(a){var b=new m({type:"error"}),e=a.responseJSON&&a.responseJSON.details||d(a.responseText).html();b.render(p({response:e})),c.reject.apply(c,arguments)}})},downloadPDF:function(a){function b(a){navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0?(c.pdfExportView.$el.find(".dl-pdf-link").remove(),d('<a class="dl-pdf-link">Click here to open PDF</a>').attr({href:a.output("datauristring"),target:"_blank"}).appendTo(c.pdfExportView.$el)):a.save(g+".pdf")}a=a||{};var c=this,e=this.$target,f=a.dfd,g=a.name,h=a.$button;this.prepareScreen().done(function(){c.screenshotter.shootPDF(e,a.pdfConfig).always(function(){c.restoreScreen(),c.hideSpinner(h)}).done(function(a){b(a),f.resolve()}).fail(function(){f.reject.apply(f,arguments)})}).fail(function(){f.reject.apply(f,arguments)})},prepareScreen:function(){var a,b=!!this.options.visualizations;if(b){var c=this.$target.find(".dashboard-header").get(0).scrollHeight,e=this.$target.find(".zoomable").get(0),f=e.scrollHeight;this._scrollPosition=e.scrollTop,this.$target.height(c+f)}return a=this.getControllers().map(function(a){return a.saveStateAndPause()}),d.when.apply(d,a)},restoreScreen:function(){this._scrollPosition&&(this.$target.find(".zoomable").get(0).scrollTop=this._scrollPosition,this._scrollPosition=null),this.getControllers().forEach(function(a){a.restorePlayState()})},getControllers:function(){var a;return a=this.options.visualizations?this.options.visualizations.map(function(a){return a.controller}):[this.options.visualizationController]},goActive:function(){this.options.$of&&this.options.$of.parent().addClass("active")},goNormal:function(){this.options.$of&&this.options.$of.parent().removeClass("active"),this.remove()},isReady:function(){return"PIVOT_TABLE"===this.options.controller.config.type||100===this.options.visualizationController.thread._progress},getVisualizationData:function(){var a={},b=this.options.controller,c=this.options.visualizationController,d=b.state.config.get("type"),g=b.state.config.get("source").date,h=b.state.time.toJSON(),i={},j=b.fields.filter(function(a){var b=a.toJSON();return"NUMBER"===b.storageConfig.type&&!b.func&&b.visible})[0],k=!!j,l="PIVOT_TABLE"===d;if(g=g&&"none"!==g?b.fields.findWhere({name:g}):"",a.visualizationName=b.getVisualizationName()||b.state.config.get("name"),a.cid=b.UUID,a.direction="column",a.columnHeaders=[],a.rowHeaders=[],a.fields=[],a.filters=[],a.timeField=g?g.get("label"):g,k&&a.fields.push({name:j.get("name"),type:j.get("storageConfig").type,label:j.get("label")}),l)i=b.scope.visualization,i._METRICS_DIRECTION?a.direction="column":a.direction="row",i._ATTRIBUTES_H.forEach(function(b){b.forEach(function(b){var c=e.findWhere(a.columnHeaders,{header:b.title}),d=e.findWhere(a.rowHeaders,{header:b.title});"ROW"===b.hoverDirection?b.title&&!c&&a.columnHeaders.push({objectFieldType:"ATTRIBUTE",header:b.title}):"COL"===b.hoverDirection&&b.title&&!d&&a.rowHeaders.push({objectFieldType:"ATTRIBUTE",header:b.title})})});else if(b.state.isUngrouped())a.fields=b.state.getUngroupedRequest().fields.map(function(a){var c=b.fields.findWhere({name:a});return{name:c.get("name"),type:c.get("storageConfig").type||c.get("type"),label:c.get("label")}}),a.data=c&&c.data||[];else{a.rowHeaders=b.state.groupBy.filter(function(a){var c=b.fields.findWhere({name:a.get("name")}),d=c.get("storageConfig");return"NONE"!==d.type}).map(function(a){var c=b.fields.findWhere({name:a.get("name")});return{objectFieldType:c.get("storageConfig").type||c.get("type"),header:c.get("label")}});var m=c&&c.data||[];a.data=this._formatVisualizationData(m)}return a.configuration=b.state.toRequest(),a.filters=function(){var c,d=b.state.filters.toRequest();return a.timeField&&g&&d.push({path:g.get("name"),operation:"BETWEEN",value:[f.convertTimeToStringUTC(h.fromTime),f.convertTimeToStringUTC(h.toTime)]}),d.forEach(function(a){c=b.fields.findWhere({name:a.path}),a.label=c.get("label")}),d}(),a},_formatVisualizationData:function(a){var b=this.options.controller.state,c=this.options.controller.fields,d=b.get("timeTrendStep"),g=[],h=e.findIndex(b.groupBy.getAttributes(),function(a){var b=c.findWhere({name:a});return"TIME"===b.get("storageConfig").type});return-1===h?a:(a=e.sortBy(a,function(a){return a.group}),a.forEach(function(a){var b=e.clone(a);e.isArray(b.group)?(b.group=e.clone(b.group),b.group[h]=f.timeStringFormatter(b.group[h],d,!1)):b.group=f.timeStringFormatter(b.group,d,!1),
g.push(b)}),g)},downloadGeneratedFile:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onreadystatechange=function(a){4===c.readyState&&(200===c.status?b&&b(c.response):console.error(a.responseText))},c.send(null)},showNotification:function(a){var b=new m(a),c=a.message||"";b.render(c)},destroy:function(){this.undelegateEvents(),this.remove()}});b.exports=w},{"../../Core/MVC":6,"../../controls":73,"../../utilities":151,"../../views/PdfExport":215,"./../../components/Screenshotter":53,"./../RawDataExport":218,"./dashboardDownloadTemplate.html":169,"./downloadIcon.html":170,"./exportToExcelDoneMessage.html":171,"./exportToExcelFailMessage.html":172,"./spinnerIcon.html":174,"browser-filesaver":237,jquery:109,moment:243,underscore:244}],166:[function(a,b,c){"use strict";var d=a("jquery"),e=(a("underscore"),a("../../../Core/MVC")),f=e.View,g=(e.Events,a("./backBtnTemplate.html")),h=a("./saveBtnTemplate.html"),i=f.extend({className:"zdView-DownloadOptions",defaults:{backBtnConfig:{show:!0,label:"EXPORT"},saveBtnConfig:{show:!0,iconClass:"download",value:"raw",fileName:"raw_data",spinnerTitle:"Exporting Raw Data",label:"Export CSV"}},events:{'click button[value="dialog-back"]':"_onBackButtonClick"},initialize:function(a){this.options=d.extend({},a,this.options),this.backBtnConfig=this.options.backBtnConfig||this.defaults.backBtnConfig,this.saveBtnConfig=this.options.saveBtnConfig||this.defaults.saveBtnConfig},render:function(){return this.renderBackButton(),this.renderSaveButton(),this},renderSaveButton:function(){if(this.saveBtnConfig.show){var a=h(this.saveBtnConfig).replace(/<!--[\s\S]*?-->/g,"");this.$saveBtn=d(a),this.$el.append(this.$saveBtn),this.$controls=this.$el.find(".control-buttons")}},renderBackButton:function(){if(this.backBtnConfig.show){var a=g({label:this.backBtnConfig.label}).replace(/<!--[\s\S]*?-->/g,"");this.$backBtn=d(a),this.$el.prepend(this.$backBtn)}},_onBackButtonClick:function(){this.trigger("export:back")}});b.exports=i},{"../../../Core/MVC":6,"./backBtnTemplate.html":167,"./saveBtnTemplate.html":168,jquery:109,underscore:244}],167:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n\n<button title="" value="dialog-back" class="zd icon back" style="">\n    <div class="back-label">\n        <b style="vertical-align: middle;">'+__e(label)+"</b>\n    </div>\n</button>\n";return __p}},{lodash:242}],168:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="control-buttons">\n    <button class="zd btn btn-success btn-block"\n            value="'+__e(value)+'"\n            filename="'+__e(fileName)+'" iconClass="'+__e(iconClass)+'"\n            spinnertittle="'+__e(spinnerTitle)+'">\n        <i class="zd icon '+__e(iconClass)+'"></i>\n        '+__e(label)+"\n    </button>\n</div>";return __p}},{lodash:242}],169:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<section class="export-image">\n    <legend class="subhead">Export Image</legend>\n    <button class="zd btn btn-success btn-block download" value="png"\n            filename="screenshot" spinnerTittle="Creating Screenshot">\n        <i class="zd icon screenshot"></i>\n        Screenshot (png)\n    </button>\n    <button class="zd btn btn-success btn-block pdf" value="pdf"\n            filename="screenshot" spinnerTittle="Exporting as PDF">\n        <i class="zd icon pdf"></i>\n        PDF\n        <i class="zd icon right-chevron"></i>\n    </button>\n</section>\n',disableXlsExport&&disableRawExport||(__p+='\n    <section class="export-data">\n        <legend class="subhead">Export Data</legend>\n        ',disableXlsExport||(__p+='\n        <button class="zd btn btn-success btn-block download" value="xls"\n                filename="excel" spinnerTittle="Exporting to Excel file">\n            <i class="zd icon xls"></i>\n            Crosstabs (xls)\n        </button>\n        '),__p+="\n        ",disableRawExport||(__p+='\n        <button class="zd btn btn-success btn-block" value="raw"\n                filename="raw_data" spinnerTittle="Exporting Raw Data">\n            <i class="zd icon date"></i>\n            Raw Data\n            <i class="zd icon right-chevron"></i>\n        </button>\n        '),__p+="\n    </section>\n"),__p+="\n",disableDashboardExport||(__p+='\n<section class="export-config">\n    <legend class="subhead">Export Configuration</legend>\n    <button class="zd btn btn-success download btn-block json" value="json"\n            filename="json" spinnerTittle="Exporting as JSON">\n        <i class="zd icon zoomdata-z"></i>\n        '+(null==(__t=isDashboard?"Dashboard":"Chart")?"":__t)+" Configuration (json)\n    </button>\n</section>\n"),__p+="\n\n\n\n";return __p}},{lodash:242}],170:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<i class="zd icon download"></i>'+__e(title);return __p}},{lodash:242}],171:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\nFile was successfully saved in browser download directory.";return __p}},{lodash:242}],172:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\nFailed to export to excel: '"+__e(response)+"'";return __p}},{lodash:242}],173:[function(a,b,c){b.exports=a("./DashboardDownload")},{"./DashboardDownload":165}],174:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<i class="zd icon spinner active"></i>'+__e(title);return __p}},{lodash:242}],175:[function(a,b,c){"use strict";var d=a("./../ListView"),e=a("./../ListItem"),f=a("../../Core/MVC/Model"),g=a("../../Core/MVC/View"),h=a("jquery"),i=a("underscore"),j=a("../../utilities"),k=a("../../Core/MVC/Collection"),l=(a("../../utilities/MetricFormatter"),a("moment")),m=f.extend({idAttribute:"_id",initialize:function(){var a=this;return f.prototype.initialize.apply(this,arguments),this.fields=this.collection.fields,this.setFields(),this.on("change",function(){a.setFields()}),this},setFields:function(a){var b=this;this.fields=a||this.fields,i.each(i.keys(this.attributes),function(a){if("_zdFields"!==a){var c=b.fields.findWhere({name:a});c=c||b.fields.find(function(b){var c=b.get("storageConfig");return c.originalName===a}),b.attributes._zdFields=b.attributes._zdFields||{},b.attributes._zdFields[a]=c&&c.toJSON()||{label:a}}})}}),n=k.extend({model:m,initialize:function(a,b){return b.fields&&(this.fields=b.fields,delete b.fields),k.prototype.initialize.apply(this,arguments),this}}),o=a("./template.html"),p=(a("./moreButtonTemplate.html"),a("./progressBarTemplate.html")),q=a("./itemTemplate.html"),r=(a("./lpItemTemplate.html"),a("./twitterItemTemplate.html")),s=d.extend({_renderItems:function(){var a=this,b=0;this.limit=this.limit||(this.options.heavyPerformance?30:null),this._removeItems(),i.each(this.collection.models,function(c,d){a.limit&&d>=a.limit||(a._renderItem(c),b=d+1)}),this.limit&&(this.limit=b)},renderNext:function(){var a=this,b=i.clone(this.limit),c=this.limit+a.options.offset;i.each(this.collection.models,function(d,e){a.limit&&a.limit>e||e>=c||(a._renderItem(d),b=e+1)}),this.limit=b,this.$el.css({"margin-bottom":"-20px","padding-bottom":"10px"})}}),t=e.extend({events:{'click button[value="button-item-details"]':"_onItemDetailsClick"},toggleItemDetails:function(a){var b=this;a=a||this.$('[data-role="item-holder"]'),a.each(function(){var a=h(this),c=a.find('button[value="button-item-details"]'),d=a.find('[data-role="details-holder"]');a.hasClass("open")?(a.removeClass("open"),a.addClass("minimized"),c.html('Expand <i class="icon-chevron-down"></i>'),b.hideDetails(d)):(a.addClass("open"),a.removeClass("minimized"),c.html('Collapse <i class="icon-chevron-up"></i> '),b.showDetails(d))})},showDetails:function(a){return this},hideDetails:function(a){return this},_onItemDetailsClick:function(a){var b=h(a.currentTarget),c=b.parents('[data-role="item-holder"]');this.toggleItemDetails(c,b)}});b.exports=g.extend({className:"zd-data-item-details",defaults:{template:o,itemTemplate:q,filter:function(){return!0},search:!1,count:15,offset:0},events:{'click button[value="button-more"]':"_onMoreClick"},initialize:function(a){var b=this;a.state&&(this.state=a.state,delete a.state),a.fields&&(this.fields=a.fields,delete a.fields),a.data?(this.data=a.data,delete a.data):this.data={},g.prototype.initialize.apply(this,arguments),this.heavyPerformance=-1!==["IMPALA","SQL"].indexOf(this.options.sourceType),this.collection=this.collection||new n([],{fields:this.fields}),this.list=new s({collection:this.collection,filter:this.options.filter,search:this.options.search,template:this.options.itemTemplate,ItemView:t,heavyPerformance:this.heavyPerformance,offset:30}),this.childViews.push(this.list),this.$progressBar=this.$wrapElement(p({value:100}));var c=j.time.convertToServerDate,d=this.state.config.get("streamType"),e=this.state.get("streamSourceId"),f=this.state.groupBy,h=this.state.groupBy.getAttributes().filter(function(a){return"none"!==a}),k=[],m=this.data.group,o=this.data.key,u=this.data.current.count,v=this.state.filters,w=this.state.time,x=!0,y=c(w.get("fromTime"),x),z=c(w.get("toTime"),x),A=this.state.get("timestampField"),B=v.toRequest(),C=o;C&&C.length>1&&0===C.indexOf(" ")&&(o=C.substring(1,C.length)),o&&k.push(o),k.push(m),B=B.map(function(a){i.findWhere(b.fields.toJSON(),{name:a.path,type:"TIME"})&&(a.value instanceof Array?a.value=a.value.map(function(a){return j.convertTimeToStringUTC(a,!1)}):"string"==typeof a.value&&(a.value=j.convertTimeToStringUTC(a.value,!1)));var c={path:a.path,operation:a.operation,value:a.value};return a.form&&(c.form=a.form),c}),this.data.filters&&this.data.filters.map(function(a){B.push(a)});var D={streamSourceId:e,itemTemplate:q,title:u+" Total Record"+(u>1?"s":"")};this.heavyPerformance&&(D.count=1e3);var E=h.map(function(a,c){var d="EQUALS",e=b.fields.findWhere({name:a}),g=e.get("storageConfig"),h=k[c];if("TIME"===g.type){d="BETWEEN";var i=b.state.get("timeTrendStep"),m=h,n=j.time.convertFromServerDate(m),o=l.utc(n).endOf(i),p=j.time.convertToServerDate(o,!1);h=[m,p]}else"null"===h&&(d="ISNULL",h="true");var q=f.findWhere({name:a}).get("form"),r={path:a,operation:d,value:h};return q&&(r.form=q),r});if(B=B.concat(E),A&&!i.findWhere(B,{path:A})){var F={path:A||"",operation:"BETWEEN",value:[y,z]},G=f.get(F.path);G&&G.get("form")&&(F.form=G.get("form")),B.push(F)}switch(d){case"TWEET":D.itemTemplate=r,D.title=u+" Total Tweet"+(u>1?"s":"")}return D.restrictions=B,this.setOptions(D),this},setOptions:function(a){return a=a||{},this.options=h.extend({},this.options,a),this.options.itemTemplate&&(this.list.options.template=this.options.itemTemplate),this},render:function(){return this.$el.html(this.options.template({title:this.options.title})),this.$el.append(this.list.render().$el),this.renderDetails(),this.delegateEvents(),this},renderDetails:function(a){function b(a){return h("<div>").text(a).html()}var c=this;this.setOptions(a),this.forbidMore(),this.showLoader(),this.getDetails().done(function(a){var d=a.documents,e=c.state,f=e.toRequest(),g=e.groupBy.getAttributes().filter(function(a){return"none"!==a});if(0===g.length){var i=f.cfg.group&&f.cfg.group.pivot;if(i){var k=i.rows.map(j.parsePivotAttribute),l=i.columns.map(j.parsePivotAttribute);g=k.concat(l)}}c.hideLoader(),c.allowMore(),c.collection.add(d,{silent:!0}),c.collection.forEach(function(a,c){a.index=c+1,h.each(a.attributes,function(c,d){"string"==typeof d&&(a.attributes[c]=b(d))})}),c.list.render(),a.hasNext?c.allowMore():c.forbidMore()}).fail(function(a){c.$el.append(h('<div class="alert alert-error">Failed to fetch documents: '+a.statusText+"</div> "))})},getDetails:function(){var a=h.Deferred(),b={},c=0;this.state.get("timestampField"),this.state.get("timeWindowScale");this.fields.bootstrap().done(function(){c++,2===c&&a.resolve(b)}).fail(function(b){a.reject(b)});var d={limit:this.options.count,offset:this.options.offset,streamSourceId:this.options.streamSourceId,restrictions:this.options.restrictions};return h.ajax({type:"POST",url:"service/stream/preview",data:JSON.stringify(d),contentType:"application/json"}).done(function(d){b=d,c++,2===c&&a.resolve(b)}).fail(function(b){a.reject(b)}),a.promise()},allowMore:function(){var a=this;return this.$el.on("scroll",function(){var b=a.$el.prop("scrollHeight"),c=a.$el.scrollTop(),d=a.$el.height();d>=b-c&&(a.list.limit&&a.list.limit<a.list.collection.length?a.list.renderNext():a.renderDetails({offset:a.collection.length}))}),this},forbidMore:function(){return this.$el.off("scroll"),this},showLoader:function(){this.$el.append(this.$progressBar)},hideLoader:function(){this.$progressBar.remove()}})},{"../../Core/MVC/Collection":2,"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"../../utilities":151,"../../utilities/MetricFormatter":146,"./../ListItem":198,"./../ListView":200,"./itemTemplate.html":177,"./lpItemTemplate.html":178,"./moreButtonTemplate.html":179,"./progressBarTemplate.html":180,"./template.html":181,"./twitterItemTemplate.html":182,jquery:109,moment:243,underscore:244}],176:[function(a,b,c){"use strict";b.exports=a("./DataDetails")},{"./DataDetails":175}],177:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="media minimized" data-role="item-holder">\n    <div class="media-body">\n        <div class="media" style="margin-top: 0;">\n            <blockquote data-role="item-holder">\n                <div class="zd-data-item-details-holder" data-role="details-holder">\n                    <table class="table table-striped">\n                        ',_.each(_.keys(attributes),function(a,b){if(__p+="\n                            ","_id"!==a&&"time"!==a&&"_zdFields"!==a&&attributes._zdFields[a]){__p+="\n                                <tr>\n                                    <td>"+__e(attributes._zdFields[a].label)+"</td>\n                                    <td>\n                                        ";var c=new RegExp("(http://|https://|www.)");__p+="\n                                        ";var d=new RegExp("(http|https).*?(jpg|gif|png|jpeg|JPG|GIF|PNG|JPEG)");__p+="\n                                        ";var e=new RegExp("(http|https).*?(image)");__p+="\n                                        ";var f=d.test(attributes[a])||e.test(attributes[a]);__p+="\n                                        ";var g=c.test(attributes[a]);__p+="\n                                        ",f?__p+='\n                                            <img style="max-width: 300px" src="'+(null==(__t=attributes[a])?"":__t)+'"/>\n                                        ':g?(__p+="\n                                            ",0===attributes[a].indexOf("www.")&&(attributes[a]="http://"+attributes[a]),__p+='\n                                            <a href="'+(null==(__t=attributes[a])?"":__t)+'" target="_blank">'+__e(attributes[a])+"</a>\n                                        "):__p+=" \n                                            "+__e(attributes[a])+"\n                                        ",__p+="\n                                    </td>\n                                </tr>\n                            "}__p+="\n                        "}),__p+='\n                    </table> \n                </div>\n                <button value="button-item-details" class="zd btn-link">\n                    Expand <i class="icon-chevron-down"></i>\n                </button> \n            </blockquote>\n        </div> \n    </div> \n</div> ';return __p}},{lodash:242}],178:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="media minimized" data-role="item-holder">\n    <div class="media-body">\n        <h4 class="media-heading">\n            <span>'+__e(attributes.rep_dn)+'</span>\n            <small class="pull-right">'+(null==(__t=new Date(attributes._ts).toLocaleString())?"":__t)+'</small>\n            <div class="clearfix"></div> \n        </h4>\n        <div class="media">\n            <blockquote>\n                '+__e(attributes.text)+'\n                <br>\n                <div data-role="details-holder" data-itemid="'+(null==(__t=attributes._id)?"":__t)+'" style="display: none;" class="media">\n                    <div class="media-body">\n                        <blockquote>\n                        </blockquote> \n                    </div> \n                </div> \n                <button value="button-item-details" class="zd btn-link">Expand <i class="icon-chevron-down"></i></button> \n            </blockquote>\n        </div> \n    </div> \n</div> ';return __p}},{lodash:242}],179:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<button title="Get More Details" value="button-more" class="zd btn btn-success btn-block">\n	More\n</button>';return __p}},{lodash:242}],180:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="progress progress-striped active">\n    <div class="bar" style="width: '+(null==(__t=value)?"":__t)+'%"></div>\n</div>';return __p}},{lodash:242}],181:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<legend>\n    <h4 class="pull-left">'+__e(title)+'</h4>\n    <div class="clearfix"></div>\n</legend>';return __p}},{lodash:242}],182:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div data-role="item-holder" class="media">\n    <a class="zd pull-left thumbnail" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'" class="pull-left">\n        <img title="'+(null==(__t=attributes.user_name)?"":__t)+'" class="media-object" src="'+(null==(__t=attributes.profile_image_url)?"":__t)+'">\n    </a>\n    <div class="media-body">\n        <h4 class="media-heading">\n            <a title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'">\n            	'+__e(attributes.user_name)+'\n            </a>\n            <small class="pull-right">'+(null==(__t=new Date(attributes.created).toLocaleString())?"":__t)+'</small>\n            <div class="clearfix"></div> \n        </h4>\n        <blockquote>\n            <a  title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank"\n                href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+"/status/"+(null==(__t=attributes.id)?"":__t)+'">\n            	'+__e(attributes.text)+'\n            </a> \n            <small>\n                <a title="'+(null==(__t=attributes.user_name)?"":__t)+'" target="_blank" href="https://twitter.com/'+(null==(__t=attributes.user_screen_name)?"":__t)+'">\n                    @'+__e(attributes.user_screen_name)+"\n                </a>\n            </small>\n        </blockquote>\n    </div>\n</div>";return __p}},{lodash:242}],183:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<dt title="'+(null==(__t=label)?"":__t)+" "+(null==(__t=func?"("+func+")":"")?"":__t)+'">'+__e(label)+" "+(null==(__t=func?"("+func+")":"")?"":__t)+":</dt>\n<dd>"+__e(value)+"</dd>";return __p}},{lodash:242}],184:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<button title="Show Details" value="button-details" class="zd btn btn-success btn-block">Details</button>';return __p}},{lodash:242}],185:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<legend>"+__e(label)+"</legend>";return __p}},{lodash:242}],186:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("moment"),g=a("../../utilities/MetricFormatter"),h=a("../../Core/MVC/View"),i=a("../../utilities"),j=a("../../components/Vocabulary"),f=a("moment"),k=function(a){return new g(a)},l=a("./dataItemTemplate.html"),m=a("./timeItemTemplate.html"),n=a("./groupDelimiter.html"),o=a("./detailsButton.html");b.exports=h.extend({className:"zd-data-item",defaults:{dataItemTemplate:l,timeItemTemplate:m,groupDelimiter:n,detailsButton:o},events:{},initialize:function(a){return a=a||{},a.state&&(this.state=a.state,delete a.state),a.fields&&(this.fields=a.fields,delete a.fields),a.data?(this.data=a.data,delete a.data):this.data={},h.prototype.initialize.apply(this,arguments),this.options=d.extend({},this.defaults,a),this},render:function(a){var b=(this.state.options.objectFields.toJSON(),this.state.get("timestampField")),c=null;return a?this.data=a:a=this.data,b&&(c=this.getCurrentTime(a)),this.$el.empty(),this.renderGroup("Current",a.current,c),this.delegateEvents(),this},update:function(a){var b=this.data,c=b.group,f=b.key,g=null;return f?(g=a.filter(function(a){var b=Array.isArray(a.group)?a.group:[a.group];return-1!==b.indexOf(f)&&-1!==b.indexOf(c)})[0],g&&(g=d.extend({},b,{current:g.current}))):g=e.where(a,{group:c})[0],g&&this.render(g),this},isTrends:function(){var a=this;return function(){return a.state.isTimeTrends()}()},getCurrentTime:function(a){var b,c,d,e=this.isTrends(),g=this.state.config.get("source"),h=this.state.get("timeTrendStep"),j=(-1!==["DAY","WEEK","MONTH","YEAR"].indexOf(h),this.state.get("timestampField")),k=this.state.filters.findWhere({path:j}),l=this.state.getObjectField(j),m=l.timestampGranularity;return"undefined"==typeof g.date?null:(!e&&k?(b=this.getTimeFilterRange(k),c=b.timeFilterFrom,d=b.timeFilterTo):e?(c=i.getDateObjFromString(a.group),d=f.utc(c),d=d.endOf(h).toDate()):(c=this.state.time.get("fromTime"),d=this.state.time.get("toTime")),{from:i.time.format(c,m),to:i.time.format(d,m)})},getTimeFilterRange:function(a){var b=i.time.convertDynamicTime,c=this.state.getObjectField(a.get("path")),d=c.timestampGranularity,e=a.get("value"),f=this.state.time,g=f.get("min"),h=f.get("max");return{timeFilterFrom:b(e[0],g,h,d),timeFilterTo:b(e[1],g,h,d)}},renderGroup:function(a,b,c){function f(a){return e.filter(m.models,function(b){return a===b.get("name")||b.distinctCount})}function g(a,b){return e.find(a,function(a){return a.get("func")&&"distinct_count"===b?a.get("distinctCount"):a.get("func")&&"distinct_count"!==b?b===a.get("func").toLowerCase():"avg"===b||"distinct_count"===b})}function h(a,b){return e.find(a,function(a){return a.get("name")===b})}var i=d("<dl></dl>"),m=this.fields;if(this.$el.append(this.options.groupDelimiter({label:a})).append(i),null!==c&&i.append(this.options.timeItemTemplate({label:"Time Window",from:c.from||null,to:c.to||null,timeFrame:c.timeFrame||null})),b.count){var n=this.fields.source.get("volumeMetric"),o=k("NUMBER").format(b.count);o=o+""=="-1"?"No data":o,n.visible&&i.append(this.options.dataItemTemplate({label:n.label,value:o,func:null}))}b.metrics&&e.each(b.metrics,function(a,b){var c="";for(var d in a)if(a.hasOwnProperty(d)){c=d;var e=f(b),m=g(e,c);m||(m=h(e,b));var n=m.get("label"),o=m.get("storageConfig"),p=o.type;i.append(l({label:n,value:"distinct_count"!==c?k(p).format(a[c]):a[c],func:j.text(c)}))}})},_onShowDetails:function(){this.renderDetails()}})},{"../../Core/MVC/View":5,"../../components/Vocabulary":60,"../../utilities":151,"../../utilities/MetricFormatter":146,"./dataItemTemplate.html":183,"./detailsButton.html":184,"./groupDelimiter.html":185,"./timeItemTemplate.html":187,jquery:109,moment:243,underscore:244}],187:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<dt title="'+(null==(__t=label)?"":__t)+'">'+__e(label)+":</dt>\n<dd>"+(null==(__t=from)?"":__t)+"</dd>\n<dd>"+(null==(__t=to)?"":__t)+"</dd>\n<dd>"+(null==(__t=timeFrame)?"":__t)+"</dd>";return __p}},{lodash:242}],188:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../views/ListView"),g=a("../../views/ListItem"),h=a("../../controls"),i=g.extend({className:"scale-item",template:e.template("<%- form.label %>"),render:function(){return this.model.set({selected:this.model.get("primary")},{silent:!0}),this.$el.html(this.template({form:this.model.toJSON()})),this.model.get("selected")&&this.$el.addClass("selected"),this},_onClick:function(){this.model.collection.each(function(a){a.set({primary:!1,selected:!1},{silent:!0})}),this.model.set("primary",!0),g.prototype._onClick.apply(this,arguments)}}),j=f.extend({className:"scales-options unstyled",initialize:function(a,b){this.defaults.ItemView=i,this.defaults.selectable="radio",this.options=d.extend({},this.options,b),f.prototype.initialize.apply(this,arguments)}}),k=h.SmallPopup.extend({initialize:function(a){h.SmallPopup.prototype.initialize.apply(this,arguments);var b=this;this.formsView=new j({collection:this.options.collection,filter:function(a){return a.get("visible")}}),this.listenTo(this.formsView,"select",function(a){b.options.collection.trigger("select",a)})},show:function(){this.render(this.formsView.render().$el),this.position({of:this.options.$at,my:"left+15 center",at:"right center",collision:"flipfit flipfit"})}});b.exports=k},{"../../controls":73,"../../views/ListItem":198,"../../views/ListView":200,jquery:109,underscore:244}],189:[function(a,b,c){b.exports=a("./FormsView")},{"./FormsView":188}],190:[function(a,b,c){"use strict";var d=a("underscore"),e=a("jquery"),f=a("./../../controls/index.js"),g=a("../../Core/MVC/View"),h=a("./formulaEditTpl.html"),i=g.extend({tagName:"ul",className:"search-groups-list",defaults:{template:h},events:{"click li":"select"},initialize:function(a){g.prototype.initialize.apply(this,arguments),this.items=a.items||[]},render:function(){var a=this;return this.items.forEach(function(b){a.$el.append(a.options.template({action:b}))}),this},select:function(a){var b=e(a.target);this.trigger("select",b.data("action"))}}),j=g.extend({initialize:function(a){return g.prototype.initialize.apply(this,arguments),d.extend(this.actions,this.options.actions),this},render:function(a){return this.showPopup(a),this},showPopup:function(a){var b=this,c=new f.SmallPopup({customClass:"zd-groups-search-popup",pointerWidth:"14",multiDocked:!0}),d=new i({items:Object.keys(this.actions)});c.render(d.render().$el),c.position({of:e(a),my:"left+15 center",at:"right center",collision:"flipfit flipfit"}),d.on("select",function(a){c.hide(),c.closeModal(),b.select(a)})},select:function(a){this.actions[a]&&this.actions[a]()},actions:{edit:e.noop,duplicate:e.noop,remove:e.noop}});b.exports=j},{"../../Core/MVC/View":5,"./../../controls/index.js":73,"./formulaEditTpl.html":191,jquery:109,underscore:244}],191:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<li data-action="'+__e(action)+'">'+__e(action)+"</li>";return __p}},{lodash:242}],192:[function(a,b,c){b.exports=a("./FormulaEditPopup")},{"./FormulaEditPopup":190}],193:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<legend class="subhead">'+__e(label)+"</legend>";return __p}},{lodash:242}],194:[function(a,b,c){"use strict";var d=(a("jquery"),a("underscore")),e=a("../../Core/MVC"),f=a("../../utilities"),g=a("./../ListItem"),h=a("./../ListView"),i=a("../../Core/MVC/Collection"),j=a("./headerTemplate.html"),k=a("./selectedAttrTemplate.html"),l=e.View.extend({className:"unstyled",defaults:{ItemView:g,ListView:h,groupClassName:"nav nav-tabs nav-stacked",selectable:!1,showSelected:!1,selected:function(a){return!1},disabled:function(a){return!1},filter:function(a){return!0}},events:{},initialize:function(a){var b=this;return e.View.prototype.initialize.apply(this,arguments),this.childViews=[],this.groups={},this.collection=this.collection||new i,this.listenTo(this.collection,"add",function(a){var c=b.options.groupBy,d=a.get(c)||a.attributes.storageConfig[c];d&&this._addToGroup(d,a)}),this.listenTo(this.collection,"remove",function(a){var c=b.options.groupBy,d=a.get(c)||a.attributes.storageConfig[c];d&&this._removeFromGroup(d,a)}),this.listenTo(this.collection,"reset",function(a){this._resetGroups()}),this._resetGroups(),this},_createGroup:function(a,b){"undefined"!=typeof this.groups[a]&&this._removeGroup(a);var c=new i(b);this.options.comparator&&(c.comparator=this.options.comparator,c.sort()),this.groups[a]=new this.options.ListView({className:this.options.groupClassName,ItemView:this.options.ItemView,itemOption:this.options.itemOption||null,selectable:this.options.selectable,template:this.options.template,collection:c,selected:this.options.selected,disabled:this.options.disabled,filter:this.options.filter}),this._renderGroup(a),this.childViews.push(this.groups[a]),this.listenTo(this.groups[a],"select",this._onItemSelect),this.listenTo(this.groups[a],"deselect",this._onItemDeselect)},_onItemSelect:function(a){"radio"===this.options.selectable&&d.each(this.groups,function(b){b.childViews.forEach(function(b){b.model!==a&&b.deselect()})}),this.trigger("select",a),this.options.showSelected&&this._renderSelectedAttr()},_onItemDeselect:function(a){this.trigger("deselect",a),this.options.showSelected&&this._renderSelectedAttr()},_removeGroup:function(a){"undefined"!=typeof this.groups[a]&&(this.groups[a].$el.prev().remove(),this.groups[a].remove(),this.childViews.splice(this.childViews.indexOf(this.groups[a]),1),delete this.groups[a])},_clearGroups:function(){var a=this;d.each(this.groups,function(b,c){a._removeGroup(c)})},_removeFromGroup:function(a,b){var c;"undefined"!=typeof this.groups[a]&&(c=this.groups[a].collection.findWhere(b.attributes),c&&this.groups[a].collection.remove(c),0===this.groups[a].collection.length&&this._removeGroup(a));
},_addToGroup:function(a,b){"undefined"==typeof this.groups[a]&&this._createGroup(a),this.groups[a].collection.add(b,{merge:!0})},_resetGroups:function(){var a=this;this._clearGroups();var b=this.collection.groupBy(function(b){var c=b.get("storageConfig")||{},d=c[a.options.groupBy]||b.get(a.options.groupBy);return b.set({type:d},{silent:!0}),d});return d.each(b,function(b,c){a._createGroup(c,b)}),this},_renderGroup:function(a){var b=this.groups[a].render().$el;b[0].childNodes.length&&(this.$el.append(j({label:f.toTitleCase(a)})),this.$el.append(this.groups[a].$el))},_sortGroups:function(){function a(a){d.each(e,function(a,d){c[e[d]]=b[a]})}var b=this.groups,c={},e=Object.keys(b).sort(function(a,c){return b[a]-b[c]});e.sort();for(var f in b)b.hasOwnProperty(f)&&a(f);this.groups=c},_sortGroupModels:function(a){var b=a.groups,c={};d.each(b,function(a,b){var e=[],f=[];d.each(a.collection.models,function(b,c){b=a.collection.models[c].get("label"),e.push([b,c,a.collection.models[c]])}),e.sort(),d.each(e,function(b,c){var d=e[c][2];a.collection.model[c]=d,f.push(d)}),c[b]=f,a.collection.models=f})},setFilter:function(a){this.options.filter=a,d.each(this.groups,function(b,c){c.options.filter=a})},render:function(){var a=this;return this.empty(),this._sortGroups(),this.options.showSelected&&this._renderSelectedAttr(),d.each(this.groups,function(b,c){a._renderGroup(c),a.childViews.push(a.groups[c])}),this},getSelectedItems:function(){var a=[];return d.each(this.groups,function(b,c){a=a.concat(b.getSelectedItems())}),a},_renderSelectedAttr:function(){this.$el.find(".selected-attr-box").remove(),this.$el.prepend(k({label:this.options.selectedModel.getColorKeyLabel()}))}});b.exports=l},{"../../Core/MVC":6,"../../Core/MVC/Collection":2,"../../utilities":151,"./../ListItem":198,"./../ListView":200,"./headerTemplate.html":193,"./selectedAttrTemplate.html":195,jquery:109,underscore:244}],195:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="selected-attr-box">'+__e(label)+"</div>";return __p}},{lodash:242}],196:[function(a,b,c){"use strict";var d=a("../../Core/MVC/View"),e=a("jquery");b.exports=d.extend({defaults:{needs:[],optionalNeeds:[]},render:function(a){var b=this.scope||this;a.html(this.template(b))},initialize:function(a){var b,c,d=[];for(c in this.needs)this.needs.hasOwnProperty(c)&&(b=c%1===0?this.needs[c]:c,void 0===a[b]?console.error("Argument "+b+" should be provided for view!",a):this[b]=a[b],d.push(b));for(c in this.optionalNeeds)this.optionalNeeds.hasOwnProperty(c)&&(b=c%1===0?this.optionalNeeds[c]:c,a&&void 0!==a[b]?this[b]=a[b]:void 0!==this.optionalNeeds[b]&&(this[b]=this.optionalNeeds[b]),d.push(b));for(var e in a)-1===d.indexOf(e)&&console.error("Providing unnessesary param: ",e,a[e])},showDeleteDialog:function(a,b){var c=e("<div/>");c.addClass("delete-dialog").html('<button class="delete">Delete</button>').hide().appendTo(b).show("fast").find("button").click(function(){return a(),!1});var d=function(){c.remove()};e(this.$el).bind("click",d)},getModelPosition:function(){return this.model.collection.indexOf(this.model)}})},{"../../Core/MVC/View":5,jquery:109}],197:[function(a,b,c){b.exports=a("./IView")},{"./IView":196}],198:[function(a,b,c){"use strict";var d=(a("jquery"),a("underscore")),e=a("../../Core/MVC"),f=e.View,g=e.Model,h=(e.Events,a("./listItemTemplate.html"));b.exports=f.extend({tagName:"li",className:"zd-list-item",preventClickPropagation:!0,model:g,events:{click:"_onClick"},template:h,defaults:{selectedClass:"zd-item-selected",selectable:!1},initialize:function(a){this.selected=!!a.selected,delete a.selected,this.disabled=!!a.disabled,delete a.disabled,this.selectable=a.selectable,delete a.selectable,f.prototype.initialize.apply(this,arguments),this.options.template&&(this.template=this.options.template),this.$el.data("itemView",this),this.renderConfig=this.getRenderConfig(),this.listenTo(this.model,"change",this.render)},render:function(){var a=this.$el,b=this.template;return a.html(b(this.renderConfig)),this.selected?this.renderSelected():this.renderDeselected(),this.options.hide_disabled&&this.$el.css("display",this.disabled?"none":"block"),this.$el.toggleClass("disabled-list-item",this.disabled),this.delegateEvents(),this},getRenderConfig:function(){var a=this.options.displayVisName,b=this.model.get("source"),c=this.model.get("name"),e=c;if(b&&a){var f=b.variables["Chart Name"]||"",g=f.length>0?f:b.sourceName;e=a?g+" ("+c+")":c}return{visName:e,attributes:this.model.attributes,index:this.model.index,_:d}},renderSelected:function(){var a=this.$el,b=this.options.selectedClass;return a.hasClass(b)||a.addClass(b),this},renderDeselected:function(){var a=this.$el,b=this.options.selectedClass;return a.hasClass(b)&&a.removeClass(b),this},select:function(){var a=this;this.selected||this.trigger("select",function(){a.selected=!0,a.renderSelected()})},deselect:function(){var a=this;this.selected&&this.trigger("deselect",function(){a.selected=!1,a.renderDeselected()})},_onClick:function(){var a=this.selectable,b=this.disabled;return a&&!b&&(this.selected?"radio"!==a&&this.deselect():this.select()),this.preventClickPropagation?!1:void 0}})},{"../../Core/MVC":6,"./listItemTemplate.html":199,jquery:109,underscore:244}],199:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<table class="table table-striped">\n    <tr>\n        <td>Item No</td>\n        <td>'+__e(index)+"</td>\n    </tr>\n    ",_.each(_.keys(attributes),function(a){__p+="\n    <tr>\n        <td>"+__e(a)+"</td>\n        <td>"+__e(attributes[a])+"</td>\n    </tr>\n    "}),__p+="\n</table> ";return __p}},{lodash:242}],200:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=d.noop,g=a("../../Core/MVC/View"),h=a("../../Core/MVC/Collection"),i=a("./../ListItem"),j=a("./../SearchBox"),k=e.template('<span class="zd-loader">Loading...</span>');b.exports=g.extend({tagName:"ul",className:"unstyled",defaults:{loaderTemplate:k,search:!1,sortable:!1,selectable:!1,sortOptions:{tolerance:"pointer"},sortbyOptions:null,sortOpened:!1,selected:function(a){return!1},disabled:function(a){return!1},filter:function(a){return!0},ItemView:i,selectAll:!1},events:{sortstop:"onSortstop",sortreceive:"onSortreceive",sortremove:"onSortremove"},initialize:function(a){return g.prototype.initialize.apply(this,arguments),this.collection=this.collection||new h,this.selected=[],this.options.selectAll?this.selectAllItem=new this.options.ItemView({selectAll:!0}):this.selectAllItem=null,this.removeListeners(),this.applyListeners(),this.options.sortable&&this.$el.sortable(this.options.sortOptions),this.options.search!==!1&&(this.searchBox=new j,this.listenTo(this.searchBox,"search",this._renderItems)),this},applyListeners:function(){this.listenTo(this.collection,"request:collection",this._showLoader),this.listenTo(this.collection,"remove reset sync:collection",this.render),this.listenTo(this.collection,"add",this._onAddItem),this.selectAllItem&&this.listenTo(this.selectAllItem.model,"change",this._selectAll)},removeListeners:function(){this.stopListening(this.collection,"request:collection"),this.stopListening(this.collection,"remove reset sync:collection"),this.stopListening(this.collection,"add"),this.selectAllItem&&this.selectAllItem.model.off("change")},getItemByModel:function(a){var b=this.childViews,c=null;return e.each(b,function(b){b.model===a&&(c=b)}),c},_resize:function(){e.each(this.childViews,function(a){a._resize&&a._resize()})},getSelectedItems:function(){return this.selected},sortCollection:function(a){function b(a,b){e.each(a.models,function(c,e){var f,g=c.get("name");b&&b.indexOf(g)>=0?(f=a.models.splice(e,1),a.models.unshift(f[0])):g===d.options.sortOpened&&(f=a.models.splice(e,1),a.models.unshift(f[0]))})}a=a||{};var c,d=this,f=this.collection.comparator,g=a.sortby,h=a.ascending;"Name"===g||"Filter Name"===g?f?this.collection.sort():(c=e.sortBy(this.collection.models,function(a){return a.get("name")?a.get("name").toLowerCase():""}),a&&!a.ascending&&c.reverse(),this.collection.models=c):"Author"===g?(c=e.sortBy(this.collection.models,function(b){var c=(b.get("userName")||"").toLowerCase();return a&&a.topValue===b.get("userName")&&(c=" "+c),a&&!a.ascending?c=e.map(c.split(""),function(a){return String.fromCharCode(-a.charCodeAt(0))}):c}),this.collection.models=c):"Last Used"===g?(c=e.sortBy(this.collection.models,function(a){var b=a.get("lastAccessed")||a.get("lastModified");return h?-b:b}),this.collection.models=c):"Popularity"===g?(c=e.sortBy(this.collection.models,function(a){return h?-a.get("viewsCount"):a.get("viewsCount")}),this.collection.models=c):"Type"===g?(c=e.sortBy(this.collection.models,function(a){return a.get("type")}),this.collection.models=h?c:c.reverse()):"function"==typeof g&&(c=e.sortBy(this.collection.models,g),this.collection.models=h?c:c.reverse()),this.options.sortOpened&&("string"==typeof this.options.sortOpened?b(this.collection):b(this.collection,this.options.openedSources)),this.collection.findWhere({selectAll:!0})&&(c=e.sortBy(this.collection.models,function(a){return a.get("selectAll")}),this.collection.models=c)},onSortstop:function(){this.sortCollection()},onSortreceive:function(a,b){var c=b.item,d=c.data("itemView"),e=d.model;this.collection.add(e,{silent:!0}),this.sortCollection(),this.collection.trigger("add")},onSortremove:function(a,b){var c=b.item,d=c.data("itemView"),e=d.model;this.collection.remove(e,{silent:!0}),this.childViews.splice(this.childViews.indexOf(d),1)},_onAddItem:function(a){return!a||this.searchBox&&!a.matchesSearch(this.options.search,this.searchBox.model.toJSON())?!1:(this._renderItem(a),!1)},_renderItem:function(a){var b=this.selected,c=b.indexOf(a),e=this.options.selectable,f=this.options.selected(a),g=this.options.disabled(a),h=d.extend({},this.options.itemOption,{model:a,template:this.options.template,user:this.options.user,selectable:e,selected:f,disabled:g});f&&(-1===c&&this.selected.push(a),"radio"===e&&b.length>1&&(this.selected.splice(this.selected.length-1,1),h.selected=!1));var i=new this.options.ItemView(h);this.sources&&i.model.set("sources",this.sources),this.$el.append(i.render().$el),this.childViews.push(i),this.listenTo(i,"select",this._onItemSelect(i)),this.listenTo(i,"deselect",this._onItemDeselect(i))},_renderItems:function(){var a=this,b=this.collection.models,c=a.options.sortbyOptions,d=c&&c.limitShowCount?c.limitShowCount:this.options.limitShowCount||null;this._removeItems(),this.searchBox&&(b=this.collection.search(this.options.search,this.searchBox.model.toJSON())),e.each(e.filter(b,this.options.filter),function(b,c){d&&c>=d||a._renderItem(b)}),this.options.sortable&&this.$el.sortable("refresh"),this.renderSelectAll(b),this._resize()},_removeItems:function(){this._removeChildViews()},_onItemSelect:function(a){function b(b){var f=a.model,h=g.indexOf(f);-1===h&&g.push(f),"radio"===e&&d.forEach(function(b){b!==a&&b.deselect()}),b(),c.renderSelectAll(),c.trigger("select",f)}var c=this,d=this.childViews,e=this.options.selectable,g=this.selected;return e?b:f},_onItemDeselect:function(a){function b(b){var d=a.model,f=e.indexOf(d);-1!==f&&e.splice(f,1),b(),c.renderSelectAll(),c.trigger("deselect",d)}var c=this,d=this.options.selectable,e=this.selected;return d?b:f},render:function(a){a=d.extend({},this.options.sortbyOptions,a);var b=this.options.sortbyOptions||a&&a.sortby?a:null;return this.empty(),this.sortCollection(b),this.searchBox&&this.$el.prepend(this.searchBox.render().$el),this._renderItems(),this},_showLoader:function(){this.empty(),this.$el.html(this.options.loaderTemplate())},renderSelectAll:function(a){var b=this,c=!!this.$el.parent().length,d=0,e=!0;this.selectAllItem&&(a=a||this.collection.models,c?a.forEach(function(a,c){var f=b.childViews[c];f&&f.$el.is(":visible")&&(d+=1,e=e&&!!a.get("selected"))}):e=!1,this.selectAllItem.model.set({selected:e},{silent:!0}),a.length&&(this.$el.prepend(this.selectAllItem.render().$el),!d&&c?this.selectAllItem.$el.hide():this.selectAllItem.$el.show()))},_selectAll:function(){var a=this,b=this.collection.models,c=this.selectAllItem.model.get("selected");this.searchBox&&(b=this.collection.search(this.options.search,this.searchBox.model.toJSON())),b.forEach(function(b){var d=a.getItemByModel(b);d&&d.$el.is(":visible")&&b.get("selected")!==c&&d.select()}),this.collection.trigger("change")},remove:function(){g.prototype.remove.apply(this,arguments),this.searchBox&&this.searchBox.remove()},deselectAll:function(){e.each(this.childViews,function(a){a.selected=!1})}})},{"../../Core/MVC/Collection":2,"../../Core/MVC/View":5,"./../ListItem":198,"./../SearchBox":223,jquery:109,underscore:244}],201:[function(a,b,c){"use strict";var d=a("jquery"),e=a("./../IView");b.exports=e.extend({needs:["template","model"],changeCounter:0,optional_needs:{autoupdate:!0,save:!0},subscribeOnChangesOneWay:function(a,b){this.model.on("change:"+b,function(c){a.html(c.get(b))})},subscribeOnChangesTwoWay:function(a,b,c){var e=this;this.model.on("change:"+b,this.updateField.bind(this,a,b,c)),a="radio"===c?d("[name="+b+"][type=radio]",a):a;var f=function(a){e.changeCounter++,e.model.set(b,a),e.autoupdate&&e.model.save()}.bind(this),g=0;a.off("change"),a.off("keyup"),a.on("change",function(a){var b="checkbox"===c?d(this).prop("checked"):d(this).val();f(b)}),a.on("keyup",function(a){if(9!==a.keyCode){g++;var b=d(this).val();e.bounce?setTimeout(function(a){return function(){g--,g||f(a)}}(b),e.bounce):f(b)}})},updateField:function(a,b,c){function e(a,b){var c=a.attr("name");"from"===c&&g.model.get("fromAuto")&&g.range?a.attr({placeholder:g.range[0]}):"to"===c&&g.model.get("toAuto")&&g.range?a.attr({placeholder:g.range[1]}):"step"===c&&g.model.get("stepAuto")?a.attr({placeholder:""}):a.val(b)}if(!(this.changeCounter>0&&(this.changeCounter--,this.changeCounter>0))){var f=this.model.get(b),g=this;"radio"===c?(d("[name="+b+"][type=radio]",a).removeAttr("checked"),d("[name="+b+"][type=radio][value="+f+"]",a).click()):"checkbox"===c?a.prop("checked",f):e(a,f)}},render:function(a){this.setElement(a),this.$el.html(this.template(this.model.toJSON())),this.bindModelToFormFields()},bindModelToFormFields:function(){for(var a=this.$el,b=a.find("[name], [data-fr]"),c=0;c<b.length;c++){var e,f,g=d(b[c]);if(g.attr("data-fr"))e=g.attr("data-fr"),this.subscribeOnChangesOneWay(g,e),g.html(this.model.get(e));else{e=g.attr("name"),f=g.attr("type");var h="radio"===f?this.$el:g;this.subscribeOnChangesTwoWay(h,e,f),this.updateField(h,e,f)}}}})},{"./../IView":197,jquery:109}],202:[function(a,b,c){b.exports=a("./LiveFormView")},{"./LiveFormView":201}],203:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../../utilities"),g=a("../../../components/Vocabulary"),h=a("./../../../controls/index.js"),i=a("../../../Core/MVC/View"),j=(a("../../../Core/MVC").Events,f.isNumericAttributeType),k=a("./../../FormulaEditPopup"),l=a("./functionItemTemplate.html"),m=a("./functionsTemplate.html"),n=a("./metricFunctionTemplate.html"),o=a("./../../MetricPickerItem/calculationEdit.html"),p=i.extend({className:"functionList",fTemplate:m,functionItemTemplate:l,events:{"click .functionItem":"select"},initialize:function(a){if(!a.state)throw Error("options.state must be defined");return this.state=a.state,delete a.state,i.prototype.initialize.apply(this,arguments),this.selected=a.selected,this.render(),this},select:function(a){var b=a.target.textContent.toLowerCase();this.$el.find("li.functionItem.selected").removeClass("selected"),d(a.target).addClass("selected"),this.trigger("select",b.replace(" ","_"))},render:function(){var a=this,b=this.fTemplate({}),c=f.getFunctionsForMetric(this.state),d=a.selected.toLowerCase(),e="";d=d.replace(" ","_"),"count"===d&&(d="distinct_count"),this.$el.html(b),this.options.distinctCountEnabled&&c.push("distinct_count");var h=this.$el.find("ul.functions");return c.forEach(function(b){var c=g.text(b);e+=a.functionItemTemplate({label:c,selected:b===d?"selected":""})}),h.html(e),this}}),q=i.extend({className:"metricItem values-list-item",tagName:"li",functionTemplate:n,selectTemplate:'<div class="zd icon checkmark"></div>',events:{click:"toggle","click .metricFunction":"openFunctionList","click .formula-metric-edit-trigger":"showFormulaPopup"},defaults:{multiselect:!1},initialize:function(a){if(!a.state)throw Error("options.state must be defined");this.state=a.state,delete a.state,i.prototype.initialize.apply(this,arguments);var b=a.metric.get("storageConfig")||{},c=b.type||a.metric.get("type");return this.data={id:a.metric.get("id"),name:a.metric.get("name"),label:a.metric.get("label"),type:c,selected:a.selected,func:this.getDefaultFunc(a.metric)},this.disabledMetric=this.checkDisabledMetric(this.options.metric),this},toggle:function(){var a=this.$el.hasClass("selected"),b=this.options.multiselect;a?b&&this.deselect():this.select()},deselect:function(){this.$el.removeClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected"),this.trigger("deselect",this.data)},select:function(){var a=this.options.multiselect;return this.disabledMetric?void this.state.metrics.trigger("metric:unsupported",this.options.metric,{removeAll:!0}):(a||this.deselectAll(),this.$el.addClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected").addClass("selected"),this.trigger("select",this.data),void(a&&"last_value"===this.data.func&&this.disableMultiMetrics()))},deselectAll:function(){this.$el.parent().parent().parent().find(".selected").removeClass("selected").find(".zd.icon.checkbox.radio>span").removeClass("selected")},openFunctionList:function(a){this._undockParentView();var b=this.options.metric,c=b.get("storageConfig")||{},e=c.type||b.get("type");if(-1!==["ATTRIBUTE","TEXT"].indexOf(e))return!1;var f=this,g=new h.SmallPopup({customClass:"funcPalette",pointerWidth:"14"}),i=new p({selected:a.target.text,state:this.state,distinctCountEnabled:this.checkDistinctCountFunc(b)});g.render(i.$el),g.position({of:d(a.target),my:"left+15 center",at:"right center",collision:"flipfit flipfit"}),i.on("select",function(a){f.data.func=a,f.render(),g.hide(),g.closeModal(),f.select()}),a.stopPropagation()},_undockParentView:function(){this.options.$parentView.closest(".metricPalette.docked").removeClass("docked")},render:function(){var a=this.options.metric.get("storageConfig")||{},b=a.type||this.options.metric.get("type"),c=-1!==["ATTRIBUTE","TEXT"].indexOf(b),d="distinct_count"===this.data.func&&c,h=this.options.selectedItem&&this.options.selectedItem.boxPlot,i=this.functionTemplate({func:g.text(this.data.func),disabled:d?" disabled":""}),j=e.template(this.selectTemplate,{selected:this.data.selected?" selected":""}),k='<div class="text">'+f.htmlEntities(this.data.label)+"</div>";return this.data.selected&&this.$el.addClass("selected"),this.$el.html(j),this.$el.append(k),"count"===this.data.name||"none"===this.data.name||"FORMULA"===this.data.type||h||this.$el.append(i),"FORMULA"===this.data.type&&this.options.metric.get("permissions").edit&&this.$el.append(o()),this.$el.attr("data-name",this.data.name),this.$el.attr("data-func",this.data.func),this.$el.attr("data-label",this.data.label),this.$el.attr("data-type",this.data.type),this.$el.attr("disabled",this.disabledMetric),this},disableMultiMetrics:function(){this.trigger("disable:metrics",this.data)},checkDisabledMetric:function(a){var b=!1,c=this.options.sourceType,d=this.options.selectedItem,e=this.state.isLastValueFunc(),f=a.get("storageConfig")||{},g=f.type||a.get("type"),h=this.state.metrics.findWhere({func:"distinct_count"}),i=-1!==["IMPALA","SQL"].indexOf(c),k=j(g)&&"count"!==a.get("name")&&"Volume"!==a.get("label");return e&&(d&&"last_value"!==d.func||this.state.isMultiMetric()&&!d)&&(a.get("distinctCount")||k)&&(b=!0),h&&i&&d&&"distinct_count"!==d.func&&a.get("distinctCount")&&!k&&(b=!0),b},getDefaultFunc:function(a){var b=this.state,c=this.options.selectedItem,d=(a.get("name"),a.get("func")),e=a.get("storageConfig")||{},f=e.type||a.get("type"),g="FORMULA"===f,h=j(f)&&("count"!==a.get("name")||!!a.get("func")),i=b.groupBy.any(function(a){var b=a.get("sort");return b.func&&"count"!==b.name}),k=b.metrics.any(function(a){return c&&a.get("name")===c.name?!1:!!a.get("func")});return d&&(d=d.toLowerCase()),g?d="calc":("last_value"===d&&(i||k)&&(d="avg"),e.distinctCount&&!h&&(d="distinct_count")),d},checkDistinctCountFunc:function(a){var b=a.get("storageConfig")||{},c=b.distinctCount,d=this.options.selectedItem,e="IMPALA"===this.options.sourceType,f=this.state.metrics.findWhere({func:"distinct_count"});return f&&e&&d&&"distinct_count"!==d.func&&(c=!1),c},showFormulaPopup:function(a){a.stopPropagation();var b=this,c=this.options.metric.collection;new k({actions:{edit:function(){c.trigger("metricEditCalculation",b.data.id)},duplicate:function(){c.trigger("metricDuplicateCalculation",b.data.id)},remove:function(){c.trigger("metricRemoveCalculation",b.data.id)}}}).render(a.target)}});b.exports=q},{"../../../Core/MVC":6,"../../../Core/MVC/View":5,"../../../components/Vocabulary":60,"../../../utilities":151,"./../../../controls/index.js":73,"./../../FormulaEditPopup":192,"./../../MetricPickerItem/calculationEdit.html":208,"./functionItemTemplate.html":204,"./functionsTemplate.html":205,"./metricFunctionTemplate.html":207,jquery:109,underscore:244}],204:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<li class="functionItem '+(null==(__t=selected)?"":__t)+'">'+__e(label)+"</li>";return __p}},{lodash:242}],205:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<ul class="functions"></ul>';return __p}},{lodash:242}],206:[function(a,b,c){b.exports=a("./MetricItem")},{"./MetricItem":203}],207:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<a class="option metricFunction'+(null==(__t=disabled)?"":__t)+'">'+__e(func)+"</a>";return __p}},{lodash:242}],208:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n    \n-->\n<div class="formula-metric-edit-trigger">\n    <div class="formula-icon-set">\n        <div class="zd icon"></div>\n        <div class="zd icon"></div>\n        <div class="zd icon"></div>\n    </div>\n</div>';return __p}},{lodash:242}],209:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("bootbox"),g=a("../../Core/MVC/View"),h=a("./modelWarningTemplate.html");b.exports=g.extend({className:"zd-warning",template:h,initialize:function(a){return this.options=d.extend({},this.options,a),this.options.handlers&&e.each(this.options.handlers,function(a){a["class"]||(a["class"]="btn-action")}),this},render:function(){return this.$el.html(this.template({title:this.options.title||"",hideIcon:this.options.hideIcon,description:this.options.description})),this.delegateEvents(),this},showup:function(){var a=this;if(this.bootbox=f.dialog(this.render().$el,this.options.handlers).addClass(this.className),this.options.background&&d(".modal-backdrop").css({background:this.options.background,opacity:this.options.opacity||1}),this.bootbox.one("hide",function(){a.remove()}),this._isFsMode()){var b=this.$el.zIndex(),c=this.bootbox.next();c.zIndex(b+10),this.bootbox.zIndex(b+15)}},_isFsMode:function(){return d(".fullScreenView").is(":visible")},hideModal:function(){this.$el.hide(),d(".modal-backdrop").hide()},close:function(){this.bootbox&&this.bootbox.modal("hide"),this.remove()}})},{"../../Core/MVC/View":5,"./modelWarningTemplate.html":210,bootbox:236,jquery:109,underscore:244}],210:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;Array.prototype.join;with(obj)__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n",title&&(__p+='\n	<div class="header"> '+__e(title)+" </div>\n"),__p+='\n<div class="warn" style="display: '+(null==(__t=hideIcon?"none":"")?"":__t)+'" >\n	<i class="zd icon warning"></i> <span>WARNING</span>\n</div>\n<div class="warning-description" style="word-break: initial;"> '+(null==(__t=description)?"":__t)+" </div>";return __p}},{lodash:242}],211:[function(a,b,c){"use strict";var d=(a("jquery"),a("underscore"),a("../../models/Source")),e=a("./../ListItem"),f=a("./objectFieldItemTemplate.html"),g=e.extend({model:new d,className:"object-field",defaults:{template:f},getRenderConfig:function(){var a=null,b=this.model.get("storageConfig"),c="FORMULA"===b.type&&this.model.get("permissions").edit;return this.model.get("forms")&&(a=this.model.get("forms").filter(function(a){return a.primary})[0].label),{selected:this.selected,attributes:this.model.attributes,editableFormula:c,form:a}}});b.exports=g},{"../../models/Source":135,"./../ListItem":198,"./objectFieldItemTemplate.html":212,jquery:109,underscore:244}],212:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;Array.prototype.join;with(obj){__p+="<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n";var type=attributes.storageConfig?attributes.storageConfig.type.toLowerCase():attributes.type.toLowerCase();__p+='\n<div class="object-field-container '+__e("formula"===type?"field-container-formula":"")+'">\n    <div title="'+(null==(__t=type)?"":__t)+'"\n        class="zd icon drag-icon '+(null==(__t=type)?"":__t)+'"></div>\n    <div class="text">'+__e(attributes.label),form&&(__p+=" "+(null==(__t=form)?"":__t)+" "),__p+='</div>\n    <i class="zd icon right-chevron" style="display: none"></i>\n</div>\n',editableFormula&&(__p+='\n    <div class="formula-show-popup-trigger">\n        <div class="formula-icon-set">\n            <div class="zd icon"></div>\n            <div class="zd icon"></div>\n            <div class="zd icon"></div>\n        </div>\n    </div>\n'),__p+="\n"}return __p}},{lodash:242}],213:[function(a,b,c){"use strict";var d=a("jquery"),e=(a("underscore"),a("../../utilities")),f=(a("../../Core/MVC/View"),a("./../DashboardDownload"),a("./pdfDownloadTemplate.html")),g=a("./../DashboardDownload/spinnerIcon.html"),h=a("moment"),i=a("./../../components/settings"),j=a("../../views/DashboardDownload/DownloadOptions/DownloadOptions"),k=j.extend({className:"zdView-PdfExport pdf-download-block",template:f,events:function(){return d.extend({},j.prototype.events,{'click button[value="pdf"]':"proceedToPdfSaving","keypress input[maxlength]":"checkLength"})},initialize:function(a){return j.prototype.initialize.apply(this,arguments),this.options=d.extend({},a,this.options),this.downloadView=this.options.downloadView,this.popup=this.options.popup,this.currentUserName=i.user.name,this},render:function(){var a=e.mode(),b=0===a||3===a;return this.$el.html(this.template({showName:b})),this.renderBackButton(),this},proceedToPdfSaving:function(a){var b=d(a.target),c=this.$el.find("#pdf-header").val(),e=this.$el.find("#pdf-footer").val(),f=this.$el.find("#pdf-timestamp").is(":checked"),g=this.$el.find("#pdf-username").is(":checked"),i=h().format("LL"),j={header:{show:c.length>0,value:c},footer:{show:e.length>0,value:e},timestamp:{show:f,value:i},username:{show:g,value:this.currentUserName}};d(a.target).hasClass("icon")&&(b=d(a.target).parent()),this.isSpinning(b)||(this.showSpinner(b),this.trigger("download:pdf",b,j))},checkLength:function(a){var b=d(a.currentTarget);return b.val().length<=b.prop("maxlength")},isSpinning:function(a){return!!a.find(".spinner").length},showSpinner:function(a){var b=a.attr("spinnerTittle");a.attr("defaulttitle",a.text()).html(g({title:b}))},destroy:function(){this.undelegateEvents(),this.remove()}});b.exports=k},{"../../Core/MVC/View":5,"../../utilities":151,"../../views/DashboardDownload/DownloadOptions/DownloadOptions":166,"./../../components/settings":61,"./../DashboardDownload":173,"./../DashboardDownload/spinnerIcon.html":174,"./pdfDownloadTemplate.html":216,jquery:109,moment:243,underscore:244}],214:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div id="pdf-page-wrapper">\n    <div class="pdf-content">\n        ',config.header.show&&(__p+='\n        <div class="pdf-header">'+__e(config.header.value)+"</div>\n        "),__p+='\n        <div class="pdf-image"></div>\n        ',showFooter&&(__p+='\n        <div class="pdf-footer">\n            ',config.footer.show&&(__p+='\n            <div class="custom-footer">'+__e(config.footer.value)+"</div>\n            "),__p+='\n            <div class="pdf-data">\n                ',config.timestamp.show&&(__p+='\n                <div class="timestamp">'+__e(config.timestamp.value)+"</div>\n                "),__p+="\n                ",config.username.show&&(__p+='\n                <div class="username">'+__e(config.username.value)+"</div>\n                "),__p+="\n            </div>\n        </div>\n        "),__p+="\n    </div>\n</div>";return __p}},{lodash:242}],215:[function(a,b,c){b.exports=a("./PdfExport")},{"./PdfExport":213}],216:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __p="";_.escape,Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="pdf-opts-wrap">\n    <div class="custom-opts">\n        <label>Header</label>\n        <input type="text" id="pdf-header" class="pdf-header-text pdf-text" placeholder="Optional" maxlength="50">\n        <label>Footer</label>\n        <input type="text" id="pdf-footer" class="pdf-footer-text pdf-text" placeholder="Optional" maxlength="70">\n    </div>\n    <div class="additional-opts">\n        ',showName&&(__p+='\n        <input type="checkbox" class="show-username zd icon checkmark" id="pdf-username">\n        <label for="pdf-username">Add Username</label>\n        '),__p+='\n        <input type="checkbox" class="show-timestamp zd icon checkmark" id="pdf-timestamp">\n        <label for="pdf-timestamp">Add Timestamp</label>\n    </div>\n    <button class="zd-button btn" value="pdf">\n        <i class="zd icon download"></i>\n        Export\n    </button>\n</div>';return __p}},{lodash:242}],217:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=f.View,h=(f.Model,f.Events,a("../../views/DashboardDownload/DownloadOptions/DownloadOptions")),i=(a("velocity-animate"),a("../../utilities/Utilities")),j=a("moment"),k=a("../../controls"),l=k.Notification,m=a("../../admin/DropDown"),n=a("./../../views/MetricPalette/MetricItem"),o=a("../../collections/ObjectFields"),p=a("./../GroupedListView"),q=[{name:"All Records",type:"ALL"},{name:"Limit The Number of Records",type:"LIMIT"}],r=a("./rawDataExportTemplate.html"),s=h.extend({events:function(){return d.extend({},h.prototype.events,{'input input[type="number"]':"_onRecNumChange",'click button[value="raw"]':"downloadRawData","click .select-field":"toggleObjectFields","click .radio-button":"_radioButtonClick"})},className:"zdView-RawDataExport",template:r,initialize:function(a){var b=this;this.options=d.extend({},a,this.options),
h.prototype.initialize.apply(this,arguments),this.config=this.options.config,this.config.set({menuItems:q}),this.currentSource=this.options.currentSource,this.objectFields=new o(this.currentSource.get("objectFields")),this.metricPaletteView=new t({state:this.options.state,groupBy:"type",collection:this.objectFields}),this.hideSpinner=this.options.spinner.hide,this.showSpinner=this.options.spinner.show,this.selectedModel=this.objectFields.models.filter(function(a){var b=a.toJSON();return b.storageConfig&&"NONE"===b.storageConfig.type})[0]||this.objectFields[0],this.selectedModel.selected=!0,this.config.set({sortField:this.selectedModel.toJSON()}),this.listenTo(this.metricPaletteView,"select",function(a){this.selectedModel=b.objectFields.findWhere({name:a.name}),e.each(b.objectFields.models,function(a){(a.selected||!a.selected)&&(a.selected=!1)}),this.config.set({sortField:a}),this.selectedModel.selected=!0})},render:function(){var a=this.selectedModel.toJSON(),b=this.config.get("sortField"),c=b.type||b.storageConfig.type;return this.$el.html(this.template({field:a,limit:this.config.get("limit"),sortDir:this.config.get("sortDir"),rangeType:this.config.get("rangeType"),sortTitles:this.detectSortingTitles(a),type:c})),this.$metrics=this.$(".mertic-items"),this.$options=this.$(".raw-data-options"),this.renderDropDownMenu(),this.renderObjectFields(),h.prototype.render.apply(this,arguments),this},renderDropDownMenu:function(){var a=e.findWhere(q,{type:this.config.get("rangeType")});this.dropDownMenu&&this.dropDownMenu.remove(),this.dropDownMenu=new m({models:q,source:this.currentSource}),this.dropDownMenu.selected=a,this.stopListening(this.dropDownMenu,"change",this._onSelectChange).listenTo(this.dropDownMenu,"change",this._onSelectChange);var b=this.$el.find(".dropdown");b.append(this.dropDownMenu.render().$el)},_onSelectChange:function(){var a=this.dropDownMenu.selected.type;this.config.set({rangeType:a});var b="LIMIT"===a?"slideDown":"slideUp",c=this.$(".range-value");c.velocity(b,{duration:300})},setLimit:function(){var a=this.$(".records-number"),b="LIMIT"===this.dropDownMenu.selected.type?a.val():-1;this.config.set({limit:parseInt(b)})},_onRecNumChange:function(){var a=this.$('input[type="number"].records-number'),b=parseInt(a.attr("min"))||0,c=parseInt(a.val())||0;b>c&&(c=b),a.val(c),this.setLimit()},getRestrictions:function(){var a=this.options.state.get("timestampField"),b=i.time.convertToServerDate,c=this.options.state.time,d=!0,f=b(c.get("fromTime"),d),g=b(c.get("toTime"),d),h=this.options.state.filters.toJSON(),j=this.options.restrictions||h,k={path:a||"",operation:"BETWEEN",value:[f,g]};return a&&!e.findWhere(j,{path:a})&&j.push(k),j},getSearchQuery:function(){var a=this.options.state.filters.toJSON(),b=e.findWhere(a,{operation:"TEXT_SEARCH"});return b&&b.value?b.value:""},downloadRawData:function(a){var b=this,c=a instanceof d?a:d(a.currentTarget),e="service/export/generate/rawdata/",f=this.options.state.get("streamSourceId"),g=this.config.get("rangeType"),h="LIMIT"===g?this.config.get("limit"):-1,k=this.config.toJSON(),l=k.sortField.type||k.sortField.storageConfig.type,m="NONE"===l?[]:[{dir:this.config.get("sortDir"),name:k.sortField.name}],n={limit:h,offset:0,streamSourceId:f,restrictions:this.getRestrictions(),fields:[],sortCfgs:m,query:this.getSearchQuery()};return c&&this.showSpinner(c),d.ajax({type:"POST",url:e,contentType:"application/json",data:JSON.stringify(n)}).done(function(a){var c=j().format("YYYYMMDDhhmmss"),d=b.currentSource.get("name").toLowerCase().replace(" ","_"),e=d+"_"+c;i.downloadParsedData(a,e,"text/csv")}).fail(function(a,c,d){var e=a.responseJSON.details;b.showNotification({type:"error",message:e})}).complete(function(){var a=c.attr("iconClass")?c.attr("iconClass"):"download";b.hideSpinner(c,a)})},_radioButtonClick:function(a){var b=d(a.currentTarget);b.find(".radio.checked").length||(b.find(".radio").addClass("checked"),b.siblings().find(".radio").removeClass("checked"));var c=this.$(".checked").parent().attr("value");this.config.set({sortDir:c})},_onBackButtonClick:function(){this.metricsVisible?(this.toggleObjectFields(!1),this.render()):this.trigger("export:back")},renderObjectFields:function(){this.$metrics.html(this.metricPaletteView.render().$el)},toggleObjectFields:function(a){var b=this.$options.is(":visible"),c=b?"fadeOut":"fadeIn",d=b?"fadeIn":"fadeOut",e={duration:0};this.$metrics.velocity(d,e),this.$controls.velocity(c,e),this.$options.velocity(c,e),this.metricsVisible=Boolean(a)},showNotification:function(a){var b=new l(a),c=a.message||"";b.render(c)},detectSortingTitles:function(a){var b,c,d=a.storageConfig.type;switch(d){case"TIME":b="Chronological",c="Reverse Chronological";break;case"ATTRIBUTE":b="Alphabetical",c="Reverse Alphabetical";break;default:b="Ascending",c="Descending"}return{asc:b,desc:c}}}),t=p.extend({tagName:"ul",className:"raw-data-fields",initialize:function(a){this.options=d.extend({},a,this.options),this.objectFields=this.options.collection,g.prototype.initialize.apply(this,arguments)},render:function(){var a=this,b=this.objectFields.map(function(b){return new n({metric:b,selected:b.selected,$parentView:a.$el,state:a.options.state,main:{},multiselect:!1})});return this.$el.empty(),e.each(b,function(b){a.$el.append(b.render().$el),b.on("select",function(b){a.trigger("select",b)})}),this}});b.exports=s},{"../../Core/MVC":6,"../../admin/DropDown":11,"../../collections/ObjectFields":30,"../../controls":73,"../../utilities/Utilities":149,"../../views/DashboardDownload/DownloadOptions/DownloadOptions":166,"./../../views/MetricPalette/MetricItem":206,"./../GroupedListView":194,"./rawDataExportTemplate.html":219,jquery:109,moment:243,underscore:244,"velocity-animate":245}],218:[function(a,b,c){b.exports=a("./RawDataExport")},{"./RawDataExport":217}],219:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n\n<div class="raw-data-options">\n    <legend class="subhead">Range of Records</legend>\n    <div class="range-options">\n        <div class="list dropdown"></div>\n        <div class="range-value" style="display: '+(null==(__t="ALL"===rangeType?"none":"")?"":__t)+'">\n            <input type="number" class="records-number" min="0" value="0" required/>\n        </div>\n    </div>\n    <legend class="subhead">Sort by</legend>\n    <div class="sort-options">\n        <button class="zd btn select-field" data-obj-name="Volume">\n            <span>'+__e(field.label)+'</span>\n            <i class="zd icon right-chevron"></i>\n        </button>\n        <div class="sort-dir" style="display: '+(null==(__t="NONE"===type?"none":"block")?"":__t)+'">\n            <span class="radio-button" value="asc">\n                <span class="zd icon checkbox radio selected '+(null==(__t="asc"===sortDir?"checked":"")?"":__t)+'">\n                    <span class="zd radio-inner selected"></span>\n                </span>\n                <div class="radio-label">'+(null==(__t=sortTitles.asc)?"":__t)+'</div>\n            </span>\n            <span class="radio-button" value="desc">\n                <span class="zd icon checkbox radio selected '+(null==(__t="desc"===sortDir?"checked":"")?"":__t)+'">\n                    <span class="zd radio-inner selected"></span>\n                </span>\n                <div class="radio-label">'+(null==(__t=sortTitles.desc)?"":__t)+'</div>\n            </span>\n        </div>\n    </div>\n</div>\n<div class="mertic-items" style="display: none;"></div>\n';return __p}},{lodash:242}],220:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj){if(__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="refline-wrapper">\n    <header class="top sub-header">\n        ',showDelete&&(__p+='\n            <button class="first-delete">\n                <i class="zd icon delete-item"></i>\n                Delete\n            </button>\n        '),__p+="\n        ",showToggler&&(__p+='\n            <i class="toggle"></i>\n        '),__p+='\n        <h3 class="toggle" data-fr="title">Reference Line</h3>\n    </header>\n    <form class="refline-form rulers-form">\n        ',showAxis){__p+='\n        <div class="option">\n            <div class="scale-label">\n                <label for="axis-value">Axis</label>\n            </div>\n            <div class="refline-options">\n                <select id="axis-value" name="axis">\n                    ';for(var i in axisData)__p+='\n                        <option value="'+(null==(__t=axisData[i].axis)?"":__t)+'">\n                            '+(null==(__t=axisData[i].axis)?"":__t)+": \n                            "+(null==(__t=axisData[i].metricsName)?"":__t)+"\n                        </option>\n                    ";__p+="\n                </select>\n            </div>\n        </div>\n        "}__p+='\n        <div class="option">\n            <div class="scale-label">\n                <label for="number-value">Position</label>\n            </div>\n            <div class="range-and-text refline-options zd icon">\n                <input id="number-value" type="number" name="position" step="any">\n            </div>\n        </div>\n        <div class="option">\n            <div class="scale-label">\n                <label for="title-value">Title</label>\n            </div>\n            <div class="refline-options">\n                <input id="title-value" type="text" name="title">\n            </div>\n        </div>\n        <div class="option">\n            <div class="scale-label">\n                <label>Color</label>\n            </div>\n            <div class="color-input refline-options"></div>\n        </div>\n        <div class="option">\n            <div class="scale-label">\n                <label for="width-value">Width</label>\n            </div>\n            <div class="range-and-text refline-options zd icon">\n                <div class="refline-slider width"></div>\n                <input id="width-value" \n                    class="refline-width" type="number" name="width" min="1" max="20">\n            </div>\n        </div>\n        <div class="option">\n            <div class="scale-label">\n                <label for="linetype-sel">Line type</label>\n            </div>\n            <div class="refline-options">\n                <select id="linetype-sel" name="linetype">\n                    <option value="1" selected>Solid</option>\n                    <option value="2" selected>Dashed</option>\n                    <option value="3" selected>Dotted</option>\n                </select>\n            </div>\n        </div>\n    </form>\n</div>'}return __p}},{lodash:242}],221:[function(a,b,c){"use strict";var d=(a("./../IView"),a("jquery")),e=a("underscore"),f=a("backbone"),g=a("./../../controls"),h=a("./../LiveForm"),i=(a("velocity-animate"),h.extend({events:{"click i.toggle":"toggle","click h3.toggle":"toggle","blur [type=number][name=position]":"resetToZero","blur [type=text][name=title]":"resetName","input .refline-width":"updateSliderValue","click button.first-delete":"deleteSelf"},needs:["template","model","getRange","axis","state"],optionalNeeds:{autoupdate:!1,showDelete:!0,showToggler:!0,positionRange:[0,100],bounce:500,positionStep:1},initialize:function(){return h.prototype.initialize.apply(this,arguments),this.range=this.getRange(this.model),this},updateSliderValue:function(a){var b=a.target.value.replace("%","");this.widthSlider.slider("value",b)},render:function(a){this.model.set=function(a,b,c){var d;e.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);for(var g in d)"width"===g&&(d[g]>20||d[g]<1||!d[g])&&(d[g]=2);return f.Model.prototype.set.call(this,d,c)},this.setElement(a);var b=e.pick(this,"showDelete","showToggler","range");b.step="",b.showAxis=this.axis.models.length>1,b.axisData=this.axis.map(function(a){return{axis:a.get("axis"),metricsName:a.get("metricsName")}});var c=b.range?b.range[1]-b.range[0]:0;10>c&&(b.step=.25),1>c&&(b.step=c/42),this.$el.html(this.template(b)),this.model.get("position")||this.updateReflinePosition();var d=new g.ColorPicker({el:this.$(".color-input"),color:this.model.get("color")});this.listenTo(d,"change",function(a){this.model.set("color",a)}.bind(this)),this.listenTo(d,"beforeShow",function(){this._undockParentView()}.bind(this)),this.bindModelToFormFields(),this.renderSliders(b)},updateReflinePosition:function(){this.range=this.getRange(this.model);var a;a=this.range?Math.round((this.range[1]-this.range[0])/2+this.range[0]):0,this.model.set({position:a})},renderSliders:function(a){var b=this,c=(isNaN(parseInt(a.step))?1:parseInt(a.step),this.model.get("width")||1);this.model.get("position");this.widthSlider=this.$(".refline-slider").slider({range:"min",slide:function(a,b){var c=d(this).siblings('input[type="number"]');c.val(b.value)},create:function(){d(this).find(".ui-slider-handle").addClass("zd icon")}});var e=1e3,f=0,g=function(a,c){--f<1&&b.model.set({width:c.value})};this.$(".width").slider({min:1,max:20,step:1,value:c,slide:function(a,b){f++,setTimeout(g.bind(null,a,b),e)}}),!a.range},_undockParentView:function(){var a=this.$el.closest(".docked");a.removeClass("docked")},resetName:function(a){var b=d(a.target);setTimeout(function(){""===b.val()&&this.model.set("title","Reference Line "+(this.getModelPosition()+1))}.bind(this),this.bounce)},resetToZero:function(a){var b=d(a.target);setTimeout(function(){""===b.val()&&b.val(0).change()}.bind(this),this.bounce)},toggle:function(a){if(this.showToggler){var b=d(a.currentTarget),c=b.parent().parent().find("form.refline-form"),e=b.siblings("i"),f=c.is(":visible"),g=f?"slideUp":"slideDown",h=f?"-90deg":"0deg";c.velocity(g,{duration:350}),e.velocity({rotateZ:h},{duration:350})}},deleteSelf:function(){this.trigger("deleted"),this.model.unset("id",{silent:!0}),this.model.destroy(),this.state.custom.get("rulers").get("reflines").trigger("change"),this.remove()}}));b.exports=i},{"./../../controls":73,"./../IView":197,"./../LiveForm":202,backbone:235,jquery:109,underscore:244,"velocity-animate":245}],222:[function(a,b,c){b.exports=a("./ReferenceLineFormView")},{"./ReferenceLineFormView":221}],223:[function(a,b,c){"use strict";var d=a("jquery"),e=(a("underscore"),a("../../Core/MVC/View")),f=a("../../Core/MVC/Model"),g=f.extend({defaults:{needle:"",caseSensitive:!1,regExp:!1,words:!1}}),h=a("./searchBoxMinTemplate.html"),i=a("./searchBoxNormalTemplate.html");b.exports=e.extend({className:"row-fluid zd-searchbox",events:{'input input[name="needle"]':"_onNeedleChange",'keypress input[name="needle"]':"keyEnterPressed",'click button[name="search"]':"_onSearchClick",'click button[name="clear"]':"_onClearClick",'change input[value="caseSensitive"]':"_onIfCaseChange",'change input[value="regExp"]':"_onIfRegExpChange",'change input[value="words"]':"_onIfWordsChange"},defaults:{mode:"min"},initialize:function(a){switch(e.prototype.initialize.apply(this,arguments),a=a||{},this.options=d.extend({},this.defaults,a),this.options.mode){case"min":this.template=h;break;default:this.template=i}return a.template&&(this.template=a.template,delete this.options.template),this.model=this.model||new g,this},clear:function(){this.$el.find("input").val("")},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.delegateEvents(),this},keyEnterPressed:function(a){var b=13;a.keyCode===b&&a.preventDefault()},_onNeedleChange:function(){this.model.set("needle",this.$('input[name="needle"]').val()),this.trigger("search",this.model),this.$('input[name="needle"]').focus()},_onIfCaseChange:function(){this.model.set("caseSensitive",this.$('input[value="caseSensitive"]').prop("checked")),this.trigger("search",this.model)},_onIfRegExpChange:function(){var a=this.$('input[value="regExp"]').prop("checked");this.model.set("regExp",a),a?(this.model.set("words",!1),this.$('input[value="words"]').prop("checked",!1),this.$('input[value="words"]').prop("disabled",!0)):this.$('input[value="words"]').prop("disabled",!1),this.trigger("search",this.model)},_onIfWordsChange:function(){this.model.set("words",this.$('input[value="words"]').prop("checked")),this.trigger("search",this.model)},_onSearchClick:function(){this.trigger("search",this.model)},_onClearClick:function(){this.model.set("needle",""),this.trigger("search",this.model)}})},{"../../Core/MVC/Model":4,"../../Core/MVC/View":5,"./searchBoxMinTemplate.html":224,"./searchBoxNormalTemplate.html":225,jquery:109,underscore:244}],224:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="control-group">\n    <div class="zd icon magnifying-glass"/>\n    <input type="text" class="search-query input-block-level" name="needle" value="'+(null==(__t=needle)?"":__t)+'">\n</div>';return __p}},{lodash:242}],225:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="input-prepend">\n    <div class="btn-group">\n        <button class="btn" title="Search" name="search">\n            <div class="zd icon magnifying-glass"></i>\n        </button>\n        <button class="btn dropdown-toggle" title="Search Options" data-toggle="dropdown">\n            <span class="caret"></span>\n        </button>\n        <ul class="dropdown-menu">\n            <li>\n                <a>\n                    <label class="checkbox">\n                        <input type="checkbox" value="caseSensitive" ',caseSensitive&&(__p+="checked"),__p+='>\n                               Case Sensitive\n                    </label> \n                </a>\n            </li><li>\n                <a>\n                    <label class="checkbox">\n                        <input type="checkbox" value="words" ',words&&(__p+="checked"),__p+='>\n                               Whole Words\n                    </label> \n                </a>\n            </li>\n        </ul>\n    </div> \n    <input type="text" name="needle" value="'+(null==(__t=needle)?"":__t)+'">\n    <button name="clear" title="Clear" class="close"><i class="icon-remove"></i> </button> \n</div> ';return __p}},{lodash:242}],226:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="attributeItem">\n    <div class="text">'+__e(attributes.label),form&&(__p+=" "+(null==(__t=form)?"":__t)+" "),__p+="</div>\n</div>";return __p}},{lodash:242}],227:[function(a,b,c){"use strict";var d=a("jquery"),e=a("underscore"),f=a("../../Core/MVC"),g=a("./../ObjectFieldItem"),h=a("./../../controls/index.js"),i=a("./../ListView"),j=a("./../ListItem"),k=a("./../FormsView"),l=f.Collection,m=a("../../Core/Settings"),n=m.TIME_SCALES,o=a("./attributeAxisItemTemplate.html"),p=a("./selectTemplate.html"),q=j.extend({className:"scale-item",template:e.template("<%- name %>"),render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.addClass(this.model.get("selected")),this},_onClick:function(){j.prototype._onClick.apply(this,arguments)}}),r=g.extend({className:"",selectTemplate:p,stepTemplate:e.template('<a class="step"><%=step%></a>'),defaults:{template:o,selectedClass:"selected",checkbox:!0},events:{click:"_onClick","click .fused-form":"openFusedForms"},initialize:function(a){return g.prototype.initialize.apply(this,arguments),this.options=d.extend({},this.defaults,a),this.options.checkbox&&(this.template=this.selectTemplate),this.formsCollection=new f.Collection(this.model.get("forms")),this.listenTo(this.formsCollection,"select",this._onFormSelect),this},render:function(){var a=this;g.prototype.render.apply(this,arguments),this.$forms=this.$el.find(".fused-form"),this.options.checkbox?this.disabled&&(this.$el.addClass("disabled"),this.$forms.prop("disabled",!0).attr("disabled",!0)):this.$el.addClass("minimal");var b=this.model.attributes.storageConfig,c=this.$el.hasClass("selected");if(b&&"TIME"===b.type&&c){var e=d(this.stepTemplate({step:this.model.step||"YEAR"}));e.appendTo(this.$el),e.on("click",function(b){a.showTimeScales(b)})}var f=this.model.get("forms");return f&&("TIME"===b.type&&f.length<2?this.$forms.hide():this.$forms.show(),this.$el.find(".text").addClass("tiny")),this},showTimeScales:function(a){var b=this,c=b.model.get("timestampGranularity"),f=this.options.timeTrendStep,g=e.findIndex(n,function(a){return a.type===(c||"MINUTE")}),j=n.filter(function(a,b){return b>=g}).map(function(a){var b="";return a.type===f&&(b="selected"),{name:a.type,selected:b}}).reverse(),k=new h.SmallPopup({customClass:"funcPalette",pointerWidth:"14"}),m=new i({className:"scales-options unstyled",collection:new l(j),ItemView:q,selectable:"radio"});k.render(m.render().$el),k.position({of:d(a.target),my:"left+20 top-30",at:"right center",collision:"flipfit flipfit"}),this.listenTo(m,"select",function(a){var c=a.get("name").toUpperCase(),d=b.model.collection;d.trigger("selectTimeScale",c),b.trigger("selectTimeScale",c),k.remove(),m.remove()})},renderSelected:function(){var a=this.$(".checkbox.radio .checked");a.addClass("selected"),g.prototype.renderSelected.apply(this,arguments)},renderDeselected:function(){var a=this.$(".checkbox.radio .checked");a.removeClass("selected"),g.prototype.renderDeselected.apply(this,arguments)},openFusedForms:function(a){this.formsPalette=new k({$at:d(a.target),collection:this.formsCollection,$parentView:this.options.$parentView}),this.childViews.push(this.formsPalette),this.formsPalette.show(),a.stopPropagation(),this.delegateEvents()},_onFormSelect:function(){this.selected=!1,this.model.set({forms:this.formsCollection.toJSON()},{silent:!0}),this._onClick()}});b.exports=r},{"../../Core/MVC":6,"../../Core/Settings":7,"./../../controls/index.js":73,"./../FormsView":189,"./../ListItem":198,"./../ListView":200,"./../ObjectFieldItem":211,"./attributeAxisItemTemplate.html":226,"./selectTemplate.html":228,jquery:109,underscore:244}],228:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;Array.prototype.join;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<span class="zd icon checkbox radio">\n    <span class="zd checked '+(null==(__t=selected?"selected":"")?"":__t)+'"></span>\n</span>\n<div class="attributeItem">\n    <div class="text">'+__e(attributes.label),form&&(__p+=": "+(null==(__t=form)?"":__t)),__p+='</div>\n</div>\n<a class="option fused-form">More</a>';return __p}},{lodash:242}],229:[function(a,b,c){arguments[4][90][0].apply(c,arguments)},{dup:90,lodash:242}],230:[function(a,b,c){"use strict";var d=a("../../Core/MVC"),e=a("./Tooltip.html"),f=a("./TooltipStroke.html"),g=a("underscore"),h=a("jquery"),i=d.View;b.exports=i.extend({className:"zdView-Tooltip",template:e,templateStroke:f,initialize:function(a){return a=a||{},i.prototype.initialize.apply(this,arguments),g.bindAll(this,"snap","unsnap","onMenuClose"),this.tid=Math.round(1e9*Math.random())+"",this.SETTINGS={radius:18,border:2,color:"#939393",bgColor:"white",opacity:1,edgeMargin:5},this.$body=h("body"),this.$root=this.$body,this.hidden=!0,this.at={left:0,top:0},this.snapped=!1,this.temp={},a.at&&(this.at=a.at,delete a.at),this.options=a,this.$el.appendTo(this.$body),this.position={x:0,y:0},this.SHAPES={corner:this.templateStroke({width:this.SETTINGS.radius,height:2*this.SETTINGS.radius}),between:this.templateStroke({width:this.SETTINGS.radius,height:3*this.SETTINGS.radius})},this.$styles=h("<style></style>"),this.$tailDiv=h('<div class="zd_controls_tooltip_tail"></div>'),this},$in:function(){return this.$(".zd_controls_tooltip_content").eq(0)},$main:function(){return this.$(".zd_controls_tooltip_shape").eq(0)},snap:function(){var a=this;return this.snapped=!0,a.pointer?setTimeout(function(){a.$el.addClass("snapped "+a.pointer)},1):a.$el.attr("style","display: none;"),this},unsnap:function(){if(this.snapped){var a=this;this.snapped=!1,setTimeout(function(){a.snapped||(a.onMenuClose(),a.$el.attr("style","display: none;"))},10),a.$el.attr("class","zd_controls_tooltip_container")}return this},onResnap:function(){return this.temp.render&&this.render(this.temp.render),this.temp.move&&this.move(this.temp.move),this},onMenuClose:function(){return this.temp={},this.hide(),this},show:function(a){return this.hidden=!1,this.render(a),this},hide:function(){return this.hidden=!0,this.render(),this},render:function(a){var b=null;return this.snapped?(this.temp.render=a,this):this.hidden?(this.$el.empty().hide(),this):(a.content=a.content||"",this.$el.html(this.template(a)),a.at&&(this.at=a.at,delete a.at),a.color&&(this.color=a.color,this.updateColor(),delete a.color),a.event&&(b=a.event,delete a.event),a&&a.pointer&&(this.pointer=a.pointer,delete a.pointer),this.$tailDiv.appendTo(this.$main()),this.prepareStyles(),this.prepareCurve(),this.$el.show(),this.move(b?{event:b}:!1),this)},move:function(a){function b(){var a=[[0,0,0],[0,0,0],[0,0,0]],b=[["corner top left","between top","corner top right"],["between left","between top","between right"],["corner bottom left","between bottom","corner bottom right"]],c=null;if(2*(h+m+l)>j){var d=j/2-e>0?0:2;a.forEach(function(a){a[d]=a[d]+1})}else h/2+m+l>=e?a.forEach(function(a,d){1===a[0]&&(c=b[d][0]),a[0]=a[0]+1}):e>=j-h/2-m-l?a.forEach(function(a,d){1===a[2]&&(c=b[d][2]),a[2]=a[2]+1}):a.forEach(function(a,d){1===a[1]&&(c=b[d][1]),a[1]=a[1]+1});if(2*(i+m+l)>k){var g=k/2-f>0?0:2;a[g]=a[g].map(function(a,d){return 1===a&&(c=b[g][d]),a+1})}else i+m+l>=f?a[0]=a[0].map(function(a,d){return 1===a&&(c=b[0][d]),a+1}):f>=k-i-m-l?a[2]=a[2].map(function(a,d){return 1===a&&(c=b[2][d]),a+1}):a[1]=a[1].map(function(a,d){return 1===a&&(c=b[1][d]),a+1});return c}if(this.snapped)return this.temp.move=a,this;var c=this.$root.offset(),d={top:0,left:0};a&&a.at&&(this.at=a.at,delete a.at),a&&a.event?(d.top=a.event.clientY,d.left=a.event.clientX):(d.top=this.at.top||0,d.left=this.at.left||0,d.bottom=this.at.bottom,d.right=this.at.right),d.top-=c.top,d.left-=c.left;var e=d.left,f=d.top,g="undefined"!=typeof d.bottom;g&&(d.bottom+=c.top,f=d.bottom);var h=this.$el.width(),i=this.$el.height(),j=this.$root.width(),k=this.$root.height(),l=this.SETTINGS.edgeMargin,m=this.SETTINGS.radius+l,n=[0,0,0,0],o=this.pointer||b();this.$tailDiv.attr("class","zd_controls_tooltip_tail "+o),this.$tailDiv.html(this.SHAPES[o.split(" ")[0]]),this.updateColor();var p=o.split(" ");switch(p[0]){case"corner":f=g&&"bottom"===p[1]?f+m+l:"top"===p[1]?f+m+l:f-i-m-l,"right"===p[2]&&(e-=h);break;case"between":g&&"bottom"===p[1]?(e-=h/2,f=f+m+3*l):"top"===p[1]?(e-=h/2,f=f+m+3*l):"bottom"===p[1]&&(e-=h/2,f=f-i-m),"left"===p[1]?(e=e+m+l,f-=i/2):"right"===p[1]&&(e=e-h-m-l,f-=i/2)}return this.position={left:e+c.left,top:f+c.top,bottom:"auto",right:"auto"},g&&(this.position.top="auto",this.position.bottom=f-c.top),this.position.margin=n.join("px ")+"px",this.$el.css(this.position),this},updateColor:function(){if(this.hidden&&!this.snapped)return this;if(this.color){var a=this.color();if("function"==typeof a&&(a=a()),a)return this.$tailDiv.find("path").css({stroke:a}),this.$main().css({"border-color":a}),this}},prepareStyles:function(){function a(a,b){return"#"+j+" "+a+"{"+b+"}"}function b(a){var b="";for(var d in a)a.hasOwnProperty(d)&&(b+=c(d,a[d]));return b}function c(a,b){return" "+a+":"+b+"; "}function d(c,d){h+=a(c,b(d))}function e(a){return a+"px "}function f(a){var b=navigator.userAgent,c=/MSIE\s?(\d+)(?:\.(\d+))?/i,d=b.match(c);return d&&10===d[1]?a:0}var g=this,h="",i=this.SETTINGS,j="tooltip-"+(new Date).valueOf();return this.$el.attr("id",j),d(".zd_controls_tooltip_shape",{opacity:i.opacity,"background-color":i.bgColor,border:e(i.border)+"solid "+i.color,"border-radius":e(i.radius/1.5)}),d(".zd_controls_tooltip_tail.corner",{width:e(i.radius),height:e(2*i.radius)}),d(".zd_controls_tooltip_tail.corner.right",{right:e(-i.border)}),d(".zd_controls_tooltip_tail.corner.left",{left:e(-i.border),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.corner.top",{top:e(-(i.radius+i.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom",{transform:"scaleY(-1)",bottom:e(-(i.radius+i.border/2))}),d(".zd_controls_tooltip_tail.corner.bottom.left",{transform:"scaleY(-1) scaleX(-1)",bottom:e(-(i.radius+i.border/2))}),d(".zd_controls_tooltip_tail.between",{width:e(i.radius),height:e(3*i.radius)}),d(".zd_controls_tooltip_tail.between.right",{margin:e(1.5*-i.radius)+" "+e(f(0))+" 0 0",right:e(-i.radius)}),d(".zd_controls_tooltip_tail.between.left",{margin:e(1.5*-i.radius+f(4))+"0 0 "+e(f(0)),left:e(-i.radius),transform:"scaleX(-1)"}),d(".zd_controls_tooltip_tail.between.top",{top:e(2*-i.radius-i.border/2+1),left:"50%",margin:"0 0 0 "+e(-(i.radius/2+i.border/2)),transform:"rotate(-90deg)"}),d(".zd_controls_tooltip_tail.between.bottom",{bottom:e(2*-i.radius-i.border/2+1),left:"50%",margin:"0 0 0 "+e(-(i.radius/2+i.border/2)),transform:"rotate(90deg)"}),d(".zd_controls_tooltip_stroke",{stroke:i.color,fill:i.bgColor,"stroke-width":e(i.border),"stroke-linecap":"round"}),this.$styles.text(h),this.$styles.appendTo(this.$body),this.addCss=function(){d.apply(this,arguments),g.$styles.text(h)},this},prepareCurve:function(){var a=this.SETTINGS.radius,b=this.SETTINGS.border,c={corner:"M0,"+a+" C"+a/2+","+(a-b/2)+" "+(a-b/2)+","+a/2+" "+(a-b/2)+",0 V"+(a-b/2)+","+2*a,between:"M0,0 C0,"+a+" "+a/2+","+1.5*a+" "+a+","+1.5*a+" C"+a/2+","+1.5*a+" 0,"+2*a+" 0,"+3*a};return this.SHAPES.corner=this.SHAPES.corner.replace('d=""','d="'+c.corner+'"'),this.SHAPES.between=this.SHAPES.between.replace('d=""','d="'+c.between+'"'),this}})},{"../../Core/MVC":6,"./Tooltip.html":229,"./TooltipStroke.html":231,jquery:109,underscore:244}],231:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<svg width="'+(null==(__t=width)?"":__t)+'" height="'+(null==(__t=height)?"":__t)+'"><path class="zd_controls_tooltip_stroke" d="" /></svg>';return __p}},{lodash:242}],232:[function(a,b,c){b.exports=a("./Tooltip")},{"./Tooltip":230}],233:[function(a,b,c){"use strict";var d=a("../../Core/MVC"),e=a("jquery"),f=(a("underscore"),d.View),g=a("./toolbarItemTemplate.html"),h=f.extend({tagName:"li",defaults:{icon:"list",template:g,action:e.noop},events:{click:"_onClick"},initialize:function(a){a=e.extend({},this.defaults,a||{}),f.prototype.initialize.apply(this,arguments),this.template=this.template||a.template,this.action=this.action||a.action,this.icon=this.icon||a.icon,a.controller&&(this.controller=a.controller,delete a.controller)},render:function(){return this.$el.html(this.template({icon:this.icon})),this.delegateEvents(),this},_onClick:function(a){this.action(a)},highlight:function(){this.$(".zd.icon").addClass("active")},unhighlight:function(){this.$(".zd.icon").removeClass("active")},availableForMode:function(a){return!0}});b.exports=h},{"../../Core/MVC":6,"./toolbarItemTemplate.html":234,jquery:109,underscore:244}],234:[function(require,module,exports){_=require("lodash"),module.exports=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<!--\n\n    Copyright (C) Zoomdata, Inc. 2012-2015. All rights reserved.\n\n-->\n<div class="zd-visualization-toolbar-item zd icon '+(null==(__t=icon)?"":__t)+'"/>   ';return __p}},{lodash:242}],235:[function(a,b,c){!function(b,d){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(a,c,e){
b.Backbone=d(b,e,a,c)});else if("undefined"!=typeof c){var e=a("underscore");d(b,c,e)}else b.Backbone=d(b,{},b._,b.jQuery||b.Zepto||b.ender||b.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b})},{underscore:244}],236:[function(a,b,c){function d(a,b){return"undefined"==typeof b&&(b=f),"string"==typeof n[b][a]?n[b][a]:b!=g?d(a,g):a}var e={},f="en",g="en",h=!0,i="static",j="javascript:;",k="",l={},m={};e.setLocale=function(a){for(var b in n)if(b==a)return void(f=a);throw new Error("Invalid locale: "+a)},e.addLocale=function(a,b){"undefined"==typeof n[a]&&(n[a]={});for(var c in b)n[a][c]=b[c]},e.setIcons=function(a){m=a,("object"!=typeof m||null===m)&&(m={})},e.setBtnClasses=function(a){l=a,("object"!=typeof l||null===l)&&(l={})},e.alert=function(){var a="",b=d("OK"),c=null;switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?c=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return e.dialog(a,{label:b,icon:m.OK,"class":l.OK,callback:c},{onEscape:c||!0})},e.confirm=function(){var a="",b=d("CANCEL"),c=d("CONFIRM"),f=null;switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?f=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],"function"==typeof arguments[2]?f=arguments[2]:c=arguments[2];break;case 4:a=arguments[0],b=arguments[1],c=arguments[2],f=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var g=function(){return"function"==typeof f?f(!1):void 0},h=function(){return"function"==typeof f?f(!0):void 0};return e.dialog(a,[{label:b,icon:m.CANCEL,"class":l.CANCEL,callback:g},{label:c,icon:m.CONFIRM,"class":l.CONFIRM,callback:h}],{onEscape:g})},e.prompt=function(){var a="",b=d("CANCEL"),c=d("CONFIRM"),f=null,g="";switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"function"==typeof arguments[1]?f=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],"function"==typeof arguments[2]?f=arguments[2]:c=arguments[2];break;case 4:a=arguments[0],b=arguments[1],c=arguments[2],f=arguments[3];break;case 5:a=arguments[0],b=arguments[1],c=arguments[2],f=arguments[3],g=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var h=a,i=$("<form></form>");i.append("<input autocomplete=off type=text value='"+g+"' />");var j=function(){return"function"==typeof f?f(null):void 0},k=function(){return"function"==typeof f?f(i.find("input[type=text]").val()):void 0},n=e.dialog(i,[{label:b,icon:m.CANCEL,"class":l.CANCEL,callback:j},{label:c,icon:m.CONFIRM,"class":l.CONFIRM,callback:k}],{header:h,show:!1,onEscape:j});return n.on("shown",function(){i.find("input[type=text]").focus(),i.on("submit",function(a){a.preventDefault(),n.find(".btn-primary").click()})}),n.modal("show"),n},e.dialog=function(a,b,c){function d(a){var b=null;"function"==typeof c.onEscape&&(b=c.onEscape()),b!==!1&&v.modal("hide")}var e="",f=[];c||(c={}),"undefined"==typeof b?b=[]:"undefined"==typeof b.length&&(b=[b]);for(var g=b.length;g--;){var l=null,m=null,n=null,o="",p=null;if("undefined"==typeof b[g].label&&"undefined"==typeof b[g]["class"]&&"undefined"==typeof b[g].callback){var q=0,r=null;for(var s in b[g])if(r=s,++q>1)break;1==q&&"function"==typeof b[g][s]&&(b[g].label=r,b[g].callback=b[g][s])}"function"==typeof b[g].callback&&(p=b[g].callback),b[g]["class"]?n=b[g]["class"]:g==b.length-1&&b.length<=2&&(n="btn-primary"),l=b[g].label?b[g].label:"Option "+(g+1),b[g].icon&&(o="<i class='"+b[g].icon+"'></i> "),m=b[g].href?b[g].href:j,e="<a data-handler='"+g+"' class='btn "+n+"' href='"+m+"'>"+o+l+"</a>"+e,f[g]=p}var t=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(c.header){var u="";("undefined"==typeof c.headerCloseButton||c.headerCloseButton)&&(u="<a href='"+j+"' class='close'>&times;</a>"),t.push("<div class='modal-header'>"+u+"<h3>"+c.header+"</h3></div>")}t.push("<div class='modal-body'></div>"),e&&t.push("<div class='modal-footer'>"+e+"</div>"),t.push("</div>");var v=$(t.join("\n")),w="undefined"==typeof c.animate?h:c.animate;w&&v.addClass("fade");var x="undefined"==typeof c.classes?k:c.classes;return x&&v.addClass(x),v.find(".modal-body").html(a),v.on("keyup.dismiss.modal",function(a){27===a.which&&c.onEscape&&d("escape")}),v.on("click","a.close",function(a){a.preventDefault(),d("close")}),v.on("shown",function(){v.find("a.btn-primary:first").focus()}),v.on("hidden",function(){v.remove()}),v.on("click",".modal-footer a",function(a){var c=$(this).data("handler"),d=f[c],e=null;("undefined"==typeof c||"undefined"==typeof b[c].href)&&(a.preventDefault(),"function"==typeof d&&(e=d()),e!==!1&&v.modal("hide"))}),$("body").append(v),v.modal({backdrop:"undefined"==typeof c.backdrop?i:c.backdrop,keyboard:!1,show:!1}),v.on("show",function(a){$(document).off("focusin.modal")}),("undefined"==typeof c.show||c.show===!0)&&v.modal("show"),v},e.modal=function(){var a,b,c,d={onEscape:null,keyboard:!0,backdrop:i};switch(arguments.length){case 1:a=arguments[0];break;case 2:a=arguments[0],"object"==typeof arguments[1]?c=arguments[1]:b=arguments[1];break;case 3:a=arguments[0],b=arguments[1],c=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return d.header=b,c="object"==typeof c?$.extend(d,c):d,e.dialog(a,[],c)},e.hideAll=function(){$(".bootbox").modal("hide")},e.animate=function(a){h=a},e.backdrop=function(a){i=a},e.classes=function(a){k=a};var n={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"}};b.exports=e},{}],237:[function(a,b,c){var d=d||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=10,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var l,o,p,q=this,r=b.type,s=!1,t=function(){n(q,"writestart progress write writeend".split(" "))},u=function(){if((s||!l)&&(l=c().createObjectURL(b)),o)o.location.href=l;else{var d=a.open(l,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=l)}q.readyState=q.DONE,t(),m(l)},v=function(a){return function(){return q.readyState!==q.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};return q.readyState=q.INIT,i||(i="download"),e?(l=c().createObjectURL(b),d.href=l,d.download=i,f(d),q.readyState=q.DONE,t(),void m(l)):(a.chrome&&r&&r!==j&&(p=b.slice||b.webkitSlice,b=p.call(b,0,b.size,j),s=!0),g&&"download"!==i&&(i+=".download"),(r===j||g)&&(o=a),h?(k+=b.size,void h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){o.location.href=a.toURL(),q.readyState=q.DONE,n(q,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=q["on"+a]}),c.write(b),q.abort=function(){c.abort(),q.readyState=q.DONE},q.readyState=q.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof b&&null!==b?b.exports=d:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return d})},{}],238:[function(a,b,c){"use strict";Date.prototype.addYear=function(){this.setFullYear(this.getFullYear()+1)},Date.prototype.addMonth=function(){this.setMonth(this.getMonth()+1),this.setDate(1),this.setHours(0),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addDay=function(){var a=this.getDate();this.setDate(a+1),this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.getDate()===a&&this.setDate(a+2)},Date.prototype.addHour=function(){var a=this.getHours();this.setHours(a+1),this.getHours()===a&&this.setHours(a+2),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addMinute=function(){this.setMinutes(this.getMinutes()+1),this.setSeconds(0)},Date.prototype.addSecond=function(){this.setSeconds(this.getSeconds()+1)}},{}],239:[function(a,b,c){"use strict";function d(a,b){this._options=b,this._currentDate=new Date(b.currentDate),this._endDate=b.endDate?new Date(b.endDate):null,this._fields={},this._isIterator=b.iterator||!1;for(var c=0,e=d.map.length;e>c;c++){var f=d.map[c];this._fields[f]=a[c]}}a("./date"),d.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],d.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},d.constraints=[[0,59],[0,59],[0,23],[1,31],[1,12],[0,7]],d.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],d.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},d.parseDefaults=["0","*","*","*","*","*"],d._parseField=function(a,b,c){function e(b){function d(b){var d=e.length>0?Math.max.apply(Math,e):-1;if(b instanceof Array)for(var f=0,g=b.length;g>f;f++){var h=b[f];if(h<c[0]||h>c[1])throw new Error("Constraint error, got value "+h+" expected range "+c[0]+"-"+c[1]);h>d&&e.push(h),d=Math.max.apply(Math,e)}else{if(b=+b,b<c[0]||b>c[1])throw new Error("Constraint error, got value "+b+" expected range "+c[0]+"-"+c[1]);"dayOfWeek"==a&&(b%=7),b>d&&e.push(b)}}var e=[],g=b.split(",");if(g.length>1)for(var h=0,i=g.length;i>h;h++)d(f(g[h]));else d(f(b));return e}function f(a){var b=1,c=a.split("/");return c.length>1?g(c[0],c[c.length-1]):g(a,b)}function g(a,b){var d=[],e=a.split("-");if(e.length>1){if(e.length<2||!e[0].length)return+a;var f=+e[0],g=+e[1];if(Number.isNaN(f)||Number.isNaN(g)||f<c[0]||g>c[1])throw new Error("Constraint error, got range "+f+"-"+g+" expected range "+c[0]+"-"+c[1]);if(f>=g)throw new Error("Invalid range: "+a);for(var h=b,i=f,j=g;j>=i;i++)h>0&&h%b===0?(h=1,d.push(i)):h++;return d}return+a}switch(a){case"month":case"dayOfWeek":var h=d.aliases[a];b=b.replace(/[a-z]{1,3}/gi,function(a){if(a=a.toLowerCase(),h[a])return h[a];throw new Error('Cannot resolve alias "'+a+'"')})}if(!/^[\d|/|*|\-|,]+$/.test(b))throw new Error("Invalid characters, got value: "+b);return-1!==b.indexOf("*")&&(b=b.replace(/\*/g,c.join("-"))),e(b)},d.prototype._findSchedule=function(){function a(a,b){for(var c=0,d=b.length;d>c;c++)if(b[c]>=a)return b[c]===a;return b[0]===a}function b(a,b){return a instanceof Array&&!a.length?!1:2!==b.length?!1:a.length===b[1]-(b[0]<1?-1:0)}for(var c=new Date(this._currentDate),e=this._endDate;;){if(e&&e.getTime()-c.getTime()<0)throw new Error("Out of the timespan range");var f=a(c.getDate(),this._fields.dayOfMonth),g=a(c.getDay(),this._fields.dayOfWeek),h=b(this._fields.dayOfMonth,d.constraints[3]),i=b(this._fields.dayOfWeek,d.constraints[4]),j=b(this._fields.dayOfWeek,d.constraints[5]);if(!i){var k=c.getYear(),l=c.getMonth()+1,m=1===l?11:l-1,n=d.daysInMonth[m-1],o=this._fields.dayOfMonth[this._fields.dayOfMonth.length-1],p=!(k%4||!(k%100)&&k%400);if(p&&(n=29),this._fields.month[0]===m&&o>n)throw new Error("Invalid explicit day of month definition")}if(h||!j||f)if(!h||j||g)if(h&&j||f||g)if(a(c.getMonth()+1,this._fields.month))if(a(c.getHours(),this._fields.hour))if(a(c.getMinutes(),this._fields.minute)){if(a(c.getSeconds(),this._fields.second))break;c.addSecond()}else c.addMinute();else c.addHour();else c.addMonth();else c.addDay();else c.addDay();else c.addDay()}var q=new Date(c);return this._currentDate!==c&&q.addSecond(),this._currentDate=q,c},d.prototype.next=function(){var a=this._findSchedule();return this._isIterator?{value:a,done:!this.hasNext()}:a},d.prototype.hasNext=function(){
var a=this._currentDate;try{return this.next(),!0}catch(b){return!1}finally{this._currentDate=a}},d.prototype.iterate=function(a,b){for(var c=[],d=0,e=a;e>d;d++)try{var f=this.next();c.push(f),b&&b(f,d)}catch(g){break}return c},d.prototype.reset=function(){this._currentDate=new Date(this._options.currentDate)},d.parse=function e(a,b,c){function e(a,b){b||(b={}),b.currentDate||(b.currentDate=new Date),d.predefined[a]&&(a=d.predefined[a]);for(var c=[],e=a.split(" "),f=d.map.length-e.length,g=0,h=d.map.length;h>g;++g){var i=d.map[g],j=e[e.length>h?g:g-f];f>g||!j?c.push(d._parseField(i,d.parseDefaults[g],d.constraints[g])):c.push(d._parseField(i,j,d.constraints[g]))}return new d(c,b)}return"function"==typeof b&&(c=b,b={}),e(a,b)},b.exports=d},{"./date":238}],240:[function(a,b,c){"use strict";function d(){}var e=a("./expression");d._parseEntry=function(a){var b=a.split(" ");if(6===b.length)return{interval:e.parse(a)};if(b.length>6)return{interval:e.parse(a),command:b.slice(6,b.length)};throw new Error("Invalid entry: "+a)},d.parseExpression=function(a,b,c){return e.parse(a,b,c)},d.parseString=function(a){for(var b=this,c=a.split("\n"),d={variables:{},expressions:[],errors:{}},e=0,f=c.length;f>e;e++){var g=c[e],h=null,i=g.replace(/^\s+|\s+$/g,"");if(i.length>0){if(i.match(/^#/))continue;if(h=i.match(/^(.*)=(.*)$/))d.variables[h[1]]=h[2];else{var j=null;try{j=b._parseEntry("0 "+i),d.expressions.push(j.interval)}catch(k){d.errors[i]=k}}}}return d},d.parseFile=function(b,c){a("fs").readFile(b,function(a,b){return a?void c(a):c(null,d.parseString(b.toString()))})},b.exports=d},{"./expression":239,fs:241}],241:[function(a,b,c){},{}],242:[function(a,b,c){(function(a){(function(){function d(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||a===z&&d)return 1;if(b>a||!d||b===z&&c)return-1}return 0}function e(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}function f(a,b,c){if(b!==b)return q(a,c);for(var d=c-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function g(a){return"function"==typeof a||!1}function h(a){return"string"==typeof a?a:null==a?"":a+""}function i(a){return a.charCodeAt(0)}function j(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function k(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function l(a,b){return d(a.criteria,b.criteria)||a.index-b.index}function m(a,b,c){for(var e=-1,f=a.criteria,g=b.criteria,h=f.length,i=c.length;++e<h;){var j=d(f[e],g[e]);if(j)return e>=i?j:j*(c[e]?1:-1)}return a.index-b.index}function n(a){return Ta[a]}function o(a){return Ua[a]}function p(a){return"\\"+Xa[a]}function q(a,b,c){for(var d=a.length,e=b+(c?0:-1);c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function r(a){return!!a&&"object"==typeof a}function s(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function t(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=S,f[++e]=c);return f}function u(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function v(a){for(var b=-1,c=a.length;++b<c&&s(a.charCodeAt(b)););return b}function w(a){for(var b=a.length;b--&&s(a.charCodeAt(b)););return b}function x(a){return Va[a]}function y(a){function b(a){if(r(a)&&!zh(a)&&!(a instanceof Z)){if(a instanceof s)return a;if(Qf.call(a,"__chain__")&&Qf.call(a,"__wrapped__"))return fd(a)}return new s(a)}function c(){}function s(a,b,c){this.__wrapped__=a,this.__actions__=c||[],this.__chain__=!!b}function Z(a){this.__wrapped__=a,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=vg,this.__views__=null}function ba(){var a=this.__actions__,b=this.__iteratees__,c=this.__views__,d=new Z(this.__wrapped__);return d.__actions__=a?ab(a):null,d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=b?ab(b):null,d.__takeCount__=this.__takeCount__,d.__views__=c?ab(c):null,d}function da(){if(this.__filtered__){var a=new Z(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function Ta(){var a=this.__wrapped__.value();if(!zh(a))return ac(a,this.__actions__);var b=this.__dir__,c=0>b,d=Mc(0,a.length,this.__views__),e=d.start,f=d.end,g=f-e,h=c?f:e-1,i=pg(g,this.__takeCount__),j=this.__iteratees__,k=j?j.length:0,l=0,m=[];a:for(;g--&&i>l;){h+=b;for(var n=-1,o=a[h];++n<k;){var p=j[n],q=p.iteratee,r=p.type;if(r==O){if(p.done&&(c?h>p.index:h<p.index)&&(p.count=0,p.done=!1),p.index=h,!p.done){var s=p.limit;if(!(p.done=s>-1?p.count++>=s:!q(o)))continue a}}else{var t=q(o);if(r==Q)o=t;else if(!t){if(r==P)continue a;break a}}}m[l++]=o}return m}function Ua(){this.__data__={}}function Va(a){return this.has(a)&&delete this.__data__[a]}function Wa(a){return"__proto__"==a?z:this.__data__[a]}function Xa(a){return"__proto__"!=a&&Qf.call(this.__data__,a)}function Ya(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Za(a){var b=a?a.length:0;for(this.data={hash:lg(null),set:new dg};b--;)this.push(a[b])}function $a(a,b){var c=a.data,d="string"==typeof b||xe(b)?c.set.has(b):c.hash[b];return d?0:-1}function _a(a){var b=this.data;"string"==typeof a||xe(a)?b.set.add(a):b.hash[a]=!0}function ab(a,b){var c=-1,d=a.length;for(b||(b=Bf(d));++c<d;)b[c]=a[c];return b}function bb(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function eb(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function fb(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function gb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function hb(a,b){for(var c=-1,d=a.length,e=Bf(d);++c<d;)e[c]=b(a[c],c,a);return e}function ib(a){for(var b=-1,c=a.length,d=ug;++b<c;){var e=a[b];e>d&&(d=e)}return d}function jb(a){for(var b=-1,c=a.length,d=vg;++b<c;){var e=a[b];d>e&&(d=e)}return d}function kb(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function lb(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function mb(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function nb(a){for(var b=a.length,c=0;b--;)c+=+a[b]||0;return c}function ob(a,b){return a===z?b:a}function pb(a,b,c,d){return a!==z&&Qf.call(d,c)?a:b}function qb(a,b,c){var d=Lh(b);ag.apply(d,Pg(b));for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==z||g in a)||(a[g]=i)}return a}function rb(a,b){for(var c=-1,d=null==a,e=!d&&Rc(a),f=e&&a.length,g=b.length,h=Bf(g);++c<g;){var i=b[c];e?h[c]=Sc(i,f)?a[i]:z:h[c]=d?z:a[i]}return h}function sb(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function tb(a,b,c){var d=typeof a;return"function"==d?b===z?a:dc(a,b,c):null==a?of:"object"==d?Lb(a):b===z?uf(a):Mb(a,b)}function ub(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),h!==z)return h;if(!xe(a))return a;var i=zh(a);if(i){if(h=Nc(a),!b)return ab(a,h)}else{var j=Sf.call(a),k=j==Y;if(j!=_&&j!=T&&(!k||e))return Ra[j]?Pc(a,j,b):e?a:{};if(h=Oc(k?{}:a),!b)return Eg(h,a)}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?bb:Db)(a,function(d,e){h[e]=ub(d,b,c,e,a,f,g)}),h}function vb(a,b,c){if("function"!=typeof a)throw new Kf(R);return eg(function(){a.apply(z,c)},b)}function wb(a,b){var c=a?a.length:0,d=[];if(!c)return d;var e=-1,g=Lc(),h=g==f,i=h&&b.length>=200?Lg(b):null,j=b.length;i&&(g=$a,h=!1,b=i);a:for(;++e<c;){var k=a[e];if(h&&k===k){for(var l=j;l--;)if(b[l]===k)continue a;d.push(k)}else g(b,k,0)<0&&d.push(k)}return d}function xb(a,b){var c=!0;return Gg(a,function(a,d,e){return c=!!b(a,d,e)}),c}function yb(a,b,c,d){var e=a.length;for(c=null==c?0:+c||0,0>c&&(c=-c>e?0:e+c),d=d===z||d>e?e:+d||0,0>d&&(d+=e),e=c>d?0:d>>>0,c>>>=0;e>c;)a[c++]=b;return a}function zb(a,b){var c=[];return Gg(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Ab(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function Bb(a,b,c){for(var d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d];if(r(h)&&Rc(h)&&(c||zh(h)||qe(h))){b&&(h=Bb(h,b,c));for(var i=-1,j=h.length;++i<j;)g[++f]=h[i]}else c||(g[++f]=h)}return g}function Cb(a,b){return Ig(a,b,Oe)}function Db(a,b){return Ig(a,b,Lh)}function Eb(a,b){return Jg(a,b,Lh)}function Fb(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];Bh(a[g])&&(f[++e]=g)}return f}function Gb(a,b,c){if(null!=a){c!==z&&c in dd(a)&&(b=[c]);for(var d=-1,e=b.length;null!=a&&++d<e;)a=a[b[d]];return d&&d==e?a:z}}function Hb(a,b,c,d,e,f){if(a===b)return!0;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:Ib(a,b,Hb,c,d,e,f)}function Ib(a,b,c,d,e,f,g){var h=zh(a),i=zh(b),j=U,k=U;h||(j=Sf.call(a),j==T?j=_:j!=_&&(h=Fe(a))),i||(k=Sf.call(b),k==T?k=_:k!=_&&(i=Fe(b)));var l=j==_,m=k==_,n=j==k;if(n&&!h&&!l)return Hc(a,b,j);if(!e){var o=l&&Qf.call(a,"__wrapped__"),p=m&&Qf.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g)}if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?Gc:Ic)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Jb(a,b,c,d,e){for(var f=-1,g=b.length,h=!e;++f<g;)if(h&&d[f]?c[f]!==a[b[f]]:!(b[f]in a))return!1;for(f=-1;++f<g;){var i=b[f],j=a[i],k=c[f];if(h&&d[f])var l=j!==z||i in a;else l=e?e(j,k,i):z,l===z&&(l=Hb(k,j,e,!0));if(!l)return!1}return!0}function Kb(a,b){var c=-1,d=Rc(a)?Bf(a.length):[];return Gg(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Lb(a){var b=Lh(a),c=b.length;if(!c)return nf(!0);if(1==c){var d=b[0],e=a[d];if(Xc(e))return function(a){return null==a?!1:a[d]===e&&(e!==z||d in dd(a))}}for(var f=Bf(c),g=Bf(c);c--;)e=a[b[c]],f[c]=e,g[c]=Xc(e);return function(a){return null!=a&&Jb(dd(a),b,f,g)}}function Mb(a,b){var c=zh(a),d=Uc(a)&&Xc(b),e=a+"";return a=ed(a),function(f){if(null==f)return!1;var g=e;if(f=dd(f),!(!c&&d||g in f)){if(f=1==a.length?f:Gb(f,Ub(a,0,-1)),null==f)return!1;g=td(a),f=dd(f)}return f[g]===b?b!==z||g in f:Hb(b,f[g],null,!0)}}function Nb(a,b,c,d,e){if(!xe(a))return a;var f=Rc(b)&&(zh(b)||Fe(b));if(!f){var g=Lh(b);ag.apply(g,Pg(b))}return bb(g||b,function(h,i){if(g&&(i=h,h=b[i]),r(h))d||(d=[]),e||(e=[]),Ob(a,b,i,Nb,c,d,e);else{var j=a[i],k=c?c(j,h,i,a,b):z,l=k===z;l&&(k=h),!f&&k===z||!l&&(k===k?k===j:j!==j)||(a[i]=k)}}),a}function Ob(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):z,l=k===z;l&&(k=i,Rc(i)&&(zh(i)||Fe(i))?k=zh(j)?j:Rc(j)?ab(j):[]:Ch(i)||qe(i)?k=qe(j)?Ie(j):Ch(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Pb(a){return function(b){return null==b?z:b[a]}}function Qb(a){var b=a+"";return a=ed(a),function(c){return Gb(c,a,b)}}function Rb(a,b){for(var c=a?b.length:0;c--;){var d=parseFloat(b[c]);if(d!=e&&Sc(d)){var e=d;fg.call(a,d,1)}}return a}function Sb(a,b){return a+Zf(tg()*(b-a+1))}function Tb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Ub(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=c===z||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Bf(e);++d<e;)f[d]=a[d+b];return f}function Vb(a,b){var c;return Gg(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Wb(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function Xb(a,b,c){var d=Kc(),e=-1;b=hb(b,function(a){return d(a)});var f=Kb(a,function(a){var c=hb(b,function(b){return b(a)});return{criteria:c,index:++e,value:a}});return Wb(f,function(a,b){return m(a,b,c)})}function Yb(a,b){var c=0;return Gg(a,function(a,d,e){c+=+b(a,d,e)||0}),c}function Zb(a,b){var c=-1,d=Lc(),e=a.length,g=d==f,h=g&&e>=200,i=h?Lg():null,j=[];i?(d=$a,g=!1):(h=!1,i=b?[]:j);a:for(;++c<e;){var k=a[c],l=b?b(k,c,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;b&&i.push(l),j.push(k)}else d(i,l,0)<0&&((b||h)&&i.push(l),j.push(k))}return j}function $b(a,b){for(var c=-1,d=b.length,e=Bf(d);++c<d;)e[c]=a[b[c]];return e}function _b(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?Ub(a,d?0:f,d?f+1:e):Ub(a,d?f+1:0,d?e:f)}function ac(a,b){var c=a;c instanceof Z&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=[c],g=b[d];ag.apply(f,g.args),c=g.func.apply(g.thisArg,f)}return c}function bc(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&yg>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return cc(a,b,of,c)}function cc(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h=b===z;f>e;){var i=Zf((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||j!==z):d?b>=j:b>j;l?e=i+1:f=i}return pg(f,xg)}function dc(a,b,c){if("function"!=typeof a)return of;if(b===z)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function ec(a){return Wf.call(a,0)}function fc(a,b,c){for(var d=c.length,e=-1,f=og(a.length-d,0),g=-1,h=b.length,i=Bf(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function gc(a,b,c){for(var d=-1,e=c.length,f=-1,g=og(a.length-e,0),h=-1,i=b.length,j=Bf(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function hc(a,b){return function(c,d,e){var f=b?b():{};if(d=Kc(d,e,3),zh(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else Gg(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ic(a){return ke(function(b,c){var d=-1,e=null==b?0:c.length,f=e>2&&c[e-2],g=e>2&&c[2],h=e>1&&c[e-1];for("function"==typeof f?(f=dc(f,h,5),e-=2):(f="function"==typeof h?h:null,e-=f?1:0),g&&Tc(c[0],c[1],g)&&(f=3>e?null:f,e=1);++d<e;){var i=c[d];i&&a(b,i,f)}return b})}function jc(a,b){return function(c,d){var e=c?Og(c):0;if(!Wc(e))return a(c,d);for(var f=b?e:-1,g=dd(c);(b?f--:++f<e)&&d(g[f],f,g)!==!1;);return c}}function kc(a){return function(b,c,d){for(var e=dd(b),f=d(b),g=f.length,h=a?g:-1;a?h--:++h<g;){var i=f[h];if(c(e[i],i,e)===!1)break}return b}}function lc(a,b){function c(){var e=this&&this!==cb&&this instanceof c?d:a;return e.apply(b,arguments)}var d=nc(a);return c}function mc(a){return function(b){for(var c=-1,d=lf(Ye(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function nc(a){return function(){var b=Fg(a.prototype),c=a.apply(b,arguments);return xe(c)?c:b}}function oc(a){function b(c,d,e){e&&Tc(c,d,e)&&(d=null);var f=Fc(c,a,null,null,null,null,null,d);return f.placeholder=b.placeholder,f}return b}function pc(a,b){return function(c,d,e){e&&Tc(c,d,e)&&(d=null);var f=Kc(),g=null==d;if(f===tb&&g||(g=!1,d=f(d,e,3)),g){var h=zh(c);if(h||!Ee(c))return a(h?c:cd(c));d=i}return Jc(c,d,b)}}function qc(a,b){return function(c,d,f){if(d=Kc(d,f,3),zh(c)){var g=e(c,d,b);return g>-1?c[g]:z}return Ab(c,d,a)}}function rc(a){return function(b,c,d){return b&&b.length?(c=Kc(c,d,3),e(b,c,a)):-1}}function sc(a){return function(b,c,d){return c=Kc(c,d,3),Ab(b,c,a,!0)}}function tc(a){return function(){var b=arguments.length;if(!b)return function(){return arguments[0]};for(var c,d=a?b:-1,e=0,f=Bf(b);a?d--:++d<b;){var g=f[e++]=arguments[d];if("function"!=typeof g)throw new Kf(R);var h=c?"":Ng(g);c="wrapper"==h?new s([]):c}for(d=c?-1:b;++d<b;){g=f[d],h=Ng(g);var i="wrapper"==h?Mg(g):null;c=i&&Vc(i[0])&&i[1]==(I|E|G|J)&&!i[4].length&&1==i[9]?c[Ng(i[0])].apply(c,i[3]):1==g.length&&Vc(g)?c[h]():c.thru(g)}return function(){var a=arguments;if(c&&1==a.length&&zh(a[0]))return c.plant(a[0]).value();for(var d=0,e=f[d].apply(this,a);++d<b;)e=f[d].call(this,e);return e}}}function uc(a,b){return function(c,d,e){return"function"==typeof d&&e===z&&zh(c)?a(c,d):b(c,dc(d,e,3))}}function vc(a){return function(b,c,d){return("function"!=typeof c||d!==z)&&(c=dc(c,d,3)),a(b,c,Oe)}}function wc(a){return function(b,c,d){return("function"!=typeof c||d!==z)&&(c=dc(c,d,3)),a(b,c)}}function xc(a){return function(b,c,d){var e={};return c=Kc(c,d,3),Db(b,function(b,d,f){var g=c(b,d,f);d=a?g:d,b=a?b:g,e[d]=b}),e}}function yc(a){return function(b,c,d){return b=h(b),(a?b:"")+Cc(b,c,d)+(a?"":b)}}function zc(a){var b=ke(function(c,d){var e=t(d,b.placeholder);return Fc(c,a,null,d,e)});return b}function Ac(a,b){return function(c,d,e,f){var g=arguments.length<3;return"function"==typeof d&&f===z&&zh(c)?a(c,d,e,g):Tb(c,Kc(d,f,4),e,g,b)}}function Bc(a,b,c,d,e,f,g,h,i,j){function k(){for(var u=arguments.length,v=u,w=Bf(u);v--;)w[v]=arguments[v];if(d&&(w=fc(w,d,e)),f&&(w=gc(w,f,g)),o||q){var x=k.placeholder,y=t(w,x);if(u-=y.length,j>u){var A=h?ab(h):null,D=og(j-u,0),E=o?y:null,F=o?null:y,I=o?w:null,J=o?null:w;b|=o?G:H,b&=~(o?H:G),p||(b&=~(B|C));var K=[a,b,c,I,E,J,F,A,i,D],L=Bc.apply(z,K);return Vc(a)&&Qg(L,K),L.placeholder=x,L}}var M=m?c:this;n&&(a=M[s]),h&&(w=_c(w,h)),l&&i<w.length&&(w.length=i);var N=this&&this!==cb&&this instanceof k?r||nc(a):a;return N.apply(M,w)}var l=b&I,m=b&B,n=b&C,o=b&E,p=b&D,q=b&F,r=!n&&nc(a),s=a;return k}function Cc(a,b,c){var d=a.length;if(b=+b,d>=b||!mg(b))return"";var e=b-d;return c=null==c?" ":c+"",cf(c,Xf(e/c.length)).slice(0,e)}function Dc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Bf(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];var l=this&&this!==cb&&this instanceof e?g:a;return l.apply(f?c:this,k)}var f=b&B,g=nc(a);return e}function Ec(a){return function(b,c,d,e){var f=Kc(d);return f===tb&&null==d?bc(b,c,a):cc(b,c,f(d,e,1),a)}}function Fc(a,b,c,d,e,f,g,h){var i=b&C;if(!i&&"function"!=typeof a)throw new Kf(R);var j=d?d.length:0;if(j||(b&=~(G|H),d=e=null),j-=e?e.length:0,b&H){var k=d,l=e;d=e=null}var m=i?null:Mg(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&(Yc(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:og(h-j,0)||0,b==B)var o=lc(n[0],n[2]);else o=b!=G&&b!=(B|G)||n[4].length?Bc.apply(z,n):Dc.apply(z,n);var p=m?Kg:Qg;return p(o,n)}function Gc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=z,d&&(k=e?d(m,l,h):d(l,m,h)),k===z)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function Hc(a,b,c){switch(c){case V:case W:return+a==+b;case X:return a.name==b.name&&a.message==b.message;case $:return a!=+a?b!=+b:a==+b;case aa:case ca:return a==b+""}return!1}function Ic(a,b,c,d,e,f,g){var h=Lh(a),i=h.length,j=Lh(b),k=j.length;if(i!=k&&!e)return!1;for(var l=e,m=-1;++m<i;){var n=h[m],o=e?n in b:Qf.call(b,n);if(o){var p=a[n],q=b[n];o=z,d&&(o=e?d(q,p,n):d(p,q,n)),o===z&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function Jc(a,b,c){var d=c?vg:ug,e=d,f=e;return Gg(a,function(a,g,h){var i=b(a,g,h);((c?e>i:i>e)||i===d&&i===f)&&(e=i,f=a)}),f}function Kc(a,c,d){var e=b.callback||mf;return e=e===mf?tb:e,d?e(a,c,d):e}function Lc(a,c,d){var e=b.indexOf||qd;return e=e===qd?f:e,a?e(a,c,d):e}function Mc(a,b,c){for(var d=-1,e=c?c.length:0;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=pg(b,a+g);break;case"takeRight":a=og(a,b-g)}}return{start:a,end:b}}function Nc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Qf.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function Oc(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Hf),new b}function Pc(a,b,c){var d=a.constructor;switch(b){case ea:return ec(a);case V:case W:return new d(+a);case fa:case ga:case ha:case ia:case ja:case ka:case la:case ma:case na:var e=a.buffer;return new d(c?ec(e):e,a.byteOffset,a.length);case $:case ca:return new d(a);case aa:var f=new d(a.source,Ga.exec(a));f.lastIndex=a.lastIndex}return f}function Qc(a,b,c){null==a||Uc(b,a)||(b=ed(b),a=1==b.length?a:Gb(a,Ub(b,0,-1)),b=td(b));var d=null==a?a:a[b];return null==d?z:d.apply(a,c)}function Rc(a){return null!=a&&Wc(Og(a))}function Sc(a,b){return a=+a,b=null==b?Ag:b,a>-1&&a%1==0&&b>a}function Tc(a,b,c){if(!xe(c))return!1;var d=typeof b;if("number"==d?Rc(c)&&Sc(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function Uc(a,b){var c=typeof a;if("string"==c&&za.test(a)||"number"==c)return!0;if(zh(a))return!1;var d=!ya.test(a);return d||null!=b&&a in dd(b)}function Vc(a){var c=Ng(a);return!!c&&a===b[c]&&c in Z.prototype}function Wc(a){return"number"==typeof a&&a>-1&&a%1==0&&Ag>=a}function Xc(a){return a===a&&!xe(a)}function Yc(a,b){var c=a[1],d=b[1],e=c|d,f=I>e,g=d==I&&c==E||d==I&&c==J&&a[7].length<=b[8]||d==(I|J)&&c==E;if(!f&&!g)return a;d&B&&(a[2]=b[2],e|=c&B?0:D);var h=b[3];if(h){var i=a[3];a[3]=i?fc(i,h,b[4]):ab(h),a[4]=i?t(a[3],S):ab(b[4])}return h=b[5],h&&(i=a[5],a[5]=i?gc(i,h,b[6]):ab(h),a[6]=i?t(a[5],S):ab(b[6])),h=b[7],h&&(a[7]=ab(h)),d&I&&(a[8]=null==a[8]?b[8]:pg(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function Zc(a,b){a=dd(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function $c(a,b){var c={};return Cb(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function _c(a,b){for(var c=a.length,d=pg(b.length,c),e=ab(a);d--;){var f=b[d];a[d]=Sc(f,c)?e[f]:z}return a}function ad(a){var c;b.support;if(!r(a)||Sf.call(a)!=_||!Qf.call(a,"constructor")&&(c=a.constructor,"function"==typeof c&&!(c instanceof c)))return!1;var d;return Cb(a,function(a,b){d=b}),d===z||Qf.call(a,d)}function bd(a){for(var c=Oe(a),d=c.length,e=d&&a.length,f=b.support,g=e&&Wc(e)&&(zh(a)||f.nonEnumArgs&&qe(a)),h=-1,i=[];++h<d;){var j=c[h];(g&&Sc(j,e)||Qf.call(a,j))&&i.push(j)}return i}function cd(a){return null==a?[]:Rc(a)?xe(a)?a:Hf(a):Te(a)}function dd(a){return xe(a)?a:Hf(a)}function ed(a){if(zh(a))return a;var b=[];return h(a).replace(Aa,function(a,c,d,e){b.push(d?e.replace(Ea,"$1"):c||a)}),b}function fd(a){return a instanceof Z?a.clone():new s(a.__wrapped__,a.__chain__,ab(a.__actions__))}function gd(a,b,c){b=(c?Tc(a,b,c):null==b)?1:og(+b||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Bf(Xf(e/b));e>d;)g[++f]=Ub(a,d,d+=b);return g}function hd(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function id(a,b,c){var d=a?a.length:0;return d?((c?Tc(a,b,c):null==b)&&(b=1),Ub(a,0>b?0:b)):[]}function jd(a,b,c){var d=a?a.length:0;return d?((c?Tc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Ub(a,0,0>b?0:b)):[]}function kd(a,b,c){return a&&a.length?_b(a,Kc(b,c,3),!0,!0):[]}function ld(a,b,c){return a&&a.length?_b(a,Kc(b,c,3),!0):[]}function md(a,b,c,d){var e=a?a.length:0;return e?(c&&"number"!=typeof c&&Tc(a,b,c)&&(c=0,d=e),yb(a,b,c,d)):[]}function nd(a){return a?a[0]:z}function od(a,b,c){var d=a?a.length:0;return c&&Tc(a,b,c)&&(b=!1),d?Bb(a,b):[]}function pd(a){var b=a?a.length:0;return b?Bb(a,!0):[]}function qd(a,b,c){var d=a?a.length:0;if(!d)return-1;if("number"==typeof c)c=0>c?og(d+c,0):c;else if(c){var e=bc(a,b),g=a[e];return(b===b?b===g:g!==g)?e:-1}return f(a,b,c||0)}function rd(a){return jd(a,1)}function sd(){for(var a=[],b=-1,c=arguments.length,d=[],e=Lc(),g=e==f,h=[];++b<c;){var i=arguments[b];Rc(i)&&(a.push(i),d.push(g&&i.length>=120?Lg(b&&i):null))}if(c=a.length,2>c)return h;var j=a[0],k=-1,l=j?j.length:0,m=d[0];a:for(;++k<l;)if(i=j[k],(m?$a(m,i):e(h,i,0))<0){for(b=c;--b;){var n=d[b];if((n?$a(n,i):e(a[b],i,0))<0)continue a}m&&m.push(i),h.push(i)}return h}function td(a){var b=a?a.length:0;return b?a[b-1]:z}function ud(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?og(d+c,0):pg(c||0,d-1))+1;else if(c){e=bc(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return q(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function vd(){var a=arguments,b=a[0];if(!b||!b.length)return b;for(var c=0,d=Lc(),e=a.length;++c<e;)for(var f=0,g=a[c];(f=d(b,g,f))>-1;)fg.call(b,f,1);return b}function wd(a,b,c){var d=[];if(!a||!a.length)return d;var e=-1,f=[],g=a.length;for(b=Kc(b,c,3);++e<g;){var h=a[e];b(h,e,a)&&(d.push(h),f.push(e))}return Rb(a,f),d}function xd(a){return id(a,1)}function yd(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&Tc(a,b,c)&&(b=0,c=d),Ub(a,b,c)):[]}function zd(a,b,c){var d=a?a.length:0;return d?((c?Tc(a,b,c):null==b)&&(b=1),Ub(a,0,0>b?0:b)):[]}function Ad(a,b,c){var d=a?a.length:0;return d?((c?Tc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Ub(a,0>b?0:b)):[]}function Bd(a,b,c){return a&&a.length?_b(a,Kc(b,c,3),!1,!0):[]}function Cd(a,b,c){return a&&a.length?_b(a,Kc(b,c,3)):[]}function Dd(a,b,c,d){var e=a?a.length:0;if(!e)return[];null!=b&&"boolean"!=typeof b&&(d=c,c=Tc(a,b,d)?null:b,b=!1);var g=Kc();return(g!==tb||null!=c)&&(c=g(c,d,3)),b&&Lc()==f?u(a,c):Zb(a,c)}function Ed(a){if(!a||!a.length)return[];var b=-1,c=0;a=gb(a,function(a){return Rc(a)?(c=og(a.length,c),!0):void 0});for(var d=Bf(c);++b<c;)d[b]=hb(a,Pb(b));return d}function Fd(a,b,c){var d=a?a.length:0;if(!d)return[];var e=Ed(a);return null==b?e:(b=dc(b,c,4),hb(e,function(a){return kb(a,b,z,!0)}))}function Gd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Rc(c))var d=d?wb(d,c).concat(wb(c,d)):c}return d?Zb(d):[]}function Hd(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||zh(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Id(a){var c=b(a);return c.__chain__=!0,c}function Jd(a,b,c){return b.call(c,a),a}function Kd(a,b,c){return b.call(c,a)}function Ld(){return Id(this)}function Md(){return new s(this.value(),this.__chain__)}function Nd(a){for(var b,d=this;d instanceof c;){var e=fd(d);b?f.__wrapped__=e:b=e;var f=e;d=d.__wrapped__}return f.__wrapped__=a,b}function Od(){var a=this.__wrapped__;return a instanceof Z?(this.__actions__.length&&(a=new Z(this)),new s(a.reverse(),this.__chain__)):this.thru(function(a){return a.reverse()})}function Pd(){return this.value()+""}function Qd(){return ac(this.__wrapped__,this.__actions__)}function Rd(a,b,c){var d=zh(a)?fb:xb;return c&&Tc(a,b,c)&&(b=null),("function"!=typeof b||c!==z)&&(b=Kc(b,c,3)),d(a,b)}function Sd(a,b,c){var d=zh(a)?gb:zb;return b=Kc(b,c,3),d(a,b)}function Td(a,b){return bh(a,Lb(b))}function Ud(a,b,c,d){var e=a?Og(a):0;return Wc(e)||(a=Te(a),e=a.length),e?(c="number"!=typeof c||d&&Tc(b,c,d)?0:0>c?og(e+c,0):c||0,"string"==typeof a||!zh(a)&&Ee(a)?e>c&&a.indexOf(b,c)>-1:Lc(a,b,c)>-1):!1}function Vd(a,b,c){var d=zh(a)?hb:Kb;return b=Kc(b,c,3),d(a,b)}function Wd(a,b){return Vd(a,uf(b))}function Xd(a,b,c){var d=zh(a)?gb:zb;return b=Kc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Yd(a,b,c){if(c?Tc(a,b,c):null==b){a=cd(a);var d=a.length;return d>0?a[Sb(0,d-1)]:z}var e=Zd(a);return e.length=pg(0>b?0:+b||0,e.length),e}function Zd(a){a=cd(a);for(var b=-1,c=a.length,d=Bf(c);++b<c;){var e=Sb(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function $d(a){var b=a?Og(a):0;return Wc(b)?b:Lh(a).length}function _d(a,b,c){var d=zh(a)?mb:Vb;return c&&Tc(a,b,c)&&(b=null),("function"!=typeof b||c!==z)&&(b=Kc(b,c,3)),d(a,b)}function ae(a,b,c){if(null==a)return[];c&&Tc(a,b,c)&&(b=null);var d=-1;b=Kc(b,c,3);var e=Kb(a,function(a,c,e){return{criteria:b(a,c,e),index:++d,value:a}});return Wb(e,l)}function be(a,b,c,d){return null==a?[]:(d&&Tc(b,c,d)&&(c=null),zh(b)||(b=null==b?[]:[b]),zh(c)||(c=null==c?[]:[c]),Xb(a,b,c))}function ce(a,b){return Sd(a,Lb(b))}function de(a,b){if("function"!=typeof b){if("function"!=typeof a)throw new Kf(R);var c=a;a=b,b=c}return a=mg(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function ee(a,b,c){return c&&Tc(a,b,c)&&(b=null),b=a&&null==b?a.length:og(+b||0,0),Fc(a,I,null,null,null,null,b)}function fe(a,b){var c;if("function"!=typeof b){if("function"!=typeof a)throw new Kf(R);var d=a;a=b,b=d}return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}}function ge(a,b,c){function d(){m&&Yf(m),i&&Yf(i),i=m=n=z}function e(){var c=b-(mh()-k);if(0>=c||c>b){i&&Yf(i);var d=n;i=m=n=z,d&&(o=mh(),j=a.apply(l,h),m||i||(h=l=null))}else m=eg(e,c)}function f(){m&&Yf(m),i=m=n=z,(q||p!==b)&&(o=mh(),j=a.apply(l,h),m||i||(h=l=null))}function g(){if(h=arguments,k=mh(),l=this,n=q&&(m||!r),p===!1)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=Yf(i)),o=k,j=a.apply(l,h)):i||(i=eg(f,d))}return g&&m?m=Yf(m):m||b===p||(m=eg(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=null),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if("function"!=typeof a)throw new Kf(R);if(b=0>b?0:+b||0,c===!0){var r=!0;q=!1}else xe(c)&&(r=c.leading,p="maxWait"in c&&og(+c.maxWait||0,b),q="trailing"in c?c.trailing:q);return g.cancel=d,g}function he(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Kf(R);var c=function(){var d=arguments,e=c.cache,f=b?b.apply(this,d):d[0];if(e.has(f))return e.get(f);var g=a.apply(this,d);return e.set(f,g),g};return c.cache=new he.Cache,c}function ie(a){if("function"!=typeof a)throw new Kf(R);return function(){return!a.apply(this,arguments)}}function je(a){return fe(2,a)}function ke(a,b){if("function"!=typeof a)throw new Kf(R);return b=og(b===z?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=og(c.length-b,0),f=Bf(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Bf(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function le(a){if("function"!=typeof a)throw new Kf(R);return function(b){return a.apply(this,b)}}function me(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new Kf(R);return c===!1?d=!1:xe(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),Sa.leading=d,Sa.maxWait=+b,Sa.trailing=e,ge(a,b,Sa)}function ne(a,b){return b=null==b?of:b,Fc(b,G,null,[a],[])}function oe(a,b,c,d){return b&&"boolean"!=typeof b&&Tc(a,b,c)?b=!1:"function"==typeof b&&(d=c,c=b,b=!1),c="function"==typeof c&&dc(c,d,1),ub(a,b,c)}function pe(a,b,c){return b="function"==typeof b&&dc(b,c,1),ub(a,!0,b)}function qe(a){return r(a)&&Rc(a)&&Sf.call(a)==T}function re(a){return a===!0||a===!1||r(a)&&Sf.call(a)==V}function se(a){return r(a)&&Sf.call(a)==W}function te(a){return!!a&&1===a.nodeType&&r(a)&&Sf.call(a).indexOf("Element")>-1}function ue(a){return null==a?!0:Rc(a)&&(zh(a)||Ee(a)||qe(a)||r(a)&&Bh(a.splice))?!a.length:!Lh(a).length}function ve(a,b,c,d){if(c="function"==typeof c&&dc(c,d,3),!c&&Xc(a)&&Xc(b))return a===b;var e=c?c(a,b):z;return e===z?Hb(a,b,c):!!e}function we(a){return r(a)&&"string"==typeof a.message&&Sf.call(a)==X}function xe(a){var b=typeof a;return"function"==b||!!a&&"object"==b}function ye(a,b,c,d){var e=Lh(b),f=e.length;if(!f)return!0;if(null==a)return!1;if(c="function"==typeof c&&dc(c,d,3),a=dd(a),!c&&1==f){var g=e[0],h=b[g];if(Xc(h))return h===a[g]&&(h!==z||g in a)}for(var i=Bf(f),j=Bf(f);f--;)h=i[f]=b[e[f]],j[f]=Xc(h);return Jb(a,e,i,j,c)}function ze(a){return Ce(a)&&a!=+a}function Ae(a){return null==a?!1:Sf.call(a)==Y?Uf.test(Pf.call(a)):r(a)&&Ia.test(a)}function Be(a){return null===a}function Ce(a){return"number"==typeof a||r(a)&&Sf.call(a)==$}function De(a){return r(a)&&Sf.call(a)==aa}function Ee(a){return"string"==typeof a||r(a)&&Sf.call(a)==ca}function Fe(a){return r(a)&&Wc(a.length)&&!!Qa[Sf.call(a)]}function Ge(a){return a===z}function He(a){var b=a?Og(a):0;return Wc(b)?b?ab(a):[]:Te(a)}function Ie(a){return sb(a,Oe(a))}function Je(a,b,c){var d=Fg(a);return c&&Tc(a,b,c)&&(b=null),b?Eg(d,b):d}function Ke(a){return Fb(a,Oe(a))}function Le(a,b,c){var d=null==a?z:Gb(a,ed(b),b+"");return d===z?c:d}function Me(a,b){if(null==a)return!1;var c=Qf.call(a,b);return c||Uc(b)||(b=ed(b),a=1==b.length?a:Gb(a,Ub(b,0,-1)),b=td(b),c=null!=a&&Qf.call(a,b)),c}function Ne(a,b,c){c&&Tc(a,b,c)&&(b=null);for(var d=-1,e=Lh(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?Qf.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function Oe(a){if(null==a)return[];xe(a)||(a=Hf(a));var b=a.length;b=b&&Wc(b)&&(zh(a)||Dg.nonEnumArgs&&qe(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype===a,f=Bf(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&Sc(h,b)||"constructor"==h&&(e||!Qf.call(a,h))||f.push(h);return f}
function Pe(a){for(var b=-1,c=Lh(a),d=c.length,e=Bf(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Qe(a,b,c){var d=null==a?z:a[b];return d===z&&(null==a||Uc(b,a)||(b=ed(b),a=1==b.length?a:Gb(a,Ub(b,0,-1)),d=null==a?z:a[td(b)]),d=d===z?c:d),Bh(d)?d.call(a):d}function Re(a,b,c){if(null==a)return a;var d=b+"";b=null!=a[d]||Uc(b,a)?[d]:ed(b);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var i=b[e];xe(h)&&(e==g?h[i]=c:null==h[i]&&(h[i]=Sc(b[e+1])?[]:{})),h=h[i]}return a}function Se(a,b,c,d){var e=zh(a)||Fe(a);if(b=Kc(b,d,4),null==c)if(e||xe(a)){var f=a.constructor;c=e?zh(a)?new f:[]:Fg(Bh(f)&&f.prototype)}else c={};return(e?bb:Db)(a,function(a,d,e){return b(c,a,d,e)}),c}function Te(a){return $b(a,Lh(a))}function Ue(a){return $b(a,Oe(a))}function Ve(a,b,c){return b=+b||0,"undefined"==typeof c?(c=b,b=0):c=+c||0,a>=pg(b,c)&&a<og(b,c)}function We(a,b,c){c&&Tc(a,b,c)&&(b=c=null);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=tg();return pg(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Sb(a,b)}function Xe(a){return a=h(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function Ye(a){return a=h(a),a&&a.replace(Ja,n).replace(Da,"")}function Ze(a,b,c){a=h(a),b+="";var d=a.length;return c=c===z?d:pg(0>c?0:+c||0,d),c-=b.length,c>=0&&a.indexOf(b,c)==c}function $e(a){return a=h(a),a&&ua.test(a)?a.replace(sa,o):a}function _e(a){return a=h(a),a&&Ca.test(a)?a.replace(Ba,"\\$&"):a}function af(a,b,c){a=h(a),b=+b;var d=a.length;if(d>=b||!mg(b))return a;var e=(b-d)/2,f=Zf(e),g=Xf(e);return c=Cc("",g,c),c.slice(0,f)+a+c}function bf(a,b,c){return c&&Tc(a,b,c)&&(b=0),sg(a,b)}function cf(a,b){var c="";if(a=h(a),b=+b,1>b||!a||!mg(b))return c;do b%2&&(c+=a),b=Zf(b/2),a+=a;while(b);return c}function df(a,b,c){return a=h(a),c=null==c?0:pg(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function ef(a,c,d){var e=b.templateSettings;d&&Tc(a,c,d)&&(c=d=null),a=h(a),c=qb(Eg({},d||c),e,pb);var f,g,i=qb(Eg({},c.imports),e.imports,pb),j=Lh(i),k=$b(i,j),l=0,m=c.interpolate||Ka,n="__p += '",o=If((c.escape||Ka).source+"|"+m.source+"|"+(m===xa?Fa:Ka).source+"|"+(c.evaluate||Ka).source+"|$","g"),q="//# sourceURL="+("sourceURL"in c?c.sourceURL:"lodash.templateSources["+ ++Pa+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(l,i).replace(La,p),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),l=i+b.length,b}),n+="';\n";var r=c.variable;r||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(oa,""):n).replace(pa,"$1").replace(qa,"$1;"),n="function("+(r||"obj")+") {\n"+(r?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var s=Xh(function(){return Ef(j,q+"return "+n).apply(z,k)});if(s.source=n,we(s))throw s;return s}function ff(a,b,c){var d=a;return(a=h(a))?(c?Tc(d,b,c):null==b)?a.slice(v(a),w(a)+1):(b+="",a.slice(j(a,b),k(a,b)+1)):a}function gf(a,b,c){var d=a;return a=h(a),a?(c?Tc(d,b,c):null==b)?a.slice(v(a)):a.slice(j(a,b+"")):a}function hf(a,b,c){var d=a;return a=h(a),a?(c?Tc(d,b,c):null==b)?a.slice(0,w(a)+1):a.slice(0,k(a,b+"")+1):a}function jf(a,b,c){c&&Tc(a,b,c)&&(b=null);var d=K,e=L;if(null!=b)if(xe(b)){var f="separator"in b?b.separator:f;d="length"in b?+b.length||0:d,e="omission"in b?h(b.omission):e}else d=+b||0;if(a=h(a),d>=a.length)return a;var g=d-e.length;if(1>g)return e;var i=a.slice(0,g);if(null==f)return i+e;if(De(f)){if(a.slice(g).search(f)){var j,k,l=a.slice(0,g);for(f.global||(f=If(f.source,(Ga.exec(f)||"")+"g")),f.lastIndex=0;j=f.exec(l);)k=j.index;i=i.slice(0,null==k?g:k)}}else if(a.indexOf(f,g)!=g){var m=i.lastIndexOf(f);m>-1&&(i=i.slice(0,m))}return i+e}function kf(a){return a=h(a),a&&ta.test(a)?a.replace(ra,x):a}function lf(a,b,c){return c&&Tc(a,b,c)&&(b=null),a=h(a),a.match(b||Ma)||[]}function mf(a,b,c){return c&&Tc(a,b,c)&&(b=null),r(a)?pf(a):tb(a,b)}function nf(a){return function(){return a}}function of(a){return a}function pf(a){return Lb(ub(a,!0))}function qf(a,b){return Mb(a,ub(b,!0))}function rf(a,b,c){if(null==c){var d=xe(b),e=d&&Lh(b),f=e&&e.length&&Fb(b,e);(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Fb(b,Lh(b)));var g=!0,h=-1,i=Bh(a),j=f.length;c===!1?g=!1:xe(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__),e=d.__actions__=ab(this.__actions__);return e.push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}var f=[this.value()];return ag.apply(f,arguments),b.apply(a,f)}}(l))}return a}function sf(){return a._=Tf,this}function tf(){}function uf(a){return Uc(a)?Pb(a):Qb(a)}function vf(a){return function(b){return Gb(a,ed(b),b+"")}}function wf(a,b,c){c&&Tc(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=og(Xf((b-a)/(c||1)),0),f=Bf(e);++d<e;)f[d]=a,a+=c;return f}function xf(a,b,c){if(a=Zf(a),1>a||!mg(a))return[];var d=-1,e=Bf(pg(a,wg));for(b=dc(b,c,1);++d<a;)wg>d?e[d]=b(d):b(d);return e}function yf(a){var b=++Rf;return h(a)+b}function zf(a,b){return(+a||0)+(+b||0)}function Af(a,b,c){c&&Tc(a,b,c)&&(b=null);var d=Kc(),e=null==b;return d===tb&&e||(e=!1,b=d(b,c,3)),e?nb(zh(a)?a:cd(a)):Yb(a,b)}a=a?db.defaults(cb.Object(),a,db.pick(cb,Oa)):cb;var Bf=a.Array,Cf=a.Date,Df=a.Error,Ef=a.Function,Ff=a.Math,Gf=a.Number,Hf=a.Object,If=a.RegExp,Jf=a.String,Kf=a.TypeError,Lf=Bf.prototype,Mf=Hf.prototype,Nf=Jf.prototype,Of=(Of=a.window)&&Of.document,Pf=Ef.prototype.toString,Qf=Mf.hasOwnProperty,Rf=0,Sf=Mf.toString,Tf=a._,Uf=If("^"+_e(Sf).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vf=Ae(Vf=a.ArrayBuffer)&&Vf,Wf=Ae(Wf=Vf&&new Vf(0).slice)&&Wf,Xf=Ff.ceil,Yf=a.clearTimeout,Zf=Ff.floor,$f=Ae($f=Hf.getOwnPropertySymbols)&&$f,_f=Ae(_f=Hf.getPrototypeOf)&&_f,ag=Lf.push,bg=Ae(bg=Hf.preventExtensions)&&bg,cg=Mf.propertyIsEnumerable,dg=Ae(dg=a.Set)&&dg,eg=a.setTimeout,fg=Lf.splice,gg=Ae(gg=a.Uint8Array)&&gg,hg=Ae(hg=a.WeakMap)&&hg,ig=function(){try{var b=Ae(b=a.Float64Array)&&b,c=new b(new Vf(10),0,1)&&b}catch(d){}return c}(),jg=function(){var a=bg&&Ae(a=Hf.assign)&&a;try{if(a){var b=bg({1:0});b[0]=1}}catch(c){try{a(b,"xo")}catch(c){}return!b[1]&&a}return!1}(),kg=Ae(kg=Bf.isArray)&&kg,lg=Ae(lg=Hf.create)&&lg,mg=a.isFinite,ng=Ae(ng=Hf.keys)&&ng,og=Ff.max,pg=Ff.min,qg=Ae(qg=Cf.now)&&qg,rg=Ae(rg=Gf.isFinite)&&rg,sg=a.parseInt,tg=Ff.random,ug=Gf.NEGATIVE_INFINITY,vg=Gf.POSITIVE_INFINITY,wg=Ff.pow(2,32)-1,xg=wg-1,yg=wg>>>1,zg=ig?ig.BYTES_PER_ELEMENT:0,Ag=Ff.pow(2,53)-1,Bg=hg&&new hg,Cg={},Dg=b.support={};!function(a){var b=function(){this.x=a},c=arguments,d=[];b.prototype={valueOf:a,y:a};for(var e in new b)d.push(e);Dg.funcDecomp=/\bthis\b/.test(function(){return this}),Dg.funcNames="string"==typeof Ef.name;try{Dg.dom=11===Of.createDocumentFragment().nodeType}catch(f){Dg.dom=!1}try{Dg.nonEnumArgs=!cg.call(c,1)}catch(f){Dg.nonEnumArgs=!0}}(1,0),b.templateSettings={escape:va,evaluate:wa,interpolate:xa,variable:"",imports:{_:b}};var Eg=jg||function(a,b){return null==b?a:sb(b,Pg(b),sb(b,Lh(b),a))},Fg=function(){function b(){}return function(c){if(xe(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}(),Gg=jc(Db),Hg=jc(Eb,!0),Ig=kc(),Jg=kc(!0),Kg=Bg?function(a,b){return Bg.set(a,b),a}:of;Wf||(ec=Vf&&gg?function(a){var b=a.byteLength,c=ig?Zf(b/zg):0,d=c*zg,e=new Vf(b);if(c){var f=new ig(e,0,c);f.set(new ig(a,0,c))}return b!=d&&(f=new gg(e,d),f.set(new gg(a,d))),e}:nf(null));var Lg=lg&&dg?function(a){return new Za(a)}:nf(null),Mg=Bg?function(a){return Bg.get(a)}:tf,Ng=function(){return Dg.funcNames?"constant"==nf.name?Pb("name"):function(a){for(var b=a.name,c=Cg[b],d=c?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}:nf("")}(),Og=Pb("length"),Pg=$f?function(a){return $f(dd(a))}:nf([]),Qg=function(){var a=0,b=0;return function(c,d){var e=mh(),f=N-(e-b);if(b=e,f>0){if(++a>=M)return c}else a=0;return Kg(c,d)}}(),Rg=ke(function(a,b){return Rc(a)?wb(a,Bb(b,!1,!0)):[]}),Sg=rc(),Tg=rc(!0),Ug=ke(function(a,b){b=Bb(b);var c=rb(a,b);return Rb(a,b.sort(d)),c}),Vg=Ec(),Wg=Ec(!0),Xg=ke(function(a){return Zb(Bb(a,!1,!0))}),Yg=ke(function(a,b){return Rc(a)?wb(a,b):[]}),Zg=ke(Ed),$g=ke(function(a){var b=a.length,c=a[b-2],d=a[b-1];return b>2&&"function"==typeof c?b-=2:(c=b>1&&"function"==typeof d?(--b,d):z,d=z),a.length=b,Fd(a,c,d)}),_g=ke(function(a,b){return rb(a,Bb(b))}),ah=hc(function(a,b,c){Qf.call(a,c)?++a[c]:a[c]=1}),bh=qc(Gg),ch=qc(Hg,!0),dh=uc(bb,Gg),eh=uc(eb,Hg),fh=hc(function(a,b,c){Qf.call(a,c)?a[c].push(b):a[c]=[b]}),gh=hc(function(a,b,c){a[c]=b}),hh=ke(function(a,b,c){var d=-1,e="function"==typeof b,f=Uc(b),g=Rc(a)?Bf(a.length):[];return Gg(a,function(a){var h=e?b:f&&null!=a&&a[b];g[++d]=h?h.apply(a,c):Qc(a,b,c)}),g}),ih=hc(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),jh=Ac(kb,Gg),kh=Ac(lb,Hg),lh=ke(function(a,b){if(null==a)return[];var c=b[2];return c&&Tc(b[0],b[1],c)&&(b.length=1),Xb(a,Bb(b),[])}),mh=qg||function(){return(new Cf).getTime()},nh=ke(function(a,b,c){var d=B;if(c.length){var e=t(c,nh.placeholder);d|=G}return Fc(a,d,b,c,e)}),oh=ke(function(a,b){b=b.length?Bb(b):Ke(a);for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=Fc(a[e],B,a)}return a}),ph=ke(function(a,b,c){var d=B|C;if(c.length){var e=t(c,ph.placeholder);d|=G}return Fc(b,d,a,c,e)}),qh=oc(E),rh=oc(F),sh=ke(function(a,b){return vb(a,1,b)}),th=ke(function(a,b,c){return vb(a,b,c)}),uh=tc(),vh=tc(!0),wh=zc(G),xh=zc(H),yh=ke(function(a,b){return Fc(a,J,null,null,null,Bb(b))}),zh=kg||function(a){return r(a)&&Wc(a.length)&&Sf.call(a)==U};Dg.dom||(te=function(a){return!!a&&1===a.nodeType&&r(a)&&!Ch(a)});var Ah=rg||function(a){return"number"==typeof a&&mg(a)},Bh=g(/x/)||gg&&!g(gg)?function(a){return Sf.call(a)==Y}:g,Ch=_f?function(a){if(!a||Sf.call(a)!=_)return!1;var b=a.valueOf,c=Ae(b)&&(c=_f(b))&&_f(c);return c?a==c||_f(a)==c:ad(a)}:ad,Dh=ic(function(a,b,c){return c?qb(a,b,c):Eg(a,b)}),Eh=ke(function(a){var b=a[0];return null==b?b:(a.push(ob),Dh.apply(z,a))}),Fh=sc(Db),Gh=sc(Eb),Hh=vc(Ig),Ih=vc(Jg),Jh=wc(Db),Kh=wc(Eb),Lh=ng?function(a){var b=null!=a&&a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&Rc(a)?bd(a):xe(a)?ng(a):[]}:bd,Mh=xc(!0),Nh=xc(),Oh=ic(Nb),Ph=ke(function(a,b){if(null==a)return{};if("function"!=typeof b[0]){var b=hb(Bb(b),Jf);return Zc(a,wb(Oe(a),b))}var c=dc(b[0],b[1],3);return $c(a,function(a,b,d){return!c(a,b,d)})}),Qh=ke(function(a,b){return null==a?{}:"function"==typeof b[0]?$c(a,dc(b[0],b[1],3)):Zc(a,Bb(b))}),Rh=mc(function(a,b,c){return b=b.toLowerCase(),a+(c?b.charAt(0).toUpperCase()+b.slice(1):b)}),Sh=mc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),Th=yc(),Uh=yc(!0);8!=sg(Na+"08")&&(bf=function(a,b,c){return(c?Tc(a,b,c):null==b)?b=0:b&&(b=+b),a=ff(a),sg(a,b||(Ha.test(a)?16:10))});var Vh=mc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),Wh=mc(function(a,b,c){return a+(c?" ":"")+(b.charAt(0).toUpperCase()+b.slice(1))}),Xh=ke(function(a,b){try{return a.apply(z,b)}catch(c){return we(c)?c:new Df(c)}}),Yh=ke(function(a,b){return function(c){return Qc(c,a,b)}}),Zh=ke(function(a,b){return function(c){return Qc(a,c,b)}}),$h=pc(ib),_h=pc(jb,!0);return b.prototype=c.prototype,s.prototype=Fg(c.prototype),s.prototype.constructor=s,Z.prototype=Fg(c.prototype),Z.prototype.constructor=Z,Ua.prototype["delete"]=Va,Ua.prototype.get=Wa,Ua.prototype.has=Xa,Ua.prototype.set=Ya,Za.prototype.push=_a,he.Cache=Ua,b.after=de,b.ary=ee,b.assign=Dh,b.at=_g,b.before=fe,b.bind=nh,b.bindAll=oh,b.bindKey=ph,b.callback=mf,b.chain=Id,b.chunk=gd,b.compact=hd,b.constant=nf,b.countBy=ah,b.create=Je,b.curry=qh,b.curryRight=rh,b.debounce=ge,b.defaults=Eh,b.defer=sh,b.delay=th,b.difference=Rg,b.drop=id,b.dropRight=jd,b.dropRightWhile=kd,b.dropWhile=ld,b.fill=md,b.filter=Sd,b.flatten=od,b.flattenDeep=pd,b.flow=uh,b.flowRight=vh,b.forEach=dh,b.forEachRight=eh,b.forIn=Hh,b.forInRight=Ih,b.forOwn=Jh,b.forOwnRight=Kh,b.functions=Ke,b.groupBy=fh,b.indexBy=gh,b.initial=rd,b.intersection=sd,b.invert=Ne,b.invoke=hh,b.keys=Lh,b.keysIn=Oe,b.map=Vd,b.mapKeys=Mh,b.mapValues=Nh,b.matches=pf,b.matchesProperty=qf,b.memoize=he,b.merge=Oh,b.method=Yh,b.methodOf=Zh,b.mixin=rf,b.negate=ie,b.omit=Ph,b.once=je,b.pairs=Pe,b.partial=wh,b.partialRight=xh,b.partition=ih,b.pick=Qh,b.pluck=Wd,b.property=uf,b.propertyOf=vf,b.pull=vd,b.pullAt=Ug,b.range=wf,b.rearg=yh,b.reject=Xd,b.remove=wd,b.rest=xd,b.restParam=ke,b.set=Re,b.shuffle=Zd,b.slice=yd,b.sortBy=ae,b.sortByAll=lh,b.sortByOrder=be,b.spread=le,b.take=zd,b.takeRight=Ad,b.takeRightWhile=Bd,b.takeWhile=Cd,b.tap=Jd,b.throttle=me,b.thru=Kd,b.times=xf,b.toArray=He,b.toPlainObject=Ie,b.transform=Se,b.union=Xg,b.uniq=Dd,b.unzip=Ed,b.unzipWith=Fd,b.values=Te,b.valuesIn=Ue,b.where=ce,b.without=Yg,b.wrap=ne,b.xor=Gd,b.zip=Zg,b.zipObject=Hd,b.zipWith=$g,b.backflow=vh,b.collect=Vd,b.compose=vh,b.each=dh,b.eachRight=eh,b.extend=Dh,b.iteratee=mf,b.methods=Ke,b.object=Hd,b.select=Sd,b.tail=xd,b.unique=Dd,rf(b,b),b.add=zf,b.attempt=Xh,b.camelCase=Rh,b.capitalize=Xe,b.clone=oe,b.cloneDeep=pe,b.deburr=Ye,b.endsWith=Ze,b.escape=$e,b.escapeRegExp=_e,b.every=Rd,b.find=bh,b.findIndex=Sg,b.findKey=Fh,b.findLast=ch,b.findLastIndex=Tg,b.findLastKey=Gh,b.findWhere=Td,b.first=nd,b.get=Le,b.has=Me,b.identity=of,b.includes=Ud,b.indexOf=qd,b.inRange=Ve,b.isArguments=qe,b.isArray=zh,b.isBoolean=re,b.isDate=se,b.isElement=te,b.isEmpty=ue,b.isEqual=ve,b.isError=we,b.isFinite=Ah,b.isFunction=Bh,b.isMatch=ye,b.isNaN=ze,b.isNative=Ae,b.isNull=Be,b.isNumber=Ce,b.isObject=xe,b.isPlainObject=Ch,b.isRegExp=De,b.isString=Ee,b.isTypedArray=Fe,b.isUndefined=Ge,b.kebabCase=Sh,b.last=td,b.lastIndexOf=ud,b.max=$h,b.min=_h,b.noConflict=sf,b.noop=tf,b.now=mh,b.pad=af,b.padLeft=Th,b.padRight=Uh,b.parseInt=bf,b.random=We,b.reduce=jh,b.reduceRight=kh,b.repeat=cf,b.result=Qe,b.runInContext=y,b.size=$d,b.snakeCase=Vh,b.some=_d,b.sortedIndex=Vg,b.sortedLastIndex=Wg,b.startCase=Wh,b.startsWith=df,b.sum=Af,b.template=ef,b.trim=ff,b.trimLeft=gf,b.trimRight=hf,b.trunc=jf,b.unescape=kf,b.uniqueId=yf,b.words=lf,b.all=Rd,b.any=_d,b.contains=Ud,b.detect=bh,b.foldl=jh,b.foldr=kh,b.head=nd,b.include=Ud,b.inject=jh,rf(b,function(){var a={};return Db(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.sample=Yd,b.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Yd(b,a)}):Yd(this.value())},b.VERSION=A,bb(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){b[a].placeholder=b}),bb(["dropWhile","filter","map","takeWhile"],function(a,b){var c=b!=Q,d=b==O;Z.prototype[a]=function(a,e){var f=this.__filtered__,g=f&&d?new Z(this):this.clone(),h=g.__iteratees__||(g.__iteratees__=[]);return h.push({done:!1,count:0,index:0,iteratee:Kc(a,e,1),limit:-1,type:b}),g.__filtered__=f||c,g}}),bb(["drop","take"],function(a,b){var c=a+"While";Z.prototype[a]=function(c){var d=this.__filtered__,e=d&&!b?this.dropWhile():this.clone();if(c=null==c?1:og(Zf(c)||0,0),d)b?e.__takeCount__=pg(e.__takeCount__,c):td(e.__iteratees__).limit=c;else{var f=e.__views__||(e.__views__=[]);f.push({size:c,type:a+(e.__dir__<0?"Right":"")})}return e},Z.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},Z.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[c](a,b).reverse()}}),bb(["first","last"],function(a,b){var c="take"+(b?"Right":"");Z.prototype[a]=function(){return this[c](1).value()[0]}}),bb(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");Z.prototype[a]=function(){return this[c](1)}}),bb(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?Lb:uf;Z.prototype[a]=function(a){return this[c](d(a))}}),Z.prototype.compact=function(){return this.filter(of)},Z.prototype.reject=function(a,b){return a=Kc(a,b,1),this.filter(function(b){return!a(b)})},Z.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=this;return 0>a?c=this.takeRight(-a):a&&(c=this.drop(a)),b!==z&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Z.prototype.toArray=function(){return this.drop(0)},Db(Z.prototype,function(a,c){var d=b[c];if(d){var e=/^(?:filter|map|reject)|While$/.test(c),f=/^(?:first|last)$/.test(c);b.prototype[c]=function(){var c=arguments,g=this.__chain__,h=this.__wrapped__,i=!!this.__actions__.length,j=h instanceof Z,k=c[0],l=j||zh(h);l&&e&&"function"==typeof k&&1!=k.length&&(j=l=!1);var m=j&&!i;if(f&&!g)return m?a.call(h):d.call(b,this.value());var n=function(a){var e=[a];return ag.apply(e,c),d.apply(b,e)};if(l){var o=m?h:new Z(this),p=a.apply(o,c);if(!f&&(i||p.__actions__)){var q=p.__actions__||(p.__actions__=[]);q.push({func:Kd,args:[n],thisArg:b})}return new s(p,g)}return this.thru(n)}}}),bb(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(a){var c=(/^(?:replace|split)$/.test(a)?Nf:Lf)[a],d=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(a);b.prototype[a]=function(){var a=arguments;return e&&!this.__chain__?c.apply(this.value(),a):this[d](function(b){return c.apply(b,a)})}}),Db(Z.prototype,function(a,c){var d=b[c];if(d){var e=d.name,f=Cg[e]||(Cg[e]=[]);f.push({name:c,func:d})}}),Cg[Bc(null,C).name]=[{name:"wrapper",func:null}],Z.prototype.clone=ba,Z.prototype.reverse=da,Z.prototype.value=Ta,b.prototype.chain=Ld,b.prototype.commit=Md,b.prototype.plant=Nd,b.prototype.reverse=Od,b.prototype.toString=Pd,b.prototype.run=b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=Qd,b.prototype.collect=b.prototype.map,b.prototype.head=b.prototype.first,b.prototype.select=b.prototype.filter,b.prototype.tail=b.prototype.rest,b}var z,A="3.8.0",B=1,C=2,D=4,E=8,F=16,G=32,H=64,I=128,J=256,K=30,L="...",M=150,N=16,O=0,P=1,Q=2,R="Expected a function",S="__lodash_placeholder__",T="[object Arguments]",U="[object Array]",V="[object Boolean]",W="[object Date]",X="[object Error]",Y="[object Function]",Z="[object Map]",$="[object Number]",_="[object Object]",aa="[object RegExp]",ba="[object Set]",ca="[object String]",da="[object WeakMap]",ea="[object ArrayBuffer]",fa="[object Float32Array]",ga="[object Float64Array]",ha="[object Int8Array]",ia="[object Int16Array]",ja="[object Int32Array]",ka="[object Uint8Array]",la="[object Uint8ClampedArray]",ma="[object Uint16Array]",na="[object Uint32Array]",oa=/\b__p \+= '';/g,pa=/\b(__p \+=) '' \+/g,qa=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ra=/&(?:amp|lt|gt|quot|#39|#96);/g,sa=/[&<>"'`]/g,ta=RegExp(ra.source),ua=RegExp(sa.source),va=/<%-([\s\S]+?)%>/g,wa=/<%([\s\S]+?)%>/g,xa=/<%=([\s\S]+?)%>/g,ya=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,za=/^\w*$/,Aa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ba=/[.*+?^${}()|[\]\/\\]/g,Ca=RegExp(Ba.source),Da=/[\u0300-\u036f\ufe20-\ufe23]/g,Ea=/\\(\\)?/g,Fa=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ga=/\w*$/,Ha=/^0[xX]/,Ia=/^\[object .+?Constructor\]$/,Ja=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ka=/($^)/,La=/['\n\r\u2028\u2029\\]/g,Ma=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"+(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Na=" 	\f \ufeff\n\r\u2028\u2029 ᠎             　",Oa=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],Pa=-1,Qa={};Qa[fa]=Qa[ga]=Qa[ha]=Qa[ia]=Qa[ja]=Qa[ka]=Qa[la]=Qa[ma]=Qa[na]=!0,Qa[T]=Qa[U]=Qa[ea]=Qa[V]=Qa[W]=Qa[X]=Qa[Y]=Qa[Z]=Qa[$]=Qa[_]=Qa[aa]=Qa[ba]=Qa[ca]=Qa[da]=!1;var Ra={};Ra[T]=Ra[U]=Ra[ea]=Ra[V]=Ra[W]=Ra[fa]=Ra[ga]=Ra[ha]=Ra[ia]=Ra[ja]=Ra[$]=Ra[_]=Ra[aa]=Ra[ca]=Ra[ka]=Ra[la]=Ra[ma]=Ra[na]=!0,Ra[X]=Ra[Y]=Ra[Z]=Ra[ba]=Ra[da]=!1;var Sa={leading:!1,maxWait:0,trailing:!1},Ta={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Ua={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Va={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Wa={"function":!0,object:!0},Xa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ya=Wa[typeof c]&&c&&!c.nodeType&&c,Za=Wa[typeof b]&&b&&!b.nodeType&&b,$a=Ya&&Za&&"object"==typeof a&&a&&a.Object&&a,_a=Wa[typeof self]&&self&&self.Object&&self,ab=Wa[typeof window]&&window&&window.Object&&window,bb=Za&&Za.exports===Ya&&Ya,cb=$a||ab!==(this&&this.window)&&ab||_a||this,db=y();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(cb._=db,define(function(){return db})):Ya&&Za?bb?(Za.exports=db)._=db:Ya._=db:cb._=db}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],243:[function(a,b,c){(function(c){(function(d){function e(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function f(a,b){return Ea.call(a,b)}function g(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(a){ya.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function i(a,b){var c=!0;return r(function(){return c&&(h(a),c=!1),b.apply(this,arguments)},b)}function j(a,b){vb[a]||(h(b),vb[a]=!0)}function k(a,b){return function(c){return u(a.call(this,c),b)}}function l(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function m(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function n(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function o(){}function p(a,b){b!==!1&&K(a),s(this,a),this._d=new Date(+a._d),xb===!1&&(xb=!0,ya.updateOffset(this),xb=!1)}function q(a){var b=D(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ya.localeData(),this._bubble()}function r(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function s(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Na.length>0)for(c in Na)d=Na[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function t(a){return 0>a?Math.ceil(a):Math.floor(a)}function u(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function v(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function w(a,b){var c;return b=P(b,a),a.isBefore(b)?c=v(a,b):(c=v(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function x(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(j(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=ya.duration(c,d),y(this,e,a),this}}function y(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&sa(a,"Date",ra(a,"Date")+f*c),g&&qa(a,ra(a,"Month")+g*c),d&&ya.updateOffset(a,f||g)}function z(a){return"[object Array]"===Object.prototype.toString.call(a)}function A(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function B(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&F(a[d])!==F(b[d]))&&g++;return g+f}function C(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=ob[a]||pb[b]||b}return a}function D(a){var b,c,d={};for(c in a)f(a,c)&&(b=C(c),b&&(d[b]=a[c]));return d}function E(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else{if(0!==a.indexOf("month"))return;b=12,c="month"}ya[a]=function(e,f){var g,h,i=ya._locale[a],j=[];if("number"==typeof e&&(f=e,e=d),h=function(a){var b=ya().utc().set(c,a);return i.call(ya._locale,b,e||"")},null!=f)return h(f);for(g=0;b>g;g++)j.push(h(g));return j}}function F(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function G(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function H(a,b,c){return ma(ya([a,11,31+b-c]),b,c).week}function I(a){return J(a)?366:365}function J(a){return a%4===0&&a%100!==0||a%400===0}function K(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Ga]<0||a._a[Ga]>11?Ga:a._a[Ha]<1||a._a[Ha]>G(a._a[Fa],a._a[Ga])?Ha:a._a[Ia]<0||a._a[Ia]>24||24===a._a[Ia]&&(0!==a._a[Ja]||0!==a._a[Ka]||0!==a._a[La])?Ia:a._a[Ja]<0||a._a[Ja]>59?Ja:a._a[Ka]<0||a._a[Ka]>59?Ka:a._a[La]<0||a._a[La]>999?La:-1,a._pf._overflowDayOfYear&&(Fa>b||b>Ha)&&(b=Ha),a._pf.overflow=b)}function L(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length&&a._pf.bigHour===d)),a._isValid}function M(a){return a?a.toLowerCase().replace("_","-"):a}function N(a){for(var b,c,d,e,f=0;f<a.length;){for(e=M(a[f]).split("-"),b=e.length,c=M(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=O(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&B(e,c,!0)>=b-1)break;b--}f++}return null}function O(b){var c=null;if(!Ma[b]&&Oa)try{c=ya.locale(),a("./locale/"+b),ya.locale(c)}catch(d){}return Ma[b]}function P(a,b){var c,d;return b._isUTC?(c=b.clone(),d=(ya.isMoment(a)||A(a)?+a:+ya(a))-+c,c._d.setTime(+c._d+d),ya.updateOffset(c,!1),c):ya(a).local()}function Q(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function R(a){var b,c,d=a.match(Sa);for(b=0,c=d.length;c>b;b++)ub[d[b]]?d[b]=ub[d[b]]:d[b]=Q(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function S(a,b){return a.isValid()?(b=T(b,a.localeData()),qb[b]||(qb[b]=R(b)),qb[b](a)):a.localeData().invalidDate()}function T(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Ta.lastIndex=0;d>=0&&Ta.test(a);)a=a.replace(Ta,c),Ta.lastIndex=0,d-=1;return a}function U(a,b){var c,d=b._strict;switch(a){case"Q":return cb;case"DDDD":return eb;case"YYYY":case"GGGG":case"gggg":return d?fb:Wa;case"Y":case"G":case"g":return hb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?gb:Xa;case"S":if(d)return cb;case"SS":if(d)return db;case"SSS":if(d)return eb;case"DDD":return Va;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Za;case"a":case"A":return b._locale._meridiemParse;case"x":return ab;case"X":return bb;case"Z":case"ZZ":return $a;case"T":return _a;case"SSSS":return Ya;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?db:Ua;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ua;case"Do":return d?b._locale._ordinalParse:b._locale._ordinalParseLenient;default:return c=new RegExp(ba(aa(a.replace("\\","")),"i"))}}function V(a){a=a||"";var b=a.match($a)||[],c=b[b.length-1]||[],d=(c+"").match(mb)||["-",0,0],e=+(60*d[1])+F(d[2]);return"+"===d[0]?e:-e}function W(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ga]=3*(F(b)-1));break;case"M":case"MM":null!=b&&(e[Ga]=F(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b,a,c._strict),null!=d?e[Ga]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Ha]=F(b));break;case"Do":null!=b&&(e[Ha]=F(parseInt(b.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=F(b));break;case"YY":e[Fa]=ya.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Fa]=F(b);break;case"a":case"A":c._meridiem=b;break;case"h":case"hh":c._pf.bigHour=!0;case"H":case"HH":e[Ia]=F(b);break;case"m":case"mm":e[Ja]=F(b);break;case"s":case"ss":e[Ka]=F(b);break;case"S":case"SS":case"SSS":case"SSSS":e[La]=F(1e3*("0."+b));break;case"x":c._d=new Date(F(b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=V(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=F(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=ya.parseTwoDigitYear(b)}}function X(a){var b,c,d,f,g,h,i;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(g=1,h=4,c=e(b.GG,a._a[Fa],ma(ya(),1,4).year),d=e(b.W,1),f=e(b.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,c=e(b.gg,a._a[Fa],ma(ya(),g,h).year),d=e(b.w,1),null!=b.d?(f=b.d,g>f&&++d):f=null!=b.e?b.e+g:g),i=na(c,d,f,h,g),a._a[Fa]=i.year,a._dayOfYear=i.dayOfYear}function Y(a){var b,c,d,f,g=[];if(!a._d){for(d=$(a),a._w&&null==a._a[Ha]&&null==a._a[Ga]&&X(a),a._dayOfYear&&(f=e(a._a[Fa],d[Fa]),a._dayOfYear>I(f)&&(a._pf._overflowDayOfYear=!0),c=ia(f,0,a._dayOfYear),a._a[Ga]=c.getUTCMonth(),a._a[Ha]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=g[b]=d[b];for(;7>b;b++)a._a[b]=g[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Ia]&&0===a._a[Ja]&&0===a._a[Ka]&&0===a._a[La]&&(a._nextDay=!0,a._a[Ia]=0),a._d=(a._useUTC?ia:ha).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[Ia]=24)}}function Z(a){var b;a._d||(b=D(a._i),a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],Y(a))}function $(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function _(a){if(a._f===ya.ISO_8601)return void da(a);a._a=[],a._pf.empty=!0;var b,c,e,f,g,h=""+a._i,i=h.length,j=0;for(e=T(a._f,a._locale).match(Sa)||[],b=0;b<e.length;b++)f=e[b],c=(h.match(U(f,a))||[])[0],c&&(g=h.substr(0,h.indexOf(c)),g.length>0&&a._pf.unusedInput.push(g),h=h.slice(h.indexOf(c)+c.length),j+=c.length),ub[f]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(f),W(f,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(f);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._pf.bigHour===!0&&a._a[Ia]<=12&&(a._pf.bigHour=d),a._a[Ia]=n(a._locale,a._a[Ia],a._meridiem),Y(a),K(a)}function aa(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function ba(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ca(a){var b,c,d,e,f;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=s({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=g(),b._f=a._f[e],_(b),L(b)&&(f+=b._pf.charsLeftOver,f+=10*b._pf.unusedTokens.length,b._pf.score=f,(null==d||d>f)&&(d=f,c=b));r(a,c||b)}function da(a){var b,c,d=a._i,e=ib.exec(d);if(e){for(a._pf.iso=!0,b=0,c=kb.length;c>b;b++)if(kb[b][1].exec(d)){a._f=kb[b][0]+(e[6]||" ");break}for(b=0,
c=lb.length;c>b;b++)if(lb[b][1].exec(d)){a._f+=lb[b][0];break}d.match($a)&&(a._f+="Z"),_(a)}else a._isValid=!1}function ea(a){da(a),a._isValid===!1&&(delete a._isValid,ya.createFromInputFallback(a))}function fa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ga(a){var b,c=a._i;c===d?a._d=new Date:A(c)?a._d=new Date(+c):null!==(b=Pa.exec(c))?a._d=new Date(+b[1]):"string"==typeof c?ea(a):z(c)?(a._a=fa(c.slice(0),function(a){return parseInt(a,10)}),Y(a)):"object"==typeof c?Z(a):"number"==typeof c?a._d=new Date(c):ya.createFromInputFallback(a)}function ha(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function ia(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ja(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function ka(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function la(a,b,c){var d=ya.duration(a).abs(),e=Da(d.as("s")),f=Da(d.as("m")),g=Da(d.as("h")),h=Da(d.as("d")),i=Da(d.as("M")),j=Da(d.as("y")),k=e<rb.s&&["s",e]||1===f&&["m"]||f<rb.m&&["mm",f]||1===g&&["h"]||g<rb.h&&["hh",g]||1===h&&["d"]||h<rb.d&&["dd",h]||1===i&&["M"]||i<rb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,ka.apply({},k)}function ma(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ya(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function na(a,b,c,d,e){var f,g,h=ia(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:I(a-1)+g}}function oa(a){var b,c=a._i,e=a._f;return a._locale=a._locale||ya.localeData(a._l),null===c||e===d&&""===c?ya.invalid({nullInput:!0}):("string"==typeof c&&(a._i=c=a._locale.preparse(c)),ya.isMoment(c)?new p(c,!0):(e?z(e)?ca(a):_(a):ga(a),b=new p(a),b._nextDay&&(b.add(1,"d"),b._nextDay=d),b))}function pa(a,b){var c,d;if(1===b.length&&z(b[0])&&(b=b[0]),!b.length)return ya();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function qa(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),G(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ra(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function sa(a,b,c){return"Month"===b?qa(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function ta(a,b){return function(c){return null!=c?(sa(this,a,c),ya.updateOffset(this,b),this):ra(this,a)}}function ua(a){return 400*a/146097}function va(a){return 146097*a/400}function wa(a){ya.duration.fn[a]=function(){return this._data[a]}}function xa(a){"undefined"==typeof ender&&(za=Ca.moment,a?Ca.moment=i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ya):Ca.moment=ya)}for(var ya,za,Aa,Ba="2.9.0",Ca="undefined"==typeof c||"undefined"!=typeof window&&window!==c.window?this:c,Da=Math.round,Ea=Object.prototype.hasOwnProperty,Fa=0,Ga=1,Ha=2,Ia=3,Ja=4,Ka=5,La=6,Ma={},Na=[],Oa="undefined"!=typeof b&&b&&b.exports,Pa=/^\/?Date\((\-?\d+)/i,Qa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ra=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Sa=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ta=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ua=/\d\d?/,Va=/\d{1,3}/,Wa=/\d{1,4}/,Xa=/[+\-]?\d{1,6}/,Ya=/\d+/,Za=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$a=/Z|[\+\-]\d\d:?\d\d/gi,_a=/T/i,ab=/[\+\-]?\d+/,bb=/[\+\-]?\d+(\.\d{1,3})?/,cb=/\d/,db=/\d\d/,eb=/\d{3}/,fb=/\d{4}/,gb=/[+-]?\d{6}/,hb=/[+-]?\d+/,ib=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jb="YYYY-MM-DDTHH:mm:ssZ",kb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],lb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],mb=/([\+\-]|\d\d)/gi,nb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ob={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},qb={},rb={s:45,m:45,h:22,d:26,M:11},sb="DDD w W M D d".split(" "),tb="M D H h m s w W".split(" "),ub={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+u(Math.abs(a),6)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return u(this.weekYear(),4)},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return u(this.isoWeekYear(),4)},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return F(this.milliseconds()/100)},SS:function(){return u(F(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},SSSS:function(){return u(this.milliseconds(),3)},Z:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+u(F(a/60),2)+":"+u(F(a)%60,2)},ZZ:function(){var a=this.utcOffset(),b="+";return 0>a&&(a=-a,b="-"),b+u(F(a/60),2)+u(F(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vb={},wb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],xb=!1;sb.length;)Aa=sb.pop(),ub[Aa+"o"]=l(ub[Aa],Aa);for(;tb.length;)Aa=tb.pop(),ub[Aa+Aa]=k(ub[Aa],2);ub.DDDD=k(ub.DDD,3),r(o.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=ya.utc([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ya([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.apply(b,[c]):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ma(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ya=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._i=a,f._f=b,f._l=c,f._strict=e,f._isUTC=!1,f._pf=g(),oa(f)},ya.suppressDeprecationWarnings=!1,ya.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),ya.min=function(){var a=[].slice.call(arguments,0);return pa("isBefore",a)},ya.max=function(){var a=[].slice.call(arguments,0);return pa("isAfter",a)},ya.utc=function(a,b,c,e){var f;return"boolean"==typeof c&&(e=c,c=d),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=c,f._i=a,f._f=b,f._strict=e,f._pf=g(),oa(f).utc()},ya.unix=function(a){return ya(1e3*a)},ya.duration=function(a,b){var c,d,e,g,h=a,i=null;return ya.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=Qa.exec(a))?(c="-"===i[1]?-1:1,h={y:0,d:F(i[Ha])*c,h:F(i[Ia])*c,m:F(i[Ja])*c,s:F(i[Ka])*c,ms:F(i[La])*c}):(i=Ra.exec(a))?(c="-"===i[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},h={y:e(i[2]),M:e(i[3]),d:e(i[4]),h:e(i[5]),m:e(i[6]),s:e(i[7]),w:e(i[8])}):null==h?h={}:"object"==typeof h&&("from"in h||"to"in h)&&(g=w(ya(h.from),ya(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),d=new q(h),ya.isDuration(a)&&f(a,"_locale")&&(d._locale=a._locale),d},ya.version=Ba,ya.defaultFormat=jb,ya.ISO_8601=function(){},ya.momentProperties=Na,ya.updateOffset=function(){},ya.relativeTimeThreshold=function(a,b){return rb[a]===d?!1:b===d?rb[a]:(rb[a]=b,!0)},ya.lang=i("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return ya.locale(a,b)}),ya.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?ya.defineLocale(a,b):ya.localeData(a),c&&(ya.duration._locale=ya._locale=c)),ya._locale._abbr},ya.defineLocale=function(a,b){return null!==b?(b.abbr=a,Ma[a]||(Ma[a]=new o),Ma[a].set(b),ya.locale(a),Ma[a]):(delete Ma[a],null)},ya.langData=i("moment.langData is deprecated. Use moment.localeData instead.",function(a){return ya.localeData(a)}),ya.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ya._locale;if(!z(a)){if(b=O(a))return b;a=[a]}return N(a)},ya.isMoment=function(a){return a instanceof p||null!=a&&f(a,"_isAMomentObject")},ya.isDuration=function(a){return a instanceof q};for(Aa=wb.length-1;Aa>=0;--Aa)E(wb[Aa]);ya.normalizeUnits=function(a){return C(a)},ya.invalid=function(a){var b=ya.utc(NaN);return null!=a?r(b._pf,a):b._pf.userInvalidated=!0,b},ya.parseZone=function(){return ya.apply(null,arguments).parseZone()},ya.parseTwoDigitYear=function(a){return F(a)+(F(a)>68?1900:2e3)},ya.isDate=A,r(ya.fn=p.prototype,{clone:function(){return ya(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ya(this).utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():S(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return L(this)},isDSTShifted:function(){return this._a?this.isValid()&&B(this._a,(this._isUTC?ya.utc(this._a):ya(this._a)).toArray())>0:!1},parsingFlags:function(){return r({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.utcOffset(0,a)},local:function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(a){var b=S(this,a||ya.defaultFormat);return this.localeData().postformat(b)},add:x(1,"add"),subtract:x(-1,"subtract"),diff:function(a,b,c){var d,e,f=P(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=C(b),"year"===b||"month"===b||"quarter"===b?(e=m(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:t(e)},from:function(a,b){return ya.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(ya(),a)},calendar:function(a){var b=a||ya(),c=P(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,ya(b)))},isLeapYear:function(){return J(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ja(a,this.localeData()),this.add(a-b,"d")):b},month:ta("Month",!0),startOf:function(a){switch(a=C(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=C(a),a===d||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ya.isMoment(a)?a:ya(a),+this>+a):(c=ya.isMoment(a)?+a:+ya(a),c<+this.clone().startOf(b))},isBefore:function(a,b){var c;return b=C("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ya.isMoment(a)?a:ya(a),+a>+this):(c=ya.isMoment(a)?+a:+ya(a),+this.clone().endOf(b)<c)},isBetween:function(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)},isSame:function(a,b){var c;return b=C(b||"millisecond"),"millisecond"===b?(a=ya.isMoment(a)?a:ya(a),+this===+a):(c=+ya(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=ya.apply(null,arguments),this>a?this:a}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=ya.apply(null,arguments),a>this?this:a}),zone:i("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),utcOffset:function(a,b){var c,d=this._offset||0;return null!=a?("string"==typeof a&&(a=V(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateUtcOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.add(c,"m"),d!==a&&(!b||this._changeInProgress?y(this,ya.duration(a-d,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ya.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?d:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(V(this._i)),this},hasAlignedHourOffset:function(a){return a=a?ya(a).utcOffset():0,(this.utcOffset()-a)%60===0},daysInMonth:function(){return G(this.year(),this.month())},dayOfYear:function(a){var b=Da((ya(this).startOf("day")-ya(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ma(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ma(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ma(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return H(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return H(this.year(),a.dow,a.doy)},get:function(a){return a=C(a),this[a]()},set:function(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else a=C(a),"function"==typeof this[a]&&this[a](b);return this},locale:function(a){var b;return a===d?this._locale._abbr:(b=ya.localeData(a),null!=b&&(this._locale=b),this)},lang:i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return a===d?this.localeData():this.locale(a)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),ya.fn.millisecond=ya.fn.milliseconds=ta("Milliseconds",!1),ya.fn.second=ya.fn.seconds=ta("Seconds",!1),ya.fn.minute=ya.fn.minutes=ta("Minutes",!1),ya.fn.hour=ya.fn.hours=ta("Hours",!0),ya.fn.date=ta("Date",!0),ya.fn.dates=i("dates accessor is deprecated. Use date instead.",ta("Date",!0)),ya.fn.year=ta("FullYear",!0),ya.fn.years=i("years accessor is deprecated. Use year instead.",ta("FullYear",!0)),ya.fn.days=ya.fn.day,ya.fn.months=ya.fn.month,ya.fn.weeks=ya.fn.week,ya.fn.isoWeeks=ya.fn.isoWeek,ya.fn.quarters=ya.fn.quarter,ya.fn.toJSON=ya.fn.toISOString,ya.fn.isUTC=ya.fn.isUtc,r(ya.duration.fn=q.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=t(d/1e3),g.seconds=a%60,b=t(a/60),g.minutes=b%60,c=t(b/60),g.hours=c%24,e+=t(c/24),h=t(ua(e)),e-=t(va(h)),f+=t(e/30),e%=30,h+=t(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return t(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*F(this._months/12)},humanize:function(a){var b=la(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=ya.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ya.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=C(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=C(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*ua(b),"month"===a?c:c/12;switch(b=this._days+Math.round(va(this._months/12)),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:ya.fn.lang,locale:ya.fn.locale,toIsoString:i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),ya.duration.fn.toString=ya.duration.fn.toISOString;for(Aa in nb)f(nb,Aa)&&wa(Aa.toLowerCase());ya.duration.fn.asMilliseconds=function(){return this.as("ms")},ya.duration.fn.asSeconds=function(){return this.as("s")},ya.duration.fn.asMinutes=function(){return this.as("m")},ya.duration.fn.asHours=function(){return this.as("h")},ya.duration.fn.asDays=function(){return this.as("d")},ya.duration.fn.asWeeks=function(){return this.as("weeks")},ya.duration.fn.asMonths=function(){return this.as("M")},ya.duration.fn.asYears=function(){return this.as("y")},ya.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===F(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Oa?b.exports=ya:"function"==typeof define&&define.amd?(define(function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(Ca.moment=za),ya}),xa(!0)):xa()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],244:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=u(d,f,4);var g=!z(c)&&t.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=v(c,d);for(var e=null!=b&&b.length,f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b){var c=E.length,d=a.constructor,e=t.isFunction(d)&&d.prototype||i,f="constructor";for(t.has(a,f)&&!t.contains(b,f)&&b.push(f);c--;)f=E[c],f in a&&a[f]!==e[f]&&!t.contains(b,f)&&b.push(f)}var f=this,g=f._,h=Array.prototype,i=Object.prototype,j=Function.prototype,k=h.push,l=h.slice,m=i.toString,n=i.hasOwnProperty,o=Array.isArray,p=Object.keys,q=j.bind,r=Object.create,s=function(){},t=function(a){return a instanceof t?a:this instanceof t?void(this._wrapped=a):new t(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=t),c._=t):f._=t,t.VERSION="1.8.2";var u=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},v=function(a,b,c){return null==a?t.identity:t.isFunction(a)?u(a,b,c):t.isObject(a)?t.matcher(a):t.property(a)};t.iteratee=function(a,b){return v(a,b,1/0)};var w=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},x=function(a){if(!t.isObject(a))return{};if(r)return r(a);s.prototype=a;var b=new s;return s.prototype=null,b},y=Math.pow(2,53)-1,z=function(a){var b=a&&a.length;return"number"==typeof b&&b>=0&&y>=b};t.each=t.forEach=function(a,b,c){b=u(b,c);var d,e;if(z(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=t.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},t.map=t.collect=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},t.reduce=t.foldl=t.inject=a(1),t.reduceRight=t.foldr=a(-1),t.find=t.detect=function(a,b,c){var d;return d=z(a)?t.findIndex(a,b,c):t.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},t.filter=t.select=function(a,b,c){var d=[];return b=v(b,c),t.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},t.reject=function(a,b,c){return t.filter(a,t.negate(v(b)),c)},t.every=t.all=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},t.some=t.any=function(a,b,c){b=v(b,c);for(var d=!z(a)&&t.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},t.contains=t.includes=t.include=function(a,b,c){return z(a)||(a=t.values(a)),t.indexOf(a,b,"number"==typeof c&&c)>=0},t.invoke=function(a,b){var c=l.call(arguments,2),d=t.isFunction(b);return t.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},t.pluck=function(a,b){return t.map(a,t.property(b))},t.where=function(a,b){return t.filter(a,t.matcher(b))},t.findWhere=function(a,b){return t.find(a,t.matcher(b))},t.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=z(a)?a:t.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},t.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=z(a)?a:t.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=v(b,c),t.each(a,function(a,c,d){e=b(a,c,d),(g>e||e===1/0&&f===1/0)&&(f=a,g=e)});return f},t.shuffle=function(a){for(var b,c=z(a)?a:t.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=t.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},t.sample=function(a,b,c){return null==b||c?(z(a)||(a=t.values(a)),a[t.random(a.length-1)]):t.shuffle(a).slice(0,Math.max(0,b))},t.sortBy=function(a,b,c){return b=v(b,c),t.pluck(t.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var A=function(a){return function(b,c,d){var e={};return c=v(c,d),t.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};t.groupBy=A(function(a,b,c){t.has(a,c)?a[c].push(b):a[c]=[b]}),t.indexBy=A(function(a,b,c){a[c]=b}),t.countBy=A(function(a,b,c){t.has(a,c)?a[c]++:a[c]=1}),t.toArray=function(a){return a?t.isArray(a)?l.call(a):z(a)?t.map(a,t.identity):t.values(a):[]},t.size=function(a){return null==a?0:z(a)?a.length:t.keys(a).length},t.partition=function(a,b,c){b=v(b,c);var d=[],e=[];return t.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},t.first=t.head=t.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:t.initial(a,a.length-b)},t.initial=function(a,b,c){return l.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},t.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:t.rest(a,Math.max(0,a.length-b))},t.rest=t.tail=t.drop=function(a,b,c){return l.call(a,null==b||c?1:b)},t.compact=function(a){return t.filter(a,t.identity)};var B=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=a&&a.length;h>g;g++){var i=a[g];if(z(i)&&(t.isArray(i)||t.isArguments(i))){b||(i=B(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};t.flatten=function(a,b){return B(a,b,!1)},t.without=function(a){return t.difference(a,l.call(arguments,1))},t.uniq=t.unique=function(a,b,c,d){if(null==a)return[];t.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=v(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?t.contains(f,j)||(f.push(j),e.push(i)):t.contains(e,i)||e.push(i)}return e},t.union=function(){return t.uniq(B(arguments,!0,!0))},t.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!t.contains(b,f)){for(var g=1;c>g&&t.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},t.difference=function(a){var b=B(arguments,!0,!0,1);return t.filter(a,function(a){return!t.contains(b,a)})},t.zip=function(){return t.unzip(arguments)},t.unzip=function(a){for(var b=a&&t.max(a,"length").length||0,c=Array(b),d=0;b>d;d++)c[d]=t.pluck(a,d);return c},t.object=function(a,b){for(var c={},d=0,e=a&&a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},t.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else if(c&&e)return d=t.sortedIndex(a,b),a[d]===b?d:-1;if(b!==b)return t.findIndex(l.call(a,d),t.isNaN);for(;e>d;d++)if(a[d]===b)return d;return-1},t.lastIndexOf=function(a,b,c){var d=a?a.length:0;if("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1)),b!==b)return t.findLastIndex(l.call(a,0,d),t.isNaN);for(;--d>=0;)if(a[d]===b)return d;return-1},t.findIndex=d(1),t.findLastIndex=d(-1),t.sortedIndex=function(a,b,c,d){c=v(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},t.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var C=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=x(a.prototype),g=a.apply(f,e);return t.isObject(g)?g:f};t.bind=function(a,b){if(q&&a.bind===q)return q.apply(a,l.call(arguments,1));if(!t.isFunction(a))throw new TypeError("Bind must be called on a function");var c=l.call(arguments,2),d=function(){return C(a,d,b,this,c.concat(l.call(arguments)))};return d},t.partial=function(a){var b=l.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===t?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return C(a,c,this,this,f)};return c},t.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],
a[c]=t.bind(a[c],a);return a},t.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return t.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},t.delay=function(a,b){var c=l.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},t.defer=t.partial(t.delay,t,1),t.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:t.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=t.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},t.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=t.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=t.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},t.wrap=function(a,b){return t.partial(b,a)},t.negate=function(a){return function(){return!a.apply(this,arguments)}},t.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},t.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},t.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},t.once=t.partial(t.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];t.keys=function(a){if(!t.isObject(a))return[];if(p)return p(a);var b=[];for(var c in a)t.has(a,c)&&b.push(c);return D&&e(a,b),b},t.allKeys=function(a){if(!t.isObject(a))return[];var b=[];for(var c in a)b.push(c);return D&&e(a,b),b},t.values=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},t.mapObject=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},t.pairs=function(a){for(var b=t.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},t.invert=function(a){for(var b={},c=t.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},t.functions=t.methods=function(a){var b=[];for(var c in a)t.isFunction(a[c])&&b.push(c);return b.sort()},t.extend=w(t.allKeys),t.extendOwn=t.assign=w(t.keys),t.findKey=function(a,b,c){b=v(b,c);for(var d,e=t.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},t.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;t.isFunction(b)?(e=t.allKeys(g),d=u(b,c)):(e=B(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},t.omit=function(a,b,c){if(t.isFunction(b))b=t.negate(b);else{var d=t.map(B(arguments,!1,!1,1),String);b=function(a,b){return!t.contains(d,b)}}return t.pick(a,b,c)},t.defaults=w(t.allKeys,!0),t.clone=function(a){return t.isObject(a)?t.isArray(a)?a.slice():t.extend({},a):a},t.tap=function(a,b){return b(a),a},t.isMatch=function(a,b){var c=t.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof t&&(a=a._wrapped),b instanceof t&&(b=b._wrapped);var e=m.call(a);if(e!==m.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(t.isFunction(g)&&g instanceof g&&t.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!F(a[i],b[i],c,d))return!1}else{var j,k=t.keys(a);if(i=k.length,t.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!t.has(b,j)||!F(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};t.isEqual=function(a,b){return F(a,b)},t.isEmpty=function(a){return null==a?!0:z(a)&&(t.isArray(a)||t.isString(a)||t.isArguments(a))?0===a.length:0===t.keys(a).length},t.isElement=function(a){return!(!a||1!==a.nodeType)},t.isArray=o||function(a){return"[object Array]"===m.call(a)},t.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},t.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){t["is"+a]=function(b){return m.call(b)==="[object "+a+"]"}}),t.isArguments(arguments)||(t.isArguments=function(a){return t.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(t.isFunction=function(a){return"function"==typeof a||!1}),t.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},t.isNaN=function(a){return t.isNumber(a)&&a!==+a},t.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===m.call(a)},t.isNull=function(a){return null===a},t.isUndefined=function(a){return void 0===a},t.has=function(a,b){return null!=a&&n.call(a,b)},t.noConflict=function(){return f._=g,this},t.identity=function(a){return a},t.constant=function(a){return function(){return a}},t.noop=function(){},t.property=function(a){return function(b){return null==b?void 0:b[a]}},t.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},t.matcher=t.matches=function(a){return a=t.extendOwn({},a),function(b){return t.isMatch(b,a)}},t.times=function(a,b,c){var d=Array(Math.max(0,a));b=u(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},t.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},t.now=Date.now||function(){return(new Date).getTime()};var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=t.invert(G),I=function(a){var b=function(b){return a[b]},c="(?:"+t.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};t.escape=I(G),t.unescape=I(H),t.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),t.isFunction(d)?d.call(a):d};var J=0;t.uniqueId=function(a){var b=++J+"";return a?a+b:b},t.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\u2028|\u2029/g,N=function(a){return"\\"+L[a]};t.template=function(a,b,c){!b&&c&&(b=c),b=t.defaults({},b,t.templateSettings);var d=RegExp([(b.escape||K).source,(b.interpolate||K).source,(b.evaluate||K).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(M,N),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,t)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},t.chain=function(a){var b=t(a);return b._chain=!0,b};var O=function(a,b){return a._chain?t(b).chain():b};t.mixin=function(a){t.each(t.functions(a),function(b){var c=t[b]=a[b];t.prototype[b]=function(){var a=[this._wrapped];return k.apply(a,arguments),O(this,c.apply(t,a))}})},t.mixin(t),t.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=h[a];t.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],O(this,c)}}),t.each(["concat","join","slice"],function(a){var b=h[a];t.prototype[a]=function(){return O(this,b.apply(this._wrapped,arguments))}}),t.prototype.value=function(){return this._wrapped},t.prototype.valueOf=t.prototype.toJSON=t.prototype.value,t.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return t})}).call(this)},{}],245:[function(a,b,c){!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof b&&"object"==typeof b.exports?b.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(v.Normalizations.registered[G]?g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]("extract",null,I[1]):g(y).rootPropertyValueCache[G]=I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),
p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;e!==f-1?i.complete=i.begin=null:i.complete=function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})},{}]},{},[54]);